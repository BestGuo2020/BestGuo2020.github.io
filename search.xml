<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹ä»£ç†è®¾è®¡æ¨¡å¼</title>
      <link href="/journal/design-pattern-proxy/"/>
      <url>/journal/design-pattern-proxy/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä½•ä¸ºä»£ç†è®¾è®¡æ¨¡å¼"><a href="#ä½•ä¸ºä»£ç†è®¾è®¡æ¨¡å¼" class="headerlink" title="ä½•ä¸ºä»£ç†è®¾è®¡æ¨¡å¼"></a>ä½•ä¸ºä»£ç†è®¾è®¡æ¨¡å¼</h2><p>ä»£ç†è®¾è®¡æ¨¡å¼å°±æ˜¯æä¾›ä¸€ä¸ª<strong>æ›¿èº«</strong>ï¼ˆä»£ç†è€…ï¼‰æˆ–è€…å ä½ç¬¦æ¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚ <strong>ä½¿ç”¨ä»£ç†æ¨¡å¼åˆ›å»ºä»£è¡¨å¯¹è±¡ã€‚ä»£è¡¨å¯¹è±¡æ§åˆ¶è¿™å¦ä¸€ä¸ªå¯¹è±¡çš„è®¿é—®ï¼Œè¢«ä»£è¡¨çš„å¯¹è±¡å¯ä»¥æ˜¯è¿œç¨‹çš„å¯¹è±¡ã€åˆ›å»ºå¼€é”€å¤§çš„å¯¹è±¡æˆ–éœ€è¦å®‰å…¨æ§åˆ¶çš„å¯¹è±¡ã€‚</strong></p><p>ä»£ç†æ¨¡å¼çš„ç±»å›¾å¦‚ä¸‹ã€‚</p><p><img src="/journal/design-pattern-proxy/b63f6573ac2a4b93895677711978328f.png" loading="lazy"></p><p>ä»£ç†æ¨¡å¼æ˜¯åœ¨ç”Ÿæ´»ä¸­ç‰¹åˆ«å¸¸è§ï¼Œæ¯”å¦‚ç©çš„è·‘è·‘å¡ä¸è½¦å›½æœç‰ˆæœ¬æ˜¯ç”±ä¸–çºªå¤©æˆå…¬å¸ä»£ç†çš„ï¼Œä¸–çºªå¤©æˆå¯ä»¥åœ¨åŸæœ‰è·‘è·‘å¡ä¸è½¦çš„åŸºç¡€ä¸Šæ–°åŠ ä¸€äº›å±äºè‡ªå·±çš„åŠŸèƒ½ï¼Œæ¯”å¦‚æœªæˆå¹´äººæ¸¸æˆæ—¶é•¿é™åˆ¶æ§åˆ¶ã€æ¸¸æˆå†…éƒ¨çš„å¹¿å‘Šç‰Œæ‰“å¹¿å‘Šã€è¿˜æœ‰æ¸¸æˆä¸­çš„é»˜è®¤è½¦ç‰Œéƒ½æ˜¾ç¤ºâ€œä¸–çºªå¤©æˆâ€å­—æ ·ç­‰ç­‰ã€‚</p><h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>æˆ‘ä»¬å°±ä»¥è·‘è·‘å¡ä¸è½¦å›½æœæ¸¸æˆçš„ä¾‹å­æ¥ä¸¾ä¾‹ï¼ŒåŒæ—¶ç»“åˆ JDK è‡ªå¸¦çš„åŠ¨æ€ä»£ç†ã€‚JDK è‡ªå¸¦çš„åŠ¨æ€ä»£ç†å¿…é¡»è¦ä¸€ä¸ªæ¥å£å’Œå®ç°éœ€è¦ä»£ç†çš„ç±»ï¼Œéœ€è¦é¦–å…ˆè¦ä¸€ä¸ª KartRider æ¥å£ï¼Œä¹Ÿå°±æ˜¯åŸå§‹çš„éŸ©æœè·‘è·‘å¡ä¸è½¦ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">KartRider</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">void</span> <span class="token function">setAd</span><span class="token punctuation">(</span><span class="token class-name">String</span> ad<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">setCarId</span><span class="token punctuation">(</span><span class="token class-name">String</span> carId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ä¸–çºªå¤©æˆä»£ç†çš„è·‘è·‘å¡ä¸è½¦å›½æœï¼Œâ€œè·‘è·‘å¡ä¸è½¦å›½æœâ€å°±æ˜¯éœ€è¦ä»£ç†çš„ç±»ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ChineseKartRider</span> <span class="token keyword">implements</span> <span class="token class-name">KartRider</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> ad<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> carId<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAd</span><span class="token punctuation">(</span><span class="token class-name">String</span> ad<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>ad <span class="token operator">=</span> ad<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCarId</span><span class="token punctuation">(</span><span class="token class-name">String</span> carId<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>carId <span class="token operator">=</span> carId<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ¸¸æˆå·²å¯åŠ¨!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> age<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> age<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"ChineseKartRider&#123;"</span> <span class="token operator">+</span>                <span class="token string">"ad='"</span> <span class="token operator">+</span> ad <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">", carId='"</span> <span class="token operator">+</span> carId <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">", age="</span> <span class="token operator">+</span> age <span class="token operator">+</span>                <span class="token string">'&#125;'</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>åˆ›å»ºä¸€ä¸ªä»£ç†ç±»ï¼ˆâ€œä¹Ÿå°±æ˜¯ä¸–çºªå¤©æˆäº†â€ï¼‰å¹¶å®ç° InvocationHandler æ¥å£ï¼Œå…¶ä¸­ Invoke æ–¹æ³•å°±æ˜¯ç”¨äºæ§åˆ¶åˆ›å»ºçš„ ChineseKartRider å¯¹è±¡å®ä¾‹çš„æ–¹æ³•è®¿é—®ï¼Œå®ç°æœªæˆå¹´äººæ¸¸æˆæ—¶é•¿é™åˆ¶æ§åˆ¶ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationHandler</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationTargetException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDateTime</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TianCityInvocationHandler</span> <span class="token keyword">implements</span> <span class="token class-name">InvocationHandler</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">KartRider</span> kartRider<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">TianCityInvocationHandler</span><span class="token punctuation">(</span><span class="token class-name">KartRider</span> kartRider<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>kartRider <span class="token operator">=</span> kartRider<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     *     * @param proxy è°ƒç”¨è¯¥æ–¹æ³•çš„ä»£ç†å®ä¾‹     *     * @param method è°ƒç”¨å…¶ getName æ–¹æ³•å°±çŸ¥é“æ˜¯å“ªä¸ªæ–¹æ³•ååœ¨ä½¿ç”¨     *     * @param args è°ƒç”¨çš„æ–¹æ³•çš„å‚æ•°ä¸ªæ•°     *     * @return     * @throws Throwable     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalAccessException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">LocalDateTime</span> date <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> week <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getDayOfWeek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> hour <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getHour</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"play"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">ChineseKartRider</span> p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ChineseKartRider</span><span class="token punctuation">)</span> kartRider<span class="token punctuation">;</span>                <span class="token keyword">boolean</span> req1 <span class="token operator">=</span> week <span class="token operator">==</span> <span class="token number">5</span> <span class="token operator">||</span> week <span class="token operator">==</span> <span class="token number">6</span> <span class="token operator">||</span> week <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// æœªæˆå¹´äººåªèƒ½åœ¨è¿™ä¸‰å¤©ç©æ¸¸æˆ</span>                <span class="token keyword">boolean</span> req2 <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> p<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">18</span><span class="token punctuation">;</span> <span class="token comment">// å¹´é¾„è§„åˆ™</span>                <span class="token keyword">boolean</span> req3 <span class="token operator">=</span> hour <span class="token operator">==</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// 1å°æ—¶æ—¶é•¿é™åˆ¶</span>                <span class="token comment">// æœªæˆå¹´é™åˆ¶</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>req1 <span class="token operator">&amp;&amp;</span> req2 <span class="token operator">&amp;&amp;</span> req3<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>kartRider<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token comment">// å¹´é¾„è¿‡ 18 å²ä¸å—æ­¤é™åˆ¶</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>req2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>kartRider<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalAccessException</span><span class="token punctuation">(</span><span class="token string">"é€šçŸ¥è¦æ±‚ï¼Œä¸¥æ ¼é™åˆ¶å‘æœªæˆå¹´äººæä¾›ç½‘ç»œæ¸¸æˆæœåŠ¡çš„æ—¶é—´ï¼Œ æ‰€æœ‰ç½‘ç»œæ¸¸æˆä¼ä¸šä»…å¯åœ¨å‘¨äº”ã€å‘¨å…­ã€å‘¨æ—¥å’Œæ³•å®šèŠ‚å‡æ—¥æ¯æ—¥20æ—¶è‡³21æ—¶å‘æœªæˆå¹´äººæä¾›1å°æ—¶æœåŠ¡ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"set"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>kartRider<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InvocationTargetException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œç±»ï¼ˆ18å²ä»¥ä¸Šä¸å—é™åˆ¶ï¼Œ18å²ä»¥ä¸‹åœ¨è§„å®šçš„æ—¶é—´å°±ä¼šæç¤ºï¼‰ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">KartRider</span> proxy <span class="token operator">=</span> <span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        proxy<span class="token punctuation">.</span><span class="token function">setAd</span><span class="token punctuation">(</span><span class="token string">"è·‘è·‘å¡ä¸è½¦ - çªç ´"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        proxy<span class="token punctuation">.</span><span class="token function">setCarId</span><span class="token punctuation">(</span><span class="token string">"ä¸–çºªå¤©æˆ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        proxy<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">KartRider</span> <span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ChineseKartRider</span> kartRider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ChineseKartRider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        kartRider<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">KartRider</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>                kartRider<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                kartRider<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">new</span> <span class="token class-name">TianCityInvocationHandler</span><span class="token punctuation">(</span>kartRider<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œç»“æœï¼ˆ18å²ä¸å—é™åˆ¶ï¼‰ï¼š</p><pre class="language-none"><code class="language-none">ChineseKartRider&#123;ad&#x3D;&#39;è·‘è·‘å¡ä¸è½¦ - çªç ´&#39;, carId&#x3D;&#39;ä¸–çºªå¤©æˆ&#39;, age&#x3D;18&#125;æ¸¸æˆå·²å¯åŠ¨!</code></pre><p>æŠŠå¹´é¾„è®¾ç½®ä¸º 10 å²ï¼ŒæŠ›å‡ºäº†å¼‚å¸¸ã€‚</p><pre class="language-none"><code class="language-none">Exception in thread &quot;main&quot; java.lang.reflect.UndeclaredThrowableExceptionat com.sun.proxy.$Proxy0.play(Unknown Source)at com.example.demo_springboot.designpattern.proxy.ProxyTest.main(ProxyTest.java:11)Caused by: java.lang.IllegalAccessException: é€šçŸ¥è¦æ±‚ï¼Œä¸¥æ ¼é™åˆ¶å‘æœªæˆå¹´äººæä¾›ç½‘ç»œæ¸¸æˆæœåŠ¡çš„æ—¶é—´ï¼Œ æ‰€æœ‰ç½‘ç»œæ¸¸æˆä¼ä¸šä»…å¯åœ¨å‘¨äº”ã€å‘¨å…­ã€å‘¨æ—¥å’Œæ³•å®šèŠ‚å‡æ—¥æ¯æ—¥20æ—¶è‡³21æ—¶å‘æœªæˆå¹´äººæä¾›1å°æ—¶æœåŠ¡ï¼at com.example.demo_springboot.designpattern.proxy.ChineseInvocationHandler.invoke(ChineseInvocationHandler.java:51)... 2 more</code></pre><h2 id="éšå¤„å¯è§çš„ä»£ç†æ¨¡å¼"><a href="#éšå¤„å¯è§çš„ä»£ç†æ¨¡å¼" class="headerlink" title="éšå¤„å¯è§çš„ä»£ç†æ¨¡å¼"></a>éšå¤„å¯è§çš„ä»£ç†æ¨¡å¼</h2><p>é™¤äº†æœ¬ä¾‹ï¼ŒJava RMIã€Spring AOPã€Spring Transaction Manager ç­‰ç­‰ä¹Ÿæ¶‰åŠåˆ°ä»£ç†è®¾è®¡æ¨¡å¼ï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹çš„æœ¬è´¨å°±æ˜¯ä»£ç†æ¨¡å¼ã€‚</p><p>å¹¶ä¸”çŸ¥é“ä»£ç†æ¨¡å¼ä¹‹åï¼Œä¹Ÿå°±æ˜ç™½ä¸ºä»€ä¹ˆåœ¨è¢«ä»£ç†çš„å¯¹è±¡ï¼ˆChineseKartRiderï¼‰å†…éƒ¨è°ƒç”¨æ–¹æ³•æ—¶ä¸å—æ§åˆ¶ï¼Œè‹¥ä¸ç¡®å®šè¯¥å¯¹è±¡æ˜¯è¢«ä»£ç†è¿‡çš„ï¼Œå¯ä»¥é€šè¿‡ <code>Proxy.isProxyClass()</code> æ–¹æ³•æ¥åˆ¤æ–­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> 23 ç§è®¾è®¡æ¨¡å¼ </category>
          
          <category> ç»“æ„å‹è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨æ·±åœ³çš„ä¸€ä¸ªæœˆ</title>
      <link href="/journal/a-month-in-shenzhen/"/>
      <url>/journal/a-month-in-shenzhen/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>2023 å¹´ 2 æœˆ 8 æ—¥ 22 ç‚¹ 30 åˆ†ï¼Œåç€å°å§å¤«çš„è½¦æ¥åˆ°æ·±åœ³åªå±±ï¼Œç›®å‰æš‚ä½åœ¨å¤§å§å®¶ï¼Œè‡³ä»Šä¹Ÿå¿«ä¸€ä¸ªæœˆäº†ã€‚</p><span id="more"></span><p>ç›´åˆ°ç°åœ¨ï¼Œè¿˜æ²¡æœ‰æ¥æ”¶åˆ°ä»»ä½•ä¸€å®¶å…¬å¸çš„é¢è¯•é‚€è¯·ï¼ˆå’Œæˆ‘æƒ³è±¡ä¸­çš„åŒºåˆ«å¤ªå¤§äº†ï¼Œæ€ä¹ˆä¼šè¿™æ ·ï¼‰ï¼Œä½†æ˜¯åœ¨æ‰¾å·¥ä½œå¿ƒæ€æ–¹é¢ä¹Ÿå¼€å§‹æœ‰äº†ä¸€äº›å˜åŒ–ï¼Œç”šè‡³å­¦ä¼šäº†ä¸€äº›ç”Ÿæ´»å°å¦™æ‹›ã€‚ä¹‹å‰æœ‰æ®µæ—¶é—´ç‰¹åˆ«ç„¦è™‘ã€å¤±çœ ã€å™©æ¢¦ã€æ‹…å¿ƒã€æ€¥åˆ‡ï¼Œç°åœ¨æ”¾å¹³å¿ƒæ€æ…¢æ…¢æ¥ï¼Œè¯¥æ€ä¹ˆæ ·å°±æ€ä¹ˆæ ·ã€‚å…‰ç„¦è™‘æ²¡æœ‰ä»»ä½•ç”¨å¤„ï¼Œæ—¢æµªè´¹æ—¶é—´åˆæä¹±å¿ƒæ€ï¼Œä¸€ç‚¹ç”¨éƒ½æ²¡æœ‰ã€‚å¤§å§å¤«æ¨èçš„ä¹¦è¿˜æ˜¯è¦åšæŒä¸‹å»çœ‹ï¼Œé¢è¯•é¢˜ä¹Ÿè¦ç»§ç»­åšæŒå¤šçœ‹å¤šèƒŒå¤šåˆ·ã€‚</p><p><img src="/journal/a-month-in-shenzhen/IMG_20230308_122501.jpg" alt="IMG_20230308_122501" loading="lazy"></p><p>åœ¨å„å¤§æ‹›è˜è½¯ä»¶ä¸ŠæŠ•æ—¶ï¼Œæœ‰åé¦ˆçš„å¾ˆå°‘ï¼Œè¦ä¹ˆå·²è¯»ä¸å›ï¼Œè¦ä¹ˆæ”¶åˆ°äº†ç®€å†å°±å†ä¹Ÿæ²¡ä¸‹æ–‡äº†ã€‚ä¹‹åè¿˜ä¼šç»§ç»­åœ¨å„å¤§å¹³å°ç»§ç»­å¹¿æ’’ç½‘ï¼Œå®åœ¨ä¸è¡Œå°±æ‰¾å§å¤«æˆ–è€…è€çˆ¸çœ‹çœ‹æœ‰ä»€ä¹ˆå†…æ¨æœºä¼šå§ã€‚</p><p>æœ€åèŠèŠç”Ÿæ´»ä¸Šï¼Œå¤§å§å¯¹æˆ‘å¾ˆå¥½ï¼Œæœ‰ä½çš„åœ°æ–¹æ„Ÿè§‰å·²ç»éå¸¸ä¸é”™äº†ã€‚ä»–ä»¬ä¸€å®¶äººå‘¨ä¸€åˆ°å‘¨äº”éƒ½ä¸åœ¨å®¶ï¼Œåˆé¥­éƒ½æ˜¯æˆ‘è‡ªå·±åšï¼Œå¶å°”è‡ªå·±å»ä¹°ä¹°è‡ªå·±å–œæ¬¢åƒçš„èœã€‚æ¯å¤©æ—©ä¸Šå’Œä¸‹åˆå¤§èªæ˜éƒ½ç”±æˆ‘æ¥æ¥é€ï¼Œå¤§å§ä¸‹ç­å›å®¶æˆ‘éƒ½ä¼šå¸®å¿™æ´—èœã€åˆ‡èœã€ç‚’èœç­‰ï¼Œé¥­åæ´—ç¢—ã€æ‰”åƒåœ¾ï¼Œéœ€è¦å¸®å¿™çš„æˆ‘éƒ½ä¼šåšï¼Œè‡ªå·±å¾ˆå¬è¯ã€‚æœ‰æ—¶å€™ä¹Ÿæœ‰æŠŠäº‹æƒ…æé”™æˆ–è€…æå¿˜ğŸ˜¢ï¼Œä¼šè™šå¿ƒæ¥å—å¤§å§çš„æ‰¹è¯„ã€‚å‘¨å…­æ—¥æˆ–è€…é€å®Œå¤§èªæ˜å»å…¬å›­é”»ç‚¼é”»ç‚¼ï¼ŒæŒºå¥½ã€‚ä¸Šä¸ªæœˆè‡ªå·±åœ¨åä¸ºé’±åŒ…é‡Œå…è´¹å¼„äº†ä¸ªæ·±åœ³é€šï¼Œåœ°é“9.5æŠ˜ï¼Œè¯•ç€åšäº†ä¸€ä¸‹åœ°é“14å·çº¿ï¼ˆåªå±±å¹¿åœº-å‘æ¢“ï¼‰ï¼Œç¡®å®æŒºä¸é”™çš„ã€‚</p><p>æœ€åçš„æœ€åï¼Œè¿˜æ˜¯å¯¹è‡ªå·±è¯´ï¼šè™½ç„¶æ‰¾å·¥ä½œæœŸé—´ç¡®å®æ¯”è¾ƒç…ç†¬ç—›è‹¦ï¼Œä½†ä¹Ÿè¦å……å®è‡ªæˆ‘ï¼Œè’åºŸå¯å°±å±é™©äº†ï¼é€‚åˆè‡ªå·±çš„å·¥ä½œæ€»èƒ½æ‰¾åˆ°çš„ã€‚</p><p><img src="/journal/a-month-in-shenzhen/IMG_20230307_192729.jpg" alt="IMG_20230307_192729.jpg" loading="lazy"> </p><p>2023 å¹´ 3 æœˆ 9 æ—¥ 16 æ—¶ 42 åˆ†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å°èµ«èµ«çš„æ—¥å¸¸ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ—¥å¸¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹è£…é¥°å™¨æ¨¡å¼</title>
      <link href="/journal/design-pattern-decorator/"/>
      <url>/journal/design-pattern-decorator/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä½•ä¸ºè£…é¥°å™¨æ¨¡å¼"><a href="#ä½•ä¸ºè£…é¥°å™¨æ¨¡å¼" class="headerlink" title="ä½•ä¸ºè£…é¥°å™¨æ¨¡å¼"></a>ä½•ä¸ºè£…é¥°å™¨æ¨¡å¼</h2><p>è£…é¥°å™¨æ¨¡å¼<strong>åŠ¨æ€åœ°</strong>ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œè£…é¥°å™¨æ¨¡å¼ç›¸æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ï¼ŒåŒæ—¶åˆä¸ä¼šæ”¹å˜å…¶ç»“æ„ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼Œå®ƒæ˜¯ä½œä¸ºç°æœ‰çš„ç±»çš„ä¸€ä¸ªåŒ…è£…ã€‚</p><p>è£…é¥°è®¾è®¡æ¨¡å¼å¯ä»£æ›¿ç»§æ‰¿ã€‚</p><p><img src="/journal/design-pattern-decorator/v2-c9f694b243f901a2bae58d54e2353b95_r.png" alt="è£…é¥°æ¨¡å¼ç±»å›¾" loading="lazy"></p><span id="more"></span><h2 id="ç”Ÿæ´»ä¸­çš„è£…é¥°å™¨æ¨¡å¼"><a href="#ç”Ÿæ´»ä¸­çš„è£…é¥°å™¨æ¨¡å¼" class="headerlink" title="ç”Ÿæ´»ä¸­çš„è£…é¥°å™¨æ¨¡å¼"></a>ç”Ÿæ´»ä¸­çš„è£…é¥°å™¨æ¨¡å¼</h2><p>1ã€ä¸€å¹…ç”»æœ‰æ²¡æœ‰ç”»æ¡†éƒ½å¯ä»¥æŒ‚åœ¨å¢™ä¸Šï¼Œä½†æ˜¯é€šå¸¸éƒ½æ˜¯æœ‰ç”»æ¡†çš„ï¼Œå¹¶ä¸”å®é™…ä¸Šæ˜¯ç”»æ¡†è¢«æŒ‚åœ¨å¢™ä¸Šã€‚åœ¨æŒ‚åœ¨å¢™ä¸Šä¹‹å‰ï¼Œç”»å¯ä»¥è¢«è’™ä¸Šç»ç’ƒï¼Œè£…åˆ°æ¡†å­é‡Œï¼›è¿™æ—¶ç”»ã€ç»ç’ƒå’Œç”»æ¡†å½¢æˆäº†ä¸€ä¸ªç‰©ä½“ã€‚</p><p>2ã€æˆå‰§æ¼”å‘˜éœ€è¦ä¸Šå°æ¼”æˆï¼Œå› æ­¤éœ€è¦åŒ–å¦†ï¼Œæ¯”å¦‚â€œåŒ–åº•è‰²â€ã€â€œæ‹è…®çº¢â€ã€â€œæ¶‚èƒ­è„‚â€ç­‰ç­‰ï¼Œæ¼”å‘˜è¿˜æ˜¯é‚£ä½æ¼”å‘˜ï¼Œä½†å…¶å®åªæ˜¯ç”»äº†ä¸€ä¸ªå¦†å˜äº†æ ·å­ã€‚</p><p>3ã€åœ¨ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹ä¸­ï¼Œä¸¾ä¾‹äº†å’–å•¡çš„ä¾‹å­ï¼Œå’–å•¡ä¸­æœ‰â€œæ‘©å¡â€ã€â€œè±†å¥¶â€ã€â€œæ‹¿é“â€ã€â€œå¥¶æ³¡â€ï¼Œæ¯ä¸€ä»½é…æ–™éƒ½æœ‰å¯¹åº”çš„åŠ ä¸ªï¼Œç„¶ååˆ†åˆ«è®¡ç®—å‡ºæ¥å¾—å‡ºè€é¥¿å’–å•¡çš„æ€»ä»·æ ¼ã€‚</p><h2 id="ä»£ç ä¸¾ä¾‹"><a href="#ä»£ç ä¸¾ä¾‹" class="headerlink" title="ä»£ç ä¸¾ä¾‹"></a>ä»£ç ä¸¾ä¾‹</h2><p>æ¥ä¸‹æ¥å°±ä»¥ä¸€å¹…ç”»åšä¸ºä¾‹å­ï¼Œé¦–å…ˆéœ€è¦ä¸€ä¸ªæ¥å£ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">interface</span> <span class="token class-name">Paint</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>å®ç°è¯¥æ¥å£ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">TreePaint</span> <span class="token keyword">implements</span> <span class="token class-name">Plant</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¸€æ£µæ²¹ç”»æ ‘"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>éœ€è¦ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ç° Paint æ¥å£</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">PaintDecorator</span> <span class="token keyword">implements</span> <span class="token class-name">Paint</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">protected</span> <span class="token class-name">Paint</span> decoratedPaint<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">PaintDecorator</span><span class="token punctuation">(</span><span class="token class-name">Paint</span> decoratedPaint<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>decoratedPaint <span class="token operator">=</span> decoratedPaint<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      decoratedShape<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span></code></pre><p>åˆ›å»ºç¬¬ä¸€ä¸ªå…·ä½“çš„è£…é¥°ç±»ï¼Œç»™è¿™å¹…ç”»åŠ ä¸Šè¾¹æ¡†ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">BorderPaintDecorator</span> <span class="token keyword">extends</span> <span class="token class-name">PaintDecorator</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token class-name">BorderPaintDecorator</span><span class="token punctuation">(</span><span class="token class-name">Paint</span> decoratedPaint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">super</span><span class="token punctuation">(</span>decoratedPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      decoratedPaint<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token function">setBorder</span><span class="token punctuation">(</span>decoratedShape<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">setBorder</span><span class="token punctuation">(</span><span class="token class-name">Paint</span> decoratedPaint<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœ¨è´¨è¾¹æ¡†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>åˆ›å»ºç¬¬äºŒä¸ªå…·ä½“çš„è£…é¥°ç±»ï¼Œåœ¨è¾¹æ¡†ä¸ŠåŠ ä¸ªç»³å­ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">SlingPaintDecorator</span> <span class="token keyword">extends</span> <span class="token class-name">PaintDecorator</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token class-name">SlingPaintDecorator</span><span class="token punctuation">(</span><span class="token class-name">Paint</span> decoratorPaint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>decoratorPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        decoratorPaint<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setBorder</span><span class="token punctuation">(</span>decoratorPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">setBorder</span><span class="token punctuation">(</span><span class="token class-name">Paint</span> decoratedPaint<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>decoratedPaint <span class="token operator">+</span> <span class="token string">"ï¼šå¸¦åŠç»³"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œä¸€ä¸‹ï¼ˆè£…é¥°ç±»å¯ä»¥è¢«å¦ä¸€ä¸ªè£…é¥°ç±»ç»™è£…é¥°ï¼‰ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDecorator</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">TreePaint</span> treePaint <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreePaint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">PaintDecorator</span> paintDecorator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BorderPaintDecorator</span><span class="token punctuation">(</span>treePaint<span class="token punctuation">)</span><span class="token punctuation">;</span>        paintDecorator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SlingPaintDecorator</span><span class="token punctuation">(</span>paintDecorator<span class="token punctuation">)</span><span class="token punctuation">;</span>        paintDecorator<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹</p><pre class="language-none"><code class="language-none">ä¸€é¢—æ²¹ç”»æ ‘com.example.demo_springboot.decorator.TreePaint@4157f54eï¼šæœ¨è´¨è¾¹æ¡†com.example.demo_springboot.decorator.BorderPaintDecorator@90f6bfdï¼šå¸¦åŠç»³</code></pre><h2 id="Java-ä¸­çš„è£…é¥°å™¨æ¨¡å¼"><a href="#Java-ä¸­çš„è£…é¥°å™¨æ¨¡å¼" class="headerlink" title="Java ä¸­çš„è£…é¥°å™¨æ¨¡å¼"></a>Java ä¸­çš„è£…é¥°å™¨æ¨¡å¼</h2><p>Java ä¸­å‡ºç°è£…é¥°å™¨æ¨¡å¼ä¸»è¦æ˜¯åœ¨ IO åŒ…ä¸‹ï¼Œæ¯”å¦‚å„ç§ç¼“å†²ç±» BufferReader ã€BufferWriter ã€ BufferInpuStream ã€ BufferOutputStream ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> 23 ç§è®¾è®¡æ¨¡å¼ </category>
          
          <category> ç»“æ„å‹è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹å·¥å‚æ¨¡å¼</title>
      <link href="/journal/design-pattern-factory/"/>
      <url>/journal/design-pattern-factory/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ç”Ÿæ´»ä¸­çš„å·¥å‚æ¨¡å¼"><a href="#ç”Ÿæ´»ä¸­çš„å·¥å‚æ¨¡å¼" class="headerlink" title="ç”Ÿæ´»ä¸­çš„å·¥å‚æ¨¡å¼"></a>ç”Ÿæ´»ä¸­çš„å·¥å‚æ¨¡å¼</h2><p>1ã€æ‚¨éœ€è¦ä¸€è¾†æ±½è½¦ï¼Œå¯ä»¥ç›´æ¥ä»å·¥å‚é‡Œé¢æè´§ï¼Œè€Œä¸ç”¨å»ç®¡è¿™è¾†æ±½è½¦æ˜¯æ€ä¹ˆåšå‡ºæ¥çš„ï¼Œä»¥åŠè¿™ä¸ªæ±½è½¦é‡Œé¢çš„å…·ä½“å®ç°ã€‚</p><p>2ã€ç©å…·åº—é‡Œéœ€è¦ä¸€äº›å¦å…‹ç©å…·ï¼Œå°±éœ€è¦ä»ç©å…·å‚å•†é‚£è¾¹è¿›è´§ï¼Œä¸éœ€è¦çŸ¥é“è¿™äº›å¦å…‹ç©å…·çš„åˆ¶é€ è¿‡ç¨‹ã€‚</p><h2 id="å·¥å‚æ–¹æ³•æ¨¡å¼"><a href="#å·¥å‚æ–¹æ³•æ¨¡å¼" class="headerlink" title="å·¥å‚æ–¹æ³•æ¨¡å¼"></a>å·¥å‚æ–¹æ³•æ¨¡å¼</h2><p><strong>å·¥å‚æ–¹æ³•æ¨¡å¼</strong>å®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼ˆåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼‰ï¼Œä½†æ˜¯ç”±å­ç±»å†³å®šè¦å®ä¾‹åŒ–å“ªä¸ªç±»ã€‚å·¥å‚æ–¹æ³•è®©<strong>ç±»æŠŠå®ä¾‹åŒ–æ¨è¿Ÿåˆ°å­ç±»</strong>ã€‚</p><p>å·¥å‚æ–¹æ³•æ¨¡å¼çš„ç±»å›¾å¦‚ä¸‹ã€‚ï¼ˆä¸‹å›¾æ¥è‡ªäºã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹ï¼‰</p><p><img src="/journal/design-pattern-factory/57a388f80001feec07690453.jpg" alt="å·¥å‚æ–¹æ³•æ¨¡å¼" loading="lazy"></p><span id="more"></span><p>åœ¨ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹ä¸­ï¼Œå®ƒä¸¾ä¾‹äº†åœ¨ç¾å›½ä¸åŒçš„åŸå¸‚ç”Ÿäº§å‡ºæ¥çš„æŠ«è¨ï¼Œå…¶æ¯ä¸ªå·çš„æŠ«è¨å·¥å‚éƒ½æœ‰ç€ä¸€å¥—çš„åˆ¶ä½œæ­¥éª¤è¢«å°è£…èµ·æ¥ï¼Œæ¯”å¦‚â€œå‡†å¤‡â€ã€â€œçƒ˜çƒ¤â€ã€â€œåˆ‡â€ å’Œ â€œåŒ…è£…â€ã€‚ç„¶åæ¯ä¸ªå·çš„ç”Ÿäº§çš„æŠ«è¨äº¤ç»™å…·ä½“çš„å·¥å‚ç±»æ¥å®ç°ã€‚</p><p>è¿™æ˜¯æŠ½å–å‡º Pizza å…±æœ‰çš„å±æ€§å’Œåˆ¶ä½œæ­¥éª¤ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo_springboot<span class="token punctuation">.</span>designpattern<span class="token punctuation">.</span>factory</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Pizza</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> name<span class="token punctuation">;</span> <span class="token comment">// åç§°</span>    <span class="token class-name">String</span> dough<span class="token punctuation">;</span> <span class="token comment">// é¢å›¢ç±»å‹</span>    <span class="token class-name">String</span> sauce<span class="token punctuation">;</span> <span class="token comment">// é¦…æ–™</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> toppings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">prepare</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å‡†å¤‡ï¼š"</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‰”é¢å›¢..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ·»åŠ é¦…æ–™..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">bake</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"çƒ¤25åˆ†é’Ÿ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åˆ‡æŠ«è¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">box</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åŒ…è£…æŠ«è¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>Pizza çš„å…·ä½“å®ç°ï¼ŒèŠåŠ å“¥ Pizza å’Œ çº½çº¦ Pizzaã€‚</p><p>çº½çº¦æŠ«è¨ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo_springboot<span class="token punctuation">.</span>designpattern<span class="token punctuation">.</span>factory</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NewYorkStyleCheesePizza</span> <span class="token keyword">extends</span> <span class="token class-name">Pizza</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token class-name">NewYorkStyleCheesePizza</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        name <span class="token operator">=</span> <span class="token string">"çº½çº¦é£å‘³çš„å¥¶é…ªæŠ«è¨"</span><span class="token punctuation">;</span>        dough <span class="token operator">=</span> <span class="token string">"è–„çš®é¢å›¢"</span><span class="token punctuation">;</span>        sauce <span class="token operator">=</span> <span class="token string">"å¤§è’œç•ªèŒ„é…±"</span><span class="token punctuation">;</span>        toppings<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"ç£¨ç¢çš„é›·å‰äºšè¯ºå¥¶é…ª"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>èŠåŠ å“¥æŠ«è¨ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo_springboot<span class="token punctuation">.</span>designpattern<span class="token punctuation">.</span>factory</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ChicagoStyleCheesePizza</span> <span class="token keyword">extends</span> <span class="token class-name">Pizza</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token class-name">ChicagoStyleCheesePizza</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        name <span class="token operator">=</span> <span class="token string">"èŠåŠ å“¥é£å‘³æ·±ç›˜å¥¶é…ªæŠ«è¨"</span><span class="token punctuation">;</span>        dough <span class="token operator">=</span> <span class="token string">"Extra Thick Crust Dough"</span><span class="token punctuation">;</span>        sauce <span class="token operator">=</span> <span class="token string">"Plum Tomato Sauce"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åˆ‡æˆæ­£æ–¹å½¢"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ç„¶åè¿™äº›æŠ«è¨éœ€è¦äº¤ç»™å„ä¸ªåŸå¸‚çš„å·¥å‚ï¼Œæ¯ä¸ªå·çš„æŠ«è¨å·¥å‚éƒ½æœ‰ç€ä¸€å¥—çš„åˆ¶ä½œæ­¥éª¤ï¼Œæ‰€ä»¥å°†æ­¥éª¤å°è£…åˆ°æŠ½è±¡ç±»å½“ä¸­ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo_springboot<span class="token punctuation">.</span>designpattern<span class="token punctuation">.</span>factory</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">PizzaStore</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token class-name">Pizza</span> <span class="token function">orderPizza</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Pizza</span> pizza <span class="token operator">=</span> <span class="token function">createPizza</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>        pizza<span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        pizza<span class="token punctuation">.</span><span class="token function">bake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        pizza<span class="token punctuation">.</span><span class="token function">cut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        pizza<span class="token punctuation">.</span><span class="token function">box</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> pizza<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">protected</span> <span class="token keyword">abstract</span> <span class="token class-name">Pizza</span> <span class="token function">createPizza</span><span class="token punctuation">(</span><span class="token class-name">String</span> pizza<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>èŠåŠ å“¥çš„æŠ«è¨å·¥å‚ï¼ˆæ³¨æ„ï¼šç±»çš„å®ä¾‹åŒ–æ¨è¿Ÿåˆ°å­ç±»äº†ï¼‰ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ChicagoPizzaStore</span> <span class="token keyword">extends</span> <span class="token class-name">PizzaStore</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token class-name">Pizza</span> <span class="token function">createPizza</span><span class="token punctuation">(</span><span class="token class-name">String</span> pizza<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"cheese"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>pizza<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ChicagoStyleCheesePizza</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>çº½çº¦çš„æŠ«è¨å·¥å‚ï¼ˆæ³¨æ„ï¼šç±»çš„å®ä¾‹åŒ–æ¨è¿Ÿåˆ°å­ç±»äº†ï¼‰ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo_springboot<span class="token punctuation">.</span>designpattern<span class="token punctuation">.</span>factory</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NewYorkPizzaStore</span> <span class="token keyword">extends</span> <span class="token class-name">PizzaStore</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Pizza</span> <span class="token function">createPizza</span><span class="token punctuation">(</span><span class="token class-name">String</span> pizza<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"cheese"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>pizza<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">NewYorkStyleCheesePizza</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æ¥ä¸‹æ¥ï¼Œåœ¨ä¸åŒåŸå¸‚ç”Ÿäº§ä¸åŒçš„æŠ«è¨ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo_springboot<span class="token punctuation">.</span>designpattern<span class="token punctuation">.</span>factory</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PizzaTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">PizzaStore</span> pizzaStore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NewYorkPizzaStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Pizza</span> pizza <span class="token operator">=</span> pizzaStore<span class="token punctuation">.</span><span class="token function">orderPizza</span><span class="token punctuation">(</span><span class="token string">"cheese"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"A è®¢è´­äº†ä¸€ä¸ªï¼š"</span> <span class="token operator">+</span> pizza<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        pizzaStore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ChicagoPizzaStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        pizza <span class="token operator">=</span> pizzaStore<span class="token punctuation">.</span><span class="token function">orderPizza</span><span class="token punctuation">(</span><span class="token string">"cheese"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"B è®¢è´­äº†ä¸€ä¸ªï¼š"</span> <span class="token operator">+</span> pizza<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œä¸€ä¸‹ï¼š</p><pre class="language-none"><code class="language-none">å‡†å¤‡ï¼šçº½çº¦é£å‘³çš„å¥¶é…ªæŠ«è¨æ‰”é¢å›¢...æ·»åŠ é¦…æ–™...çƒ¤25åˆ†é’Ÿåˆ‡æŠ«è¨åŒ…è£…æŠ«è¨A è®¢è´­äº†ä¸€ä¸ªï¼šçº½çº¦é£å‘³çš„å¥¶é…ªæŠ«è¨å‡†å¤‡ï¼šèŠåŠ å“¥é£å‘³æ·±ç›˜å¥¶é…ªæŠ«è¨æ‰”é¢å›¢...æ·»åŠ é¦…æ–™...çƒ¤25åˆ†é’Ÿåˆ‡æˆæ­£æ–¹å½¢åŒ…è£…æŠ«è¨B è®¢è´­äº†ä¸€ä¸ªï¼šèŠåŠ å“¥é£å‘³æ·±ç›˜å¥¶é…ªæŠ«è¨</code></pre><h2 id="æŠ½è±¡å·¥å‚æ¨¡å¼"><a href="#æŠ½è±¡å·¥å‚æ¨¡å¼" class="headerlink" title="æŠ½è±¡å·¥å‚æ¨¡å¼"></a>æŠ½è±¡å·¥å‚æ¨¡å¼</h2><p><strong>æŠ½è±¡å·¥å‚æ¨¡å¼</strong>æä¾›äº†æä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³ï¼ˆåˆ›å»ºå¤šä¸ªä¸ä¹‹ç›¸å…³çš„ï¼‰æˆ–è€…ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šä»–ä»¬å…·ä½“çš„ç±»ã€‚</p><p>æ¯”å¦‚ï¼šå»å…¬å¸é¢è¯•æˆ–è€…ä¸Šç­ï¼Œè‚¯å®šæœ‰ä¸¤å¥—æˆ–å¤šå¥—è¡£æœå§ï¼Œæ¯”å¦‚è¯´æœ‰å•†åŠ¡è£…ï¼ˆæˆå¥—ï¼Œä¸€ç³»åˆ—å…·ä½“äº§å“ï¼‰ã€æ—¶å°šè£…ï¼ˆæˆå¥—ï¼Œä¸€ç³»åˆ—å…·ä½“äº§å“ï¼‰ï¼Œç”šè‡³å¯¹äºä¸€ä¸ªå®¶åº­æ¥è¯´ï¼Œå¯èƒ½æœ‰å•†åŠ¡å¥³è£…ã€å•†åŠ¡ç”·è£…ã€æ—¶å°šå¥³è£…ã€æ—¶å°šç”·è£…ï¼Œè¿™äº›ä¹Ÿéƒ½æ˜¯æˆå¥—çš„ï¼Œå³ä¸€ç³»åˆ—å…·ä½“äº§å“ã€‚å‡è®¾ä¸€ç§æƒ…å†µï¼Œåœ¨æ‚¨çš„å®¶ä¸­ï¼ŒæŸä¸€ä¸ªè¡£æŸœï¼ˆå…·ä½“å·¥å‚ï¼‰åªèƒ½å­˜æ”¾æŸä¸€ç§è¿™æ ·çš„è¡£æœï¼ˆæˆå¥—ï¼Œä¸€ç³»åˆ—å…·ä½“äº§å“ï¼‰ï¼Œæ¯æ¬¡æ‹¿è¿™ç§æˆå¥—çš„è¡£æœæ—¶ä¹Ÿè‡ªç„¶è¦ä»è¿™ä¸ªè¡£æŸœä¸­å–å‡ºäº†ã€‚</p><p>æŠ½è±¡å·¥å‚æ¨¡å¼çš„ç±»å›¾å¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><img src="/journal/design-pattern-factory/3E13CDD1-2CD2-4C66-BD33-DECBF172AE03.jpg" alt="æŠ½è±¡å·¥å‚æ¨¡å¼" loading="lazy"></p><h2 id="ç«™å¤–ä¾‹å­"><a href="#ç«™å¤–ä¾‹å­" class="headerlink" title="ç«™å¤–ä¾‹å­"></a>ç«™å¤–ä¾‹å­</h2><p>ä»¥ä¸‹ï¼Œæ˜¯åœ¨èœé¸Ÿæ•™ç¨‹çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼š</p><h3 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h3><p>å·¥å‚æ¨¡å¼ä¹Ÿå°±æ˜¯é¼ æ ‡å·¥å‚æ˜¯ä¸ªçˆ¶ç±»ï¼Œæœ‰ç”Ÿäº§é¼ æ ‡è¿™ä¸ªæ¥å£ã€‚</p><p>æˆ´å°”é¼ æ ‡å·¥å‚ï¼Œæƒ æ™®é¼ æ ‡å·¥å‚ç»§æ‰¿å®ƒï¼Œå¯ä»¥åˆ†åˆ«ç”Ÿäº§æˆ´å°”é¼ æ ‡ï¼Œæƒ æ™®é¼ æ ‡ã€‚</p><p>ç”Ÿäº§å“ªç§é¼ æ ‡ä¸å†ç”±å‚æ•°å†³å®šï¼Œè€Œæ˜¯åˆ›å»ºé¼ æ ‡å·¥å‚æ—¶ï¼Œç”±æˆ´å°”é¼ æ ‡å·¥å‚åˆ›å»ºã€‚</p><p>åç»­ç›´æ¥è°ƒç”¨**é¼ æ ‡å·¥å‚.ç”Ÿäº§é¼ æ ‡()**å³å¯</p><p><img src="https://www.runoob.com/wp-content/uploads/2018/07/1530601917-1999-DP-Factory.png" alt="img" loading="lazy"></p><h3 id="æŠ½è±¡å·¥å‚æ¨¡å¼-1"><a href="#æŠ½è±¡å·¥å‚æ¨¡å¼-1" class="headerlink" title="æŠ½è±¡å·¥å‚æ¨¡å¼"></a>æŠ½è±¡å·¥å‚æ¨¡å¼</h3><p>æŠ½è±¡å·¥å‚æ¨¡å¼ä¹Ÿå°±æ˜¯ä¸ä»…ç”Ÿäº§é¼ æ ‡ï¼ŒåŒæ—¶ç”Ÿäº§é”®ç›˜ã€‚</p><p>ä¹Ÿå°±æ˜¯ PC å‚å•†æ˜¯ä¸ªçˆ¶ç±»ï¼Œæœ‰ç”Ÿäº§é¼ æ ‡ï¼Œç”Ÿäº§é”®ç›˜ä¸¤ä¸ªæ¥å£ã€‚</p><p>æˆ´å°”å·¥å‚ï¼Œæƒ æ™®å·¥å‚ç»§æ‰¿å®ƒï¼Œå¯ä»¥åˆ†åˆ«ç”Ÿäº§æˆ´å°”é¼ æ ‡+æˆ´å°”é”®ç›˜ï¼Œå’Œæƒ æ™®é¼ æ ‡+æƒ æ™®é”®ç›˜ã€‚</p><p>åˆ›å»ºå·¥å‚æ—¶ï¼Œç”±æˆ´å°”å·¥å‚åˆ›å»ºã€‚</p><p>åç»­**å·¥å‚.ç”Ÿäº§é¼ æ ‡()<strong>åˆ™ç”Ÿäº§æˆ´å°”é¼ æ ‡ï¼Œ</strong>å·¥å‚.ç”Ÿäº§é”®ç›˜()**åˆ™ç”Ÿäº§æˆ´å°”é”®ç›˜ã€‚</p><p><img src="https://www.runoob.com/wp-content/uploads/2018/07/1530601916-7298-DP-AbstractFactory.png" alt="img" loading="lazy"></p><blockquote><p>åœ¨æŠ½è±¡å·¥å‚æ¨¡å¼ä¸­ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦å¢åŠ ä¸€ä¸ªå·¥å‚</p></blockquote><p>å‡è®¾æˆ‘ä»¬å¢åŠ åç¡•å·¥å‚ï¼Œåˆ™æˆ‘ä»¬éœ€è¦å¢åŠ åç¡•å·¥å‚ï¼Œå’Œæˆ´å°”å·¥å‚ä¸€æ ·ï¼Œç»§æ‰¿ PC å‚å•†ã€‚</p><p>ä¹‹ååˆ›å»ºåç¡•é¼ æ ‡ï¼Œç»§æ‰¿é¼ æ ‡ç±»ã€‚åˆ›å»ºåç¡•é”®ç›˜ï¼Œç»§æ‰¿é”®ç›˜ç±»å³å¯ã€‚</p><p><img src="https://www.runoob.com/wp-content/uploads/2018/07/1530601980-8080-P-AbstractFactory-AddFactory.png" alt="img" loading="lazy"></p><blockquote><p>åœ¨æŠ½è±¡å·¥å‚æ¨¡å¼ä¸­ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦å¢åŠ ä¸€ä¸ªäº§å“</p></blockquote><p>å‡è®¾æˆ‘ä»¬å¢åŠ è€³éº¦è¿™ä¸ªäº§å“ï¼Œåˆ™é¦–å…ˆæˆ‘ä»¬éœ€è¦å¢åŠ è€³éº¦è¿™ä¸ªçˆ¶ç±»ï¼Œå†åŠ ä¸Šæˆ´å°”è€³éº¦ï¼Œæƒ æ™®è€³éº¦è¿™ä¸¤ä¸ªå­ç±»ã€‚</p><p>ä¹‹ååœ¨PCå‚å•†è¿™ä¸ªçˆ¶ç±»ä¸­ï¼Œå¢åŠ ç”Ÿäº§è€³éº¦çš„æ¥å£ã€‚æœ€ååœ¨æˆ´å°”å·¥å‚ï¼Œæƒ æ™®å·¥å‚è¿™ä¸¤ä¸ªç±»ä¸­ï¼Œåˆ†åˆ«å®ç°ç”Ÿäº§æˆ´å°”è€³éº¦ï¼Œæƒ æ™®è€³éº¦çš„åŠŸèƒ½ã€‚ ä»¥ä¸Šã€‚</p><p><img src="https://www.runoob.com/wp-content/uploads/2018/07/1530601917-7462-P-AbstractFactory-AddProduct.png" alt="img" loading="lazy"></p>]]></content>
      
      
      <categories>
          
          <category> 23 ç§è®¾è®¡æ¨¡å¼ </category>
          
          <category> åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹ç­–ç•¥æ¨¡å¼</title>
      <link href="/journal/design-pattern-strategy/"/>
      <url>/journal/design-pattern-strategy/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä½•ä¸ºç­–ç•¥æ¨¡å¼"><a href="#ä½•ä¸ºç­–ç•¥æ¨¡å¼" class="headerlink" title="ä½•ä¸ºç­–ç•¥æ¨¡å¼"></a>ä½•ä¸ºç­–ç•¥æ¨¡å¼</h2><p>åœ¨ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰ä¸­ï¼Œä¸€ä¸ªç±»çš„è¡Œä¸ºæˆ–å…¶ç®—æ³•å¯ä»¥åœ¨è¿è¡Œæ—¶æ›´æ”¹ã€‚åœ¨ç­–ç•¥æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºè¡¨ç¤ºå„ç§ç­–ç•¥çš„å¯¹è±¡å’Œä¸€ä¸ªè¡Œä¸ºéšç€ç­–ç•¥å¯¹è±¡æ”¹å˜è€Œæ”¹å˜çš„ context å¯¹è±¡ã€‚ç­–ç•¥å¯¹è±¡æ”¹å˜ context å¯¹è±¡çš„æ‰§è¡Œç®—æ³•ã€‚</p><p>ç­–ç•¥æ¨¡å¼çš„ UML ç±»å›¾å¦‚ä¸‹ã€‚</p><p><img src="/journal/design-pattern-strategy/vdcc5a944acd6bcd925995ed11ef3bc08.jpg" loading="lazy"></p><span id="more"></span><h2 id="ç”Ÿæ´»ä¸­çš„ç­–ç•¥æ¨¡å¼"><a href="#ç”Ÿæ´»ä¸­çš„ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç”Ÿæ´»ä¸­çš„ç­–ç•¥æ¨¡å¼"></a>ç”Ÿæ´»ä¸­çš„ç­–ç•¥æ¨¡å¼</h2><p>ç­–ç•¥æ¨¡å¼åœ¨ç”Ÿæ´»ä¸­éå¸¸å¸¸è§ï¼š</p><p>1ã€æ¯”å¦‚åœ¨è´­ç‰©æ—¶ï¼Œä¸åŒçš„èŠ‚æ—¥ï¼Œç‰©å“æ‰“æŠ˜çš„ç¨‹åº¦ä¹Ÿä¸ç›¸åŒã€‚äºæ˜¯ï¼Œæ‰“æŠ˜å°±æ˜¯ä¸€ç§ç­–ç•¥ã€‚</p><p>2ã€è¿˜æœ‰æˆ‘æƒ³å¬æˆ‘çš„æœ‹å‹å¥ä¹ã€Šå¤œå…‰ä¸‹çš„å‡¤å°¾ç«¹ã€‹ï¼Œæˆ‘çš„æœ‹å‹ä¼šé’¢ç´ï¼Œè‘«èŠ¦ä¸ï¼Œç¬›å­ç­‰ç­‰ä¹å™¨ï¼Œå…·ä½“æ‰€ä½¿ç”¨ä»€ä¹ˆä¹å™¨å¯ä»¥åå•†å†³å®šã€‚äºæ˜¯ï¼Œç”¨ä»€ä¹ˆä¹å™¨å¥ä¹ï¼Œå°±æ˜¯ä¸€ç§ç­–ç•¥ã€‚</p><p>3ã€æ—…è¡Œçš„å‡ºæ¸¸æ–¹å¼ï¼Œé€‰æ‹©éª‘è‡ªè¡Œè½¦ã€åæ±½è½¦ã€‚äºæ˜¯ï¼Œæ¯ä¸€ç§æ—…è¡Œæ–¹å¼éƒ½æ˜¯ä¸€ä¸ªç­–ç•¥ã€‚</p><p>4ã€â€¦â€¦</p><h2 id="ä»£ç ä¸¾ä¾‹"><a href="#ä»£ç ä¸¾ä¾‹" class="headerlink" title="ä»£ç ä¸¾ä¾‹"></a>ä»£ç ä¸¾ä¾‹</h2><p>æ¥ä¸‹æ¥ï¼Œå’±ä»¬å°±å¬å¬æˆ‘çš„æœ‹å‹æ¥å¥ä¸€é¦–ã€Šå¤œå…‰ä¸‹çš„å‡¤å°¾ç«¹ã€‹å§ã€‚æ—¢ç„¶è¯´åˆ°æˆ‘çš„æœ‹å‹ä¼šâ€œé’¢ç´ï¼Œè‘«èŠ¦ä¸ï¼Œç¬›å­â€ä¸‰é¦–ä¹å™¨ï¼Œé‚£å°±æ¯ä¸ªä¹å™¨éƒ½è®©ä»–å¥ä¹ä¸€éå§ã€‚</p><p>æŠŠæ¯ä¸€ç§å¥ä¹æ–¹å¼éƒ½å®ç°ä¸€éã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// ä¸€ä¸ªæ¥å£ï¼ŒæŠ½å–å‡ºé€šç”¨çš„å¥ä¹æ–¹æ³•</span><span class="token keyword">interface</span> <span class="token class-name">MusicalInstruments</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> title<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// åˆ†åˆ«å®ç°ä¸‰ç§ä¸åŒçš„ä¹å™¨</span><span class="token comment">// è¿™æ˜¯é’¢ç´</span><span class="token keyword">class</span> <span class="token class-name">Piano</span> <span class="token keyword">implements</span> <span class="token class-name">MusicalInstruments</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> title<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Systetm</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä½¿ç”¨é’¢ç´å¼¹ã€Š"</span> <span class="token operator">+</span> title <span class="token operator">+</span> <span class="token string">"ã€‹"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// ä½¿ç”¨è‘«èŠ¦ä¸</span><span class="token keyword">class</span> <span class="token class-name">Hulusi</span> <span class="token keyword">implements</span> <span class="token class-name">MusicalInstruments</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> title<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Systetm</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä½¿ç”¨è‘«èŠ¦ä¸å¹ã€Š"</span> <span class="token operator">+</span> title <span class="token operator">+</span> <span class="token string">"ã€‹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// ä½¿ç”¨ç¬›å­</span><span class="token keyword">class</span> <span class="token class-name">Flute</span> <span class="token keyword">implements</span> <span class="token class-name">MusicalInstruments</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> title<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Systetm</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä½¿ç”¨ç¬›å­å¹ã€Š"</span> <span class="token operator">+</span> title <span class="token operator">+</span> <span class="token string">"ã€‹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿™æ˜¯æˆ‘çš„æœ‹å‹ï¼Œåå­—å°±æ‹¼éŸ³ç®€å†™äº†ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">MyFriend</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">"czx"</span><span class="token punctuation">;</span>        <span class="token comment">// å¥ä¹</span>    <span class="token keyword">private</span> <span class="token class-name">MusicalInstruments</span> instruments<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setInstruments</span><span class="token punctuation">(</span><span class="token class-name">MusicalInstruments</span> instruments<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>instruments <span class="token operator">=</span> instruments<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> title<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        instruments<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span></code></pre><p>å¿«ç‚¹å¥ä¹å§ï¼Œæˆ‘ç­‰ä¸åŠäº†ï¼ˆå–œï¼‰ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">MyFriend</span> myFriend <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyFriend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                myFriend<span class="token punctuation">.</span><span class="token function">setInstruments</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Piano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        myFriend<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token string">"å¤œå…‰ä¸‹çš„å‡¤å°¾ç«¹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                myFriend<span class="token punctuation">.</span><span class="token function">setInstruments</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Hulusi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        myFriend<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token string">"å¤œå…‰ä¸‹çš„å‡¤å°¾ç«¹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                myFriend<span class="token punctuation">.</span><span class="token function">setInstruments</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Flute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        myFriend<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token string">"å¤œå…‰ä¸‹çš„å‡¤å°¾ç«¹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ä¸‰ç§ä¹å™¨éƒ½å¥½å¬ï¼Œä½†æ˜¯æˆ‘è§‰å¾—ç”¨è‘«èŠ¦ä¸å¹ä¼šæ›´å¥½å¬ã€‚â˜ºï¸</p><h2 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h2><p>1ã€å¦‚æœåœ¨ä¸€ä¸ªç³»ç»Ÿé‡Œé¢æœ‰è®¸å¤šç±»ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ä»…åœ¨äºå®ƒä»¬çš„è¡Œä¸ºï¼Œé‚£ä¹ˆä½¿ç”¨ç­–ç•¥æ¨¡å¼å¯ä»¥åŠ¨æ€åœ°è®©ä¸€ä¸ªå¯¹è±¡åœ¨è®¸å¤šè¡Œä¸ºä¸­é€‰æ‹©ä¸€ç§è¡Œä¸ºã€‚ </p><p>2ã€ä¸€ä¸ªç³»ç»Ÿéœ€è¦åŠ¨æ€åœ°åœ¨å‡ ç§ç®—æ³•ä¸­é€‰æ‹©ä¸€ç§ã€‚</p><p>3ã€å¦‚æœä¸€ä¸ªå¯¹è±¡æœ‰å¾ˆå¤šçš„è¡Œä¸ºï¼Œå¦‚æœä¸ç”¨æ°å½“çš„æ¨¡å¼ï¼Œè¿™äº›è¡Œä¸ºå°±åªå¥½ä½¿ç”¨å¤šé‡çš„æ¡ä»¶é€‰æ‹©è¯­å¥æ¥å®ç°ã€‚</p><h2 id="ä¼˜ç‚¹å’Œç¼ºç‚¹"><a href="#ä¼˜ç‚¹å’Œç¼ºç‚¹" class="headerlink" title="ä¼˜ç‚¹å’Œç¼ºç‚¹"></a>ä¼˜ç‚¹å’Œç¼ºç‚¹</h2><p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€ç®—æ³•å¯ä»¥è‡ªç”±åˆ‡æ¢ã€‚ 2ã€é¿å…ä½¿ç”¨å¤šé‡æ¡ä»¶åˆ¤æ–­ã€‚ 3ã€æ‰©å±•æ€§è‰¯å¥½ã€‚</p><p><strong>ç¼ºç‚¹ï¼š</strong> 1ã€ç­–ç•¥ç±»ä¼šå¢å¤šã€‚ 2ã€æ‰€æœ‰ç­–ç•¥ç±»éƒ½éœ€è¦å¯¹å¤–æš´éœ²ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> 23 ç§è®¾è®¡æ¨¡å¼ </category>
          
          <category> è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Cloud åº”ç”¨ç¨‹åºç½‘å…³å’Œæ–­è¨€</title>
      <link href="/journal/spring-cloud-gateway/"/>
      <url>/journal/spring-cloud-gateway/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>åœ¨å¾®æœåŠ¡é¡¹ç›®ä¸­ï¼Œå„ä¸ªåŠŸèƒ½æ¨¡å—æ‹†åˆ†æˆäº†ä¸€ä¸ªä¸ªå¾®æœåŠ¡ï¼Œæ¯ä¸€ä¸ªå¾®æœåŠ¡éƒ½æ‹¥æœ‰è‡ªå·±çš„ ip å’Œç«¯å£ã€‚éšç€å¾®æœåŠ¡é€æ¸å¢å¤šæ—¶ï¼Œå®¢æˆ·ç«¯è¦å»è®¿é—®ä¸åŒçš„æœåŠ¡ï¼Œå°±è¦è®°ä½æ¯ä¸ªæœåŠ¡çš„ ip å’Œç«¯å£å·ï¼Œè¿™åœ¨å¼€å‘æ—¶ç®€ç›´å°±æ˜¯ç¾éš¾æ€§çš„ï¼Œæ··ä¹±çš„ã€‚æœ€ç»ˆå¯¼è‡´è®¿é—®çš„å…¥å£ä¸ç»Ÿä¸€ã€‚</p><p>ä¸ºäº†è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å°†å®¢æˆ·ç«¯è®¿é—®å…¥å£è¿›è¡Œç»Ÿä¸€ï¼Œäºæ˜¯ Spring Cloud Gateway å°±å‡ºç°äº†ã€‚</p><span id="more"></span><p><a href="https://docs.spring.io/spring-cloud-gateway/docs/4.0.0-SNAPSHOT/reference/html/">Spring Cloud Gateway æ–‡æ¡£é“¾æ¥</a></p><h2 id="å¿«é€Ÿä½“éªŒ"><a href="#å¿«é€Ÿä½“éªŒ" class="headerlink" title="å¿«é€Ÿä½“éªŒ"></a>å¿«é€Ÿä½“éªŒ</h2><p>æ–°å»ºä¸€ä¸ªé¡¹ç›®æˆ–æ¨¡å— Spring Cloud Gateway çš„ä¾èµ–å¦‚ä¸‹ï¼ˆæˆ‘è‡ªå·±åœ¨å­¦ä¹ æ—¶æœ‰ä¸€ä¸ªçˆ¶æ¨¡å—ï¼‰ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-gateway<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><blockquote><p>è‡ªå·±åœ¨å­¦ä¹ æ—¶ï¼Œæˆ‘å·²ç»å»ºå¥½ä¸€ä¸ª  localhost:8011 çš„æœåŠ¡ï¼</p></blockquote><p>ç„¶ååœ¨ application.yml ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ã€‚</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8888</span><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> api<span class="token punctuation">-</span>gateway  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>      <span class="token key atrule">routes</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> order_route <span class="token comment"># å”¯ä¸€æ ‡è¯†è·¯ç”±</span>          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8011</span> <span class="token comment"># å¾®æœåŠ¡çš„è·¯ç”±ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å…¶å®ƒçš„æœåŠ¡</span>          <span class="token key atrule">predicates</span><span class="token punctuation">:</span> <span class="token comment"># æ–­è¨€è§„åˆ™ï¼Œç”¨äºè·¯ç”±çš„åŒ¹é…</span>            <span class="token punctuation">-</span> Path=/order<span class="token punctuation">-</span>serv/<span class="token important">**</span> <span class="token comment"># http://localhost:8011/order-serv/order/add</span>          <span class="token key atrule">filters</span><span class="token punctuation">:</span>            <span class="token punctuation">-</span> StripPrefix=1 <span class="token comment"># è½¬å‘ä¹‹å‰å»æ‰ç¬¬ä¸€å±‚è·¯å¾„</span></code></pre><p>å…¶ä¸­ï¼Œé…ç½®çš„ä¸€äº›ä¿¡æ¯å¦‚ä¸‹ã€‚</p><ul><li>routesï¼šé…ç½®è·¯ç”±ä¿¡æ¯<ul><li>idï¼šè·¯ç”±å”¯ä¸€æ ‡è¯†</li><li>uriï¼šæœåŠ¡çš„è·¯å¾„</li><li>predicatesï¼šè·¯ç”±è§„åˆ™ï¼Œç”¨äºè·¯ç”±çš„åŒ¹é…ï¼Œç›®å‰æœ‰ä»¥ä¸‹çš„æ–­è¨€è§„åˆ™ï¼Œåé¢ä¼šä¸€ä¸€ä¸¾å‡ºè¿™äº›ä½¿ç”¨<ul><li>Pathï¼šè·¯å¾„åŒ¹é…</li><li>Afterï¼šæŒ‡å®šæ—¶é—´ä¹‹åæ‰èƒ½è®¿é—®</li><li>Beforeï¼šæŒ‡å®šæ—¶é—´ä¹‹å‰æ‰èƒ½è®¿é—®</li><li>Betweenï¼šæŒ‡å®šæ—¶é—´ä¹‹é—´æ‰èƒ½è®¿é—®</li><li>Headerï¼šæŒ‡å®šçš„è¯·æ±‚å¤´æ‰èƒ½è®¿é—®</li><li>Methodï¼šæŒ‡å®šæŸä¸ªè¯·æ±‚æ–¹æ³•æ‰èƒ½è®¿é—®</li><li>Queryï¼šå¿…é¡»æºå¸¦æŸä¸ªå‚æ•°æ‰èƒ½è®¿é—®</li></ul></li><li>filtersï¼šè¿‡æ»¤å™¨<ul><li>StripPrefixï¼šè½¬å‘ä¹‹å‰å»æ‰ç¬¬å‡ å±‚çš„è·¯å¾„</li></ul></li></ul></li></ul><p>å°è¯•è®¿é—® <a href="http://localhost:8888/order-serv/order/add%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%AD%A3%E5%B8%B8%E5%9C%B0%E8%AE%BF%E9%97%AE%E3%80%82">http://localhost:8888/order-serv/order/addï¼Œå¯ä»¥æ­£å¸¸åœ°è®¿é—®ã€‚</a></p><p><img src="/journal/spring-cloud-gateway/image-20221130212556083.png" alt="image-20221130212556083" loading="lazy"></p><h2 id="ä¸-nacos-çš„æ•´åˆ"><a href="#ä¸-nacos-çš„æ•´åˆ" class="headerlink" title="ä¸ nacos çš„æ•´åˆ"></a>ä¸ nacos çš„æ•´åˆ</h2><p>å¼•å…¥ nacos çš„ä¾èµ–ï¼ŒåŒæ—¶è¦æ’é™¤ yaml è§£æå™¨çš„ä¾èµ–ï¼Œä¸ç„¶è¿è¡Œä¼šå‡ºç°å¼‚å¸¸ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.yaml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>snakeyaml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>å½“å¼•å…¥æˆåŠŸåï¼Œç½‘å…³ä¹Ÿæ˜¯ä¸€ä¸ªå¾®æœåŠ¡äº†ï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡æœåŠ¡åæ¥è®¿é—®äº†ã€‚</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> api<span class="token punctuation">-</span>gateway  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>      <span class="token key atrule">routes</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> order_route <span class="token comment"># å”¯ä¸€æ ‡è¯†è·¯ç”±</span>          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//order<span class="token punctuation">-</span>service <span class="token comment"># lbçš„æ„æ€æ˜¯ï¼Œä½¿ç”¨ nacos ä¸­çš„ loadbalance è´Ÿè½½å‡è¡¡å™¨</span></code></pre><p>åŒæ—¶ Spring Cloud Gateway å¯ä»¥å¯åŠ¨æ˜¯å¦è¯†åˆ« nacosï¼Œè¿™æ ·å°±ä¸ç”¨ä¸Šé¢çš„å†™æ³•äº†ï¼Œä½†æ˜¯æ®æˆ‘äº†è§£ä¸Šé¢çš„å†™æ³•ä¼šæ¯”è¾ƒå¤šã€‚</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> api<span class="token punctuation">-</span>gateway  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>        <span class="token key atrule">locator</span><span class="token punctuation">:</span>          <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># æ˜¯å¦å¯åŠ¨è‡ªåŠ¨è¯†åˆ«nacosæœåŠ¡</span></code></pre><h2 id="è·¯ç”±æ–­è¨€å·¥å‚"><a href="#è·¯ç”±æ–­è¨€å·¥å‚" class="headerlink" title="è·¯ç”±æ–­è¨€å·¥å‚"></a>è·¯ç”±æ–­è¨€å·¥å‚</h2><p>è·¯ç”±æ–­è¨€é»˜è®¤æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p><ul><li>Pathï¼šè·¯å¾„åŒ¹é…</li><li>Afterï¼šæŒ‡å®šæ—¶é—´ä¹‹åæ‰èƒ½è®¿é—®</li><li>Beforeï¼šæŒ‡å®šæ—¶é—´ä¹‹å‰æ‰èƒ½è®¿é—®</li><li>Betweenï¼šæŒ‡å®šæ—¶é—´ä¹‹é—´æ‰èƒ½è®¿é—®</li><li>Headerï¼šæŒ‡å®šçš„è¯·æ±‚å¤´æ‰èƒ½è®¿é—®</li><li>Methodï¼šæŒ‡å®šæŸä¸ªè¯·æ±‚æ–¹æ³•æ‰èƒ½è®¿é—®</li><li>Queryï¼šå¿…é¡»æºå¸¦æŸä¸ªå‚æ•°æ‰èƒ½è®¿é—®</li></ul><p>ä»¥ä¸Šçš„è§„åˆ™å¯ä»¥ä¸€èµ·ä½¿ç”¨ï¼Œè‹¥å…¨éƒ½ä¸ä½¿ç”¨ï¼Œåˆ™è¯¥æœåŠ¡ä¸‹çš„æ‰€æœ‰è·¯å¾„éƒ½æ˜¯å¯ä»¥è®¿é—®åˆ°çš„ã€‚</p><h3 id="Path"><a href="#Path" class="headerlink" title="Path"></a>Path</h3><p>é€šé…ç¬¦</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">predicates</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> Path=/order<span class="token punctuation">-</span>serv/<span class="token important">**</span></code></pre><p>å ä½ç¬¦</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">predicates</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> Path=/order<span class="token punctuation">-</span>serv/<span class="token punctuation">&#123;</span>path<span class="token punctuation">&#125;</span></code></pre><h3 id="Beforeã€Afterã€Between"><a href="#Beforeã€Afterã€Between" class="headerlink" title="Beforeã€Afterã€Between"></a>Beforeã€Afterã€Between</h3><p>Between æ˜¯æ—¶é—´æ®µï¼Œä¸¤ä¸ªæ—¶é—´æ®µä¹‹é—´éœ€è¦ç”¨é€—å·éš”å¼€ã€‚ä¸åœ¨è§„å®šçš„æ—¶é—´è§„åˆ™å†…è®¿é—®ï¼Œä¼šè¿”å› 404 é”™è¯¯ã€‚</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">predicates</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> After=2022<span class="token punctuation">-</span>11<span class="token punctuation">-</span>30T14<span class="token punctuation">:</span>50<span class="token punctuation">:</span>49.088636500+08<span class="token punctuation">:</span>00<span class="token punctuation">[</span>Asia/Shanghai<span class="token punctuation">]</span>  <span class="token punctuation">-</span> Before=2022<span class="token punctuation">-</span>11<span class="token punctuation">-</span>30T14<span class="token punctuation">:</span>55<span class="token punctuation">:</span>00.088636500+08<span class="token punctuation">:</span>00<span class="token punctuation">[</span>Asia/Shanghai<span class="token punctuation">]</span>  <span class="token punctuation">-</span> Between=2022<span class="token punctuation">-</span>11<span class="token punctuation">-</span>30T15<span class="token punctuation">:</span>00<span class="token punctuation">:</span>00.088636500+08<span class="token punctuation">:</span>00<span class="token punctuation">[</span>Asia/Shanghai<span class="token punctuation">]</span><span class="token punctuation">,</span> 2022<span class="token punctuation">-</span>11<span class="token punctuation">-</span>30T15<span class="token punctuation">:</span>05<span class="token punctuation">:</span>00.088636500+08<span class="token punctuation">:</span>00<span class="token punctuation">[</span>Asia/Shanghai<span class="token punctuation">]</span></code></pre><h3 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h3><p>è¯·æ±‚å¤´ä¸­æ²¡æœ‰è¯¥å‚æ•°ï¼Œä¼šè¿”å› 404 é”™è¯¯ã€‚é€—å·åé¢ä¸ºä¼ é€’çš„å€¼ï¼Œå¯ä»¥æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¸‹é¢çš„ä¾‹å­æ˜¯è¯¥å‚æ•°çš„å€¼å¿…é¡»è¦æ˜¯é•¿åº¦ â‰¥1 çš„æ•°å­—ã€‚</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">predicates</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> Header=X<span class="token punctuation">-</span>Request<span class="token punctuation">-</span>Id<span class="token punctuation">,</span>\d+</code></pre><h3 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h3><p>è¯·æ±‚æ–¹æ³•å¿…é¡»ä¸º GET è¯·æ±‚ï¼Œå¦‚æœæ˜¯å…¶ä»–çš„è¯·æ±‚ï¼ˆæ¯”å¦‚ POSTï¼‰ï¼Œä¼šè¿”å› 404 é”™è¯¯ã€‚</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">predicates</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> Method=GET</code></pre><h3 id="Query"><a href="#Query" class="headerlink" title="Query"></a>Query</h3><p>ä½¿ç”¨æ–¹æ³•å’Œ Header ç±»ä¼¼ï¼Œè¯·æ±‚ä¸­æ²¡æœ‰æºå¸¦è¯¥å‚æ•°ï¼Œä¼šè¿”å› 404 é”™è¯¯ã€‚</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">predicates</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> Query=name<span class="token punctuation">,</span> zhangsan<span class="token punctuation">|</span>lisi</code></pre><h2 id="è‡ªå®šä¹‰æ–­è¨€å·¥å‚"><a href="#è‡ªå®šä¹‰æ–­è¨€å·¥å‚" class="headerlink" title="è‡ªå®šä¹‰æ–­è¨€å·¥å‚"></a>è‡ªå®šä¹‰æ–­è¨€å·¥å‚</h2><p>è‡ªå®šä¹‰è·¯ç”±æ–­è¨€å·¥å‚éœ€è¦ç»§æ‰¿ AbstractRoutePredicateFactory ç±»ï¼Œé‡å†™applyæ–¹æ³•çš„é€»è¾‘ã€åœ¨ apply æ–¹æ³•ä¸­å¯ä»¥é€šè¿‡ exchange.getRequest() æ‹¿åˆ° ServerHttpRequest å¯¹è±¡ï¼Œä»è€Œå¯ä»¥è·å¾—è¯·æ±‚çš„å‚æ•°ã€è¯·æ±‚æ–¹å¼ã€è¯·æ±‚å¤´ç­‰ä¿¡æ¯ã€‚</p><ul><li>å¿…é¡»springç»„ä»¶bean</li><li>ç±»å¿…é¡»åŠ ä¸Š RoutePredicateFactory ä½œä¸ºç»“å°¾</li><li>å¿…é¡»ç»§æ‰¿ AbstractRoutePredicateFactory</li><li>å¿…é¡»å£°æ˜é™æ€å†…éƒ¨ç±»å£°æ˜å±æ€§æ¥æ¥æ”¶é…ç½®æ–‡ä»¶ä¸­çš„ä¿¡æ¯</li><li>éœ€è¦ç»“åˆ shortcutFieldOrder </li></ul><p>ç¤ºä¾‹</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TokenRoutePredicateFactory</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractRoutePredicateFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TokenRoutePredicateFactory<span class="token punctuation">.</span>Config</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token class-name">TokenRoutePredicateFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">TokenRoutePredicateFactory<span class="token punctuation">.</span>Config</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">shortcutFieldOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServerWebExchange</span><span class="token punctuation">></span></span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token class-name">Config</span> config<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">GatewayPredicate</span><span class="token punctuation">)</span> serverWebExchange <span class="token operator">-></span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"bestguo2020"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Validated</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Config</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token class-name">String</span> token<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> token<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>token <span class="token operator">=</span> token<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>application.yml</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> api<span class="token punctuation">-</span>gateway  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>      <span class="token key atrule">routes</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> order_route <span class="token comment"># å”¯ä¸€æ ‡è¯†è·¯ç”±</span>          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//order<span class="token punctuation">-</span>service <span class="token comment"># lbçš„æ„æ€æ˜¯ï¼Œä½¿ç”¨ nacos ä¸­çš„è´Ÿè½½å‡è¡¡å™¨ http://localhost:8011</span>          <span class="token key atrule">predicates</span><span class="token punctuation">:</span> <span class="token comment"># æ–­è¨€è§„åˆ™ï¼Œç”¨äºè·¯ç”±çš„åŒ¹é…</span>            <span class="token punctuation">-</span> Token=bestguo2020 <span class="token comment"># æ³¨æ„ç±»çš„åå­—ï¼Œæ‰€ä»¥åœ¨é…ç½®æ—¶è‡ªå®šä¹‰æ–­è¨€çš„ key ä¸º Token</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> åˆ†å¸ƒå¼ä¸å¾®æœåŠ¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring Cloud Alibaba </tag>
            
            <tag> å¾®æœåŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TypeScript ç±»ï¼Œå…¼å®¹æ€§å’Œäº¤å‰æ€§</title>
      <link href="/journal/ts-class-compatible-overlapping/"/>
      <url>/journal/ts-class-compatible-overlapping/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h2><p>ts ä¸­çš„ç±»é€šè¿‡ class å…³é”®å­—åˆ›å»ºã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span>    age<span class="token operator">:</span> <span class="token builtin">number</span>    gender <span class="token operator">=</span> <span class="token string">'ç”·'</span><span class="token punctuation">&#125;</span></code></pre><p>ä½¿ç”¨æ„é€ å‡½æ•° constructor åˆå§‹åŒ–å±æ€§ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Person2</span> <span class="token punctuation">&#123;</span>    age<span class="token operator">:</span> <span class="token builtin">number</span>    gender<span class="token operator">:</span> <span class="token builtin">string</span>    <span class="token comment">// å®ä¾‹å±æ€§åˆå§‹åŒ–</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> gender<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age        <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> gender    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person2</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">'ç”·'</span><span class="token punctuation">)</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><span id="more"></span><p>ç±»ä¸­çš„å®ä¾‹æ–¹æ³•</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">&#123;</span>    x <span class="token operator">=</span> <span class="token number">10</span>    y <span class="token operator">=</span> <span class="token number">10</span>    <span class="token function">scale</span><span class="token punctuation">(</span>n<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">*=</span> n        <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">*=</span> n    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> point <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token punctuation">)</span>point<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="ç±»çš„ç»§æ‰¿"><a href="#ç±»çš„ç»§æ‰¿" class="headerlink" title="ç±»çš„ç»§æ‰¿"></a>ç±»çš„ç»§æ‰¿</h3><p>ç»§æ‰¿ä½¿ç”¨ extends å…³é”®å­—ï¼Œä½¿å¾—å­ç±»æ‹¥æœ‰çˆ¶ç±»çš„å±æ€§æ–¹æ³•ï¼ˆä¸æ˜¯å…¨éƒ¨ï¼‰ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">&#123;</span>    <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'moving along'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">&#123;</span>    name <span class="token operator">=</span> <span class="token string">'æŸ¯åŸº'</span>    <span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ±ª'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>dog<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span>dog<span class="token punctuation">.</span><span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="ç±»çš„å®ç°"><a href="#ç±»çš„å®ç°" class="headerlink" title="ç±»çš„å®ç°"></a>ç±»çš„å®ç°</h3><p>ç±»çš„å®ç°ä½¿ç”¨ implements å…³é”®å­—ï¼Œæ¥å£ä¸­çš„å±æ€§å¿…é¡»è¦åœ¨å®ç°ç±»ä¸­å®šä¹‰ï¼Œæ–¹æ³•å¿…é¡»è¦åœ¨å®ç°ç±»ä¸­å®ç°ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">Singable</span> <span class="token punctuation">&#123;</span>    <span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Person3</span> <span class="token keyword">implements</span> <span class="token class-name">Singable</span> <span class="token punctuation">&#123;</span>    name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'jack'</span>    <span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">&#123;</span>        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'é¸¡ä½ å¤ªç¾~'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> p4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p4<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>p4<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="readonly-å…³é”®å­—"><a href="#readonly-å…³é”®å­—" class="headerlink" title="readonly å…³é”®å­—"></a>readonly å…³é”®å­—</h3><p>readonly å…³é”®å­—åªèƒ½ç”¨æˆ·å±æ€§ä¸­ï¼Œå’Œ Java ä¸­çš„ final å…³é”®å­—æ•ˆæœç±»ä¼¼ï¼Œä¹Ÿå°±æ˜¯åªè¯»ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Person4</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">readonly</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">18</span>    <span class="token keyword">constructor</span><span class="token punctuation">(</span>age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>å½“ä¸åŠ ç±»å‹æ—¶ï¼Œts ä¼šæ¨æ–­æˆ 18 çš„å­—é¢é‡ç±»å‹ï¼Œåªè¦æ˜¯ readonly ä¿®é¥°çš„å±æ€§æœ€å¥½æ˜¯è¦æŒ‡å®šå…¶ç±»å‹ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Person5</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">readonly</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">&#125;</span></code></pre><h3 id="æˆå‘˜å¯è§æ€§"><a href="#æˆå‘˜å¯è§æ€§" class="headerlink" title="æˆå‘˜å¯è§æ€§"></a>æˆå‘˜å¯è§æ€§</h3><p>ç›®å‰æœ‰ä¸‰ç§ publicï¼ˆé»˜è®¤å¯è§æ€§ï¼‰ã€protectedã€privateã€‚ä¸Šè¿°çš„å®ä¾‹éƒ½æ˜¯ public ç±»å‹ï¼Œæˆå‘˜çš„å±æ€§å’Œæ–¹æ³•éƒ½å¯ä»¥è®¿é—®åˆ°ï¼Œè¿™é‡Œå°±ä¸å†å±•ç¤ºã€‚</p><p>protected å—ä¿æŠ¤çš„å±æ€§å’Œæ–¹æ³•åªæœ‰è‡ªå·±æˆ–è€…çˆ¶ç±»ä¸­å—ä¿æŠ¤çš„æˆå‘˜ï¼Œä½†æ˜¯å¯¹å®ä¾‹æ˜¯ä¸å¯è§çš„ã€‚</p><p>private ç§æœ‰å±æ€§å’Œæ–¹æ³•åªå¯¹è‡ªå·±å¯è§ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Animal3</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">protected</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'moving along'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è·‘èµ·æ¥'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">__run__</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token function">__run__</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å†…éƒ¨è¾…åŠ©éŸ©å¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Dog3</span> <span class="token keyword">extends</span> <span class="token class-name">Animal3</span> <span class="token punctuation">&#123;</span>    name <span class="token operator">=</span> <span class="token string">'æŸ¯åŸº'</span>    <span class="token keyword">private</span> <span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ±ª'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment">// this.__run__() // ä¸èƒ½è®¿é—®åˆ°çˆ¶ç±»çš„ç§æœ‰æ–¹æ³•ï¼ŒæŠ¥é”™</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> d3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// d3.move() // å—ä¿æŠ¤çš„å±æ€§ä¸èƒ½åœ¨å®ä¾‹ä¸­è®¿é—®ï¼Œä¼šæŠ¥é”™</span></code></pre><h2 id="å…¼å®¹æ€§"><a href="#å…¼å®¹æ€§" class="headerlink" title="å…¼å®¹æ€§"></a>å…¼å®¹æ€§</h2><p>å…¼å®¹æ€§åˆæœ‰ç±»å…¼å®¹æ€§ã€æ¥å£çš„å…¼å®¹æ€§å’Œå‡½æ•°å‚æ•°å…¼å®¹æ€§ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬è¿­ä»£æ•°ç»„é‡Œçš„å…ƒç´ æ—¶ï¼Œç”¨åˆ° forEach æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨å†™å›è°ƒæ—¶å¯ä»¥æœ‰ä¸‰ç§å†™æ³•ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span>arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre><h3 id="ç±»å…¼å®¹æ€§"><a href="#ç±»å…¼å®¹æ€§" class="headerlink" title="ç±»å…¼å®¹æ€§"></a>ç±»å…¼å®¹æ€§</h3><p>å¯¹äºç±»å’Œæ¥å£ç±»å‹æ¥è¯´ï¼Œy çš„æˆå‘˜è‡³å°‘ä¸ x ç›¸åŒï¼Œåˆ™ x å…¼å®¹ yï¼ˆ æˆå‘˜å¤šçš„å¯ä»¥èµ‹å€¼ç»™å°‘ï¼‰ã€‚</p><p>ä¸¤ä¸ªç±»çš„å±æ€§ç›¸åŒ</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Point2</span> <span class="token punctuation">&#123;</span>    x<span class="token operator">:</span> <span class="token builtin">number</span>    y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Point2D</span> <span class="token punctuation">&#123;</span>    x<span class="token operator">:</span> <span class="token builtin">number</span>    y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> point2<span class="token operator">:</span> Point2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point2D</span><span class="token punctuation">(</span><span class="token punctuation">)</span> </code></pre><p>å¤šçš„ç»™å°‘çš„</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Point3D</span> <span class="token punctuation">&#123;</span>    x<span class="token operator">:</span> <span class="token builtin">number</span>    y<span class="token operator">:</span> <span class="token builtin">number</span>    z<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Point2D</span> <span class="token punctuation">&#123;</span>    x<span class="token operator">:</span> <span class="token builtin">number</span>    y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> point3<span class="token operator">:</span> Point2D <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point3D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span> point4<span class="token operator">:</span> Point3D <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point2D</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// é”™è¯¯çš„</span></code></pre><h3 id="æ¥å£å…¼å®¹æ€§"><a href="#æ¥å£å…¼å®¹æ€§" class="headerlink" title="æ¥å£å…¼å®¹æ€§"></a>æ¥å£å…¼å®¹æ€§</h3><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">Point2D</span> <span class="token punctuation">&#123;</span>    x<span class="token operator">:</span> <span class="token builtin">number</span>    y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">&#125;</span><span class="token keyword">interface</span> <span class="token class-name">Point3D</span> <span class="token punctuation">&#123;</span>    x<span class="token operator">:</span> <span class="token builtin">number</span>    y<span class="token operator">:</span> <span class="token builtin">number</span>    z<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">&#125;</span><span class="token keyword">let</span> pp2<span class="token operator">:</span> Point2D<span class="token keyword">let</span> pp3<span class="token operator">:</span> Point3Dpp2 <span class="token operator">=</span> pp3 <span class="token comment">// æ­£ç¡®</span>pp3 <span class="token operator">=</span> pp2 <span class="token comment">// é”™è¯¯</span></code></pre><h3 id="å‡½æ•°å‚æ•°å…¼å®¹æ€§"><a href="#å‡½æ•°å‚æ•°å…¼å®¹æ€§" class="headerlink" title="å‡½æ•°å‚æ•°å…¼å®¹æ€§"></a>å‡½æ•°å‚æ•°å…¼å®¹æ€§</h3><p>çœ‹å¯¹è±¡ä¸­çš„å±æ€§ï¼Œå±æ€§å°‘çš„åˆ†é…ç»™å±æ€§å¤šçš„ã€‚å’Œä¸Šé¢æ­£å¥½åè¿‡æ¥ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F1</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F2</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token keyword">let</span> f1<span class="token operator">:</span> <span class="token function-variable function">F1</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> f2<span class="token operator">:</span> <span class="token constant">F2</span> <span class="token operator">=</span> f1</code></pre><p>å‡½æ•°çš„å‚æ•°ä¸ºå¯¹è±¡æ—¶ï¼Œçœ‹å¯¹è±¡ä¸­çš„å±æ€§ï¼Œå±æ€§å°‘çš„åˆ†é…ç»™å±æ€§å¤šçš„ã€‚</p><p>è¿”å›å€¼çš„å…¼å®¹æ€§æŒ‰ç…§å…¶è¿”å›å€¼æœ¬èº«ï¼Œå¦‚æœæ˜¯åŸºæœ¬ç±»å‹å¿…é¡»è¦ç›¸ç­‰ã€‚å¦‚æœæ˜¯å¯¹è±¡ï¼Œåˆ™æŒ‰ç…§å¯¹è±¡çš„å…¼å®¹æ€§è§„åˆ™å³å¯ã€‚</p><h2 id="äº¤å‰ç±»å‹"><a href="#äº¤å‰ç±»å‹" class="headerlink" title="äº¤å‰ç±»å‹"></a>äº¤å‰ç±»å‹</h2><p>å°†æ¥å£ä¸­å®šä¹‰çš„éƒ¨åˆ†ä½¿ç”¨â€œ&amp;â€æ¥å°†ä¸¤ä¸ªç±»å‹åˆå¹¶ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">Person7</span> <span class="token punctuation">&#123;</span>    name<span class="token operator">:</span> <span class="token builtin">string</span>    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">&#125;</span><span class="token keyword">interface</span> <span class="token class-name">Contact</span> <span class="token punctuation">&#123;</span>    phone<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">&#125;</span><span class="token keyword">type</span> <span class="token class-name">PersonDetail</span> <span class="token operator">=</span> Person7 <span class="token operator">&amp;</span> Contact<span class="token keyword">let</span> obj1<span class="token operator">:</span> PersonDetail <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    name<span class="token operator">:</span> <span class="token string">'jack'</span><span class="token punctuation">,</span>    phone<span class="token operator">:</span> <span class="token string">'114'</span><span class="token punctuation">,</span>    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token number">12</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span></code></pre><p>è¿™ç§æ„Ÿè§‰å’Œ extends ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒä»¬è¿˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼Œä¼šæŠ¥é”™ï¼</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">Person7</span> <span class="token punctuation">&#123;</span>    name<span class="token operator">:</span> <span class="token builtin">string</span>    <span class="token function">say</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">&#125;</span><span class="token keyword">interface</span> <span class="token class-name">Contact</span> <span class="token keyword">extends</span> <span class="token class-name">Person7</span> <span class="token punctuation">&#123;</span>    phone<span class="token operator">:</span> <span class="token builtin">string</span>    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">&#125;</span></code></pre><p>vscode æç¤ºä¼šæç¤ºæ¥å£ä¸å…¼å®¹çš„é”™è¯¯ã€‚</p><p><img src="/journal/ts-class-compatible-overlapping/image-20221128181747317.png" alt="image-20221128181747317" loading="lazy"></p><p>ä½¿ç”¨ &amp; å°±ä¸ä¼šå‡ºé—®é¢˜äº†ï¼Œvscode æç¤ºè¿™ä¸ªåˆå¹¶ä¹‹åè¯¥æ–¹æ³•è¢«é‡è½½äº†ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// (method) say(): number (+1 overload)</span><span class="token keyword">type</span> <span class="token class-name">PersonDetail</span> <span class="token operator">=</span> Person7 <span class="token operator">&amp;</span> Contact<span class="token keyword">let</span> obj1<span class="token operator">:</span> PersonDetail <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    name<span class="token operator">:</span> <span class="token string">'jack'</span><span class="token punctuation">,</span>    phone<span class="token operator">:</span> <span class="token string">'114'</span><span class="token punctuation">,</span>    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token number">12</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TypeScript åŸºç¡€å°ç»“</title>
      <link href="/journal/ts-basic/"/>
      <url>/journal/ts-basic/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>å®‰è£… typescript ç¼–è¯‘å™¨</p><pre class="language-sh" data-language="sh"><code class="language-sh">&gt; npm i -g typescript</code></pre><p>å®‰è£… ts-node å’Œ ts-libï¼Œä½¿ç”¨ ts-node å¯ä»¥ç›´æ¥è¿è¡Œ ts æ–‡ä»¶ï¼ŒæœŸé—´ä¹Ÿä¸ä¼šäº§ç”Ÿ js æ–‡ä»¶</p><pre class="language-sh" data-language="sh"><code class="language-sh">&gt; npm i -g ts-node&gt; npm i -g tslib @types&#x2F;node</code></pre><span id="more"></span><h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><p>æ–°å»ºä¸€ä¸ª hello.ts æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"hello ts"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä½¿ç”¨ tsc å‘½ä»¤ç¼–è¯‘ç”Ÿæˆ hello.js æ–‡ä»¶ã€‚</p><pre class="language-sh" data-language="sh"><code class="language-sh">&gt; tsc hello.ts</code></pre><p>è¿è¡Œ js æ–‡ä»¶</p><pre class="language-sh" data-language="sh"><code class="language-sh">&gt; node hello.js</code></pre><h2 id="ç±»å‹"><a href="#ç±»å‹" class="headerlink" title="ç±»å‹"></a>ç±»å‹</h2><h3 id="åŸºæœ¬çš„"><a href="#åŸºæœ¬çš„" class="headerlink" title="åŸºæœ¬çš„"></a>åŸºæœ¬çš„</h3><p>ä½¿ç”¨ js çš„å·²æœ‰ç±»å‹ï¼šnumber,string,boolean,null,undefined,symbol</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">let</span> grade<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">18</span><span class="token keyword">let</span> username<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'å¼ ä¸‰'</span><span class="token keyword">let</span> graduated<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token keyword">let</span> classes<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token keyword">let</span> couple<span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token keyword">let</span> s<span class="token operator">:</span> <span class="token builtin">symbol</span> <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="è”åˆç±»å‹"><a href="#è”åˆç±»å‹" class="headerlink" title="è”åˆç±»å‹"></a>è”åˆç±»å‹</h3><p>è¯¥å˜é‡å¯ä»¥æœ‰å¤šç§ç±»å‹ï¼Œæ¯”å¦‚ä¸‹é¢çš„ date å˜é‡æ—¢å¯ä»¥æ˜¯ string åˆå¯ä»¥æ˜¯ null ç±»å‹ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">let</span> date<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span>date <span class="token operator">=</span> <span class="token string">'2022-12-23'</span></code></pre><h3 id="å¯¹è±¡ç±»å‹"><a href="#å¯¹è±¡ç±»å‹" class="headerlink" title="å¯¹è±¡ç±»å‹"></a>å¯¹è±¡ç±»å‹</h3><h4 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h4><p>å®šä¹‰ä¸€ä¸ªæ•°ç»„</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// æ•°ç»„</span><span class="token keyword">let</span> numbers<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token keyword">let</span> <span class="token builtin">string</span><span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">]</span><span class="token keyword">let</span> bs<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token keyword">let</span> bs2<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">]</span><span class="token comment">// è‡ªå®šä¹‰ç±»å‹ï¼ˆç±»å‹åˆ«åï¼‰</span><span class="token keyword">type</span> <span class="token class-name">CustomArray</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">let</span> arr1<span class="token operator">:</span> CustomArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">]</span></code></pre><p>æ•°ç»„ä¸­å­˜æ”¾ä¸¤ç§ä¸åŒçš„ç±»å‹</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">let</span> numbers2<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">'7'</span><span class="token punctuation">,</span> <span class="token string">'8'</span><span class="token punctuation">]</span></code></pre><blockquote><p>ä¸€å®šè¦åŠ ä¸Šæ‹¬å·ï¼Œä¸ç„¶å°±æ˜¯ä¸¤ç§æ„æ€äº†</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">let</span> var2<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>var2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'12'</span><span class="token punctuation">,</span> <span class="token string">'22'</span><span class="token punctuation">]</span></code></pre></blockquote><h4 id="å…ƒç»„"><a href="#å…ƒç»„" class="headerlink" title="å…ƒç»„"></a>å…ƒç»„</h4><p>å…ƒç»„ç±»å‹æ˜¯å¦ä¸€ç§ç±»å‹çš„æ•°ç»„ï¼Œå®ƒç¡®åˆ‡åœ°çŸ¥é“åŒ…å«å¤šå°‘ä¸ªå…ƒç´ ï¼Œä»¥åŠç‰¹å®šç´¢å¼•å¯¹åº”çš„ç±»å‹ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">let</span> position2<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">111.234</span><span class="token punctuation">,</span> <span class="token number">231.333</span><span class="token punctuation">]</span></code></pre><h3 id="å­—é¢é‡ç±»å‹"><a href="#å­—é¢é‡ç±»å‹" class="headerlink" title="å­—é¢é‡ç±»å‹"></a>å­—é¢é‡ç±»å‹</h3><p>ä¸‹é¢çš„ â€˜Hello TSâ€™ï¼Œå°±æ˜¯ä¸€ä¸ªå­—é¢é‡ç±»å‹ã€‚ä¹Ÿå°±æ˜¯è¯´æŸä¸ªç‰¹å®šçš„å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥ä½œä¸º TS ä¸­çš„ç±»å‹ã€‚é™¤å­—ç¬¦ä¸²å¤–ï¼Œä»»æ„çš„ JS å­—é¢é‡ï¼ˆæ¯”å¦‚ï¼Œå¯¹è±¡ã€æ•°å­—ç­‰ï¼‰éƒ½å¯ä»¥ä½œä¸ºç±»å‹ä½¿ç”¨ã€‚</p><pre class="language-none"><code class="language-none">let str2: &#39;Hello TS&#39; &#x3D; &#39;Hello TS&#39;</code></pre><p>ä½¿ç”¨æ¨¡å¼ï¼šå­—é¢é‡ç±»å‹é…åˆè”åˆç±»å‹ä¸€èµ·ä½¿ç”¨ã€‚</p><p>ä½¿ç”¨åœºæ™¯ï¼šç”¨æ¥è¡¨ç¤ºä¸€ç»„æ˜ç¡®çš„å¯é€‰å€¼åˆ—è¡¨ã€‚</p><p>æ¯”å¦‚ï¼Œåœ¨è´ªåƒè›‡æ¸¸æˆä¸­ï¼Œæ¸¸æˆçš„æ–¹å‘çš„å¯é€‰å€¼åªèƒ½æ˜¯ä¸Šã€ä¸‹ã€å·¦ã€å³ä¸­çš„ä»»æ„ä¸€ä¸ªã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">let</span> direction<span class="token operator">:</span> <span class="token string">'up'</span> <span class="token operator">|</span> <span class="token string">'right'</span> <span class="token operator">|</span> <span class="token string">'down'</span> <span class="token operator">|</span> <span class="token string">'left'</span> <span class="token operator">=</span> <span class="token string">'up'</span>direct <span class="token operator">=</span> <span class="token string">'right'</span></code></pre><h3 id="æšä¸¾ç±»å‹"><a href="#æšä¸¾ç±»å‹" class="headerlink" title="æšä¸¾ç±»å‹"></a>æšä¸¾ç±»å‹</h3><p>æšä¸¾å®šä¹‰ï¼Œé»˜è®¤æœ‰å€¼ï¼Œä» 0 è‡ªå¢ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">enum</span> Direction <span class="token punctuation">&#123;</span> Up <span class="token punctuation">,</span> Down <span class="token punctuation">,</span> Left<span class="token punctuation">,</span> Right <span class="token punctuation">&#125;</span> <span class="token comment">// Up=0, Down=1, Left=2, Right=3</span></code></pre><p>å¯ä»¥ç»™æšä¸¾åˆå§‹åŒ–å€¼ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">enum</span> Direction <span class="token punctuation">&#123;</span> Up <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> Down <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">,</span> Left<span class="token punctuation">,</span> Right <span class="token punctuation">&#125;</span> <span class="token comment">// Left=13, Right=14</span></code></pre><p>å½“èµ‹å€¼ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œå­—ç¬¦ä¸²æ²¡æœ‰è‡ªå¢çš„èƒ½åŠ›ï¼Œå› æ­¤å¿…é¡»ä¸ºæ¯ä¸ªå…ƒç´ éƒ½èµ‹å€¼ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">enum</span> Direction <span class="token punctuation">&#123;</span> Up <span class="token operator">=</span> <span class="token string">'up'</span><span class="token punctuation">,</span> Down <span class="token operator">=</span> <span class="token string">'down'</span><span class="token punctuation">,</span> Left <span class="token operator">=</span> <span class="token string">'left'</span><span class="token punctuation">,</span> Right <span class="token operator">=</span> <span class="token string">'right'</span> <span class="token punctuation">&#125;</span></code></pre><h3 id="any-ç±»å‹"><a href="#any-ç±»å‹" class="headerlink" title="any ç±»å‹"></a>any ç±»å‹</h3><p>any ç±»å‹ä»£è¡¨ä»»æ„ç±»å‹ã€‚éå¸¸å®¹æ˜“åœ¨å†™ä»£ç å‡ºç°é—®é¢˜ï¼Œæ…ç”¨ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">let</span> a<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token number">1</span>a <span class="token operator">=</span> <span class="token string">'a'</span>a <span class="token operator">=</span> <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'xiaoqiang'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">15</span> <span class="token punctuation">&#125;</span><span class="token function-variable function">a</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token string">'ok'</span></code></pre><p>åœ¨å‡½æ•°ä¸­çš„å‚æ•°ï¼Œè‹¥ä¸æŒ‡å®šå‚æ•°ç±»å‹ï¼Œts å°†å…¶è®¤ä¸ºæ˜¯ any ç±»å‹ï¼Œå…¶è¿”å›å€¼ä¹Ÿä¼šè®¤ä¸ºæ˜¯ any ç±»å‹</p><p><img src="/journal/ts-basic/image-20221124174836277.png" alt="image-20221124174836277" loading="lazy"></p><h2 id="è‡ªå®šä¹‰ç±»å‹"><a href="#è‡ªå®šä¹‰ç±»å‹" class="headerlink" title="è‡ªå®šä¹‰ç±»å‹"></a>è‡ªå®šä¹‰ç±»å‹</h2><p>è‡ªå®šä¹‰ç±»å‹ä½¿ç”¨ type å…³é”®å­—</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">type</span> <span class="token class-name">direction</span> <span class="token operator">=</span> <span class="token string">'up'</span> <span class="token operator">|</span> <span class="token string">'right'</span> <span class="token operator">|</span> <span class="token string">'down'</span> <span class="token operator">|</span> <span class="token string">'left'</span> <span class="token operator">=</span> <span class="token string">'up'</span></code></pre><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><p>åƒå‡½æ•°ä¸­æŒ‡å®šç±»å‹å’Œè¿”å›å€¼ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">changeDirection</span><span class="token punctuation">(</span>direction<span class="token operator">:</span> direction<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">&#123;</span>    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>direction<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>æŸäº›å‚æ•°æœ‰æ—¶å¯ä¸ç”¨ä¼ ï¼Œå¯ä»¥åŠ ä¸ªâ€œ?â€æ ‡è®°ä¸ºå¯é€‰å‚æ•°ï¼Œä½†æ˜¯å¿…é€‰å‚æ•°ä¸€å®šè¦åœ¨å‰é¢ï¼</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">slice</span><span class="token punctuation">(</span>start<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> end<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">&#123;</span>     <span class="token comment">// slice todo</span><span class="token punctuation">&#125;</span></code></pre><p>ä¸¤æ•°ç›¸åŠ </p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>num1<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> num2<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">&#125;</span></code></pre><h3 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h3><p>ç®­å¤´å½¢å¼çš„å‡½æ•°æœ‰ä¸¤ç§å½¢å¼ï¼Œä¸‹é¢æ˜¯ç¬¬ä¸€ç§ï¼Œå®ƒæ˜¯ç”± A å˜æˆ Bã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">let</span> <span class="token function-variable function">add2</span> <span class="token operator">=</span> <span class="token punctuation">(</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">)</span> <span class="token operator">=></span> num1 <span class="token operator">+</span> num2 <span class="token comment">// A</span><span class="token keyword">let</span> add2 <span class="token operator">=</span> <span class="token punctuation">(</span>num1<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> num2<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=></span> num1 <span class="token operator">+</span> num2 <span class="token comment">// B</span></code></pre><p>ç¬¬äºŒç§å½¢å¼ï¼ŒæŒ‡å®šä¸€ä¸ªâ€œå‡½æ•°ç±»å‹â€å¹¶ä¸”æŒ‡å®šâ€œè¿”å›å€¼ç±»å‹â€ï¼Œè¿™ä¸ªè‡ªå·±æ„Ÿè§‰å†™æ³•ä¸Šéº»çƒ¦å¾ˆå¤šã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> <span class="token function-variable function">add3</span><span class="token operator">:</span> <span class="token punctuation">(</span>num1<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> num2<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function-variable function">number</span> <span class="token operator">=</span> <span class="token punctuation">(</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">&#125;</span></code></pre><h2 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h2><p>æè¿°å¯¹è±¡çš„ç»“æ„ï¼Œæ¯ä¸€ä¸ªå®šä¹‰ä¸ç”¨é€—å·æˆ–åˆ†å·ç»“æŸï¼Œä¸”åªèƒ½ä¸ºå¯¹è±¡æŒ‡å®šç±»å‹ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">IPerson</span> <span class="token punctuation">&#123;</span>    name<span class="token operator">:</span> <span class="token builtin">string</span>    age<span class="token operator">:</span> <span class="token builtin">number</span>    <span class="token function-variable function">sayhi</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> person3<span class="token operator">:</span> IPerson <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    name<span class="token operator">:</span> <span class="token string">'jack'</span><span class="token punctuation">,</span>    age<span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>    <span class="token function">sayhi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> person4<span class="token operator">:</span> IPerson <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    name<span class="token operator">:</span> <span class="token string">"xiaoqiang"</span><span class="token punctuation">,</span>    age<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>    <span class="token function">sayhi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="å¯é€‰å±æ€§"><a href="#å¯é€‰å±æ€§" class="headerlink" title="å¯é€‰å±æ€§"></a>å¯é€‰å±æ€§</h3><p>å¯é€‰å±æ€§å’Œå‡½æ•°çš„å‚æ•°ä¸€æ ·ï¼ŒåŠ ä¸ªâ€œ?â€å³å¯ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">IPerson</span> <span class="token punctuation">&#123;</span>    name<span class="token operator">:</span> <span class="token builtin">string</span>    age<span class="token operator">:</span> <span class="token builtin">number</span>    sayhi<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">&#125;</span><span class="token keyword">const</span> person2<span class="token operator">:</span> IPerson <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    name<span class="token operator">:</span> <span class="token string">'jack'</span><span class="token punctuation">,</span>    age<span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>    <span class="token function">greet</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="æ¥å£ç»§æ‰¿"><a href="#æ¥å£ç»§æ‰¿" class="headerlink" title="æ¥å£ç»§æ‰¿"></a>æ¥å£ç»§æ‰¿</h3><p>ç»§æ‰¿ä½¿ç”¨ extends å…³é”®å­—ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">Point2D</span> <span class="token punctuation">&#123;</span>    x<span class="token operator">:</span> <span class="token builtin">number</span>    y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">&#125;</span><span class="token keyword">interface</span> <span class="token class-name">Point3D</span> <span class="token keyword">extends</span> <span class="token class-name">Point2D</span> <span class="token punctuation">&#123;</span>    z<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">&#125;</span></code></pre><h2 id="ç±»å‹æ¨æ–­å’Œæ–­è¨€"><a href="#ç±»å‹æ¨æ–­å’Œæ–­è¨€" class="headerlink" title="ç±»å‹æ¨æ–­å’Œæ–­è¨€"></a>ç±»å‹æ¨æ–­å’Œæ–­è¨€</h2><h3 id="æ¨æ–­"><a href="#æ¨æ–­" class="headerlink" title="æ¨æ–­"></a>æ¨æ–­</h3><p>å¤šæ¬¡ç»™å±æ€§å®šä¹‰ç±»å‹æˆ–è®¸å¾ˆéº»çƒ¦ï¼Œä½†æ˜¯ ts ä¼šåšä¸€ä¸ªç±»å‹æ¨æ–­ï¼Œè¿™æ ·ä¸€æ¥å°±å®Œå…¨æ²¡æœ‰å¿…è¦å»æŒ‡å®šå˜é‡çš„ç±»å‹äº†ã€‚ä½†æ˜¯ç±»å‹æ¨æ–­çš„å‰ææ˜¯è¯¥ç±»å‹å¿…é¡»è¦èµ‹å€¼ã€‚</p><p>ä¸‹å›¾å£°æ˜äº†ä¸€ä¸ª age5 çš„å˜é‡ï¼Œå€¼ä¸º 18ã€‚ts å°†å…¶åˆ¤å®šä¸º number ç±»å‹ã€‚</p><p><img src="/journal/ts-basic/image-20221124171911530.png" alt="image-20221124171911530" loading="lazy"></p><p>å°è¯•èµ‹å€¼ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½†æ˜¯æŠ¥é”™äº†â€œä¸èƒ½å°† string  åˆ†é…ç»™ number å‹â€ï¼Œè¯´æ˜ typescript å¾ˆæ™ºèƒ½çš„ã€‚</p><p><img src="/journal/ts-basic/image-20221124172220662.png" alt="image-20221124172220662" loading="lazy"></p><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå‡½æ•°çš„è¿”å›å€¼ä¹Ÿå¯ä»¥è¢«æ¨æ–­å‡ºæ¥ï¼Œæ¯”å¦‚ä¸¤æ•°ç›¸åŠ ï¼Œè¿”å›å€¼ç±»å‹ä¸º number ç±»å‹ã€‚</p><p><img src="/journal/ts-basic/image-20221124174633745.png" alt="image-20221124174633745" loading="lazy"></p><p>è‹¥åªå£°æ˜å´ä¸èµ‹å€¼ï¼Œä¼šéšå¼çš„å˜æˆ any ç±»å‹ï¼Œç±»å‹æ¨æ–­å¤±æ•ˆäº†ã€‚æ­¤æ—¶åªèƒ½å»æ‰‹åŠ¨æŒ‡å®šå…¶ç±»å‹ã€‚</p><p><img src="/journal/ts-basic/image-20221124172931575.png" alt="image-20221124172931575" loading="lazy"></p><h3 id="æ–­è¨€"><a href="#æ–­è¨€" class="headerlink" title="æ–­è¨€"></a>æ–­è¨€</h3><p>å½“æˆ‘ä»¬ç¡®åˆ‡çš„çŸ¥é“æˆ‘ä»¬æƒ³è¦çš„ç±»å‹çš„æ—¶å€™ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ as å…³é”®å­—æˆ–è€…ä½¿ç”¨ &lt;&gt; æ¥åŠ å…¥éœ€è¦çš„ç±»å‹ã€‚</p><p>æ¯”å¦‚æˆ‘æƒ³é€šè¿‡ ts è·å– a æ ‡ç­¾ä¸­çš„ href å±æ€§ï¼Œè·å–çš„ä»£ç å¦‚ä¸‹ã€‚</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> aLink <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"link"</span><span class="token punctuation">)</span></code></pre><p>ä½†æ˜¯æ­¤æ—¶æ˜¯å¦‚ä½•ä¹Ÿè·å–ä¸åˆ° href å±æ€§ï¼Œé€šè¿‡ç™¾åº¦å‘ç° href å±æ€§åœ¨ HTMLAnchorElement ä¸­ã€‚æ­¤æ—¶å¯ä»¥è¿™æ ·çš„ä¸¤ç§å†™æ³•ã€‚ as å’Œ &lt;&gt;</p><pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// as</span><span class="token keyword">const</span> aLink <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"link"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLAnchorElement<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>aLink<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token comment">// &lt;></span><span class="token keyword">const</span> aLink2 <span class="token operator">=</span> <span class="token operator">&lt;</span>HTMLAnchorElement<span class="token operator">></span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'link'</span><span class="token punctuation">)</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>aLink2<span class="token punctuation">.</span>href<span class="token punctuation">)</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sentinel æµæ§æ¨¡å¼å’Œæµæ§å¤„ç†</title>
      <link href="/journal/sentinel-flow/"/>
      <url>/journal/sentinel-flow/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æµæ§æ¨¡å¼"><a href="#æµæ§æ¨¡å¼" class="headerlink" title="æµæ§æ¨¡å¼"></a>æµæ§æ¨¡å¼</h2><p>æµæ§æ¨¡å¼åˆ†ä¸ºä¸‰ç§ï¼šç›´æ¥ã€å…³è”å’Œé“¾è·¯</p><h3 id="ç›´æ¥"><a href="#ç›´æ¥" class="headerlink" title="ç›´æ¥"></a>ç›´æ¥</h3><p>ç›´æ¥å°±æ˜¯åªé™åˆ¶å•ä¸ªèµ„æºï¼Œå¯ä»¥æ˜¯æ¥å£ï¼Œä¹Ÿå¯ä»¥æ˜¯æ ‡è®°äº† <code>@SentinelResource</code> æ³¨è§£çš„ Service æ–¹æ³•ã€‚</p><span id="more"></span><p><img src="/journal/sentinel-flow/image-20221105145131440.png" alt="image-20221105145131440" loading="lazy"></p><h3 id="å…³è”"><a href="#å…³è”" class="headerlink" title="å…³è”"></a>å…³è”</h3><p>å…³è”å°±æ˜¯ A èµ„æºæŠŠ B èµ„æºå…³è”äº†ï¼ŒA èµ„æºçš„è®¿é—®æ¬¡æ•°å¤šäº†ä¼šå½±å“åˆ° B èµ„æºçš„è®¿é—®ï¼Œç±»ä¼¼äºè¿å¸¦çš„æ„æ€ã€‚/order/get å¯ä»¥çœ‹ä½œæ—¶ B èµ„æºï¼Œ/order/add å¯ä»¥çœ‹ä½œæ—¶ A èµ„æºï¼Œé…ç½®å¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><img src="/journal/sentinel-flow/image-20221105140617122.png" alt="image-20221105140617122" loading="lazy"></p><h3 id="é“¾è·¯"><a href="#é“¾è·¯" class="headerlink" title="é“¾è·¯"></a>é“¾è·¯</h3><p>é“¾è·¯æµæ§ï¼Œæ¯”å¦‚æœ‰ Aã€Bã€C ä¸‰ä¸ªèµ„æºï¼ŒA å’Œ B ä¾èµ–äº Cï¼Œç±»ä¼¼äºæ ‘ç»“æ„ã€‚</p><pre class="language-none"><code class="language-none">  C &#x2F; \A   B </code></pre><p>ç„¶åæˆ‘éœ€è¦å¯¹ B è¿›è¡Œé™æµï¼Œæµé‡å¤ªå¤šçš„åŸå› æ˜¯æ¥è‡ªäº Cï¼Œæ‰€ä»¥æˆ‘è¦åœ¨ C -&gt; B è¿™æ¡é“¾è·¯ä¸­å¯¹ C è¿›è¡Œé™æµã€‚è¿™é‡Œå‡è®¾ C ä¸º getUserï¼ŒA ä¸º /order/test1ï¼ŒB ä¸º /order/test2ï¼Œé…ç½®åº”å¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><img src="/journal/sentinel-flow/image-20221105143837034.png" alt="image-20221105143837034" loading="lazy"></p><p>åœ¨ sentinel 1.6 ä¹‹åï¼Œé“¾è·¯çš„ç»´æŠ¤æ˜¯å…³é—­çš„ï¼Œä¹Ÿå°±æ˜¯åˆåœ¨ä¸€èµ·ï¼ˆunifyï¼‰çš„ã€‚éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ä¸€ä¸‹ã€‚</p><pre class="language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">spring.cloud.sntinel.web-context-unify</span><span class="token punctuation">=</span><span class="token attr-value">false # é»˜è®¤ä¸ç»´æŠ¤è°ƒç”¨é“¾è·¯ï¼Œå…³é—­æ”¶æ•›</span></code></pre><p>æœåŠ¡é‡å¯ä¹‹åï¼Œå†é‡æ–°å»é…ç½®ä¸€ä¸‹ getUser çš„æµæ§ï¼Œé™åˆ¶å…¥å£èµ„æºä¸º /order/test2ã€‚å½“æˆ‘è®¿é—® /order/test2 çš„æ—¶å€™ï¼Œåˆ™è§¦å‘æµæ§å¼‚å¸¸ï¼Œè®¿é—® /order/test1 ï¼Œç”±äºé™åˆ¶çš„å…¥å£ä¸º /order/test2ï¼Œä¸ä¼šè§¦å‘å¼‚å¸¸ã€‚</p><h2 id="æµæ§æ•ˆæœ"><a href="#æµæ§æ•ˆæœ" class="headerlink" title="æµæ§æ•ˆæœ"></a>æµæ§æ•ˆæœ</h2><p>æµæ§æ•ˆæœåˆ†ä¸º 3 ç§ï¼šå¿«é€Ÿå¤±è´¥ã€Warm Upã€æ’é˜Ÿç­‰å¾…</p><h3 id="å¿«é€Ÿå¤±è´¥"><a href="#å¿«é€Ÿå¤±è´¥" class="headerlink" title="å¿«é€Ÿå¤±è´¥"></a>å¿«é€Ÿå¤±è´¥</h3><p>å¿«é€Ÿå¤±è´¥ï¼Œå½“è¶…è¿‡äº†è®¾ç½®çš„é˜ˆå€¼æ—¶ï¼Œè¶…è¿‡éƒ¨åˆ†ä¼šè¢«æ‹’ç»ï¼Œå³æŠ›æµæ§å¼‚å¸¸ã€‚å¼‚å¸¸å¯ä»¥é…ç½®å…¨å±€çš„å’Œå±€éƒ¨çš„ï¼Œå…¨å±€çš„å¼‚å¸¸éœ€è¦å»å®ç° <code>BlockExceptionHandler</code> æ¥å£æ¥å¤„ç†ã€‚å±€éƒ¨çš„å¼‚å¸¸éœ€è¦åœ¨ <code>@SentinelResource</code> æ³¨è§£ä¸­æŒ‡å®š <code>blockHandler</code> å±æ€§ï¼Œä¸€èˆ¬å°±æ˜¯æœ¬ç±»ä¸­çš„æ–¹æ³•ï¼Œä¸”æ–¹æ³•å¿…é¡»ä¸º publicã€è¿”å›å€¼ä¹Ÿä¸€å®šå’Œæ¥å£ã€æ–¹æ³•åä¸­çš„è¿”å›å€¼ä¸€è‡´ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/flowthread"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"flow"</span><span class="token punctuation">,</span> blockHandler <span class="token operator">=</span> <span class="token string">"flowBlockHandler"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">flowThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"æ­£å¸¸è®¿é—®thread"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">flowBlockHandler</span><span class="token punctuation">(</span><span class="token class-name">BlockException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token string">"æµæ§äº†ï¼"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>è‹¥åœ¨å…¶å®ƒç±»ä¸­åˆ™æŒ‡å®š <code>blockHandlerClass</code> ã€‚</p><h3 id="Warm-Up"><a href="#Warm-Up" class="headerlink" title="Warm Up"></a>Warm Up</h3><p>Warm Up åˆç§°é¢„çƒ­/å†·å¯åŠ¨ã€‚å½“ä¸€ä¸ªæœåŠ¡å¤„äºä½æµé‡çš„æ—¶å€™ï¼Œçªç„¶æµé‡æ¿€å¢å¯èƒ½ä¼šå¯¼è‡´æœåŠ¡å“åº”æ…¢ç”šè‡³æ˜¯å´©æºƒï¼Œä¸ºäº†èƒ½å¤ŸæŠµå¾¡ä½çªå¦‚å…¶æ¥çš„æµé‡æ—¶ï¼Œåœ¨åˆ°è¾¾é˜ˆå€¼ä¹‹åï¼Œåœ¨è§„å®šçš„æ—¶é—´å°†æœåŠ¡é¢„çƒ­ï¼Œè®©é€šè¿‡çš„æµé‡ç¼“æ…¢å¢åŠ ï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºç°æœåŠ¡å®•æœºçš„é—®é¢˜äº†ã€‚</p><p>è¯´èµ·æ¥æœ‰ç‚¹è´¹åŠ²ï¼Œä½†æ˜¯é€šè¿‡è¿™å¼ å›¾å°±èƒ½æ„Ÿè§‰åˆ°äº†ã€‚</p><p><img src="/journal/sentinel-flow/image-20221105233519118.png" alt="image-20221105233519118" loading="lazy"></p><p>åœ¨ sentinel ä¸­ï¼Œé»˜è®¤çš„å†·åŠ è½½å› å­ï¼ˆcodeFactorï¼‰ä¸º 3ï¼ŒQPS = thresholdï¼ˆé˜ˆå€¼ï¼‰/ 3ï¼Œéšç€è®¿é—®å¢å¤šï¼Œç»é¢„çƒ­æ—¶é•¿é€æ¸å‡è‡³è®¾å®šçš„ QPS é˜ˆå€¼ã€‚</p><p>åœ¨ä¸Šå›¾çš„é¢„çƒ­æˆªå›¾ä¸­ï¼Œå¯¹åº”çš„é…ç½®å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="/journal/sentinel-flow/image-20221105233700340.png" alt="image-20221105233700340" loading="lazy"></p><h3 id="æ’é˜Ÿç­‰å¾…"><a href="#æ’é˜Ÿç­‰å¾…" class="headerlink" title="æ’é˜Ÿç­‰å¾…"></a>æ’é˜Ÿç­‰å¾…</h3><p>æ’é˜Ÿç­‰å¾…é€‚ç”¨äºé—´éš”æ€§çš„çªå‘æµé‡ï¼Œä¹Ÿå°±æ˜¯åœ¨æŸä¸€ç§’æœ‰å¤§é‡é—´éš”ï¼Œç„¶åå‡ ç§’çš„æ—¶é—´ç©ºé—²ï¼Œç„¶ååˆæœ‰çªå‘æµé‡æ¶Œå…¥ã€‚ä¾‹å¦‚æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p><p>è¿™é‡Œä½¿ç”¨äº† JMeter æµ‹è¯•å·¥å…·æ¨¡æ‹Ÿé—´éš”æ€§çªå‘æµé‡çš„æƒ…å†µï¼ŒQPS æ•°è¶…è¿‡ 5 æ—¶ï¼Œç›´æ¥æ‹’ç»æ‰ã€‚</p><p><img src="/journal/sentinel-flow/image-20221118180132972.png" alt="image-20221118181403061" loading="lazy"></p><p>æˆ‘ä»¬å¸Œæœ›ç³»ç»Ÿèƒ½å¤Ÿåœ¨æ¥ä¸‹æ¥çš„ç©ºé—²æœŸé—´é€æ¸å¤„ç†è¿™äº›è¯·æ±‚ï¼Œè€Œä¸æ˜¯æ‹’ç»æ‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç¼–è¾‘æµæ§è§„åˆ™ï¼Œå°†æµæ§æ•ˆæœè®¾ç½®æˆâ€œæ’é˜Ÿç­‰å¾…â€ï¼Œä¸”è®¾ç½®æ’é˜Ÿè¶…æ—¶æ—¶é—´ä¸º 5 ç§’ã€‚</p><p><img src="/journal/sentinel-flow/image-20221115152545286.png" alt="image-20221115152545286" loading="lazy"></p><p>è®¾ç½®ä¹‹åçš„æ•ˆæœï¼ŒQPS å…¨éƒ¨é€šè¿‡ï¼Œå› ä¸ºåç«¯æœ‰èƒ½åŠ›èƒ½åœ¨ 5 ç§’å†…å°†é€»è¾‘å¤„ç†å®Œã€‚</p><p><img src="/journal/sentinel-flow/image-20221118182052728.png" alt="image-20221118182052728" loading="lazy"></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> åˆ†å¸ƒå¼ä¸å¾®æœåŠ¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring Cloud Alibaba </tag>
            
            <tag> å¾®æœåŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java-jwt</title>
      <link href="/journal/java-jwt/"/>
      <url>/journal/java-jwt/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="JWT-æ„æˆ"><a href="#JWT-æ„æˆ" class="headerlink" title="JWT æ„æˆ"></a>JWT æ„æˆ</h2><p>JWT æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œçœ‹èµ·æ¥å¦‚ä¸‹æ‰€ç¤ºï¼Œä¸­é—´ç”¨â€œ.â€éš”å¼€åˆ†ä¸ºä¸‰éƒ¨åˆ†ã€‚</p><pre class="language-none"><code class="language-none">eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJjdXN0b20gc3ViamVjdCIsImlzcyI6InpoYW5nc2FuIiwiYXVkIjoibm9ybWFsIHVzZXIiLCJuYmYiOjE2NjYxNzAwMjEsImlhdCI6MTY2NjE2OTk5MSwiZXhwIjoxNjY2MTcwMDUxfQ.QgGH1zo4FXOmG4mIrZDRQ-KaROgLEuKjlL78bGSRg0U</code></pre><p>å…¶ä¸­åˆ†ä¸ºä¸‰éƒ¨åˆ†ä¸ºâ€œHeaderâ€ã€â€œPayloadâ€ã€â€œSignatureâ€ã€‚</p><span id="more"></span><h2 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h2><p>å¤´ï¼ˆHeaderï¼‰ï¼šeyJhbGciOiJIUzI1NiJ9ï¼Œæ˜¯ä¸€ä¸ª json å¯¹è±¡ï¼Œæè¿° JWT çš„å…ƒæ•°æ®ï¼ŒåŒ…å«æ‰€ä½¿ç”¨çš„ç­¾åç®—æ³•ç­‰ç­‰ã€‚ä½¿ç”¨ Base64 ç®—æ³•å°†æ•°æ®è¿›è¡ŒåŠ å¯†ã€‚å¯ä½¿ç”¨ Base64 è§£å¯†å·¥å…·è§£å¯†ï¼Œè§£å¯†ä¹‹åçš„æ•°æ®å¦‚ä¸‹ã€‚</p><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span><span class="token property">"alg"</span><span class="token operator">:</span><span class="token string">"HS256"</span><span class="token punctuation">&#125;</span></code></pre><h2 id="Payload"><a href="#Payload" class="headerlink" title="Payload"></a>Payload</h2><p>è´Ÿè½½ï¼ˆPayloadï¼‰ï¼šä¹Ÿæ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼Œä½¿ç”¨ Base64 ç®—æ³•å°†æ•°æ®è¿›è¡ŒåŠ å¯†ã€‚</p><pre class="language-none"><code class="language-none">eyJzdWIiOiJjdXN0b20gc3ViamVjdCIsImlzcyI6InpoYW5nc2FuIiwiYXVkIjoibm9ybWFsIHVzZXIiLCJuYmYiOjE2NjYxNzAwMjEsImlhdCI6MTY2NjE2OTk5MSwiZXhwIjoxNjY2MTcwMDUxfQ</code></pre><p>è§£å¯†ä¹‹åçš„æ•°æ®</p><pre class="language-none"><code class="language-none">&#123;&quot;sub&quot;:&quot;custom subject&quot;,&quot;iss&quot;:&quot;zhangsan&quot;,&quot;aud&quot;:&quot;normal user&quot;,&quot;nbf&quot;:1666170021,&quot;iat&quot;:1666169991,&quot;exp&quot;:1666170051&#125;</code></pre><p>è§£å¯†åçš„ JSON å­—ä¸²ä¸­ï¼Œæœ‰å¦‚ä¸‹å®˜æ–¹çš„å­—æ®µï¼Œä¸”å‡ä¸ºå¯é€‰</p><ul><li>expï¼ˆexpireï¼‰ï¼šè¿‡æœŸæ—¶é—´</li><li>subï¼ˆsubjectï¼‰ï¼šä¸»é¢˜</li><li>issï¼ˆissuerï¼‰ï¼šç­¾å‘äºº</li><li>audï¼ˆaudienceï¼‰ï¼šå—ä¼—</li><li>nbfï¼ˆnot beforeï¼‰ï¼šç”Ÿæ•ˆæ—¶é—´</li><li>iatï¼ˆissued atï¼‰ï¼šç­¾å‘æ—¶é—´</li><li>jtiï¼ˆJWT IDï¼‰ï¼šç¼–å·</li></ul><p>åŸºäº Java å®ç°çš„ JJWTï¼Œè¿‡æœŸæ—¶é—´å’Œç”Ÿæ•ˆæ—¶é—´å¯ä»¥è®¾å®šï¼Œåœ¨ç‰¹å®šçš„æƒ…å†µä¸‹ä¼šæŠ›å‡º <code>ExpiredJwtException</code> å’Œ <code>PrematureJwtException</code> å¼‚å¸¸ã€‚</p><h2 id="Signature"><a href="#Signature" class="headerlink" title="Signature"></a>Signature</h2><p>ç­¾åï¼ˆSignatureï¼‰:8P1Gnfp1BYL_ViewC_yk1vwsjqF__-UagQDvPJADV9oï¼Œç­¾åå¯é˜²æ­¢æ•°æ®è¢«ç¯¡æ”¹ã€‚</p><p>ç­¾åç®—æ³•å¦‚ä¸‹</p><pre class="language-none"><code class="language-none">method(base64(header) + &quot;.&quot; + base64(payload) + &quot;.&quot; + secret)</code></pre><p>å…¶ä¸­ method ä»£è¡¨çš„ç®—æ³•åç§°ï¼Œå¯ç”¨çš„ç®—æ³•æœ‰å¾ˆå¤šï¼Œåœ¨ JJWT ä¸­å¯ä½¿ç”¨çš„ç­¾åç®—æ³•éƒ½æ”¾åœ¨ SignatureAlgorithm ç±»ä¸­ï¼Œé»˜è®¤ä½¿ç”¨çš„ç­¾åç®—æ³•ä¸º HMAC-SHA256ã€‚</p><p>secretï¼šå¯†é’¥å¿…é¡»åœ¨æœåŠ¡å™¨ä¸­ä¿ç®¡å¥½ï¼Œä¸èƒ½éšæ„å‘ç»™ç”¨æˆ·ã€‚æˆ‘ä»¬ä½¿ç”¨ JJWT çš„ secret ç”Ÿæˆå™¨æ¥ç”Ÿæˆå¯†é’¥ï¼Œå½“ç„¶è‡ªå·±æ¥ç”Ÿæˆä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä½¿ç”¨ç”Ÿæˆå™¨ç”Ÿæˆçš„å¯†é’¥å¦‚ä¸‹ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">SecretKey</span> key <span class="token operator">=</span> <span class="token class-name">MacProvider</span><span class="token punctuation">.</span><span class="token function">generateKey</span><span class="token punctuation">(</span><span class="token class-name">SignatureAlgorithm</span><span class="token punctuation">.</span>HS256<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="ç‰¹ç‚¹ä¸ç”¨é€”"><a href="#ç‰¹ç‚¹ä¸ç”¨é€”" class="headerlink" title="ç‰¹ç‚¹ä¸ç”¨é€”"></a>ç‰¹ç‚¹ä¸ç”¨é€”</h2><p>ä¸»è¦ç”¨äºèº«ä»½è®¤è¯å’Œä¿¡æ¯äº¤æ¢ã€‚</p><p>ä¼˜ç‚¹ï¼šä¸éœ€ç»è¿‡æ•°æ®åº“æ ¡éªŒ</p><p>ç¼ºç‚¹ï¼š</p><ul><li>ä¸€æ—¦ç­¾å‘ï¼Œåªèƒ½ç­‰åˆ°è¿‡æœŸæ‰ä¼šå¤±æ•ˆï¼Œæ— æ³•åœ¨æœŸé—´æ‰‹åŠ¨ç»ˆæ­¢ tokenã€‚</li><li>JWT æ˜¯æ˜æ–‡çš„ï¼Œæœ‰æ•æ„Ÿæ•°æ®æ—¶å¿…é¡»è¦å°† JWT åŠ å¯†ï¼Œä¼ è¾“æ—¶å°½é‡ä½¿ç”¨ HTTPS åè®®ä¼ è¾“æ•°æ®ã€‚</li></ul><h2 id="å®è·µä¸€ä¸‹"><a href="#å®è·µä¸€ä¸‹" class="headerlink" title="å®è·µä¸€ä¸‹"></a>å®è·µä¸€ä¸‹</h2><p>ä¸€ä¸ªç®€å•çš„æ§åˆ¶å°ç¨‹åºï¼Œå¼•å…¥ Java JWT çš„ä¾èµ–</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- jjwtæ ¸å¿ƒ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>io.jsonwebtoken<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jjwt-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>0.11.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- åŒ…å«ç­¾åç®—æ³• --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>io.jsonwebtoken<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jjwt-impl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>0.11.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- å¤„ç†jwtä¸­çš„jsonéƒ¨åˆ† --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>io.jsonwebtoken<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jjwt-jackson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>0.11.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p> ç¤ºä¾‹ç¨‹åº</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainApp</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ç”Ÿæˆçš„å¯†é’¥</span>    <span class="token keyword">static</span> <span class="token class-name">SecretKey</span> key <span class="token operator">=</span> <span class="token class-name">MacProvider</span><span class="token punctuation">.</span><span class="token function">generateKey</span><span class="token punctuation">(</span><span class="token class-name">SignatureAlgorithm</span><span class="token punctuation">.</span>HS256<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token class-name">String</span> jwt <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token comment">// åŠ å¯†æ–¹æ³•</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">enc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">LocalDateTime</span> now <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">plusSeconds</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Instant</span> instant <span class="token operator">=</span> now<span class="token punctuation">.</span><span class="token function">atZone</span><span class="token punctuation">(</span><span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">systemDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Date</span> nb <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>instant<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç”Ÿæ•ˆæ—¶é—´</span>        now <span class="token operator">=</span> now<span class="token punctuation">.</span><span class="token function">plusSeconds</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        instant <span class="token operator">=</span> now<span class="token punctuation">.</span><span class="token function">atZone</span><span class="token punctuation">(</span><span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">systemDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Date</span> expire <span class="token operator">=</span> <span class="token class-name">Date</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>instant<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¤±æ•ˆæ—¶é—´</span>        <span class="token class-name">String</span> compact <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">serializeToJsonWith</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JacksonSerializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">"Joe"</span><span class="token punctuation">)</span> <span class="token comment">// ä¸»é¢˜</span>                <span class="token punctuation">.</span><span class="token function">setIssuer</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span> <span class="token comment">// è®¾ç½®ç­¾å‘äºº</span>                <span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">"custom subject"</span><span class="token punctuation">)</span> <span class="token comment">// è‡ªå®šä¹‰ä¸»é¢˜</span>                <span class="token punctuation">.</span><span class="token function">setAudience</span><span class="token punctuation">(</span><span class="token string">"normal user"</span><span class="token punctuation">)</span> <span class="token comment">// è®¾ç½®å—ä¼—</span>                <span class="token punctuation">.</span><span class="token function">setNotBefore</span><span class="token punctuation">(</span>nb<span class="token punctuation">)</span> <span class="token comment">// è®¾ç½®ç”Ÿæ•ˆæ—¶é—´</span>                <span class="token punctuation">.</span><span class="token function">setIssuedAt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è®¾ç½®ç­¾å‘æ—¶é—´</span>                <span class="token punctuation">.</span><span class="token function">setExpiration</span><span class="token punctuation">(</span>expire<span class="token punctuation">)</span> <span class="token comment">// è®¾ç½®è¿‡æœŸæ—¶é—´</span>                <span class="token punctuation">.</span><span class="token function">signWith</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token class-name">SignatureAlgorithm</span><span class="token punctuation">.</span>HS256<span class="token punctuation">)</span> <span class="token comment">// ç”Ÿæˆç­¾å</span>                <span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>compact<span class="token punctuation">)</span><span class="token punctuation">;</span>        jwt <span class="token operator">=</span> compact<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// è§£å¯†æ–¹æ³•</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">dec</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">JwtParser</span> build <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">parserBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">setSigningKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">deserializeJsonWith</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JacksonDeserializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// è·å– payload ä¿¡æ¯</span>            <span class="token class-name">Jws</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Claims</span><span class="token punctuation">></span></span> claimsJws <span class="token operator">=</span> build<span class="token punctuation">.</span><span class="token function">parseClaimsJws</span><span class="token punctuation">(</span>jwt<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Claims</span> body <span class="token operator">=</span> claimsJws<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¸»é¢˜ï¼š"</span> <span class="token operator">+</span> body<span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å—ä¼—ï¼š"</span> <span class="token operator">+</span> body<span class="token punctuation">.</span><span class="token function">getIssuer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// è·å–ç”Ÿæ•ˆæ—¶é—´</span>            <span class="token class-name">Date</span> date <span class="token operator">=</span> body<span class="token punctuation">.</span><span class="token function">getNotBefore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> format <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">ofInstant</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">toInstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">systemDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç”Ÿæ•ˆæ—¶é—´ï¼š"</span> <span class="token operator">+</span> format<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// è·å–ç­¾å‘æ—¶é—´</span>            date <span class="token operator">=</span> body<span class="token punctuation">.</span><span class="token function">getIssuedAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            format <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">ofInstant</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">toInstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">systemDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç­¾å‘æ—¶é—´ï¼š"</span> <span class="token operator">+</span> format<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// è·å–è¿‡æœŸæ—¶é—´</span>            date <span class="token operator">=</span> body<span class="token punctuation">.</span><span class="token function">getExpiration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            format <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">ofInstant</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">toInstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">systemDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¿‡æœŸæ—¶é—´ï¼š"</span> <span class="token operator">+</span> format<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ExpiredJwtException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"tokenåˆ°æœŸäº†ï¼Œé‡æ–°ç­¾å‘ä¸€ä¸‹ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">PrematureJwtException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"tokenè¿˜æœªç”Ÿæ•ˆï¼Œè¯·å†ç­‰ç­‰ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// ä¸»ç¨‹åº</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">String</span> s <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"exit"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"enc"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token function">enc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"dec"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token function">dec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> JWT </tag>
            
            <tag> åç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gradle å­¦ä¹ å°è®°</title>
      <link href="/journal/gradle-study/"/>
      <url>/journal/gradle-study/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€äº›å‘½ä»¤"><a href="#ä¸€äº›å‘½ä»¤" class="headerlink" title="ä¸€äº›å‘½ä»¤"></a>ä¸€äº›å‘½ä»¤</h2><p>ç¼–è¯‘é¡¹ç›®</p><pre class="language-sh" data-language="sh"><code class="language-sh">gradle classes</code></pre><p>è¿è¡Œæµ‹è¯•</p><pre class="language-sh" data-language="sh"><code class="language-sh">gradle test</code></pre><span id="more"></span><p>æ„å»ºé¡¹ç›®</p><pre class="language-sh" data-language="sh"><code class="language-sh">gradle build</code></pre><p>æ„å»ºé¡¹ç›®æ—¶è·³è¿‡æµ‹è¯•</p><pre class="language-sh" data-language="sh"><code class="language-sh">gradle build -x test</code></pre><p>æ¸…ç©º build ç›®å½•</p><pre class="language-sh" data-language="sh"><code class="language-sh">gradle clean</code></pre><h2 id="ä¿®æ”¹-maven-ä¸‹è½½æº"><a href="#ä¿®æ”¹-maven-ä¸‹è½½æº" class="headerlink" title="ä¿®æ”¹ maven ä¸‹è½½æº"></a>ä¿®æ”¹ maven ä¸‹è½½æº</h2><p>åœ¨ Gradle å®‰è£…ç›®å½•ä¸‹çš„ init.d æ–‡ä»¶å¤¹ä¸‹æ·»åŠ ä»¥ gradle ä¸ºæ‰©å±•æ–‡ä»¶åçš„è„šæœ¬æ–‡ä»¶ï¼ŒåŠ è½½æ—¶ä¿®æ”¹æˆå›½å†…æºã€‚æ–‡ä»¶åä¸º init.gradleã€‚</p><pre class="language-groovy" data-language="groovy"><code class="language-groovy">allprojects <span class="token punctuation">&#123;</span>repositories <span class="token punctuation">&#123;</span>mavenLocal <span class="token punctuation">(</span><span class="token punctuation">)</span>maven <span class="token punctuation">&#123;</span> name <span class="token string gstring">"Alibaba"</span> <span class="token punctuation">;</span> url <span class="token string gstring">"https://maven.aliyun.com/repository/public"</span> <span class="token punctuation">&#125;</span>maven <span class="token punctuation">&#123;</span> name <span class="token string gstring">"Bstek"</span> <span class="token punctuation">;</span> url <span class="token string gstring">"https://nexus.bsdn.org/content/groups/public/"</span> <span class="token punctuation">&#125;</span>mavenCentral <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>buildscript <span class="token punctuation">&#123;</span>repositories<span class="token punctuation">&#123;</span>maven <span class="token punctuation">&#123;</span> name <span class="token string gstring">"Alibaba"</span> <span class="token punctuation">;</span> url <span class="token string">'https://maven.aliyun.com/repository/public'</span> <span class="token punctuation">&#125;</span>maven <span class="token punctuation">&#123;</span> name <span class="token string gstring">"Bstek"</span> <span class="token punctuation">;</span> url <span class="token string">'https://nexus.bsdn.org/content/groups/public/'</span> <span class="token punctuation">&#125;</span>maven <span class="token punctuation">&#123;</span> name <span class="token string gstring">"M2"</span> <span class="token punctuation">;</span> url <span class="token string">'https://plugins.gradle.org/m2/'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>mavenLocalï¼šå¯»æ‰¾ Maven æœ¬åœ°ä»“åº“ä¸­çš„ jar åŒ…ã€‚</p><p>mavenCentralï¼šå¯»æ‰¾ Maven å›½å¤–çš„é•œåƒä»“åº“ä¸­çš„ jar åŒ…ã€‚</p><p>mavenï¼šæŒ‡å®šä»“åº“åœ°å€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> å…¶å®ƒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Gradle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MongoDB å­¦ä¹ ç¬”è®°</title>
      <link href="/journal/mongodb-crud/"/>
      <url>/journal/mongodb-crud/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="MongoDB-ç›¸å…³æ¦‚å¿µ"><a href="#MongoDB-ç›¸å…³æ¦‚å¿µ" class="headerlink" title="MongoDB ç›¸å…³æ¦‚å¿µ"></a>MongoDB ç›¸å…³æ¦‚å¿µ</h2><p>MongoDB ä¸­åŸºæœ¬çš„æ¦‚å¿µæ˜¯æ–‡æ¡£ã€é›†åˆã€æ•°æ®åº“ã€‚</p><h3 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h3><p>MongoDB çš„å•ä¸ªå®ä¾‹å¯ä»¥å®¹çº³å¤šä¸ªç‹¬ç«‹çš„æ•°æ®åº“ï¼Œæ¯ä¸€ä¸ªéƒ½æœ‰è‡ªå·±çš„é›†åˆå’Œæƒé™ï¼Œä¸åŒçš„æ•°æ®åº“ä¹Ÿæ”¾ç½®åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­ã€‚</p><h3 id="æ–‡æ¡£"><a href="#æ–‡æ¡£" class="headerlink" title="æ–‡æ¡£"></a>æ–‡æ¡£</h3><p>æ–‡æ¡£ç±»ä¼¼äº MySQL ä¸­çš„ä¸€æ¡è®°å½•ï¼ˆrowï¼‰ï¼Œå…¶å¤§å°ä¸èƒ½è¶…è¿‡ 16Mã€‚æ–‡æ¡£å†…çš„å±æ€§ä¸èƒ½åŒ…å« null å­—ç¬¦ï¼Œå¥ç‚¹ï¼ˆ.ï¼‰ï¼Œç¾å…ƒç¬¦å·ï¼ˆ$ï¼‰ï¼Œä¸èƒ½ä»¥ system å¼€å¤´ã€‚</p><p>æ–‡æ¡£çš„å­˜å‚¨æ˜¯ä»¥ JSON çš„å½¢å¼ä¿å­˜ï¼Œåœ¨ MongoDB ä¸­ä»¥ BSONï¼ˆäºŒè¿›åˆ¶çš„ JSONï¼‰çš„å½¢å¼å­˜å‚¨ç€ã€‚</p><span id="more"></span><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span><span class="token property">"site"</span><span class="token operator">:</span><span class="token string">"www.bestguo.top"</span><span class="token punctuation">,</span> <span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"BestGuo çš„å°çª"</span><span class="token punctuation">&#125;</span></code></pre><h3 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a>é›†åˆ</h3><p>é›†åˆä¸­ä¿å­˜ç€ä¸€ç»„æ–‡æ¡£ï¼Œç±»ä¼¼äº MySQL ä¸­çš„è¡¨ã€‚é›†åˆå­˜åœ¨äºæ•°æ®åº“ä¸­ï¼Œæ²¡æœ‰å›ºå®šçš„è¡¨ç»“æ„ã€‚å­˜å‚¨çš„æ–¹å¼å¯ä»¥å¦‚ä¸‹ã€‚</p><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span><span class="token property">"site"</span><span class="token operator">:</span><span class="token string">"www.bestguo.top"</span><span class="token punctuation">,</span> <span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"BestGuo çš„å°çª"</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span><span class="token property">"site"</span><span class="token operator">:</span><span class="token string">"www.bestguo.top"</span><span class="token punctuation">,</span> <span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"BestGuo çš„å°çª"</span><span class="token punctuation">,</span> <span class="token property">"create"</span><span class="token operator">:</span> <span class="token string">"2019-01-01"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span><span class="token property">"site"</span><span class="token operator">:</span><span class="token string">"www.bestguo.top"</span><span class="token punctuation">,</span> <span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"BestGuo çš„å°çª"</span><span class="token punctuation">,</span> <span class="token property">"views"</span><span class="token operator">:</span> <span class="token string">"6672"</span><span class="token punctuation">,</span> <span class="token property">"clients"</span><span class="token operator">:</span> <span class="token string">"2835"</span><span class="token punctuation">&#125;</span></code></pre><h2 id="SQL-ä¸-NoSQL-å¯¹æ¯”"><a href="#SQL-ä¸-NoSQL-å¯¹æ¯”" class="headerlink" title="SQL ä¸ NoSQL å¯¹æ¯”"></a>SQL ä¸ NoSQL å¯¹æ¯”</h2><p>SQL ä¸ NoSQL çš„æ¦‚å¿µå¯¹æ¯”å¦‚ä¸‹ï¼Œè¿™æ ·å°±æ›´å¥½çš„ç†è§£ MongoDB äº†ã€‚</p><table><thead><tr><th align="left">SQLæœ¯è¯­/æ¦‚å¿µ</th><th align="left">MongoDBæœ¯è¯­/æ¦‚å¿µ</th><th align="left">è§£é‡Š/è¯´æ˜</th></tr></thead><tbody><tr><td align="left">database</td><td align="left">database</td><td align="left">æ•°æ®åº“</td></tr><tr><td align="left">table</td><td align="left">collection</td><td align="left">æ•°æ®åº“è¡¨/é›†åˆ</td></tr><tr><td align="left">row</td><td align="left">document</td><td align="left">æ•°æ®è®°å½•è¡Œ/æ–‡æ¡£</td></tr><tr><td align="left">column</td><td align="left">field</td><td align="left">æ•°æ®å­—æ®µ/åŸŸ</td></tr><tr><td align="left">index</td><td align="left">index</td><td align="left">ç´¢å¼•</td></tr><tr><td align="left">table joins</td><td align="left"></td><td align="left">è¡¨è¿æ¥ï¼ŒMongoDB ä¸æ”¯æŒ</td></tr><tr><td align="left">primary key</td><td align="left">primary key</td><td align="left">ä¸»é”®ï¼ŒMongoDB è‡ªåŠ¨å°† _id å­—æ®µè®¾ç½®ä¸ºä¸»é”®</td></tr></tbody></table><h2 id="MongoDB-æ•°æ®åº“æ“ä½œ"><a href="#MongoDB-æ•°æ®åº“æ“ä½œ" class="headerlink" title="MongoDB æ•°æ®åº“æ“ä½œ"></a>MongoDB æ•°æ®åº“æ“ä½œ</h2><h3 id="show-å‘½ä»¤"><a href="#show-å‘½ä»¤" class="headerlink" title="show å‘½ä»¤"></a>show å‘½ä»¤</h3><p>ä½¿ç”¨ show å‘½ä»¤æŸ¥çœ‹å…¨éƒ¨çš„æ•°æ®åº“</p><pre class="language-sh" data-language="sh"><code class="language-sh">show databasesshow dbs# &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; Run Results &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; #admin   0.000GBconfig  0.000GBlocal   0.000GBtest    0.001GB</code></pre><p>ä½¿ç”¨ show å‘½ä»¤æ˜¾ç¤ºé›†åˆ</p><pre class="language-sh" data-language="sh"><code class="language-sh">show collections# &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; Run Results &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; #aitemmythingsstudentsuser</code></pre><h3 id="use-å‘½ä»¤"><a href="#use-å‘½ä»¤" class="headerlink" title="use å‘½ä»¤"></a>use å‘½ä»¤</h3><p>ä½¿ç”¨ use å‘½ä»¤åˆ‡æ¢æ•°æ®åº“</p><pre class="language-sh" data-language="sh"><code class="language-sh">use admin # åˆ‡æ¢è‡³ admin æ•°æ®åº“use test # åˆ‡æ¢è‡³ test æ•°æ®åº“</code></pre><h3 id="db-å‘½ä»¤"><a href="#db-å‘½ä»¤" class="headerlink" title="db å‘½ä»¤"></a>db å‘½ä»¤</h3><p>ä½¿ç”¨ db å‘½ä»¤æŸ¥çœ‹æ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“</p><pre class="language-sh" data-language="sh"><code class="language-sh">db# &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; Run Results &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; #test</code></pre><h3 id="åˆ›å»ºé›†åˆ-æ•°æ®åº“"><a href="#åˆ›å»ºé›†åˆ-æ•°æ®åº“" class="headerlink" title="åˆ›å»ºé›†åˆ/æ•°æ®åº“"></a>åˆ›å»ºé›†åˆ/æ•°æ®åº“</h3><blockquote><p>è¿™äº›æ“ä½œåœ¨ BestGuo æ•°æ®åº“ä¸­</p></blockquote><p>MongoDB ä¸­æ²¡æœ‰ç›´æ¥åˆ›å»ºæ•°æ®åº“çš„å‘½ä»¤ï¼Œä½†æ˜¯ä½¿ç”¨ use å‘½ä»¤ä¹‹åï¼Œå¹¶ä¸”æ‰§è¡Œæ·»åŠ é›†åˆçš„æ“ä½œï¼Œæ•°æ®åº“æ‰ç®—æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„åˆ›å»ºã€‚</p><p>ä½¿ç”¨ <strong>db.createCollection()</strong> æ–¹æ³•æ¥åˆ›å»ºé›†åˆã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">db<span class="token punctuation">.</span><span class="token function">createCollection</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span></code></pre><p>æˆ–è€…ä»ä¸€ä¸ªä¸å­˜åœ¨çš„é›†åˆä¸­æ’å…¥ä¸€ä¸ªæ–‡æ¡£æ—¶ï¼Œå®ƒä¹Ÿä¼šè‡ªåŠ¨åˆ›å»ºè¯¥é›†åˆã€‚æ’å…¥æ–‡æ¡£çš„æ“ä½œå°†åœ¨åé¢ä»‹ç»ã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">db<span class="token punctuation">.</span>user_2_0<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"bestguo2020"</span>ï¼Œ <span class="token string">"age"</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment">/*********** Run Results ***********/</span><span class="token function">WriteResult</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token string">"nInserted"</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre><h3 id="åˆ é™¤é›†åˆ"><a href="#åˆ é™¤é›†åˆ" class="headerlink" title="åˆ é™¤é›†åˆ"></a>åˆ é™¤é›†åˆ</h3><p>ä½¿ç”¨ <strong>db.collectionName.drop()</strong> æ¥åˆ é™¤é›†åˆï¼Œå…¶ä¸­ collectionName æŒ‡çš„æ˜¯é›†åˆåå­—ã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">db<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token function">drop</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="æ’å…¥æ–‡æ¡£"><a href="#æ’å…¥æ–‡æ¡£" class="headerlink" title="æ’å…¥æ–‡æ¡£"></a>æ’å…¥æ–‡æ¡£</h3><p>æ’å…¥æ–‡æ¡£å¯ä»¥ä½¿ç”¨ <strong>db.collectionName.save()</strong> æ–¹æ³•å’Œ <strong>db.collectionName.insert()</strong> æ–¹æ³•æ’å…¥æ•°æ®ã€‚</p><blockquote><p>åœ¨æ’å…¥æ•´æ•°æ—¶ï¼Œç”±äº json æ ¼å¼åªæœ‰ number ç±»å‹ï¼Œmongodb ä¸ºäº†ä¿è¯ä¸å‡ºé”™å°† shell ä¸­æ‰€æœ‰çš„ intã€double ç±»å‹éƒ½å­˜ä¸º doubleã€‚å½“ç„¶å®˜æ–¹ä¹Ÿè€ƒè™‘åˆ°ç”¨æˆ·å®é™…æƒ³ä¿å­˜æ•´å‹çš„é—®é¢˜ï¼Œæ•…å…è®¸åœ¨ json ä¸­å¢åŠ æ•´å‹å‡½æ•° NumberInt() ã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">11</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"å¾·å·"</span> <span class="token operator">+</span> i<span class="token punctuation">,</span>        <span class="token string">"age"</span><span class="token operator">:</span> <span class="token function">NumberInt</span><span class="token punctuation">(</span><span class="token number">17</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token string">"gender"</span><span class="token operator">:</span> <span class="token string">"ç”·"</span><span class="token punctuation">,</span>        <span class="token string">"phone"</span><span class="token operator">:</span> <span class="token string">"0592-114514"</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>db<span class="token punctuation">.</span>user_2_0<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span></code></pre></blockquote><h4 id="insert-æ–¹æ³•"><a href="#insert-æ–¹æ³•" class="headerlink" title="insert æ–¹æ³•"></a>insert æ–¹æ³•</h4><p>æ’å…¥ä¸€æ¡æ•°æ®</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">db<span class="token punctuation">.</span>user_2_0<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>    <span class="token punctuation">&#123;</span>        <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ"</span><span class="token punctuation">,</span>        <span class="token string">"age"</span><span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span>        <span class="token string">"gender"</span><span class="token operator">:</span> <span class="token string">"ç”·"</span><span class="token punctuation">,</span>        <span class="token string">"phone"</span><span class="token operator">:</span> <span class="token string">"0592-114514"</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre><p>æ’å…¥å¤šæ¡æ•°æ®ï¼Œç”±äº MongoDB çš„ shell ç•Œé¢æ˜¯ JavaScriptï¼Œå› æ­¤å¯ä»¥ç¼–å†™ JavaScript çš„ä»£ç ã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"å¾·å·"</span> <span class="token operator">+</span> i<span class="token punctuation">,</span>        <span class="token string">"age"</span><span class="token operator">:</span> <span class="token number">42</span> <span class="token operator">+</span> i<span class="token punctuation">,</span>        <span class="token string">"gender"</span><span class="token operator">:</span> <span class="token string">"ç”·"</span><span class="token punctuation">,</span>        <span class="token string">"phone"</span><span class="token operator">:</span> <span class="token string">"0592-114514"</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>db<span class="token punctuation">.</span>user_2_0<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token comment">/***** Run Results *****/</span><span class="token number">1000</span>Inserted <span class="token number">1</span> <span class="token function">record</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token number">15</span>ms</code></pre><h4 id="save-æ–¹æ³•"><a href="#save-æ–¹æ³•" class="headerlink" title="save æ–¹æ³•"></a>save æ–¹æ³•</h4><pre class="language-javascript" data-language="javascript"><code class="language-javascript">db<span class="token punctuation">.</span>user_2_0<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>    <span class="token punctuation">&#123;</span>        <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"lisi"</span><span class="token punctuation">,</span>        <span class="token string">"age"</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>        <span class="token string">"gender"</span><span class="token operator">:</span> <span class="token string">"ç”·"</span><span class="token punctuation">,</span>        <span class="token string">"phone"</span><span class="token operator">:</span> <span class="token string">"1145141919811"</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre><p>ä¸¤ä¸ªæ–¹æ³•çš„åŒºåˆ«ï¼šè‹¥æŒ‡å®šçš„ id å­˜åœ¨æ—¶ï¼Œsave æ–¹æ³•ä¼šå°†åŸæœ‰çš„æ–‡æ¡£è¿›è¡Œæ›¿æ¢ï¼Œä¸å­˜åœ¨åˆ™å’Œ insert æ–¹æ³•æ˜¯ä¸€æ ·çš„ã€‚</p><p><strong>ä½¿ç”¨ save æ–¹æ³•</strong></p><p>ç¬¬ä¸€æ¬¡æ’å…¥çš„æ•°æ®</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">db<span class="token punctuation">.</span>user_2_0<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>    <span class="token punctuation">&#123;</span>        <span class="token string">"_id"</span><span class="token operator">:</span> <span class="token string">"114514"</span><span class="token punctuation">,</span>        <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"æˆ‘ä¿®é™¢"</span><span class="token punctuation">,</span>        <span class="token string">"age"</span><span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span>        <span class="token string">"gender"</span><span class="token operator">:</span> <span class="token string">"ç”·"</span><span class="token punctuation">,</span>        <span class="token string">"phone"</span><span class="token operator">:</span> <span class="token string">"0592-114514"</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre><p>ç¬¬äºŒæ¬¡æ’å…¥çš„æ•°æ®æ—¶ï¼Œä¼šæœ‰å¦‚ä¸‹çš„æç¤ºä¿¡æ¯ã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">db<span class="token punctuation">.</span>user_2_0<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>    <span class="token punctuation">&#123;</span>        <span class="token string">"_id"</span><span class="token operator">:</span> <span class="token string">"114514"</span><span class="token punctuation">,</span>        <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"å¾·å·"</span><span class="token punctuation">,</span>        <span class="token string">"age"</span><span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span>        <span class="token string">"gender"</span><span class="token operator">:</span> <span class="token string">"ç”·"</span><span class="token punctuation">,</span>        <span class="token string">"phone"</span><span class="token operator">:</span> <span class="token string">"0592-114514"</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment">/***** Run Results *****/</span>Updated <span class="token number">1</span> existing <span class="token function">record</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token number">2</span>ms</code></pre><p><strong>ä½¿ç”¨ insert æ–¹æ³•</strong></p><p>å†æ¬¡æ’å…¥æ•°æ®æ—¶ï¼Œä¼šå‡ºç° <strong>duplicate key error collection</strong> çš„é”™è¯¯ä¿¡æ¯ã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">db<span class="token punctuation">.</span>user_2_0<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>    <span class="token punctuation">&#123;</span>        <span class="token string">"_id"</span><span class="token operator">:</span> <span class="token string">"114514"</span><span class="token punctuation">,</span>        <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"å¾·å·"</span><span class="token punctuation">,</span>        <span class="token string">"age"</span><span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span>        <span class="token string">"gender"</span><span class="token operator">:</span> <span class="token string">"ç”·"</span><span class="token punctuation">,</span>        <span class="token string">"phone"</span><span class="token operator">:</span> <span class="token string">"0592-114514"</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment">/***** Run Results *****/</span><span class="token constant">E11000</span> duplicate key error collection<span class="token operator">:</span> BestGuo<span class="token punctuation">.</span>user_2_0 index<span class="token operator">:</span> _id_ dup key<span class="token operator">:</span> <span class="token punctuation">&#123;</span> _id<span class="token operator">:</span> <span class="token string">"114514"</span> <span class="token punctuation">&#125;</span></code></pre><h3 id="æ›´æ–°æ–‡æ¡£"><a href="#æ›´æ–°æ–‡æ¡£" class="headerlink" title="æ›´æ–°æ–‡æ¡£"></a>æ›´æ–°æ–‡æ¡£</h3><p>ä½¿ç”¨ <strong>db.collectionName.update()</strong> æ–¹æ³•å¯¹æ–‡æ¡£è¿›è¡Œæ›´æ–°ã€‚ä½¿ç”¨ $set æ¥ä¿®æ”¹åŸæœ‰æ–‡æ¡£çš„å†…å®¹</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">db<span class="token punctuation">.</span>user_2_0<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>    <span class="token comment">// ä¿®æ”¹çš„æ¡ä»¶</span>    <span class="token punctuation">&#123;</span>        <span class="token string">"_id"</span><span class="token operator">:</span> <span class="token string">"114514"</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>     <span class="token comment">// ä¿®æ”¹çš„å†…å®¹</span>    <span class="token punctuation">&#123;</span>        $set<span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"å¾·å·æˆ‘ä¿®é™¢"</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment">/***** Run Results *****/</span>Updated <span class="token number">1</span> existing <span class="token function">record</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token number">1</span>ms</code></pre><p>åœ¨ä½¿ç”¨ $set æ›´æ–°æ—¶ï¼Œå¦‚æœæ–‡æ¡£ä¸­ä¸å­˜åœ¨è¿™ä¸ªå±æ€§åˆ™ä¼šå°†ä¸å­˜åœ¨çš„å±æ€§æ·»åŠ è¿›æ¥ã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">db<span class="token punctuation">.</span>user_2_0<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>    <span class="token punctuation">&#123;</span>        <span class="token string">"_id"</span><span class="token operator">:</span> <span class="token string">"114514"</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>     <span class="token punctuation">&#123;</span>        $set<span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"å¾·å·æˆ‘ä¿®é™¢"</span><span class="token punctuation">,</span>            <span class="token string">"vip"</span><span class="token operator">:</span> <span class="token boolean">true</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment">/***** Run Results *****/</span>Updated <span class="token number">1</span> existing <span class="token function">record</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token number">1</span>ms<span class="token punctuation">&#123;</span>    <span class="token string">"_id"</span> <span class="token operator">:</span> <span class="token string">"114514"</span><span class="token punctuation">,</span>    <span class="token string">"name"</span> <span class="token operator">:</span> <span class="token string">"å¾·å·æˆ‘ä¿®é™¢"</span><span class="token punctuation">,</span>    <span class="token string">"age"</span> <span class="token operator">:</span> <span class="token number">24.0</span><span class="token punctuation">,</span>    <span class="token string">"gender"</span> <span class="token operator">:</span> <span class="token string">"ç”·"</span><span class="token punctuation">,</span>    <span class="token string">"phone"</span> <span class="token operator">:</span> <span class="token string">"0592-114514"</span><span class="token punctuation">,</span>    <span class="token string">"vip"</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span></code></pre><h3 id="æŸ¥è¯¢æ–‡æ¡£"><a href="#æŸ¥è¯¢æ–‡æ¡£" class="headerlink" title="æŸ¥è¯¢æ–‡æ¡£"></a>æŸ¥è¯¢æ–‡æ¡£</h3><p>ä½¿ç”¨ <strong>db.collectionName.find()</strong> æ–¹æ³•æ¥æŸ¥è¯¢å‡ºæ–‡æ¡£æ•°æ®ã€‚æœªé™åˆ¶æ¡ä»¶æ—¶åˆ™æŸ¥è¯¢å‡ºå…¨éƒ¨çš„æ•°æ®ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> db.user_2_0.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b97a2e305de3247a4e89cc"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"bestguo2020"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">18</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b97eace2bf2e431a87d8f6"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"zhangsan"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">18</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"1145141919810"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b97f23e2bf2e431a87d8f7"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"lisi"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">21</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"1145141919811"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b97fd4e2bf2e431a87d8f8"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">24</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> <span class="token string">"114514"</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·æˆ‘ä¿®é™¢"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">24</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span>, <span class="token string">"vip"</span> <span class="token builtin class-name">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d8f9"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·0"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">42</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d8fa"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·1"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">43</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span>Type <span class="token string">"it"</span> <span class="token keyword">for</span> <span class="token function">more</span></code></pre><p>ä½¿ç”¨ <strong>findOne()</strong> æ–¹æ³•æŸ¥è¯¢å‡ºä¸€æ¡æ•°æ®</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> db.user_2_0.<span class="token function-name function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b97a2e305de3247a4e89cc"</span><span class="token punctuation">)</span>,        <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"bestguo2020"</span>,        <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">18</span><span class="token punctuation">&#125;</span></code></pre><p>è°ƒç”¨ <strong>pretty()</strong> æ–¹æ³•å°†æ–‡æ¡£ä»¥æ ¼å¼åŒ–ä¹‹åå±•ç¤ºå‡ºæ¥ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> db.user_2_0.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.<span class="token function-name function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b97a2e305de3247a4e89cc"</span><span class="token punctuation">)</span>,        <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"bestguo2020"</span>,        <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">18</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span>        <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b97eace2bf2e431a87d8f6"</span><span class="token punctuation">)</span>,        <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"zhangsan"</span>,        <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">18</span>,        <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>,        <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"1145141919810"</span><span class="token punctuation">&#125;</span>Type <span class="token string">"it"</span> <span class="token keyword">for</span> <span class="token function">more</span></code></pre><h4 id="æ˜¾ç¤ºæŒ‡å®šçš„å­—æ®µ"><a href="#æ˜¾ç¤ºæŒ‡å®šçš„å­—æ®µ" class="headerlink" title="æ˜¾ç¤ºæŒ‡å®šçš„å­—æ®µ"></a>æ˜¾ç¤ºæŒ‡å®šçš„å­—æ®µ</h4><p>è‹¥è¦æŒ‡å®šæ˜¾ç¤ºæŸäº›å­—æ®µï¼Œå¯ä»¥åœ¨ç¬¬äºŒä¸ªå‚æ•°ä¸­æŒ‡å®šå‡ºæƒ³è¦çš„å­—æ®µï¼Œä¸æŒ‡å®šæ—¶åˆ™å…¨éƒ¨æ˜¾ç¤ºã€‚è‹¥æŒ‡å®šçš„å­—æ®µä¸å­˜åœ¨ï¼Œåˆ™ä¸æ˜¾ç¤ºã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">db.user_2_0.find<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>, <span class="token comment"># æŸ¥è¯¢çš„æ¡ä»¶</span>    <span class="token punctuation">&#123;</span> <span class="token comment"># éœ€è¦æ˜¾ç¤ºçš„å­—æ®µ</span>        name: <span class="token number">1</span>,         age: <span class="token number">1</span>,         asd: <span class="token number">1</span> <span class="token comment"># è¿™ä¸ªå­—æ®µä¸å­˜åœ¨ï¼Œå°±ä¸æ˜¾ç¤º</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre><h4 id="AND-æ¡ä»¶"><a href="#AND-æ¡ä»¶" class="headerlink" title="AND æ¡ä»¶"></a>AND æ¡ä»¶</h4><p>AND æ¡ä»¶å¾ˆç®€å•ï¼Œåªéœ€åœ¨ find æ–¹æ³•ä¸­ä¼ å…¥ JSON æ ¼å¼å³å¯ã€‚æ¯”å¦‚æˆ‘æ‰¾ä¸€ä¸ª name ä¸ºâ€ç”°æ‰€æµ©äºŒâ€œï¼Œage ä¸ºâ€24â€œçš„äººã€‚å¯ä»¥å†™æˆ<code>&#123;name: &quot;ç”°æ‰€æµ©äºŒ&quot;, age: 24&#125;</code>ã€‚ä¸‹é¢çš„è¯­å¥å¯ä»¥ç†è§£æˆ <code>where name = &#39;ç”°æ‰€æµ©äºŒ&#39; and age = 24</code>ã€‚ç¬¬ä¸€å±‚çš„<code>&#123;&#125;</code>æ‰€ä»£è¡¨çš„å°±æ˜¯ ANDäº†ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> db.user_2_0.find<span class="token punctuation">(</span><span class="token punctuation">..</span>.     <span class="token punctuation">&#123;</span><span class="token punctuation">..</span>.         name: <span class="token string">"ç”°æ‰€æµ©äºŒ"</span>,<span class="token punctuation">..</span>.         age: <span class="token number">24</span><span class="token punctuation">..</span>.     <span class="token punctuation">&#125;</span><span class="token punctuation">..</span>. <span class="token punctuation">)</span><span class="token comment"># ============= Run Results ============= #</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b97fd4e2bf2e431a87d8f8"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">24</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span></code></pre><h4 id="OR-æ¡ä»¶"><a href="#OR-æ¡ä»¶" class="headerlink" title="OR æ¡ä»¶"></a>OR æ¡ä»¶</h4><p>OR æ¡ä»¶éœ€è¦ä½¿ç”¨ $or æ¥è®¾ç½®ã€‚ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†æŸ¥è¯¢å§“åä¸ºâ€ç”°æ‰€æµ©äºŒâ€œæˆ–è€…â€å¾·å·æˆ‘ä¿®é™¢â€œçš„äººã€‚å¯ä»¥ç†è§£ä¸º<code>where name = &#39;ç”°æ‰€æµ©äºŒ&#39; or name = &#39;å¾·å·æˆ‘ä¿®é™¢&#39;</code>ï¼Œ</p><pre class="language-bash" data-language="bash"><code class="language-bash">db.user_2_0.find<span class="token punctuation">(</span>    <span class="token punctuation">&#123;</span>        <span class="token variable">$or</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span>                name: <span class="token string">"ç”°æ‰€æµ©äºŒ"</span>            <span class="token punctuation">&#125;</span>,            <span class="token punctuation">&#123;</span>                name: <span class="token string">"å¾·å·æˆ‘ä¿®é™¢"</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre><h4 id="æ“ä½œç¬¦"><a href="#æ“ä½œç¬¦" class="headerlink" title="æ“ä½œç¬¦"></a>æ“ä½œç¬¦</h4><p>MongoDBä¸­æ¡ä»¶æ“ä½œç¬¦æœ‰ï¼š</p><ul><li>(&gt;) å¤§äºï¼ˆgreat thanï¼‰ - $gt</li><li>(&lt;) å°äº ï¼ˆless thanï¼‰- $lt</li><li>(&gt;=) å¤§äºç­‰äºï¼ˆgreat than or equalsï¼‰- $gte</li><li>(&lt;= ) å°äºç­‰äºï¼ˆless than or equalsï¼‰- $lte</li></ul><h5 id="great-than"><a href="#great-than" class="headerlink" title="great than"></a>great than</h5><p>å¤§äºæ“ä½œç¬¦ $gtï¼Œæ¯”å¦‚æˆ‘è¦æŸ¥è¯¢å‡ºå¤§äº 100 å²çš„äººã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> db.user_2_0.find<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">..</span>.     age: <span class="token punctuation">&#123;</span><span class="token punctuation">..</span>.         <span class="token variable">$gt</span><span class="token builtin class-name">:</span> <span class="token number">100</span><span class="token punctuation">..</span>.     <span class="token punctuation">&#125;</span><span class="token punctuation">..</span>. <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment"># ============= Run Results ============= #</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d934"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·59"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">101</span>,<span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d935"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·60"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">102</span>,<span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d936"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·61"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">103</span>,<span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d937"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·62"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">104</span>,<span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span>Type <span class="token string">"it"</span> <span class="token keyword">for</span> <span class="token function">more</span></code></pre><h5 id="less-than"><a href="#less-than" class="headerlink" title="less than"></a>less than</h5><p>å°äºæ“ä½œç¬¦ $ltï¼ŒæŸ¥è¯¢å‡ºå¤§äº 30 å°äº 50 å²çš„äººã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> db.user_2_0.find<span class="token punctuation">(</span><span class="token punctuation">&#123;</span>age: <span class="token punctuation">&#123;</span> <span class="token variable">$gt</span><span class="token builtin class-name">:</span> <span class="token number">30</span>, <span class="token variable">$lt</span><span class="token builtin class-name">:</span> <span class="token number">50</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment"># ============= Run Results ============= #</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d8f9"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·0"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">42</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d8fa"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·1"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">43</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d8fb"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·2"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">44</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d8fc"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·3"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">45</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d8fd"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·4"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">46</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span>Type <span class="token string">"it"</span> <span class="token keyword">for</span> <span class="token function">more</span></code></pre><h5 id="great-than-or-equals"><a href="#great-than-or-equals" class="headerlink" title="great than or equals"></a>great than or equals</h5><p>å¤§äºç­‰äºæ“ä½œç¬¦ $gteï¼Œæ¯”å¦‚æˆ‘è¦æŸ¥è¯¢å‡ºå¤§äºç­‰äº 200 å²ï¼Œå°äº 210 å²çš„äººã€‚ã€</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> db.user_2_0.find<span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    age: <span class="token punctuation">&#123;</span>        <span class="token variable">$gte</span><span class="token builtin class-name">:</span> <span class="token number">200</span>,        <span class="token variable">$lt</span><span class="token builtin class-name">:</span> <span class="token number">210</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment"># ============= Run Results ============= #</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d997"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·158"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">200</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d998"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·159"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">201</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d999"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·160"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">202</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d99a"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·161"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">203</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d99b"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·162"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">204</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d99c"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·163"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">205</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span>Type <span class="token string">"it"</span> <span class="token keyword">for</span> <span class="token function">more</span></code></pre><h5 id="less-than-or-equals"><a href="#less-than-or-equals" class="headerlink" title="less than or equals"></a>less than or equals</h5><p> å°äºç­‰äºæ“ä½œç¬¦ $gteï¼Œæ¯”å¦‚æˆ‘è¦æŸ¥è¯¢å‡ºå¤§äº 200 å²ï¼Œå°äºç­‰äº 205 å²çš„äººã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> db.user_2_0.find<span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    age: <span class="token punctuation">&#123;</span>        <span class="token variable">$gt</span><span class="token builtin class-name">:</span> <span class="token number">200</span>,        <span class="token variable">$lte</span><span class="token builtin class-name">:</span> <span class="token number">205</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment"># ============= Run Results ============= #</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d998"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·159"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">201</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d999"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·160"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">202</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d99a"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·161"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">203</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d99b"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·162"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">204</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b984cfe2bf2e431a87d99c"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·163"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">205</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span></code></pre><h4 id="æ¨¡ç³ŠæŸ¥è¯¢"><a href="#æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="æ¨¡ç³ŠæŸ¥è¯¢"></a>æ¨¡ç³ŠæŸ¥è¯¢</h4><p>åœ¨ MongoDB ä¸­æ²¡æœ‰ä¸“é—¨çš„æ¨¡ç³ŠæŸ¥è¯¢å…³é”®å­—ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨æ­£åˆ™çš„æ–¹å¼æ¥å®ç°æ¨¡ç³ŠæŸ¥è¯¢ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> db.user_2_0.find<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">..</span>.     age: <span class="token punctuation">&#123;</span><span class="token punctuation">..</span>.         <span class="token variable">$gte</span><span class="token builtin class-name">:</span> <span class="token number">200</span>,<span class="token punctuation">..</span>.         <span class="token variable">$lt</span><span class="token builtin class-name">:</span> <span class="token number">205</span><span class="token punctuation">..</span>.     <span class="token punctuation">&#125;</span>,<span class="token punctuation">..</span>.     name: /ç”°æ‰€/<span class="token punctuation">..</span>. <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment"># ============= Run Results ============= #</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b985d9e2bf2e431a87dd7f"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ158"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">200</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b985d9e2bf2e431a87dd80"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ159"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">201</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b985d9e2bf2e431a87dd81"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ160"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">202</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b985d9e2bf2e431a87dd82"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ161"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">203</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b985d9e2bf2e431a87dd83"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ162"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">204</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b985f6e2bf2e431a87e167"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ158"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">200</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b985f6e2bf2e431a87e168"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ159"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">201</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b985f6e2bf2e431a87e169"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ160"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">202</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b985f6e2bf2e431a87e16a"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ161"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">203</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b985f6e2bf2e431a87e16b"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ162"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">204</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span></code></pre><h4 id="è”åŠ¨"><a href="#è”åŠ¨" class="headerlink" title="è”åŠ¨"></a>è”åŠ¨</h4><p>æŸ¥è¯¢å‡ºåå­—ä¸ºâ€ç”°æ‰€æµ©äºŒxâ€œï¼ˆxè¡¨ç¤ºæ•°å­—ï¼Œæ¯”å¦‚ç”°æ‰€æµ©äºŒ114ã€ç”°æ‰€æµ©äºŒ115ï¼‰è¿™ä¸€ç±»çš„å§“åï¼Œä¸”å¹´é¾„ 18 ~ 24 å²ï¼ˆä¸å« 24 å²å« 18 å²ï¼‰æˆ–åœ¨ 114 ~ 119 ï¼ˆéƒ½åŒ…å«ï¼‰ ä¹‹é—´ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> db.user_2_0.find<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">..</span>.     name: /ç”°æ‰€æµ©äºŒ<span class="token punctuation">\</span>d+$/,<span class="token punctuation">..</span>.     <span class="token variable">$or</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">..</span>.         <span class="token punctuation">&#123;</span><span class="token punctuation">..</span>.             age: <span class="token punctuation">&#123;</span><span class="token punctuation">..</span>.                 <span class="token variable">$gt</span><span class="token builtin class-name">:</span> <span class="token number">18</span>,<span class="token punctuation">..</span>.                 <span class="token variable">$lte</span><span class="token builtin class-name">:</span> <span class="token number">24</span><span class="token punctuation">..</span>.             <span class="token punctuation">&#125;</span><span class="token punctuation">..</span>.         <span class="token punctuation">&#125;</span>,<span class="token punctuation">..</span>.         <span class="token punctuation">&#123;</span><span class="token punctuation">..</span>.             age: <span class="token punctuation">&#123;</span><span class="token punctuation">..</span>.                 <span class="token variable">$gte</span><span class="token builtin class-name">:</span> <span class="token number">114</span>,<span class="token punctuation">..</span>.                 <span class="token variable">$lte</span><span class="token builtin class-name">:</span> <span class="token number">119</span><span class="token punctuation">..</span>.             <span class="token punctuation">&#125;</span><span class="token punctuation">..</span>.         <span class="token punctuation">&#125;</span>,<span class="token punctuation">..</span>.     <span class="token punctuation">]</span><span class="token punctuation">..</span>. <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment"># ============= Run Results ============= #</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b985d9e2bf2e431a87dd29"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ72"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">114</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b985d9e2bf2e431a87dd2a"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ73"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">115</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b985d9e2bf2e431a87dd2b"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ74"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">116</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b985d9e2bf2e431a87dd2c"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ75"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">117</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b985d9e2bf2e431a87dd2d"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ76"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">118</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62b985d9e2bf2e431a87dd2e"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ77"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">119</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62baa3dae2bf2e431a87e4ba"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ19"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">19</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62baa3dae2bf2e431a87e4bb"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ20"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">20</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62baa3dae2bf2e431a87e4bc"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ21"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">21</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62baa3dae2bf2e431a87e4bd"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ22"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62baa3dae2bf2e431a87e4be"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ23"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">23</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62baa3dae2bf2e431a87e4bf"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ24"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">24</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span></code></pre><h3 id="åˆ é™¤æ–‡æ¡£"><a href="#åˆ é™¤æ–‡æ¡£" class="headerlink" title="åˆ é™¤æ–‡æ¡£"></a>åˆ é™¤æ–‡æ¡£</h3><p>åˆ é™¤æ–‡æ¡£å¯ä»¥ä½¿ç”¨ <strong>remove</strong> æ–¹æ³•ã€<strong>deleteOne</strong> æ–¹æ³•å’Œ <strong>deleteMany</strong> æ–¹æ³•ã€‚</p><p>ä½¿ç”¨ remove åˆ é™¤ä¸€æ¡æ–‡æ¡£ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªå‚æ•° <code>&#123;justOne: 1&#125;</code> ï¼Œè‹¥ä¸ä¼ é€’æˆ–è€…è®¾ç½®æˆ 0ï¼Œåˆ™ä¼šåˆ é™¤é›†åˆä¸­çš„å…¨éƒ¨æ–‡æ¡£ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> db.user_2_0.remove<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>, <span class="token punctuation">&#123;</span>justOne: <span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment"># ============= Run Results ============= #</span>WriteResult<span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token string">"nRemoved"</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre><p>ä½¿ç”¨ deleteOne èƒ½è¾¾åˆ°åˆ é™¤ä¸€æ¡æ•°æ®çš„æ•ˆæœã€‚remove ä¼ å…¥å‚æ•° <code>&#123;justOne: 1&#125;</code> å’Œ deleteOne åˆ é™¤ä¸€æ¡ä¿¡æ¯çš„è§„åˆ™æ˜¯ç¬¬ä¸€æ¡æ•°æ®ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> db.user_2_0.deleteOne<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment"># ============= Run Results ============= #</span><span class="token punctuation">&#123;</span> <span class="token string">"acknowledged"</span> <span class="token builtin class-name">:</span> true, <span class="token string">"deletedCount"</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">&#125;</span></code></pre><p>ä¹Ÿå¯ä»¥æŒ‰ç…§æ¡ä»¶åˆ é™¤å…ƒç´ ï¼Œæ¯”å¦‚åˆ é™¤ 114 ~ 514 å²ï¼ˆéƒ½åŒ…å«ï¼‰çš„äººï¼Œä½¿ç”¨ deleteOne ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> db.user_2_0.deleteMany<span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    age: <span class="token punctuation">&#123;</span>        <span class="token variable">$gte</span><span class="token builtin class-name">:</span> <span class="token number">114</span>,        <span class="token variable">$lte</span><span class="token builtin class-name">:</span> <span class="token number">514</span>,    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment"># ============= Run Results ============= #</span><span class="token punctuation">&#123;</span>    <span class="token string">"acknowledged"</span> <span class="token builtin class-name">:</span> true,    <span class="token string">"deletedCount"</span> <span class="token builtin class-name">:</span> <span class="token number">1211.0</span><span class="token punctuation">&#125;</span></code></pre><h3 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h3><p>æ’åºä½¿ç”¨ <strong>sort()</strong> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä½œç”¨äºæŸ¥è¯¢ä¹‹åã€‚æ¯”å¦‚æˆ‘è¦æŸ¥è¯¢å§“åä¸ºâ€ç”°æ‰€æµ©äºŒxâ€œï¼ˆxè¡¨ç¤ºæ•°å­—ï¼Œæ¯”å¦‚ç”°æ‰€æµ©äºŒ114ã€ç”°æ‰€æµ©äºŒ115ï¼‰è¿™ä¸€ç±»çš„å§“åï¼Œä¸”æŒ‰å¹´é¾„å‡åºæ’åºã€‚ä½¿ç”¨ 1 å’Œ -1 æ¥æŒ‡å®šæ’åºçš„æ–¹å¼ï¼Œå…¶ä¸­ 1 ä¸ºå‡åºæ’åˆ—ï¼Œè€Œ -1 æ˜¯ç”¨äºé™åºæ’åˆ—ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> db.user_2_0.find<span class="token punctuation">(</span><span class="token punctuation">&#123;</span>name: /ç”°æ‰€æµ©äºŒ<span class="token punctuation">\</span>d+$/<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>.sort<span class="token punctuation">(</span><span class="token punctuation">&#123;</span>age: <span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>.pretty<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment"># ============= Run Results ============= #</span><span class="token punctuation">&#123;</span>        <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62baa3dae2bf2e431a87e4b9"</span><span class="token punctuation">)</span>,        <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ18"</span>,        <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">18</span>,        <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>,        <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span>        <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62baa3dae2bf2e431a87e4ba"</span><span class="token punctuation">)</span>,        <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ19"</span>,        <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">19</span>,        <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>,        <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span>        <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62baa3dae2bf2e431a87e4bb"</span><span class="token punctuation">)</span>,        <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ20"</span>,        <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">20</span>,        <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>,        <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span>        <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62baa3dae2bf2e431a87e4bc"</span><span class="token punctuation">)</span>,        <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ21"</span>,        <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">21</span>,        <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>,        <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span>        <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62baa3dae2bf2e431a87e4bd"</span><span class="token punctuation">)</span>,        <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”°æ‰€æµ©äºŒ22"</span>,        <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>,        <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>,        <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span><span class="token punctuation">&#125;</span>Type <span class="token string">"it"</span> <span class="token keyword">for</span> <span class="token function">more</span></code></pre><h3 id="Limit-ä¸-Skip"><a href="#Limit-ä¸-Skip" class="headerlink" title="Limit ä¸ Skip"></a>Limit ä¸ Skip</h3><p><strong>limit()</strong> æ–¹æ³•å°±æ˜¯ä»æŸ¥è¯¢çš„ç»“æœä¸­å–å‡ºå‰å‡ æ¡æ–‡æ¡£ï¼Œ<strong>skip()</strong> æ–¹æ³•å°±æ˜¯ä»æŸ¥è¯¢çš„ç»“æœä¸­è·³è¿‡å‡ ä¸ªæ–‡æ¡£ï¼Œä»ç¬¬å‡ ä¸ªæ–‡æ¡£å¼€å§‹æŸ¥è¯¢ã€‚</p><p>ä½¿ç”¨ limit æŸ¥è¯¢å‰ 5 æ¡æ•°æ®ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> db.user_2_0.find<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token comment"># ============= Run Results ============= #</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62babe68dc0663b7a70c6daf"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·1"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">18</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62babe68dc0663b7a70c6db0"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·2"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">19</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62babe68dc0663b7a70c6db1"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·3"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">20</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62babe68dc0663b7a70c6db2"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·4"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">21</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62babe68dc0663b7a70c6db3"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·5"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span></code></pre><p>ä½¿ç”¨ skipï¼Œè·³è¿‡å‰ä¸¤æ¡æ•°æ®ï¼Œä»ç¬¬ä¸‰æ¡æ•°æ®å¼€å§‹æŸ¥è¯¢ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> db.user_2_0.find<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>.skip<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment"># ============= Run Results ============= #</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62babe68dc0663b7a70c6db1"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·3"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">20</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62babe68dc0663b7a70c6db2"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·4"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">21</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62babe68dc0663b7a70c6db3"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·5"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62babe68dc0663b7a70c6db4"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·6"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">23</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62babe68dc0663b7a70c6db5"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·7"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">24</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62babe68dc0663b7a70c6db6"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·8"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">25</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62babe68dc0663b7a70c6db7"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·9"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">26</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">"62babe68dc0663b7a70c6db8"</span><span class="token punctuation">)</span>, <span class="token string">"name"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¾·å·10"</span>, <span class="token string">"age"</span> <span class="token builtin class-name">:</span> <span class="token number">27</span>, <span class="token string">"gender"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"phone"</span> <span class="token builtin class-name">:</span> <span class="token string">"0592-114514"</span> <span class="token punctuation">&#125;</span></code></pre><p>limit å’Œ skip æ–¹æ³•è”åŠ¨å¯å®ç°åˆ†é¡µçš„åŠŸèƒ½ï¼Œæ¯ä¸€é¡µæœ‰ 4 æ¡æ•°æ®ã€‚è¦æ˜¾ç¤ºå‡º 4 æ¡æ•°æ® limit ä¸€å®šæ˜¯ 4ï¼Œæ¯ä¸€é¡µçš„è¯ï¼Œå°±åº”è¯¥æ˜¯ 4 çš„å€æ•°ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">db.user_2_0.find<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>.skip<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>db.user_2_0.find<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>.skip<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>db.user_2_0.find<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>.skip<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token comment">#......</span>db.user_2_0.find<span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>.skip<span class="token punctuation">(</span>4n<span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span></code></pre><h3 id="èšåˆ"><a href="#èšåˆ" class="headerlink" title="èšåˆ"></a>èšåˆ</h3><p>MongoDB ä¸­èšåˆï¼ˆaggregateï¼‰ä¸»è¦ç”¨äºå¤„ç†æ•°æ®ï¼ˆè¯¸å¦‚ç»Ÿè®¡å¹³å‡å€¼ï¼Œæ±‚å’Œç­‰ï¼‰ï¼Œå¹¶è¿”å›è®¡ç®—åçš„æ•°æ®ç»“æœã€‚å’Œå…³ç³»å‹æ•°æ®åº“ MySQL ç±»ä¼¼ã€‚MySQL æœ‰å¾ˆå¤šèšåˆå‡½æ•°ï¼Œåœ¨ MongoDB ä¸­é‡‡ç”¨çš„æ–¹å¼æ˜¯ä»¥ <code>$å‡½æ•°å</code> çš„å½¢å¼æ¥è¡¨ç¤ºçš„ã€‚</p><h4 id="åˆ©ç”¨åˆ†ç»„ç»Ÿè®¡ä¸ªæ•°"><a href="#åˆ©ç”¨åˆ†ç»„ç»Ÿè®¡ä¸ªæ•°" class="headerlink" title="åˆ©ç”¨åˆ†ç»„ç»Ÿè®¡ä¸ªæ•°"></a>åˆ©ç”¨åˆ†ç»„ç»Ÿè®¡ä¸ªæ•°</h4><blockquote><p>åœ¨æŒ‡å®šä½¿ç”¨å“ªä¸ªå­—æ®µåˆ†ç»„æ—¶ï¼Œè®°å¾—è¦åŠ ä¸Šâ€$â€œ</p></blockquote><p>æ¥ä¸‹æ¥ä½¿ç”¨ aggregate æ¥ç»Ÿè®¡é›†åˆä¸­â€ç”·â€œã€â€å¥³â€œæ€§åˆ«ä¸ªæ•°ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">></span> db.user_2_0.aggregate<span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    <span class="token comment"># $group æŒ‡çš„æ˜¯å°†æŸ¥è¯¢ç»“æœè¿›è¡Œåˆ†ç»„</span><span class="token variable">$group</span><span class="token builtin class-name">:</span> <span class="token punctuation">&#123;</span>_id: <span class="token string">"<span class="token variable">$gender</span>"</span>, <span class="token comment"># ä½¿ç”¨æ–‡æ¡£ä¸­çš„å“ªä¸ªå­—æ®µè¿›è¡Œåˆ†ç»„</span>gender_count: <span class="token punctuation">&#123;</span><span class="token variable">$sum</span><span class="token builtin class-name">:</span> NumberInt<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment"># ä½¿ç”¨ $sum è¿›è¡Œæ±‚å’Œ</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment"># ============= Run Results ============= #</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¥³"</span>, <span class="token string">"gender_count"</span> <span class="token builtin class-name">:</span> <span class="token number">6</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"gender_count"</span> <span class="token builtin class-name">:</span> <span class="token number">10</span> <span class="token punctuation">&#125;</span></code></pre><p>ä¸ºä»€ä¹ˆç»Ÿè®¡çš„æ—¶å€™ï¼Œè¦å†™ä¸ª 1 åœ¨è¿™é‡Œï¼Ÿ</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">gender_count<span class="token operator">:</span> <span class="token punctuation">&#123;</span>    $sum<span class="token operator">:</span> <span class="token function">NumberInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> # ä½¿ç”¨ $sum è¿›è¡Œæ±‚å’Œ<span class="token punctuation">&#125;</span></code></pre><p>è‹¥å†™æˆ 0 æˆ–è€… 2 çš„æ—¶å€™ï¼Œé‚£ä¹ˆå¾—å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ============= $sum: 2 ============= #</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¥³"</span>, <span class="token string">"gender_count"</span> <span class="token builtin class-name">:</span> <span class="token number">12</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"gender_count"</span> <span class="token builtin class-name">:</span> <span class="token number">20</span> <span class="token punctuation">&#125;</span><span class="token comment"># ============= $sum: 0 ============= #</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¥³"</span>, <span class="token string">"gender_count"</span> <span class="token builtin class-name">:</span> <span class="token number">0</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"gender_count"</span> <span class="token builtin class-name">:</span> <span class="token number">0</span> <span class="token punctuation">&#125;</span></code></pre><p>çœ‹åˆ°ä¸Šé¢çš„ç»“æœï¼Œå°±æ˜ç™½äº†ï¼Œè¿™ä¸ªè®¾ç½® <code>$sum: 1</code> çš„æ„ä¹‰åœ¨äºåˆ†ç»„ä¹‹åï¼Œæ€§åˆ«â€ç”·â€œä¸­æœ‰å‡ ä¸ª 1 ï¼Œæ€§åˆ«â€å¥³â€œä¸­æœ‰å‡ ä¸ª 1ï¼Œä½†æ˜¯è¿™é‡Œå‡ºç°äº† 10  ä¸ªæ€§åˆ«ä¸ºâ€ç”·â€œï¼Œæ‰€ä»¥ <code>1 * 10 = 10 </code> ã€‚é€šè¿‡è®¾ç½®  <code>$sum: 1</code> å¯ä»¥ç»Ÿè®¡ä¸ªæ•°ã€‚è®¾ç½®  <code>$sum: 2</code> ä¹Ÿå°±ä¸éš¾ç†è§£äº†ã€‚</p><p>ä¸Šé¢çš„å†™æ³•ï¼Œåœ¨ SQL è¯­å¥ä¸­å¯ä»¥ç†è§£æˆ</p><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> gender<span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> user_2_0 <span class="token keyword">group</span> <span class="token keyword">by</span> gender</code></pre><h4 id="åˆ©ç”¨åˆ†ç»„æ±‚å¹³å‡å€¼ã€æœ€å°å€¼å’Œæœ€å¤§å€¼"><a href="#åˆ©ç”¨åˆ†ç»„æ±‚å¹³å‡å€¼ã€æœ€å°å€¼å’Œæœ€å¤§å€¼" class="headerlink" title="åˆ©ç”¨åˆ†ç»„æ±‚å¹³å‡å€¼ã€æœ€å°å€¼å’Œæœ€å¤§å€¼"></a>åˆ©ç”¨åˆ†ç»„æ±‚å¹³å‡å€¼ã€æœ€å°å€¼å’Œæœ€å¤§å€¼</h4><p>å¹³å‡å€¼ä½¿ç”¨ <strong>$avg</strong>ï¼Œæœ€å°å€¼å’Œæœ€å¤§å€¼åˆ†åˆ«ä¸º <strong>$min</strong> å’Œ <strong>$max</strong> ã€‚è·å–ç”·å¥³ä¸­çš„å¹³å‡å¹´é¾„ã€æœ€å¤§å€¼å’Œæœ€å°å€¼ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">db.user_2_0.aggregate<span class="token punctuation">(</span><span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token variable">$group</span><span class="token builtin class-name">:</span> <span class="token punctuation">&#123;</span> <span class="token comment"># group é‡Œé¢å­˜ç€çš„æ˜¯åˆ†ç»„ä¹‹åçš„å­—æ®µ</span>            _id: <span class="token string">"<span class="token variable">$gender</span>"</span>,            <span class="token comment"># æœ€å¤§å¹´é¾„</span>            max_age: <span class="token punctuation">&#123;</span>                <span class="token variable">$max</span><span class="token builtin class-name">:</span> <span class="token string">"<span class="token variable">$age</span>"</span>             <span class="token punctuation">&#125;</span>,            <span class="token comment"># æœ€å°å¹´é¾„</span>            min_age: <span class="token punctuation">&#123;</span>                <span class="token variable">$min</span><span class="token builtin class-name">:</span> <span class="token string">"<span class="token variable">$age</span>"</span>            <span class="token punctuation">&#125;</span>,            <span class="token comment"># å¹³å‡å¹´é¾„</span>            avg_age: <span class="token punctuation">&#123;</span>                <span class="token variable">$avg</span><span class="token builtin class-name">:</span> <span class="token string">"<span class="token variable">$age</span>"</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># ============= Run Results ============= #</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"max_age"</span> <span class="token builtin class-name">:</span> <span class="token number">27</span>, <span class="token string">"min_age"</span> <span class="token builtin class-name">:</span> <span class="token number">18</span>, <span class="token string">"avg_age"</span> <span class="token builtin class-name">:</span> <span class="token number">22.5</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¥³"</span>, <span class="token string">"max_age"</span> <span class="token builtin class-name">:</span> <span class="token number">23</span>, <span class="token string">"min_age"</span> <span class="token builtin class-name">:</span> <span class="token number">18</span>, <span class="token string">"avg_age"</span> <span class="token builtin class-name">:</span> <span class="token number">20.5</span> <span class="token punctuation">&#125;</span></code></pre><h4 id="åˆ†ç»„ç»“æœæ’åº"><a href="#åˆ†ç»„ç»“æœæ’åº" class="headerlink" title="åˆ†ç»„ç»“æœæ’åº"></a>åˆ†ç»„ç»“æœæ’åº</h4><p>è‹¥è¦å¯¹åˆ†ç»„ç»“æœè¿›è¡Œæ’åºï¼Œä¸èƒ½ç›´æ¥è°ƒç”¨ sort æ–¹æ³•ï¼Œè€Œæ˜¯éœ€è¦åœ¨èšåˆæ–¹æ³•ä¸­åŠ ä¸€ä¸ª <strong>$sort</strong> å³å¯ï¼Œç„¶åå»æŒ‡å®šåˆ†ç»„ä¹‹åçš„å­—æ®µ</p><pre class="language-bash" data-language="bash"><code class="language-bash">db.user_2_0.aggregate<span class="token punctuation">(</span><span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token variable">$group</span><span class="token builtin class-name">:</span> <span class="token punctuation">&#123;</span>            _id: <span class="token string">"<span class="token variable">$gender</span>"</span>,            max_age: <span class="token punctuation">&#123;</span>                <span class="token variable">$max</span><span class="token builtin class-name">:</span> <span class="token string">"<span class="token variable">$age</span>"</span>             <span class="token punctuation">&#125;</span>,            min_age: <span class="token punctuation">&#123;</span>                <span class="token variable">$min</span><span class="token builtin class-name">:</span> <span class="token string">"<span class="token variable">$age</span>"</span>            <span class="token punctuation">&#125;</span>,            avg_age: <span class="token punctuation">&#123;</span>                <span class="token variable">$avg</span><span class="token builtin class-name">:</span> <span class="token string">"<span class="token variable">$age</span>"</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>,    <span class="token punctuation">&#123;</span>        <span class="token variable">$sort</span><span class="token builtin class-name">:</span> <span class="token punctuation">&#123;</span> <span class="token comment"># æ’åº</span>            avg_age: <span class="token number">1</span> <span class="token comment"># æŒ‡å®šåˆ†ç»„ä¹‹åçš„å“ªä¸ªå­—æ®µè¿›è¡Œæ’åº</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># ============= Run Results ============= #</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> <span class="token string">"å¥³"</span>, <span class="token string">"max_age"</span> <span class="token builtin class-name">:</span> <span class="token number">23</span>, <span class="token string">"min_age"</span> <span class="token builtin class-name">:</span> <span class="token number">18</span>, <span class="token string">"avg_age"</span> <span class="token builtin class-name">:</span> <span class="token number">20.5</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span> <span class="token string">"_id"</span> <span class="token builtin class-name">:</span> <span class="token string">"ç”·"</span>, <span class="token string">"max_age"</span> <span class="token builtin class-name">:</span> <span class="token number">27</span>, <span class="token string">"min_age"</span> <span class="token builtin class-name">:</span> <span class="token number">18</span>, <span class="token string">"avg_age"</span> <span class="token builtin class-name">:</span> <span class="token number">22.5</span> <span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> æ•°æ®åº“å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MongoDB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹å•ä¾‹è®¾è®¡æ¨¡å¼</title>
      <link href="/journal/design-pattern-singleton/"/>
      <url>/journal/design-pattern-singleton/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å•ä¾‹è®¾è®¡æ¨¡å¼çš„ç›®çš„å°±æ˜¯è®©å¯¹è±¡åªåˆ›å»ºä¸€æ¬¡ï¼Œæ¯”å¦‚åœ¨ JDK ä¸­çš„ Runtime ç±»é»˜è®¤çš„åˆ›å»ºæ–¹å¼å°±æ˜¯ä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚åŒæ—¶æ•°æ®åº“è¿æ¥æ± ã€çº¿ç¨‹æ± ç­‰ç­‰ä¸€äº›é‡é‡çº§çš„å¯¹è±¡åªéœ€è¦åˆ›å»ºä¸€æ¬¡éšå¤„ä½¿ç”¨å³å¯ã€‚</p><p>å•ä¾‹è®¾è®¡æ¨¡å¼å…±æœ‰ 7 ç§åˆ›å»ºçš„æ–¹å¼ã€‚å•ä¾‹çš„ä¸»è¦ç‰¹ç‚¹å°±æ˜¯æ„é€ æ–¹æ³•æ˜¯ç§æœ‰åŒ–çš„ã€‚</p><span id="more"></span><h2 id="ç¬¬ä¸€ç§ï¼šé¥¿æ±‰å¼ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰"><a href="#ç¬¬ä¸€ç§ï¼šé¥¿æ±‰å¼ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰" class="headerlink" title="ç¬¬ä¸€ç§ï¼šé¥¿æ±‰å¼ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰"></a>ç¬¬ä¸€ç§ï¼šé¥¿æ±‰å¼ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</h2><p>é¥¿æ±‰å¼çš„æ–¹å¼å°±æ˜¯ç±»åœ¨åŠ è½½ä¹‹åï¼Œå°±ç«‹å³åˆ›å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> singleton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Run</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Singleton</span> singleton <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Singleton</span> singleton1 <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ä¸€æ ·</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>singleton <span class="token operator">==</span> singleton1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="ç¬¬äºŒç§ï¼šæ‡’æ±‰å¼ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰"><a href="#ç¬¬äºŒç§ï¼šæ‡’æ±‰å¼ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰" class="headerlink" title="ç¬¬äºŒç§ï¼šæ‡’æ±‰å¼ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰"></a>ç¬¬äºŒç§ï¼šæ‡’æ±‰å¼ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰</h2><p>æ‡’æ±‰å¼çš„æ–¹å¼å°±æ˜¯ç±»åœ¨åŠ è½½ä¹‹åï¼Œåªæœ‰åœ¨è°ƒç”¨ getInstance æ–¹æ³•æ—¶ï¼Œå®ƒæ‰ä¼šåˆ›å»ºå¯¹è±¡ã€‚å®ƒåœ¨å•çº¿ç¨‹ä¸‹å¯ä»¥ä¿è¯å•ä¾‹ï¼Œä½†æ˜¯åœ¨å¤šçº¿ç¨‹å°±æ— æ³•ä¿è¯å•ä¾‹çš„äº†ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> singleton <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>singleton <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            singleton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Run</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Singleton</span> singleton <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Singleton</span> singleton1 <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ä¸€æ ·</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>singleton <span class="token operator">==</span> singleton1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="ç¬¬ä¸‰ç§ï¼šæ‡’æ±‰å¼ï¼ŒåŒæ­¥æ–¹æ³•ï¼ˆçº¿ç¨‹å®‰å…¨ï¼Œä½æ•ˆç‡ï¼‰"><a href="#ç¬¬ä¸‰ç§ï¼šæ‡’æ±‰å¼ï¼ŒåŒæ­¥æ–¹æ³•ï¼ˆçº¿ç¨‹å®‰å…¨ï¼Œä½æ•ˆç‡ï¼‰" class="headerlink" title="ç¬¬ä¸‰ç§ï¼šæ‡’æ±‰å¼ï¼ŒåŒæ­¥æ–¹æ³•ï¼ˆçº¿ç¨‹å®‰å…¨ï¼Œä½æ•ˆç‡ï¼‰"></a>ç¬¬ä¸‰ç§ï¼šæ‡’æ±‰å¼ï¼ŒåŒæ­¥æ–¹æ³•ï¼ˆçº¿ç¨‹å®‰å…¨ï¼Œä½æ•ˆç‡ï¼‰</h2><p>è§£å†³åœ¨å¤šçº¿ç¨‹ä¸‹å•ä¾‹çš„æ–¹æ³•ï¼Œç®€å•ç²—æš´çš„åœ¨ getInstance æ–¹æ³•åŠ ä¸€ä¸ªåŒæ­¥å…³é”®å­—ï¼Œè™½ç„¶å¯ä»¥ä¿è¯çº¿ç¨‹çš„å®‰å…¨ï¼Œä½†æ˜¯æ•ˆç‡å¤ªä½äº†ï¼Œå› ä¸ºæ¯ä¸ªçº¿ç¨‹è°ƒç”¨è¯¥æ–¹æ³•æ˜¯éƒ½éœ€è¦ç­‰å¾…è·å¾—é”ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> singleton <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>singleton <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            singleton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>s        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Run</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Singleton</span> singleton <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Singleton</span> singleton1 <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ä¸€æ ·</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>singleton <span class="token operator">==</span> singleton1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="ç¬¬å››ç§ï¼šæ‡’æ±‰å¼ï¼ŒåŒæ­¥ä»£ç å—ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰"><a href="#ç¬¬å››ç§ï¼šæ‡’æ±‰å¼ï¼ŒåŒæ­¥ä»£ç å—ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰" class="headerlink" title="ç¬¬å››ç§ï¼šæ‡’æ±‰å¼ï¼ŒåŒæ­¥ä»£ç å—ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰"></a>ç¬¬å››ç§ï¼šæ‡’æ±‰å¼ï¼ŒåŒæ­¥ä»£ç å—ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰</h2><p>è™½ç„¶åŠ äº†åŒæ­¥å…³é”®å­—ï¼Œä½†æ˜¯ä¸€å¼€å§‹æœ‰å¤šä¸ªçº¿ç¨‹è®¿é—®è¯¥å¯¹è±¡ï¼Œå½“çº¿ç¨‹ä¸­è·å¾—çš„éƒ½æ˜¯ null æ—¶ï¼Œåˆ™åœ¨åŒæ­¥ä»£ç å—ä¸­ç­‰å¾…è·å¾—é”ï¼Œå½“ç¬¬ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œ new æ—¶ï¼Œäº¤ç»™ç¬¬äºŒä¸ªï¼Œç¬¬äºŒä¸ªå†æ¬¡ new æ—¶ï¼Œç¬¬ä¸€ä¸ªçº¿ç¨‹è·å¾—çš„å¯¹è±¡å°±å’Œç¬¬äºŒä¸ªçº¿ç¨‹è·å¾—çš„å¯¹è±¡å°±ä¸ä¸€æ ·äº†ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> singleton <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>singleton <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                singleton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Run</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Singleton</span> singleton <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Singleton</span> singleton1 <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ä¸€æ ·</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>singleton <span class="token operator">==</span> singleton1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="ç¬¬äº”ç§ï¼šæ‡’æ±‰å¼ï¼ŒåŒæ­¥ä»£ç å—ï¼ˆçº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡è¾ƒé«˜ï¼‰"><a href="#ç¬¬äº”ç§ï¼šæ‡’æ±‰å¼ï¼ŒåŒæ­¥ä»£ç å—ï¼ˆçº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡è¾ƒé«˜ï¼‰" class="headerlink" title="ç¬¬äº”ç§ï¼šæ‡’æ±‰å¼ï¼ŒåŒæ­¥ä»£ç å—ï¼ˆçº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡è¾ƒé«˜ï¼‰"></a>ç¬¬äº”ç§ï¼šæ‡’æ±‰å¼ï¼ŒåŒæ­¥ä»£ç å—ï¼ˆçº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡è¾ƒé«˜ï¼‰</h2><p>ä½¿ç”¨åŒé‡æ ¡éªŒå°±å¯ä»¥è§£å†³ï¼Œåªéœ€è¦åœ¨åŒæ­¥ä»£ç å—ä¸­å†æ¬¡åˆ¤æ–­å¯¹è±¡æ˜¯å¦å·²ç»åˆ›å»ºå³å¯ã€‚åŒæ—¶ä¸ºäº†ä¿è¯å¯è§æ€§ï¼Œåœ¨å…±äº«çš„å˜é‡åŠ ä¸€ä¸ª volatile å³å¯ã€‚</p><blockquote><p>å¯è§æ€§æ˜¯å€¼ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹ï¼Œå¯¹äºå¦ä¸€ä¸ªçº¿ç¨‹æ¥è¯´æ˜¯å¦æ˜¯å¯ä»¥çœ‹åˆ°çš„ã€‚</p><p>ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§é—®é¢˜å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬çŸ¥é“ï¼ŒJava çº¿ç¨‹é€šä¿¡æ˜¯é€šè¿‡å…±äº«å†…å­˜çš„æ–¹å¼è¿›è¡Œé€šä¿¡çš„ï¼Œä½†æ˜¯ä¸ºäº†åŠ å¿«æ‰§è¡Œçš„é€Ÿåº¦ï¼Œçº¿ç¨‹ä¸€èˆ¬æ˜¯ä¸ä¼šç›´æ¥æ“ä½œå†…å­˜çš„ï¼Œè€Œæ˜¯æ“ä½œç¼“å­˜ã€‚</p><p>å®é™…ä¸Šï¼Œçº¿ç¨‹æ“ä½œçš„æ˜¯è‡ªå·±çš„å·¥ä½œå†…å­˜ï¼Œè€Œä¸ä¼šç›´æ¥æ“ä½œä¸»å†…å­˜ã€‚å¦‚æœçº¿ç¨‹å¯¹å˜é‡çš„æ“ä½œæ²¡æœ‰åˆ·å†™ä¼šä¸»å†…å­˜çš„è¯ï¼Œä»…ä»…æ”¹å˜äº†è‡ªå·±çš„å·¥ä½œå†…å­˜çš„å˜é‡çš„å‰¯æœ¬ï¼Œé‚£ä¹ˆå¯¹äºå…¶ä»–çº¿ç¨‹æ¥è¯´æ˜¯ä¸å¯è§çš„ã€‚è€Œå¦‚æœå¦ä¸€ä¸ªå˜é‡æ²¡æœ‰è¯»å–ä¸»å†…å­˜ä¸­çš„æ–°çš„å€¼ï¼Œè€Œæ˜¯ä½¿ç”¨æ—§çš„å€¼çš„è¯ï¼ŒåŒæ ·çš„ä¹Ÿå¯ä»¥åˆ—ä¸ºä¸å¯è§ã€‚</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> singleton <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>singleton <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>singleton <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    singleton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Run</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Singleton</span> singleton <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Singleton</span> singleton1 <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ä¸€æ ·</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>singleton <span class="token operator">==</span> singleton1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="ç¬¬å…­ç§ï¼šé™æ€å†…éƒ¨ç±»ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰"><a href="#ç¬¬å…­ç§ï¼šé™æ€å†…éƒ¨ç±»ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰" class="headerlink" title="ç¬¬å…­ç§ï¼šé™æ€å†…éƒ¨ç±»ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰"></a>ç¬¬å…­ç§ï¼šé™æ€å†…éƒ¨ç±»ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</h2><p>ä½¿ç”¨é™æ€å†…éƒ¨ç±»åˆ›å»ºå•ä¾‹å¯¹è±¡ä¹Ÿæ˜¯ä¸€ç§ä¸é”™çš„æ–¹å¼ï¼Œé™æ€çš„å†…éƒ¨ç±»ä¸ä¼šéšç€å¤–éƒ¨ç±»çš„åŠ è½½è€ŒåŠ è½½ï¼Œç”±äºç±»åœ¨åŠ è½½çš„æ—¶å€™å°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥è¿™é‡Œç”¨çš„æ˜¯ç±»åŠ è½½çš„æ–¹å¼æ¥åˆ›å»ºçš„ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">SingletonInstance</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonInstance</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Run</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Singleton</span> singleton <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Singleton</span> singleton1 <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ä¸€æ ·</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>singleton <span class="token operator">==</span> singleton1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="ç¬¬ä¸ƒç§ï¼šæšä¸¾ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰"><a href="#ç¬¬ä¸ƒç§ï¼šæšä¸¾ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰" class="headerlink" title="ç¬¬ä¸ƒç§ï¼šæšä¸¾ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰"></a>ç¬¬ä¸ƒç§ï¼šæšä¸¾ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</h2><p>ä½¿ç”¨æšä¸¾çš„æ–¹å¼ä¹Ÿå¯ä»¥åˆ›å»ºå•ä¾‹å¯¹è±¡ï¼Œå½“è¢«ååºåˆ—åŒ–çš„æ—¶å€™ï¼Œç¬¬å…­ç§å°±æ— æ³•ä¿è¯å¯¹è±¡æ˜¯å•ä¾‹çš„äº†ã€‚Effective Java ä½œè€…æ¨èä½¿ç”¨æšä¸¾çš„æ–¹å¼è§£å†³å•ä¾‹æ¨¡å¼ï¼Œä½†æ˜¯æ„Ÿè§‰æ–¹å¼å¯èƒ½æ˜¯å¹³æ—¶æœ€å°‘ç”¨åˆ°çš„ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Singleton</span> <span class="token punctuation">&#123;</span>    INSTANCE<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ok"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>        <span class="token class-name">Singleton</span> instance1 <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> instance1<span class="token punctuation">)</span><span class="token punctuation">;</span>        instance<span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 23 ç§è®¾è®¡æ¨¡å¼ </category>
          
          <category> åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼çš„ 6 å¤§åŸåˆ™</title>
      <link href="/journal/design-pattern-tutoral/"/>
      <url>/journal/design-pattern-tutoral/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ç¼–å†™è½¯ä»¶è¿‡ç¨‹ä¸­ï¼Œç¨‹åºå‘˜é¢ä¸´ç€æ¥è‡ªè€¦åˆæ€§ï¼Œå†…èšæ€§ä»¥åŠå¯ç»´æŠ¤æ€§ï¼Œå¯æ‰©å±•æ€§ï¼Œé‡ç”¨æ€§ï¼Œçµæ´»æ€§ç­‰å¤šæ–¹é¢çš„æŒ‘æˆ˜ï¼Œè®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†è®©ç¨‹åº(è½¯ä»¶)ï¼Œå…·æœ‰æ›´å¥½çš„ä»£ç é‡ç”¨æ€§ã€å¯è¯»æ€§ã€å¯æ‰©å±•æ€§ã€å¯é æ€§ï¼Œä½¿ç¨‹åºå‘ˆç°é«˜å†…èšï¼Œä½è€¦åˆçš„ç‰¹æ€§ã€‚</p><ol><li>ä»£ç é‡ç”¨æ€§ï¼ˆç›¸åŒåŠŸèƒ½çš„ä»£ç ï¼Œä¸ç”¨å¤šæ¬¡ç¼–å†™ï¼‰</li><li>å¯è¯»æ€§ï¼ˆç¼–ç¨‹è§„èŒƒæ€§ï¼Œä¾¿äºç†è§£ï¼‰</li><li>å¯æ‰©å±•æ€§ï¼ˆéœ€è¦å¢åŠ æ–°åŠŸèƒ½ï¼Œéå¸¸çš„æ–¹ä¾¿ï¼‰</li><li>å¯é æ€§ï¼ˆå¢åŠ æ–°çš„åŠŸèƒ½åï¼Œå¯¹åŸæœ‰çš„åŠŸèƒ½ä¸å½±å“ï¼‰</li><li>é«˜å†…èšï¼ˆæ¨¡å—å†…éƒ¨éå¸¸ç´§å¯†ï¼‰ã€ä½è€¦åˆï¼ˆåŠŸèƒ½ä¹‹é—´ä¾èµ–æ€§ä½ï¼‰</li></ol><blockquote><p>è®¾è®¡æ¨¡å¼åŒ…å«äº†é¢å‘å¯¹è±¡çš„ç²¾é«“ï¼Œâ€œæ‡‚äº†è®¾è®¡æ¨¡å¼ï¼Œä½ å°±æ‡‚äº†é¢å‘å¯¹è±¡åˆ†æå’Œè®¾è®¡(OOA/Dï¼‰çš„ç²¾è¦â€</p></blockquote><span id="more"></span><p>è®¾è®¡æ¨¡å¼åŸåˆ™ï¼Œå…¶å®å°±æ˜¯ç¨‹åºå‘˜åœ¨ç¼–ç¨‹æ—¶ï¼Œåº”å½“éµå®ˆçš„åŸåˆ™ï¼Œä¹Ÿæ˜¯å„ç§è®¾è®¡æ¨¡å¼çš„åŸºç¡€ï¼ˆå³:è®¾è®¡æ¨¡å¼ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡çš„ä¾æ®ï¼‰ã€‚</p><p>è®¾è®¡æ¨¡å¼å¸¸è§çš„å…­å¤§åŸåˆ™æœ‰:</p><ol><li>å•ä¸€èŒè´£åŸåˆ™</li><li>æ¥å£éš”ç¦»åŸåˆ™</li><li>ä¾èµ–å€’è½¬ï¼ˆå€’ç½®ï¼‰åŸåˆ™</li><li>é‡Œæ°æ›¿æ¢åŸåˆ™</li><li>å¼€é—­åŸåˆ™</li><li>è¿ªç±³ç‰¹æ³•åˆ™</li></ol><h2 id="å•ä¸€èŒè´£åŸåˆ™"><a href="#å•ä¸€èŒè´£åŸåˆ™" class="headerlink" title="å•ä¸€èŒè´£åŸåˆ™"></a>å•ä¸€èŒè´£åŸåˆ™</h2><blockquote><p>çº¦å®šå¤§äºç¼–ç ï¼Œæ‰€æœ‰çš„è®¾è®¡æ¨¡å¼éƒ½éœ€è¦éµå¾ªè¿™ 7 ç§åŸåˆ™ã€‚ </p></blockquote><p>å¯¹ç±»æ¥è¯´çš„ï¼Œå³ä¸€ä¸ªç±»åº”è¯¥åªè´Ÿè´£ä¸€é¡¹èŒè´£ã€‚å¦‚ç±» A è´Ÿè´£ä¸¤ä¸ªä¸åŒèŒè´£ï¼šèŒè´£1ï¼ŒèŒè´£2ã€‚å½“èŒè´£ 1 éœ€æ±‚å˜æ›´è€Œæ”¹å˜ A æ—¶ï¼Œå¯èƒ½é€ æˆèŒè´£ 2 æ‰§è¡Œé”™è¯¯ï¼Œæ‰€ä»¥éœ€è¦å°†ç±»Açš„ç²’åº¦åˆ†è§£ä¸º A1ï¼ŒA2ã€‚</p><h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><p>äº¤é€šå·¥å…·æ¡ˆä¾‹ã€‚</p><h4 id="æ–¹å¼-1"><a href="#æ–¹å¼-1" class="headerlink" title="æ–¹å¼ 1"></a>æ–¹å¼ 1</h4><p>æ‰€æœ‰çš„äº¤é€šå·¥å…·åœ¨ä¸€ä¸ªæ–¹æ³•ä¸Šé¢è·‘ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">String</span> vehicle<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>vehicle <span class="token operator">+</span> <span class="token string">"åœ¨å…¬è·¯ä¸Šè·‘...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token class-name">Vehicle</span> vehicle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vehicle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       vehicle<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"æ±½è½¦"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        vehicle<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"é£æœº"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        vehicle<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"æ¸¸è‰‡"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ç¨‹åºè¿è¡Œï¼š</p><pre class="language-none"><code class="language-none">æ±½è½¦åœ¨å…¬è·¯ä¸Šè·‘....é£æœºåœ¨å…¬è·¯ä¸Šè·‘....æ¸¸è‰‡åœ¨å…¬è·¯ä¸Šè·‘....</code></pre><p>æœ‰æ²¡æœ‰å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œé£æœºå’Œæ¸¸è‰‡éƒ½åœ¨å…¬è·¯ä¸Šè·‘ï¼Œæ¸¸è‰‡åœ¨å…¬è·¯ä¸Šè·‘ã€‚å‘ç°æœ‰é—®é¢˜äº†ï¼Œé‚£å°±æ”¹æ”¹ä»£ç å§ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">String</span> vehicle<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"æ±½è½¦"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>vehicle<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>vehicle <span class="token operator">+</span> <span class="token string">"åœ¨å…¬è·¯ä¸Šè·‘...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"é£æœº"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>vehicle<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>vehicle <span class="token operator">+</span> <span class="token string">"åœ¨å¤©ç©ºé£...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"æ¸¸è‰‡"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>vehicle<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>vehicle <span class="token operator">+</span> <span class="token string">"åœ¨æ°´ä¸­åˆ’...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token class-name">Vehicle</span> vehicle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vehicle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       vehicle<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"æ±½è½¦"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        vehicle<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"é£æœº"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        vehicle<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"æ¸¸è‰‡"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ç¨‹åºè¿è¡Œï¼š</p><pre class="language-none"><code class="language-none">æ±½è½¦åœ¨å…¬è·¯ä¸Šè·‘....é£æœºåœ¨åœ¨å¤©ç©ºé£....æ¸¸è‰‡åœ¨æ°´ä¸­åˆ’....</code></pre><p>ç°åœ¨ä¼¼ä¹æ²¡ä»€ä¹ˆé—®é¢˜äº†ï¼Œä½†æ˜¯è¿™è¿åäº†å•ä¸€èŒè´£åŸåˆ™ï¼Œè€Œä¸”ä»£ç çš„é‡ç”¨æ€§ã€å¯è¯»æ€§ã€å¯æ‰©å±•æ€§ã€å¯é æ€§éƒ½æ¯”è¾ƒå·®ã€‚è§£å†³çš„æ–¹æ³•æ ¹æ®äº¤é€šå·¥å…·è¿è¡Œæ–¹æ³•ä¸åŒï¼Œåˆ†è§£æˆä¸åŒç±»å³å¯ã€‚</p><h4 id="æ–¹å¼-2"><a href="#æ–¹å¼-2" class="headerlink" title="æ–¹å¼ 2"></a>æ–¹å¼ 2</h4><p>åˆ†è§£æˆä¸‰ç§äº¤é€šå·¥å…·ç±»</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">RoadVehicle</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">String</span> vehicle<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>vehiclc <span class="token operator">+</span> <span class="token string">"åœ¨å…¬è·¯ä¸Šè·‘...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">AirVehicle</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">String</span> vchiclc<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token class-name">Systcm</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>vchicle <span class="token operator">+</span> <span class="token string">"åœ¨å¤©ç©ºä¸Šé£..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>                           <span class="token keyword">class</span> <span class="token class-name">WatcrVchiclc</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">String</span> vehicle<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>vehicle <span class="token operator">+</span> <span class="token string">"åœ¨æ°´ä¸­åˆ’...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token class-name">RoadVehicle</span> roadVehicle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RoadVehicle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       roadVehicle<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"æ±½è½¦"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">AirVehicle</span> airVehicle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AirVehicle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        airVehicle<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"é£æœº"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">WaterVehicle</span> waterVehicle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WaterVehicle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        waterVehicle<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"æ¸¸è‰‡"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>éµå®ˆç±»çº§åˆ«çš„å•ä¸€èŒè´£åŸåˆ™ã€‚</p><p>ç±»çº§åˆ«çš„å•ä¸€èŒè´£åŸåˆ™æ˜¯æœ€å¥½çš„ï¼Œä¹Ÿæ˜¯æœ€å½»åº•çš„ã€‚ä½†æ˜¯åœ¨æœ¬æ¡ˆä¾‹ä¸­ä»£ç ç®€å•ï¼Œæ–¹æ³•å°±åªæœ‰ä¸€ä¸ªï¼Œè‹¥è¦å¯¹ç±»è¿™ä¸ªçº§åˆ«ä¸­éµå®ˆå•ä¸€èŒè´£ï¼Œæ”¹åŠ¨è¾ƒå¤§ï¼Œå¯ä»¥é™ä¸ºæ–¹æ³•çº§åˆ«çš„å•ä¸€èŒè´£ï¼Œå‚è§æ–¹æ¡ˆ 3ã€‚</p><h4 id="æ–¹å¼-3"><a href="#æ–¹å¼-3" class="headerlink" title="æ–¹å¼ 3"></a>æ–¹å¼ 3</h4><p>ä¸€ä¸ªç±»ä¸­åˆ†åˆ«æœ‰ä¸‰ç§äº¤é€šå·¥å…·ä¸åŒè¿ä½œçš„æ–¹å¼ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">String</span> vehicle<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>vehicle <span class="token operator">+</span> <span class="token string">"åœ¨å…¬è·¯ä¸Šè·‘...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">runAir</span><span class="token punctuation">(</span><span class="token class-name">String</span> vchiclc<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">Systcm</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>vehiclc <span class="token operator">+</span> <span class="token string">"åœ¨å¤©ç©ºä¸Šé£..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">runWater</span><span class="token punctuation">(</span><span class="token class-name">String</span> vehicle<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printIn</span><span class="token punctuation">(</span>vehicle <span class="token operator">+</span> <span class="token string">"åœ¨æ°´ä¸­åˆ’...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token class-name">Vehicle</span> vehicle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vehicle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       vehicle<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">"æ±½è½¦"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        vehicle<span class="token punctuation">.</span><span class="token function">runAir</span><span class="token punctuation">(</span><span class="token string">"é£æœº"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        vehicle<span class="token punctuation">.</span><span class="token function">runWatetr</span><span class="token punctuation">(</span><span class="token string">"æ¸¸è‰‡"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>éµå®ˆæ–¹æ³•çº§åˆ«çš„å•ä¸€èŒè´£åŸåˆ™ã€‚</p><p>è¿™ç§ä¿®æ”¹æ–¹æ³•æ²¡æœ‰å¯¹åŸæ¥çš„ç±»åšå¤§çš„ä¿®æ”¹ï¼Œåªæ˜¯å¢åŠ æ–¹æ³•ã€‚è¿™é‡Œè™½ç„¶æ²¡æœ‰åœ¨ç±»è¿™ä¸ªçº§åˆ«ä¸Šéµå®ˆå•ä¸€èŒè´£åŸåˆ™ï¼Œä½†æ˜¯åœ¨æ–¹æ³•çº§åˆ«ä¸Šï¼Œä»ç„¶æ˜¯éµå®ˆå•ä¸€èŒè´£ã€‚</p><blockquote><p>æ³¨æ„ï¼šæ–¹æ³•çº§åˆ«çš„å•ä¸€èŒè´£åªæ˜¯ç±»ä¸­çš„æ¨¡å—æˆ–è€…åŠŸèƒ½è¾ƒå°‘çš„æ—¶å€™å¯ä»¥è¿™ä¹ˆåšï¼Œå¦åˆ™ç›´æ¥å»ºè®®ä½¿ç”¨ç±»çº§åˆ«çš„å•ä¸€èŒè´£åŸåˆ™ã€‚</p></blockquote><h2 id="æ¥å£éš”ç¦»åŸåˆ™"><a href="#æ¥å£éš”ç¦»åŸåˆ™" class="headerlink" title="æ¥å£éš”ç¦»åŸåˆ™"></a>æ¥å£éš”ç¦»åŸåˆ™</h2><p>å®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£ï¼Œå³<strong>ä¸€ä¸ªç±»å¯¹å¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”å­©å»ºç«‹åœ¨æœ€å°çš„æ¥å£</strong>ä¸Šã€‚æœ€å°æ¥å£ï¼Œå…¶å®å°±æ˜¯å°†æ¥å£ä¸­ç”¨ä¸åˆ°çš„æ–¹æ³•ï¼Œå°†å¤§çš„æ¥å£ï¼ˆæŠ½è±¡æ–¹æ³•å¤šçš„ï¼‰æ‹†åˆ†æˆå°çš„æ¥å£ï¼ˆæŠ½è±¡æ–¹æ³•å°‘çš„ï¼‰ã€‚è‹¥è¦å®ç°æŸä¸ªæ–¹æ³•ï¼Œåªéœ€è¦å®ç°å³å¯ã€‚</p><p>è¯·çœ‹æ­¤ç±»å›¾çš„å…³ç³»ã€‚</p><p><img src="/journal/design-pattern-tutoral/image-20220402144032636.png" alt="image-20220402144032636" loading="lazy"></p><p>å¯¹åº”çš„ä»£ç å¦‚ä¸‹æ‰€ç¤º</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Segregation1</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">A</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">.</span><span class="token function">depend1</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">.</span><span class="token function">depend2</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">.</span><span class="token function">depend3</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">C</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        c<span class="token punctuation">.</span><span class="token function">depend1</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        c<span class="token punctuation">.</span><span class="token function">depend4</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        c<span class="token punctuation">.</span><span class="token function">depend5</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">interface</span> <span class="token class-name">Interface1</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">void</span> <span class="token function">operation1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">operation2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">operation3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">operation4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">operation5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * B å®ç°ç±» */</span><span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">implements</span> <span class="token class-name">Interface1</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"B å®ç° operation1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"B å®ç° operation2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"B å®ç° operation3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"B å®ç° operation4"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"B å®ç° operation5"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * D å®ç°ç±» */</span><span class="token keyword">class</span> <span class="token class-name">D</span> <span class="token keyword">implements</span> <span class="token class-name">Interface1</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"D å®ç° operation1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"D å®ç° operation2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"D å®ç° operation3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"D å®ç° operation4"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"D å®ç° operation5"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * ç±» A ä¸­ï¼Œåªä¾èµ–äº†æ¥å£çš„ operation1()ã€operation2()ã€operation3() æ–¹æ³• */</span><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">depend1</span><span class="token punctuation">(</span><span class="token class-name">Interface1</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        i<span class="token punctuation">.</span><span class="token function">operation1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">depend2</span><span class="token punctuation">(</span><span class="token class-name">Interface1</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        i<span class="token punctuation">.</span><span class="token function">operation2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">depend3</span><span class="token punctuation">(</span><span class="token class-name">Interface1</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        i<span class="token punctuation">.</span><span class="token function">operation3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * ç±» C ä¸­ï¼Œåªä¾èµ–äº†æ¥å£çš„ operation1()ã€operation4()ã€operation5() æ–¹æ³• */</span><span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">depend1</span><span class="token punctuation">(</span><span class="token class-name">Interface1</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        i<span class="token punctuation">.</span><span class="token function">operation1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">depend4</span><span class="token punctuation">(</span><span class="token class-name">Interface1</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        i<span class="token punctuation">.</span><span class="token function">operation4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">depend5</span><span class="token punctuation">(</span><span class="token class-name">Interface1</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        i<span class="token punctuation">.</span><span class="token function">operation5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>A åªä¾èµ–äº†æ¥å£çš„ operation1()ã€operation2()ã€operation3() æ–¹æ³•ï¼Œoperation4()ã€operation5() æ–¹æ³•æ²¡æœ‰ä½¿ç”¨åˆ°ï¼ŒC åªä¾èµ–äº†æ¥å£çš„ operation1()ã€operation4()ã€operation5() æ–¹æ³•ï¼Œoperation2()ã€operation3() æ–¹æ³•æ²¡æœ‰ä½¿ç”¨åˆ°ã€‚æ²¡æœ‰ä½¿ç”¨çš„æ–¹æ³•æ˜¾å¾—å¤šä½™ï¼Œæ‰€ä»¥å°±è¿èƒŒäº†æ¥å£éš”ç¦»çš„åŸåˆ™ã€‚</p><p>æ­¤æ—¶æˆ‘ä»¬éœ€è¦å¯¹æ¥å£è¿›è¡Œæ‹†åˆ†ï¼Œæ‹†åˆ†ä¹‹åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>segregation<span class="token punctuation">.</span>after</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Segregation1</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">A</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">.</span><span class="token function">depend1</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">.</span><span class="token function">depend2</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">.</span><span class="token function">depend3</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">C</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        c<span class="token punctuation">.</span><span class="token function">depend1</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        c<span class="token punctuation">.</span><span class="token function">depend4</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        c<span class="token punctuation">.</span><span class="token function">depend5</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">interface</span> <span class="token class-name">Interface1</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">void</span> <span class="token function">operation1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">interface</span> <span class="token class-name">Interface2</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">void</span> <span class="token function">operation2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">operation3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">interface</span> <span class="token class-name">Interface3</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">void</span> <span class="token function">operation4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">operation5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * B å®ç°ç±» */</span><span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">implements</span> <span class="token class-name">Interface1</span><span class="token punctuation">,</span> <span class="token class-name">Interface2</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"B å®ç° operation1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"B å®ç° operation2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"B å®ç° operation3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * D å®ç°ç±» */</span><span class="token keyword">class</span> <span class="token class-name">D</span> <span class="token keyword">implements</span> <span class="token class-name">Interface1</span><span class="token punctuation">,</span> <span class="token class-name">Interface3</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"D å®ç° operation1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"D å®ç° operation4"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"D å®ç° operation5"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * ç±» A ä¸­ï¼Œåªä¾èµ–äº†æ¥å£çš„ operation1()ã€operation2()ã€operation3() æ–¹æ³• */</span><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">depend1</span><span class="token punctuation">(</span><span class="token class-name">Interface1</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        i<span class="token punctuation">.</span><span class="token function">operation1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">depend2</span><span class="token punctuation">(</span><span class="token class-name">Interface2</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        i<span class="token punctuation">.</span><span class="token function">operation2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">depend3</span><span class="token punctuation">(</span><span class="token class-name">Interface2</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        i<span class="token punctuation">.</span><span class="token function">operation3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * ç±» C ä¸­ï¼Œåªä¾èµ–äº†æ¥å£çš„ operation1()ã€operation4()ã€operation5() æ–¹æ³• */</span><span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">depend1</span><span class="token punctuation">(</span><span class="token class-name">Interface1</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        i<span class="token punctuation">.</span><span class="token function">operation1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">depend4</span><span class="token punctuation">(</span><span class="token class-name">Interface3</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        i<span class="token punctuation">.</span><span class="token function">operation4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">depend5</span><span class="token punctuation">(</span><span class="token class-name">Interface3</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        i<span class="token punctuation">.</span><span class="token function">operation5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ç„¶åå¯¹åº”çš„ç±»å›¾å¦‚ä¸‹æ‰€ç¤ºï¼Œè¿™æ ·ä¸€æ¥å°±å¯¹æ¥å£è¿›è¡Œäº†åˆ†ç¦»ï¼Œè¯¥ç”¨åˆ°çš„æ–¹æ³•éƒ½ç”¨åˆ°äº†ã€‚ä¹Ÿä¸ä¼šæ˜¾å¾—ç‰¹åˆ«çš„å¤šä½™äº†ã€‚</p><p><img src="/journal/design-pattern-tutoral/image-20220402144907003.png" alt="image-20220402144907003" loading="lazy"></p><h2 id="ä¾èµ–å€’ç½®åŸåˆ™"><a href="#ä¾èµ–å€’ç½®åŸåˆ™" class="headerlink" title="ä¾èµ–å€’ç½®åŸåˆ™"></a>ä¾èµ–å€’ç½®åŸåˆ™</h2><ol><li>é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–å…¶æŠ½è±¡ã€‚</li><li>æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡ã€‚</li><li>ä¾èµ–å€’ç½®çš„ä¸­å¿ƒæ€æƒ³æ˜¯é¢å‘æ¥å£ç¼–ç¨‹ã€‚</li><li>ä¾èµ–å€’è½¬åŸåˆ™æ˜¯åŸºäºè¿™æ ·çš„è®¾è®¡ç†å¿µï¼šç›¸å¯¹äºç»†èŠ‚çš„å¤šå˜æ€§ï¼ŒæŠ½è±¡çš„ä¸œè¥¿è¦ç¨³å®šçš„å¤šã€‚ä»¥æŠ½è±¡ä¸ºåŸºç¡€æ­å»ºçš„æ¶æ„æ¯”ä»¥ç»†èŠ‚ä¸ºåŸºç¡€çš„æ¶æ„è¦ç¨³å®šçš„å¤šã€‚åœ¨ Java ä¸­ï¼ŒæŠ½è±¡æŒ‡çš„æ˜¯æ¥å£æˆ–æŠ½è±¡ç±»,ç»†èŠ‚å°±æ˜¯å…·ä½“çš„å®ç°ç±»ã€‚</li><li>ä½¿ç”¨æ¥å£æˆ–æŠ½è±¡ç±»çš„ç›®çš„æ˜¯åˆ¶å®šå¥½è§„èŒƒï¼Œè€Œä¸æ¶‰åŠä»»ä½•å…·ä½“çš„æ“ä½œï¼ŒæŠŠå±•ç°ç»†èŠ‚çš„ä»»åŠ¡äº¤ç»™ä»–ä»¬çš„å®ç°ç±»å»å®Œæˆã€‚</li></ol><h3 id="ä¾‹å­-1"><a href="#ä¾‹å­-1" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><p>å®Œæˆ Person æ¥æ”¶æ¶ˆæ¯çš„åŠŸèƒ½ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Inversion1</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        person<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Email</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Email</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"æ¥æ”¶åˆ°æ¶ˆæ¯ï¼šhello email!"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">Email</span> email<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>email<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>åŠŸèƒ½è™½ç„¶å®ç°äº†ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬è·å–çš„å¯¹è±¡æ˜¯å¾®ä¿¡ï¼ŒçŸ­ä¿¡ç­‰ç­‰ï¼Œåˆ™æ–°å¢ç±»ï¼ŒåŒæ—¶ Person ä¹Ÿè¦å¢åŠ ç›¸åº”çš„æ¥æ”¶æ–¹æ³•ã€‚</p><p>è§£å†³æ€è·¯ï¼šå¼•å…¥ä¸€ä¸ªæŠ½è±¡çš„æ¥å£ IReceiverï¼Œè¡¨ç¤ºæ¥æ”¶è€…ï¼Œè¿™æ ·Personç±»ä¸æ¥å£ IReceiver å‘ç”Ÿå› ä¸ºEmailï¼ŒWeiXin ç­‰ç­‰å±äºæ¥æ”¶çš„èŒƒå›´ï¼Œä»–ä»¬å„è‡ªå®è§‚ IReceiver æ¥å£å°±okï¼Œè¿™æ ·æˆ‘ä»¬å°±ç¬¦åˆä¾èµ–å€’è½¬åŸåˆ™ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Inversion2</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        person<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Email</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">interface</span> <span class="token class-name">IReceiver</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> <span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Email</span> <span class="token keyword">implements</span> <span class="token class-name">IReceiver</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"æ¥æ”¶åˆ°æ¶ˆæ¯ï¼šhello email!"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">IReceiver</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>receiver<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>å¦‚æœæˆ‘ä»¬åŠ ä¸€ä¸ªå¾®ä¿¡çš„æ¶ˆæ¯ä¼šæ€ä¹ˆæ ·ï¼Ÿ</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">WeiXin</span> <span class="token keyword">implements</span> <span class="token class-name">IReceiver</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"æ¥æ”¶åˆ°å¾®ä¿¡æ¶ˆæ¯ï¼šhello wechat!"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Inversion2</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        person<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Email</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        person<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">WeiXin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>Person ç±»ä¸­ä¸éœ€è¦ä»»ä½•çš„æ”¹åŠ¨ï¼Œå°±å®ç°äº†æ¥æ”¶å¾®ä¿¡çš„æ¶ˆæ¯ï¼Œä»…éœ€å®ç°è¯¥æ¥å£ï¼Œåœ¨ä¸»æ–¹æ³•ä¸­è°ƒç”¨è¯¥ç±»å³å¯ã€‚</p><h3 id="ä¾èµ–å€’è½¬çš„å…¶å®ƒä¸‰ç§å½¢å¼"><a href="#ä¾èµ–å€’è½¬çš„å…¶å®ƒä¸‰ç§å½¢å¼" class="headerlink" title="ä¾èµ–å€’è½¬çš„å…¶å®ƒä¸‰ç§å½¢å¼"></a>ä¾èµ–å€’è½¬çš„å…¶å®ƒä¸‰ç§å½¢å¼</h3><h4 id="é€šè¿‡æ¥å£çš„æ–¹å¼å®ç°"><a href="#é€šè¿‡æ¥å£çš„æ–¹å¼å®ç°" class="headerlink" title="é€šè¿‡æ¥å£çš„æ–¹å¼å®ç°"></a>é€šè¿‡æ¥å£çš„æ–¹å¼å®ç°</h4><p>ITV æ˜¯ç”µè§†çš„æ¥å£ç±»ï¼ŒIOpenAndClose æ˜¯é¥æ§å™¨çš„æ¥å£ç±»ã€‚å®ç°é¥æ§å™¨çš„æ¥å£ï¼Œå†é€šè¿‡ä¾èµ–çš„å½¢å¼æ“ä½œç”µè§†ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">interface</span> <span class="token class-name">IOpenAndClose</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span>iTv tv<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æŠ½è±¡æ–¹æ³•,æ¥æ”¶æ¥å£</span><span class="token punctuation">&#125;</span><span class="token keyword">interface</span> ITV <span class="token punctuation">&#123;</span> <span class="token comment">// ITVæ¥å£</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// å®ç°æ¥å£</span><span class="token keyword">class</span> <span class="token class-name">OpenAndClose</span> <span class="token keyword">implements</span> <span class="token class-name">IOpenAndClose</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token class-name">ITV</span> tv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>tv<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="é€šè¿‡æ„é€ æ–¹æ³•"><a href="#é€šè¿‡æ„é€ æ–¹æ³•" class="headerlink" title="é€šè¿‡æ„é€ æ–¹æ³•"></a>é€šè¿‡æ„é€ æ–¹æ³•</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// å®ç°æ¥å£</span><span class="token keyword">class</span> <span class="token class-name">OpenAndClose</span> <span class="token keyword">implements</span> <span class="token class-name">IOpenAndClose</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token class-name">ITV</span> itv<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">OpenAndClose</span><span class="token punctuation">(</span><span class="token class-name">ITV</span> itv<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>itv <span class="token operator">=</span> itv<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token class-name">ITV</span> tv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>tv<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="é€šè¿‡-setter-æ–¹æ³•"><a href="#é€šè¿‡-setter-æ–¹æ³•" class="headerlink" title="é€šè¿‡ setter æ–¹æ³•"></a>é€šè¿‡ setter æ–¹æ³•</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// å®ç°æ¥å£</span><span class="token keyword">class</span> <span class="token class-name">OpenAndClose</span> <span class="token keyword">implements</span> <span class="token class-name">IOpenAndClose</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token class-name">ITV</span> itv<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setItv</span><span class="token punctuation">(</span><span class="token class-name">ITV</span> itv<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>itv <span class="token operator">=</span> itv<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token class-name">ITV</span> tv<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>tv<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><ol><li>ä½å±‚æ¨¡å—å°½é‡éƒ½è¦æœ‰æŠ½è±¡ç±»æˆ–æ¥å£ï¼Œæˆ–è€…ä¸¤è€…éƒ½æœ‰ï¼Œç¨‹åºç¨³å®šæ€§æ›´å¥½ã€‚</li><li>å˜é‡çš„å£°æ˜ç±»å‹å°½é‡æ˜¯æŠ½è±¡ç±»æˆ–æ¥å£ï¼Œè¿™æ ·æˆ‘ä»¬çš„å˜é‡å¼•ç”¨å’Œå®é™…å¯¹è±¡é—´ï¼Œå°±å­˜åœ¨ä¸€ä¸ªç¼“å†²å±‚,åˆ©äºç¨‹åºæ‰©å±•å’Œä¼˜åŒ–ã€‚</li><li>ç»§æ‰¿æ—¶éµå¾ªé‡Œæ°æ›¿æ¢åŸåˆ™ã€‚</li></ol><h2 id="é‡Œæ°æ›¿æ¢åŸåˆ™"><a href="#é‡Œæ°æ›¿æ¢åŸåˆ™" class="headerlink" title="é‡Œæ°æ›¿æ¢åŸåˆ™"></a>é‡Œæ°æ›¿æ¢åŸåˆ™</h2><blockquote><p>ç»§æ‰¿åŒ…å«è¿™æ ·ä¸€å±‚å«ä¹‰ï¼šçˆ¶ç±»ä¸­å‡¡æ˜¯å·²ç»å®ç°å¥½çš„æ–¹æ³•ï¼Œå®é™…ä¸Šæ˜¯åœ¨è®¾å®š<strong>è§„èŒƒå’Œå¥‘çº¦</strong>ï¼Œè™½ç„¶å®ƒä¸å¼ºåˆ¶è¦æ±‚æ‰€æœ‰çš„å­ç±»å¿…é¡»éµå¾ªè¿™äº›å¥‘çº¦ï¼Œä½†æ˜¯å¦‚æœå­ç±»å¯¹è¿™äº›å·²ç»å®ç°çš„æ–¹æ³•ä»»æ„ä¿®æ”¹ï¼Œå°±ä¼šå¯¹æ•´ä¸ªç»§æ‰¿ä½“ç³»é€ æˆç ´åã€‚</p><p>ç»§æ‰¿åœ¨ç»™ç¨‹åºè®¾è®¡å¸¦æ¥ä¾¿åˆ©çš„åŒæ—¶ï¼Œä¹Ÿå¸¦æ¥äº†å¼Šç«¯ã€‚æ¯”å¦‚ä½¿ç”¨ç»§æ‰¿ä¼šç»™ç¨‹åºå¸¦æ¥ä¾µå…¥æ€§ï¼Œç¨‹åºçš„å¯ç§»æ¤æ€§é™ä½ï¼Œå¢åŠ å¯¹è±¡é—´çš„è€¦åˆæ€§ï¼Œå¦‚æœä¸€ä¸ªç±»è¢«å…¶ä»–çš„ç±»æ‰€ç»§æ‰¿,åˆ™å½“è¿™ä¸ªç±»éœ€è¦ä¿®æ”¹æ—¶ï¼Œå¿…é¡»è€ƒè™‘åˆ°æ‰€æœ‰çš„å­ç±»ï¼Œå¹¶ä¸”çˆ¶ç±»ä¿®æ”¹åï¼Œæ‰€æœ‰æ¶‰åŠåˆ°å­ç±»çš„åŠŸèƒ½éƒ½æœ‰å¯èƒ½äº§ç”Ÿæ•…éšœã€‚</p></blockquote><ol><li>é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰åœ¨1988å¹´ï¼Œç”±éº»çœç†å·¥å­¦é™¢çš„ä»¥ä¸ºå§“é‡Œçš„å¥³å£«æå‡ºçš„ã€‚</li><li>å¦‚æœå¯¹æ¯ä¸ªç±»å‹ä¸º T1 çš„å¯¹è±¡ o1ï¼Œéƒ½æœ‰ç±»å‹ä¸º T2 çš„å¯¹è±¡o2ï¼Œä½¿å¾—ä»¥ T1 å®šä¹‰çš„æ‰€æœ‰ç¨‹åº P åœ¨æ‰€æœ‰çš„å¯¹è±¡ o1 éƒ½ä»£æ¢æˆ o2 æ—¶ï¼Œç¨‹åº P çš„è¡Œä¸ºæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç±»å‹ T2 æ˜¯ç±»å‹ T1 çš„å­ç±»å‹ã€‚æ¢å¥è¯è¯´ï¼Œæ‰€æœ‰å¼•ç”¨åŸºç±»çš„åœ°æ–¹å¿…é¡»èƒ½é€æ˜åœ°ä½¿ç”¨å…¶å­ç±»çš„å¯¹è±¡ã€‚</li><li>åœ¨ä½¿ç”¨ç»§æ‰¿æ—¶ï¼Œéµå¾ªé‡Œæ°æ›¿æ¢åŸåˆ™ï¼Œåœ¨å­ç±»ä¸­æ”¹å˜çˆ¶ç±»çš„åŸæœ‰åŠŸèƒ½æ—¶ï¼Œ<strong>æœ€å¥½</strong>ä¸è¦é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚</li><li>é‡Œæ°æ›¿æ¢åŸåˆ™å‘Šè¯‰æˆ‘ä»¬ï¼Œç»§æ‰¿å®é™…ä¸Šè®©ä¸¤ä¸ªç±»è€¦åˆæ€§å¢å¼ºäº†ï¼Œ<strong>åœ¨é€‚å½“çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡èšåˆï¼Œç»„åˆ,ä¾èµ–æ¥è§£å†³é—®é¢˜</strong>ã€‚</li></ol><h3 id="ä¾‹å­-2"><a href="#ä¾‹å­-2" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token keyword">int</span> num1<span class="token punctuation">,</span> <span class="token keyword">int</span> num2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> num1 <span class="token operator">-</span> num2<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token function">func1</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">9</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">A</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"11-3="</span><span class="token operator">+</span>a<span class="token punctuation">.</span><span class="token function">func1</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"1-8="</span> <span class="token operator">+</span>a<span class="token punctuation">.</span><span class="token function">func1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">"-----------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">B</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"11-3="</span> <span class="token operator">+</span> b<span class="token punctuation">.</span><span class="token function">func1</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"1-8="</span> <span class="token operator">+</span> b<span class="token punctuation">.</span><span class="token function">func1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"11+3+9="</span> <span class="token operator">+</span> b<span class="token punctuation">.</span><span class="token function">func2</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æˆ‘ä»¬å‘ç°åŸæ¥è¿è¡Œæ­£å¸¸çš„ç›¸å‡åŠŸèƒ½å‘ç”Ÿäº†é”™è¯¯ã€‚åŸå› å°±æ˜¯ç±» B æ— æ„ä¸­é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œé€ æˆåŸæœ‰åŠŸèƒ½å‡ºç°é”™è¯¯ã€‚åœ¨å®é™…ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šé€šè¿‡é‡å†™çˆ¶ç±»çš„æ–¹æ³•å®Œæˆæ–°çš„åŠŸèƒ½ï¼Œè¿™æ ·å†™èµ·æ¥è™½ç„¶ç®€å•ï¼Œä½†æ•´ä¸ªç»§æ‰¿ä½“ç³»çš„å¤ç”¨æ€§ä¼šæ¯”è¾ƒå·®ã€‚ç‰¹åˆ«æ˜¯è¿è¡Œå¤šæ€æ¯”è¾ƒé¢‘ç¹çš„æ—¶å€™ã€‚</p><p>é€šç”¨çš„åšæ³•æ˜¯ï¼šåŸæ¥çš„çˆ¶ç±»å’Œå­ç±»éƒ½ç»§æ‰¿ä¸€ä¸ªæ›´é€šä¿—çš„åŸºç±»ï¼ŒåŸæœ‰çš„ç»§æ‰¿å…³ç³»å»æ‰ï¼Œé‡‡ç”¨ä¾èµ–ï¼Œèšåˆï¼Œç»„åˆç­‰å…³ç³»ä»£æ›¿ã€‚</p><h3 id="æ”¹è¿›"><a href="#æ”¹è¿›" class="headerlink" title="æ”¹è¿›"></a>æ”¹è¿›</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// éœ€è¦æœ‰ä¸€ä¸ªæ›´åŠ åŸºç¡€çš„ç±»ï¼ˆæŠ½è±¡ç±»ï¼Œæ¥å£ç±»ä¹Ÿå¯ä»¥ï¼‰</span><span class="token keyword">interface</span> <span class="token class-name">Base</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token keyword">int</span> num1<span class="token punctuation">,</span> <span class="token keyword">int</span> num2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token keyword">implements</span> <span class="token class-name">Base</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token keyword">int</span> num1<span class="token punctuation">,</span> <span class="token keyword">int</span> num2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> num1 <span class="token operator">-</span> num2<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">implements</span> <span class="token class-name">Base</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// å¦‚æœéœ€è¦ä½¿ç”¨ A æ–¹æ³•ï¼Œåˆ™ä½¿ç”¨ç»„åˆå…³ç³»ã€‚</span>    <span class="token keyword">private</span> <span class="token class-name">A</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token function">func1</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">9</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">func3</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">.</span><span class="token function">func1</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">A</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"11-3="</span><span class="token operator">+</span>a<span class="token punctuation">.</span><span class="token function">func1</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"1-8="</span> <span class="token operator">+</span>a<span class="token punctuation">.</span><span class="token function">func1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">"-----------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">B</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// B ç±»ä¸å†ç»§æ‰¿è‡ª A ç±»ï¼Œæ‰€ä»¥è°ƒç”¨è€…ä¸ä¼šåœ¨è®¤ä¸ºfunc1æ˜¯å‡æ³•çš„æ“ä½œäº†ã€‚åœ¨è°ƒç”¨å®Œæˆçš„åŠŸèƒ½ä¼šå¾ˆæ˜ç¡®ã€‚</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"11+3="</span> <span class="token operator">+</span> b<span class="token punctuation">.</span><span class="token function">func1</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"1-8="</span> <span class="token operator">+</span> b<span class="token punctuation">.</span><span class="token function">func1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"11+3+9="</span> <span class="token operator">+</span> b<span class="token punctuation">.</span><span class="token function">func2</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä½¿ç”¨ç»„åˆæ–¹æ³•å¯ä»¥ä½¿ç”¨åˆ° A ç±»çš„ç›¸å…³æ–¹æ³•ã€‚</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"11-3="</span> <span class="token operator">+</span> b<span class="token punctuation">.</span><span class="token function">func3</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 11-3=8</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="å¼€é—­åŸåˆ™"><a href="#å¼€é—­åŸåˆ™" class="headerlink" title="å¼€é—­åŸåˆ™"></a>å¼€é—­åŸåˆ™</h2><ol><li>å¼€é—­åŸåˆ™ï¼ˆOpen Closed Principleï¼‰æ˜¯ç¼–ç¨‹ä¸­æœ€åŸºç¡€ã€æœ€é‡è¦çš„è®¾è®¡åŸåˆ™ã€‚</li><li>ä¸€ä¸ªè½¯ä»¶å®ä½“å¦‚ç±»ï¼Œæ¨¡å—å’Œå‡½æ•°åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼ˆå¯¹æä¾›æ–¹ï¼‰ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼ˆå¯¹ä½¿ç”¨æ–¹ï¼‰ã€‚ç”¨æŠ½è±¡æ„å»ºæ¡†æ¶ï¼Œç”¨å®ç°æ‰©å±•ç»†èŠ‚ã€‚</li><li>å½“è½¯ä»¶éœ€è¦å˜åŒ–æ—¶ï¼Œå°½é‡<strong>é€šè¿‡æ‰©å±•</strong>è½¯ä»¶å®ä½“çš„è¡Œä¸ºæ¥å®ç°å˜åŒ–ï¼Œè€Œä¸æ˜¯é€šè¿‡ä¿®æ”¹å·²æœ‰çš„ä»£ç æ¥å®ç°å˜åŒ–ã€‚</li><li>ç¼–ç¨‹ä¸­éµå¾ªå…¶å®ƒåŸåˆ™ï¼Œä»¥åŠä½¿ç”¨è®¾è®¡æ¨¡å¼çš„ç›®çš„å°±æ˜¯éµå¾ªå¼€é—­åŸåˆ™ã€‚</li></ol><h3 id="ä¾‹å­-3"><a href="#ä¾‹å­-3" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// ä½¿ç”¨æ–¹</span><span class="token keyword">class</span> <span class="token class-name">GraphicEditor</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// æ¥ç‰§Shapeå¯¹è±¡,ç„¶åæ ¹æ®typeï¼Œæ¥ç»˜åˆ¶ä¸åŒçš„å›¾å½¢</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">drawShape</span><span class="token punctuation">(</span><span class="token class-name">Shape</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>m_type <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>            <span class="token function">drawRectangle</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>m_type <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span>            <span class="token function">drawCircle</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">drawRectangle</span><span class="token punctuation">(</span><span class="token class-name">Shape</span> r<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç»˜åˆ¶çŸ©å½¢"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">drawCircle</span><span class="token punctuation">(</span><span class="token class-name">Shape</span> r<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç»˜åˆ¶åœ†å½¢"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Shape</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> m_type<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span>m_type <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span>m_type <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">GraphicEditor</span> graphicEditor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GraphicEditor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        graphicEditor<span class="token punctuation">.</span><span class="token function">drawShape</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        graphicEditor<span class="token punctuation">.</span><span class="token function">drawShape</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>å¦‚æœæ­¤æ—¶å†æ·»åŠ ä¸€ä¸ªä¸‰è§’å½¢çš„ç±»ï¼Œåˆ›å»ºä¸€ä¸ªä¸‰è§’å½¢çš„ç±»æ˜¯æœ‰å¿…è¦çš„ï¼ŒåŒæ—¶å†ä½¿ç”¨æ–¹ä¹Ÿè¦æ·»åŠ åˆ¤æ–­å’Œæ–¹æ³•ã€‚è¿™å°±ä¸ç¬¦åˆå¼€é—­åŸåˆ™äº†ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Triangle</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Triangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span>m_type <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// ä½¿ç”¨æ–¹</span><span class="token keyword">class</span> <span class="token class-name">GraphicEditor</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// æ¥ç‰§Shapeå¯¹è±¡,ç„¶åæ ¹æ®typeï¼Œæ¥ç»˜åˆ¶ä¸åŒçš„å›¾å½¢</span>    <span class="token comment">// è¿™é‡Œä¿®æ”¹äº†</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">drawShape</span><span class="token punctuation">(</span><span class="token class-name">Shape</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>m_type <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>            <span class="token function">drawRectangle</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>m_type <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span>            <span class="token function">drawCircle</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>m_type <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span>            <span class="token function">drawTriangle</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment">// è¿™é‡Œæ·»åŠ äº†æ–°æ–¹æ³•</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">drawTriangle</span><span class="token punctuation">(</span><span class="token class-name">Shape</span> r<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç»˜åˆ¶ä¸‰è§’å½¢"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="æ”¹è¿›-1"><a href="#æ”¹è¿›-1" class="headerlink" title="æ”¹è¿›"></a>æ”¹è¿›</h3><p>æ”¹è¿›åŠæ³•å°±æ˜¯ç»™ Shape ç±»å˜æˆæŠ½è±¡æ¥å¹¶æä¾› draw è¿™ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œè®©ç»§æ‰¿è¯¥æŠ½è±¡ç±»çš„å®ç°ç±»å®ç°è¯¥æ–¹æ³•ã€‚ä½¿ç”¨æ–¹åªéœ€è¦è°ƒç”¨ Shape ä¸­æä¾›çš„ draw æ–¹æ³•å³å¯å®Œæˆç»˜åˆ¶ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Shape</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> m_type<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span>m_type <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç»˜åˆ¶åœ†å½¢"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span>m_type <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç»˜åˆ¶çŸ©å½¢"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">GraphicEditor</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// æ¥ç‰§Shapeå¯¹è±¡,ç„¶åæ ¹æ®typeï¼Œæ¥ç»˜åˆ¶ä¸åŒçš„å›¾å½¢</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">drawShape</span><span class="token punctuation">(</span><span class="token class-name">Shape</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        s<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">GraphicEditor</span> graphicEditor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GraphicEditor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        graphicEditor<span class="token punctuation">.</span><span class="token function">drawShape</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        graphicEditor<span class="token punctuation">.</span><span class="token function">drawShape</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="è¿ªç±³ç‰¹æ³•åˆ™"><a href="#è¿ªç±³ç‰¹æ³•åˆ™" class="headerlink" title="è¿ªç±³ç‰¹æ³•åˆ™"></a>è¿ªç±³ç‰¹æ³•åˆ™</h2><ol><li>ä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡ä¿æŒæœ€å°‘çš„äº†è§£ã€‚</li><li>ç±»ä¸ç±»å…³ç³»è¶Šå¯†åˆ‡ï¼Œè€¦åˆåº¦è¶Šå¤§ã€‚</li><li>è¿ªç±³ç‰¹æ³•åˆ™(Demeter Principle)åˆå«æœ€å°‘çŸ¥é“åŸåˆ™ï¼Œå³ä¸€ä¸ªç±»å¯¹è‡ªå·±ä¾èµ–çš„ç±»çŸ¥é“çš„è¶Šå°‘è¶Šå¥½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºè¢«ä¾èµ–çš„ç±»ä¸ç®¡å¤šä¹ˆå¤æ‚ï¼Œéƒ½å°½é‡å°†é€»è¾‘å°è£…åœ¨ç±»çš„å†…éƒ¨ã€‚å¯¹å¤–é™¤äº†æä¾›çš„publicæ–¹æ³•ï¼Œä¸å¯¹å¤–æ³„éœ²ä»»ä½•ä¿¡æ¯ã€‚</li><li>è¿ªç±³ç‰¹æ³•åˆ™è¿˜æœ‰ä¸ªæ›´ç®€å•çš„å®šä¹‰ï¼šåªä¸ç›´æ¥çš„æœ‹å‹é€šä¿¡ã€‚</li><li>ç›´æ¥çš„æœ‹å‹ï¼šæ¯ä¸ªå¯¹è±¡éƒ½ä¼šä¸å…¶ä»–å¯¹è±¡ç”±è€¦åˆå…³ç³»ï¼Œåªè¦ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´æœ‰è€¦åˆå…³ç³»ï¼Œæˆ‘ä»¬å°±è¯´è¿™ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´æ˜¯æœ‹å‹å…³ç³»ã€‚è€¦åˆçš„æ–¹å¼å¾ˆå¤šï¼Œä¾èµ–ï¼Œå…³è”ï¼Œç»„åˆï¼Œèšåˆç­‰ã€‚å…¶ä¸­ï¼Œæˆ‘ä»¬ç§°å‡ºç°æˆå‘˜å˜é‡ï¼Œæ–¹æ³•å‚æ•°ï¼Œæ–¹æ³•è¿”å›å€¼ä¸­çš„ç±»ä¸ºç›´æ¥çš„æœ‹å‹ï¼Œè€Œå‡ºç°åœ¨å±€éƒ¨å˜é‡ä¸­çš„ç±»ä¸æ˜¯ç›´æ¥çš„æœ‹å‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé™Œç”Ÿçš„ç±»æœ€å¥½ä¸è¦ä»¥å±€éƒ¨å˜é‡çš„å½¢å¼å‡ºç°åœ¨ç±»çš„å†…éƒ¨ã€‚</li></ol><h3 id="ä¾‹å­-4"><a href="#ä¾‹å­-4" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> id<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">CollegeEmployee</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> id<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// å­¦é™¢å‘˜å·¥ç±»</span><span class="token keyword">class</span> <span class="token class-name">CollegeManager</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CollegeEmployee</span><span class="token punctuation">></span></span> <span class="token function">getAllEmployee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CollegeEmployee</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CollegeEmployee</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">CollegeEmployee</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CollegeEmployee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            emp<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token string">"å­¦é™¢å‘˜å·¥id= "</span> <span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> list<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// å­¦æ ¡ç®¡ç†ç±»</span><span class="token keyword">class</span> <span class="token class-name">SchoolManager</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//è¿”å›å­¦æ ¡æ€»éƒ¨çš„å‘˜å·¥</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">></span></span> <span class="token function">getAllEmployee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Employee</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>emp<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token string">"å­¦æ ¡æ€»éƒ¨å‘˜å·¥id="</span> <span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> list<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">void</span> <span class="token function">printAllEmployee</span><span class="token punctuation">(</span><span class="token class-name">CollegeManager</span> sub<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CollegeEmployee</span><span class="token punctuation">></span></span> list1 <span class="token operator">=</span> sub<span class="token punctuation">.</span><span class="token function">getAllEmployee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------å­¦é™¢å‘˜å·¥------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">CollegeEmployee</span> e <span class="token operator">:</span> list1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">></span></span> list2 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAllEmployee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------å­¦æ ¡æ€»éƒ¨å‘˜å·¥----"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Employee</span> e <span class="token operator">:</span> list2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">SchoolManager</span> schoolManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SchoolManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        schoolManager<span class="token punctuation">.</span><span class="token function">printAllEmployee</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CollegeManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>åˆ†æ SchoolManager ç±»çš„ç›´æ¥æœ‹å‹ç±»æœ‰å“ªäº›ï¼Ÿå…¶ä¸­ Employeeã€CollegeManager æ˜¯ç›´æ¥æœ‹å‹å…³ç³»ã€‚ä½†æ˜¯CollegeEmployee ç±»ä¸æ˜¯ç›´æ¥æœ‹å‹å…³ç³»ï¼Œå› ä¸ºåœ¨æˆå‘˜å˜é‡ï¼Œå‚æ•°ï¼Œæ–¹æ³•è¿”å›å€¼æ²¡æœ‰å‡ºç°ï¼Œè€Œåœ¨å±€éƒ¨å˜é‡ä¸­çªç„¶å‡ºç°ã€‚å®ƒå°±æ˜¯ä¸€ä¸ªé™Œç”Ÿç±»ï¼Œè¿™è¿èƒŒäº†è¿ªç±³ç‰¹æ³•åˆ™ã€‚</p><h3 id="æ”¹è¿›-2"><a href="#æ”¹è¿›-2" class="headerlink" title="æ”¹è¿›"></a>æ”¹è¿›</h3><p>å°†è¾“å‡ºå­¦é™¢çš„å‘˜å·¥æ–¹æ³•ï¼Œå°è£…åˆ° CollegeManagerã€‚ä¹Ÿå°±æ˜¯å‘˜å·¥ç®¡ç†ç›¸å…³çš„ç±»ä¸è¦å‡ºç°åœ¨åˆ«çš„ç±»é‡Œé¢ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> id<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">CollegeEmployee</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> id<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// å­¦é™¢å‘˜å·¥ç±»</span><span class="token keyword">class</span> <span class="token class-name">CollegeManager</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CollegeEmployee</span><span class="token punctuation">></span></span> <span class="token function">getAllEmployee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CollegeEmployee</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CollegeEmployee</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">CollegeEmployee</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CollegeEmployee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            emp<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token string">"å­¦é™¢å‘˜å·¥id= "</span> <span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> list<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// å­¦æ ¡ç®¡ç†ç±»</span><span class="token keyword">class</span> <span class="token class-name">SchoolManager</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//è¿”å›å­¦æ ¡æ€»éƒ¨çš„å‘˜å·¥</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">></span></span> <span class="token function">getAllEmployee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Employee</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>emp<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token string">"å­¦æ ¡æ€»éƒ¨å‘˜å·¥id="</span> <span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> list<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">void</span> <span class="token function">printAllEmployee</span><span class="token punctuation">(</span><span class="token class-name">CollegeManager</span> sub<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CollegeEmployee</span><span class="token punctuation">></span></span> list1 <span class="token operator">=</span> sub<span class="token punctuation">.</span><span class="token function">getAllEmployee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------å­¦é™¢å‘˜å·¥------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">CollegeEmployee</span> e <span class="token operator">:</span> list1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">></span></span> list2 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAllEmployee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------å­¦æ ¡æ€»éƒ¨å‘˜å·¥----"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Employee</span> e <span class="token operator">:</span> list2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">SchoolManager</span> schoolManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SchoolManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        schoolManager<span class="token punctuation">.</span><span class="token function">printAllEmployee</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CollegeManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿ªç±³ç‰¹æ³•åˆ™çš„æ ¸å¿ƒæ˜¯é™ä½ç±»ä¹‹é—´çš„è€¦åˆã€‚</p><p>ä½†æ˜¯æ³¨æ„ï¼šç”±äºæ¯ä¸ªç±»éƒ½å‡å°‘äº†ä¸å¿…è¦çš„ä¾èµ–ï¼Œå› æ­¤è¿ªç±³ç‰¹æ³•åˆ™åªæ˜¯è¦æ±‚é™ä½ç±»é—´ï¼ˆå¯¹è±¡é—´ï¼‰è€¦åˆå…³ç³»ï¼Œå¹¶ä¸æ˜¯è¦æ±‚å®Œå…¨æ²¡æœ‰ä¾èµ–å…³ç³»ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> 23 ç§è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shiro æƒé™æ•°æ®æŒä¹…åŒ–</title>
      <link href="/journal/shiro-permission-data-persistence/"/>
      <url>/journal/shiro-permission-data-persistence/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä¸Šç¯‡æ—¥å¿—ç®€å•çš„ä½¿ç”¨äº†è§’è‰²æˆäºˆå’Œæƒé™æˆäºˆï¼Œæ¥ä¸‹æ¥ï¼Œå°†é€šè¿‡æ•°æ®åº“æ¥ç®¡ç†ç”¨æˆ·å¯¹åº”çš„æƒé™ä¸è§’è‰²ã€‚</p><h2 id="æƒé™è¡¨ç»“æ„è®¾è®¡æ–¹å¼"><a href="#æƒé™è¡¨ç»“æ„è®¾è®¡æ–¹å¼" class="headerlink" title="æƒé™è¡¨ç»“æ„è®¾è®¡æ–¹å¼"></a>æƒé™è¡¨ç»“æ„è®¾è®¡æ–¹å¼</h2><p>ç¬¬ä¸€ç§æƒé™è®¾è®¡æ¨¡å‹ï¼Œæƒé™å’Œè§’è‰²éƒ½è€ƒè™‘ã€‚æ•°æ®åº“è®¾è®¡ä¸­ï¼Œç”¨æˆ·ä¸è§’è‰²æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ï¼Œè§’è‰²ä¸æƒé™ä¹Ÿæ˜¯å¤šå¯¹å¤šçš„å…³ç³»ï¼Œè€Œæƒé™ä¸èµ„æºæ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ã€‚å®ƒä»¬çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><span id="more"></span><pre class="mermaid">graph LRç”¨æˆ·--å…³è”-->è§’è‰²--å…³è”-->æƒé™--å…³è”-->èµ„æº</pre><p>ç¬¬äºŒç§æƒé™è®¾è®¡æ¨¡å‹ï¼Œä¸è€ƒè™‘æƒé™ã€‚ç”¨æˆ·ä¸è§’è‰²ç›´æ¥å¯¹åº”ï¼Œæ˜¯ä¸€ç§å¤šå¯¹å¤šçš„å…³ç³»ï¼Œé€šè¿‡ä¸åŒçš„è§’è‰²æ¥å¯¹èµ„æºè¿›è¡Œä¸åŒçš„é™åˆ¶è¿™ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä»–ä»¬çš„å…³ç³»å¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre class="mermaid">graph LRç”¨æˆ·--å…³è”-->è§’è‰²</pre><p>ç¬¬ä¸‰ç§æ¨¡å¼æƒé™è®¾è®¡æ¨¡å‹ï¼Œä¸è€ƒè™‘è§’è‰²ã€‚ç”¨æˆ·ä¸æƒé™ç›´æ¥å¯¹åº”ï¼Œä¹Ÿæ˜¯ä¸€ç§å¤šå¯¹å¤šçš„å…³ç³»ã€‚</p><pre class="mermaid">graph LRç”¨æˆ·--å…³è”-->æƒé™</pre><p>å½“ç„¶ï¼Œæˆ–è®¸è¿˜æœ‰æ›´å¤šçš„æƒé™è¡¨ç»“æ„æ–¹å¼ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œå’±ä»¬å°±ä½¿ç”¨ç¬¬ä¸€ç§çš„æ–¹å¼æ¥ä½“éªŒä¸€æŠŠè§’è‰²æˆäºˆå’Œæƒé™æˆäºˆå§ã€‚</p><h2 id="æ•°æ®åº“è®¾è®¡"><a href="#æ•°æ®åº“è®¾è®¡" class="headerlink" title="æ•°æ®åº“è®¾è®¡"></a>æ•°æ®åº“è®¾è®¡</h2><p>é¦–å…ˆæ˜¯è§’è‰²è¡¨ï¼Œè§’è‰²è¡¨çš„ DDL å¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> t_role<span class="token punctuation">(</span>    id   <span class="token keyword">int</span> <span class="token keyword">auto_increment</span>    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'æƒé™æ ‡è¯†'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ç”¨æˆ·è¡¨ä¸è§’è‰²è¡¨çš„å…³è”</p><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> t_user_role<span class="token punctuation">(</span>    id     <span class="token keyword">int</span> <span class="token keyword">auto_increment</span>     <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>    userId <span class="token keyword">int</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'ç”¨æˆ·id'</span><span class="token punctuation">,</span>    roleId <span class="token keyword">int</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'è§’è‰²id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æƒé™è¡¨çš„ DDL å¦‚ä¸‹æ‰€ç¤º</p><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> t_pers<span class="token punctuation">(</span>    id   <span class="token keyword">int</span> <span class="token keyword">auto_increment</span>    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token boolean">null</span><span class="token punctuation">,</span>    url  <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'è¯·æ±‚è·¯å¾„'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æƒé™è¡¨ä¸è§’è‰²è¡¨çš„å…³è”</p><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> t_role_perms<span class="token punctuation">(</span>    id      <span class="token keyword">int</span> <span class="token keyword">auto_increment</span>   <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>    roleId  <span class="token keyword">int</span> <span class="token boolean">null</span><span class="token punctuation">,</span>    permsId <span class="token keyword">int</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="è¡¨æ•°æ®"><a href="#è¡¨æ•°æ®" class="headerlink" title="è¡¨æ•°æ®"></a>è¡¨æ•°æ®</h2><p>è§’è‰²è¡¨ SQL æ•°æ®</p><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> shiro<span class="token punctuation">.</span>t_role <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token keyword">values</span>  <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'admin'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'product'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ç”¨æˆ·â€”â€”è§’è‰²è¡¨ SQL å…³è”æ•°æ®</p><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> shiro<span class="token punctuation">.</span>t_user_role <span class="token punctuation">(</span>id<span class="token punctuation">,</span> userId<span class="token punctuation">,</span> roleId<span class="token punctuation">)</span><span class="token keyword">values</span>  <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æƒé™è¡¨ SQL æ•°æ®</p><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> shiro<span class="token punctuation">.</span>t_user_role <span class="token punctuation">(</span>id<span class="token punctuation">,</span> userId<span class="token punctuation">,</span> roleId<span class="token punctuation">)</span><span class="token keyword">values</span>  <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æƒé™â€”â€”è§’è‰²è¡¨ SQL å…³è”æ•°æ®</p><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> shiro<span class="token punctuation">.</span>t_role_perms <span class="token punctuation">(</span>id<span class="token punctuation">,</span> roleId<span class="token punctuation">,</span> permsId<span class="token punctuation">)</span><span class="token keyword">values</span>  <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="æƒé™å’Œè§’è‰²æˆäºˆ"><a href="#æƒé™å’Œè§’è‰²æˆäºˆ" class="headerlink" title="æƒé™å’Œè§’è‰²æˆäºˆ"></a>æƒé™å’Œè§’è‰²æˆäºˆ</h2><p>ç»™ç”¨æˆ·æˆäºˆå¯¹åº”çš„æƒé™å’Œè§’è‰²ï¼Œå¯¹åº” SQL å¦‚ä¸‹ã€‚</p><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span>    t_user<span class="token punctuation">.</span>id <span class="token keyword">AS</span> uid<span class="token punctuation">,</span>    t_user<span class="token punctuation">.</span>username<span class="token punctuation">,</span>    t_role<span class="token punctuation">.</span>id <span class="token keyword">AS</span> rid<span class="token punctuation">,</span>    t_role<span class="token punctuation">.</span><span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">AS</span> <span class="token punctuation">`</span>rolename<span class="token punctuation">`</span><span class="token keyword">FROM</span>    t_user<span class="token punctuation">,</span>    t_role<span class="token punctuation">,</span>    t_user_role<span class="token keyword">WHERE</span>    t_user<span class="token punctuation">.</span>id <span class="token operator">=</span> t_user_role<span class="token punctuation">.</span>userId  <span class="token operator">AND</span> t_user_role<span class="token punctuation">.</span>roleId <span class="token operator">=</span> t_role<span class="token punctuation">.</span>id  <span class="token operator">AND</span> t_user<span class="token punctuation">.</span>username <span class="token operator">=</span> <span class="token comment">#&#123;username&#125;</span></code></pre><p>æŸ¥è¯¢è¯¥è§’è‰²å¯¹åº”çš„æƒé™ã€‚</p><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span>    t_pers<span class="token punctuation">.</span><span class="token operator">*</span><span class="token keyword">FROM</span>    t_role_perms<span class="token punctuation">,</span>    t_pers<span class="token keyword">WHERE</span>    t_role_perms<span class="token punctuation">.</span>roleId <span class="token operator">=</span> <span class="token comment">#&#123;roleId&#125;</span>  <span class="token operator">AND</span> t_role_perms<span class="token punctuation">.</span>permsId <span class="token operator">=</span> t_pers<span class="token punctuation">.</span>id</code></pre><p>æŸ¥è¯¢å‡ºæ¥ä¹‹åï¼Œåœ¨è‡ªå®šä¹‰çš„ Realm ä¸­ï¼Œåˆ©ç”¨ for å¾ªç¯æˆ–è€… foreach æ–¹æ³•æ¥æˆäºˆç”¨æˆ·çš„è§’è‰²ã€‚ç„¶åé€šè¿‡æ¯ä¸€å±‚å¾ªç¯æ¥ç»™å½“å‰çš„è§’è‰²æˆäºˆæƒé™ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">User</span> user <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">findRolesByUsername</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">SimpleAuthorizationInfo</span> authorizationInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleAuthorizationInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>user <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getRoles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// è§’è‰²æˆäºˆ</span>    user<span class="token punctuation">.</span><span class="token function">getRoles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>role <span class="token operator">-></span> <span class="token punctuation">&#123;</span>        authorizationInfo<span class="token punctuation">.</span><span class="token function">addRole</span><span class="token punctuation">(</span>role<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æƒé™æˆäºˆ</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Pers</span><span class="token punctuation">></span></span> perms <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">findPermsByRoleId</span><span class="token punctuation">(</span>role<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        perms<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>pers <span class="token operator">-></span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>pers<span class="token punctuation">)</span><span class="token punctuation">;</span>            authorizationInfo<span class="token punctuation">.</span><span class="token function">addStringPermission</span><span class="token punctuation">(</span>pers<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> authorizationInfo<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿™æ ·ä¸€æ¥ï¼Œæƒé™çš„æˆäºˆå°±ä¿å­˜åœ¨æ•°æ®åº“ä¸­äº†ã€‚å½“ç”¨æˆ·è®¿é—®ä¸åŒçš„é¡µé¢æ—¶ï¼Œå°±å¯ä»¥æ§åˆ¶å“ªäº›èµ„æºä¸èƒ½è®¿é—®ï¼Œå“ªäº›èµ„æºå…è®¸è®¿é—®ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> æƒé™æ¡†æ¶å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> Shiro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shiro ä¸ SpringBoot æ•´åˆ</title>
      <link href="/journal/shiro-spring/"/>
      <url>/journal/shiro-spring/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å‰ç¯‡æ—¥å¿—äº†è§£åˆ° Shiro æ˜¯ä»€ä¹ˆï¼ŒShiro å¯ä»¥åšä»€ä¹ˆï¼Œä»¥åŠ Shiro ç»“åˆ ini æ–‡ä»¶æ¥åšä¸€ä¸ªç®€å•çš„æƒé™ç®¡ç†çš„ç¤ºä¾‹ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œå°±æ˜¯å°† Shiro ä¸ SpringBoot è¿›è¡Œæ•´åˆï¼Œç„¶åç»“åˆæ•°æ®åº“å¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½è®¤è¯ã€‚</p><h2 id="æ•´åˆçš„åŸºæœ¬æ€è·¯"><a href="#æ•´åˆçš„åŸºæœ¬æ€è·¯" class="headerlink" title="æ•´åˆçš„åŸºæœ¬æ€è·¯"></a>æ•´åˆçš„åŸºæœ¬æ€è·¯</h2><p>åœ¨æœªæ•´åˆ SpringBoot ä¹‹å‰ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯åœ¨æ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥è¦è¯»å– ini é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¸€èˆ¬çš„æ­¥éª¤å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><span id="more"></span><pre class="mermaid">graphA(åˆ›å»º IniSecurityManagerFactory å¯¹è±¡) --> B(è·å– SecurityManager å®ä¾‹å¯¹è±¡)B --> C(å°† SecurityManager å¯¹è±¡ä¿å­˜åˆ° SecurityUtils ä¸­)C --> D(è·å– Subject å¯¹è±¡)D --> E(è°ƒç”¨ç›¸å…³æ–¹æ³•: ç™»å½•, è§’è‰²åˆ¤æ–­ç­‰)</pre><p>åœ¨ Spring Web ä¸­ï¼Œæ•´åˆçš„æ­¥éª¤å’Œä¸Šè¿°åŸºæœ¬ä¸€è‡´ã€‚</p><p>ä½†æ˜¯ï¼Œç°åœ¨å˜äº†ï¼Œç”±äºç°åœ¨æ˜¯å¤„äº Spring Web çš„ç¯å¢ƒä¸­ï¼Œè¦æ§åˆ¶è®¿é—®ç½‘ç«™èµ„æºçš„æƒé™ï¼Œå“ªäº›èµ„æºå¯ä»¥åŒ¿åè®¿é—®ï¼Œå“ªäº›èµ„æºéœ€è¦ç™»å½•æ‰èƒ½è®¿é—®ç­‰ç­‰ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ Shiro çš„ Filterï¼Œè€Œä¸æ˜¯ SecurityManagerFactory å¯¹è±¡ã€‚</p><p>é¦–å…ˆ Shiro ä¸­æœ‰ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œå« ShiroFilterFactoryBean ï¼Œåˆ©ç”¨å®ƒå¯ä»¥æ§åˆ¶èµ„æºè®¿é—®ï¼ŒåŒæ—¶å¯ä»¥è®¾ç½®è¿‡æ»¤å™¨çš„ç±»å‹æ¥è¿‡æ»¤æŸäº›è¯·æ±‚ã€‚</p><p>æ¥ä¸‹æ¥å°±æ˜¯ SecurityManager ï¼Œåœ¨ Spring Web çš„ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬æ— æ³•åœ¨è¿‡æ»¤å™¨ä¸­æ‰¾åˆ° getInstance æ–¹æ³•ï¼Œè€Œæ˜¯éœ€è¦åˆ›å»º DefaultWebSecurityManager å¯¹è±¡ï¼Œå°†è¯¥å¯¹è±¡æ”¾åˆ° ShiroFilterFactoryBean ä¸­ã€‚</p><p>æœ€åå°±æ˜¯ Realm äº†ï¼ŒRealm åšçš„äº‹æƒ…ä¸»è¦æ˜¯æˆæƒå’Œè®¤è¯äº†ï¼Œå¯è‡ªå®šä¹‰ä¸€ä¸ªè‡ªå·±çš„ Realm ç»§æ‰¿è‡ª AuthorizingRealmã€‚å°†è‡ªå®šä¹‰çš„ Realm æ·»åŠ åˆ° DefaultWebSecurityManager å¯¹è±¡ä¸­å³å¯ï¼Œ</p><p>åé¢çš„æ“ä½œå°±åŸºæœ¬ä¸€è‡´äº†ï¼Œæ¯”å¦‚è°ƒç”¨ SecurityUtils æ–¹æ³•ç­‰ç­‰ã€‚</p><p>åœ¨äº†è§£é web ç¯å¢ƒä¸‹çš„è°ƒç”¨æ­¥éª¤ä»¥åŠä¸Šè¿°çš„æ•´åˆæ­¥éª¤ä¹‹åï¼Œå¯çŸ¥æ¯ä¸ªç»„ä»¶çš„ä¾èµ–å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><pre class="mermaid">graph LRè‡ªå®šä¹‰Realm --> DefaultWebSecurityFactoryBean-->ShiroFactoryBean</pre><p>æ¥ä¸‹æ¥ï¼Œå°±é€šè¿‡ SpringBoot æ¥æ•´åˆ Shiroã€‚</p><h2 id="å¯¼å…¥ä¾èµ–"><a href="#å¯¼å…¥ä¾èµ–" class="headerlink" title="å¯¼å…¥ä¾èµ–"></a>å¯¼å…¥ä¾èµ–</h2><p>å…ˆé€šè¿‡ Spring Initializer åˆå§‹åŒ–é¡¹ç›®æ¨¡æ¿ï¼Œç„¶åå¯¼å…¥ Shiro çš„ spring-boot-starterã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.shiro<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>shiro-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.8.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>åé¢éœ€è¦ç”¨åˆ° MySQLï¼Œä½¿ç”¨ MyBatis-Plus æ¥æ“ä½œæ•°æ®åº“ï¼ŒJDBCï¼Œè¿æ¥æ±  Druidï¼Œä»¥åŠæ˜¯ç”¨ jsp æ–‡ä»¶æ¥åšé¡µé¢æ¸²æŸ“ï¼Œå¯¼å…¥ jsp ç›¸å…³çš„ä¾èµ–ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jstl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.shiro<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>shiro-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.8.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-plus-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.4.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>8.0.22<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.2.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>åˆ›å»ºä¸€ä¸ª ShiroConfig ç±»ï¼Œç”¨äºé…ç½® Shiroï¼ŒæŒ‰ç…§ä¹‹å‰çš„ä¾èµ–å…³ç³»ï¼Œå¯ä»¥è¿™æ ·é…ç½®ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShiroConfig</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 1ã€åˆ›å»º ShiroFilter</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">ShiroFilterFactoryBean</span> <span class="token function">shiroFilterFactoryBean</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Autowired</span> <span class="token class-name">DefaultWebSecurityManager</span> defaultWebSecurityManager<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ShiroFilterFactoryBean</span> factoryBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ShiroFilterFactoryBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é…ç½®å®‰å…¨ç®¡ç†å™¨</span>        factoryBean<span class="token punctuation">.</span><span class="token function">setSecurityManager</span><span class="token punctuation">(</span>defaultWebSecurityManager<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> factoryBean<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 2ã€åˆ›å»º SecurityManager å¯¹è±¡</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">DefaultWebSecurityManager</span> <span class="token function">defaultWebSecurityManager</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Autowired</span> <span class="token class-name">Realm</span> realm<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">DefaultWebSecurityManager</span> securityManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultWebSecurityManager</span><span class="token punctuation">(</span>realm<span class="token punctuation">)</span><span class="token punctuation">;</span>        securityManager<span class="token punctuation">.</span><span class="token function">setRealm</span><span class="token punctuation">(</span>realm<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> securityManager<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 3ã€åˆ›å»º Realmã€‚</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Realm</span> <span class="token function">realm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">CustomerRealm</span> realm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomerRealm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> realm<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿™äº›é…ç½®å®Œæˆä¹‹åï¼Œè¿˜éœ€è¦åœ¨ application.yml æ–‡ä»¶ä¸­é…ç½®å¥½æ•°æ®åº“ã€‚</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>    <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/yourdb<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=UTF-8&amp;serverTimezone=GMT%2B8</span>    <span class="token key atrule">username</span><span class="token punctuation">:</span> root    <span class="token key atrule">password</span><span class="token punctuation">:</span> yourpassword<span class="token key atrule">mybatis-plus</span><span class="token punctuation">:</span>  <span class="token key atrule">type-aliases-package</span><span class="token punctuation">:</span> top.bestguo.springboot_shiro.entity  <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>/mapper/<span class="token important">**/*.xml</span></code></pre><p>åœ¨ application.properties çš„é…ç½®ä¸­ï¼Œé…ç½®å¥½ jsp çš„å‰åç¼€ï¼Œä»¥åŠ web æœåŠ¡çš„ç«¯å£ç­‰ç­‰ã€‚</p><pre class="language-properties" data-language="properties"><code class="language-properties"><span class="token comment"># åº”ç”¨åç§°</span><span class="token attr-name">spring.application.name</span><span class="token punctuation">=</span><span class="token attr-value">springboot_shiro</span><span class="token comment"># åº”ç”¨æœåŠ¡ WEB è®¿é—®ç«¯å£</span><span class="token attr-name">server.port</span><span class="token punctuation">=</span><span class="token attr-value">8080</span><span class="token attr-name">server.servlet.context-path</span><span class="token punctuation">=</span><span class="token attr-value">/shiro</span><span class="token attr-name">spring.mvc.view.prefix</span><span class="token punctuation">=</span><span class="token attr-value">/</span><span class="token attr-name">spring.mvc.view.suffix</span><span class="token punctuation">=</span><span class="token attr-value">.jsp</span><span class="token attr-name">logging.level.top.bestguo.springboot_shiro.mapper</span><span class="token punctuation">=</span><span class="token attr-value">debug</span></code></pre><h2 id="æ–°å»ºé¡µé¢"><a href="#æ–°å»ºé¡µé¢" class="headerlink" title="æ–°å»ºé¡µé¢"></a>æ–°å»ºé¡µé¢</h2><p>åˆ›å»ºä¸‰ä¸ªé¡µé¢ï¼Œåˆ†åˆ«æ˜¯ç™»å½•é¡µã€æ³¨å†Œé¡µå’Œç³»ç»Ÿä¸»é¡µã€‚è¿™äº›é¡µé¢åˆ†åˆ«åˆ›å»ºåœ¨ webapp æ–‡ä»¶å¤¹ä¸‹ï¼Œæ²¡æœ‰å¯ä»¥æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ç›´æ¥è®¿é—® jsp æ–‡ä»¶ã€‚</p><p><img src="/journal/shiro-spring/image-20220329102659182.png" alt="image-20220329102659182" loading="lazy"></p><p>é¡µé¢éƒ½å¾ˆç®€å•ï¼Œè¿™ä¸‰ä¸ªé¡µé¢çš„çš„ä»£ç å¦‚ä¸‹ã€‚</p><h3 id="login-jsp"><a href="#login-jsp" class="headerlink" title="login.jsp"></a>login.jsp</h3><pre class="language-markup" data-language="markup"><code class="language-markup">&lt;%@page contentType="text/html; UTF-8" pageEncoding="UTF-8" isELIgnored="false" %><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>ç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;pageContext.request.contextPath&#125;/user/login<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    ç”¨æˆ·åï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>    å¯†ç ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç™»å½•<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h3 id="register-jsp"><a href="#register-jsp" class="headerlink" title="register.jsp"></a>register.jsp</h3><pre class="language-markup" data-language="markup"><code class="language-markup">&lt;%@page contentType="text/html; UTF-8" pageEncoding="UTF-8" isELIgnored="false" %><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>æ³¨å†Œ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;pageContext.request.contextPath&#125;/user/register<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    ç”¨æˆ·åï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>    å¯†ç ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æ³¨å†Œ<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h3 id="index-jsp"><a href="#index-jsp" class="headerlink" title="index.jsp"></a>index.jsp</h3><pre class="language-markup" data-language="markup"><code class="language-markup">&lt;%@page contentType="text/html; UTF-8" pageEncoding="UTF-8" isELIgnored="false" %><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>ç³»ç»Ÿä¸»é¡µV1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;pageContext.request.contextPath&#125;/user/logout<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç™»å‡º<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç”¨æˆ·ç®¡ç†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ·»åŠ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¿®æ”¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>åˆ é™¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ›´æ–°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å•†å“ç®¡ç†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç‰©æµç®¡ç†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è®¢å•ç®¡ç†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="èµ„æºè®¿é—®æ§åˆ¶"><a href="#èµ„æºè®¿é—®æ§åˆ¶" class="headerlink" title="èµ„æºè®¿é—®æ§åˆ¶"></a>èµ„æºè®¿é—®æ§åˆ¶</h2><p>é¡µé¢åˆ›å»ºå®Œæˆä¹‹åï¼Œæµ‹è¯•è¿™äº›é¡µé¢å‡èƒ½å¤Ÿæ­£å¸¸çš„è®¿é—®ã€‚ç”±äºä¸»é¡µæ˜¯ä¸èƒ½å¤Ÿç›´æ¥è®¿é—®çš„åˆ°çš„ï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨ Filter æ¥å…è®¸å“ªäº›é¡µé¢å¯ä»¥åŒ¿åè®¿é—®ï¼Œå“ªäº›é¡µé¢éœ€è¦éªŒè¯å’Œæˆæƒæ‰èƒ½è®¿é—®ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨ ShiroConfig ç±»ä¸­è®¾ç½®ã€‚</p><p>ShiroFilterFactoryBean ä¸­æœ‰ä¸€ä¸ª setFilterChainDefinitionMap æ–¹æ³•ï¼Œç”¨äºè®¾ç½®æ‹¦æˆªçš„èµ„æºï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ª map é›†åˆï¼Œkey ä¸ºè®¿é—®çš„è·¯å¾„ï¼Œvalue ä¸ºä½¿ç”¨çš„<a href="https://www.bestguo.top/journal/shiro-study/#Shiro-%E5%86%85%E7%BD%AE%E7%9A%84%E8%BF%87%E6%BB%A4%E5%99%A8">è¿‡æ»¤å™¨åç§°</a>ã€‚</p><p>åˆ©ç”¨é€šé…ç¬¦å¯ä»¥æ‹¦æˆªå­è·¯å¾„ä¸‹çš„èµ„æºï¼Œ <code>/**</code> å°±æ˜¯æ‹¦æˆªå…¨éƒ¨çš„ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> <span class="token class-name">ShiroFilterFactoryBean</span> <span class="token function">shiroFilterFactoryBean</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Autowired</span> <span class="token class-name">DefaultWebSecurityManager</span> defaultWebSecurityManager<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">ShiroFilterFactoryBean</span> factoryBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ShiroFilterFactoryBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// é…ç½®å®‰å…¨ç®¡ç†å™¨</span>    factoryBean<span class="token punctuation">.</span><span class="token function">setSecurityManager</span><span class="token punctuation">(</span>defaultWebSecurityManager<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é…ç½®ç³»ç»Ÿå—é™èµ„æºå’Œå…¬å…±èµ„æº</span>    <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// authc è¯·æ±‚è¿™ä¸ªèµ„æºéœ€è¦è®¤è¯å’Œæˆæƒï¼Œanonå°±æ˜¯è¯¥èµ„æºæ— éœ€è®¤è¯</span>    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"/user/login"</span><span class="token punctuation">,</span> <span class="token string">"anon"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"/register.jsp"</span><span class="token punctuation">,</span> <span class="token string">"anon"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"/user/register"</span><span class="token punctuation">,</span> <span class="token string">"anon"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">,</span> <span class="token string">"authc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    factoryBean<span class="token punctuation">.</span><span class="token function">setFilterChainDefinitionMap</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> factoryBean<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>å½“æˆ‘è®¿é—®è‡³ index.jsp é¡µé¢æ—¶ï¼Œå¦‚æœæœªè¿›è¡Œè®¤è¯ï¼Œé‚£ä¹ˆå°±ä¼šç›´æ¥è·³è½¬è‡³ login.jsp é¡µé¢ã€‚å› ä¸ºåœ¨ Shiro ä¸­ï¼Œé»˜è®¤çš„è®¿é—®è·¯å¾„å°±æ˜¯ login.jsp é¡µé¢ï¼Œè¯¥é¡¹å¯ä»¥é€šè¿‡ setLoginUrl æ–¹æ³•æ¥æ‰§è¡Œéœ€è¦è·³è½¬çš„è®¤è¯é¡µé¢ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// shiroæœ‰ä¸€ä¸ªé»˜è®¤çš„è®¤è¯ç•Œé¢è·¯å¾„ï¼Œé»˜è®¤å°±æ˜¯ login.jsp é¡µé¢</span>factoryBean<span class="token punctuation">.</span><span class="token function">setLoginUrl</span><span class="token punctuation">(</span><span class="token string">"/your/login/path"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å¦‚æœä»¥è¿›è¡Œè®¤è¯ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ­£å¸¸è¿›è¡Œè®¿é—®äº†ã€‚</p><h2 id="æ•°æ®åº“è®¾è®¡"><a href="#æ•°æ®åº“è®¾è®¡" class="headerlink" title="æ•°æ®åº“è®¾è®¡"></a>æ•°æ®åº“è®¾è®¡</h2><p>æ–°å»ºä¸€ä¸ª shiro æ•°æ®åº“ï¼Œåˆ›å»ºä¸€ä¸ª t_user è¡¨ï¼Œè¡¨ä¸­çš„å­—æ®µåˆ†åˆ«å¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> t_user<span class="token punctuation">(</span>    id       <span class="token keyword">int</span> <span class="token keyword">auto_increment</span>      <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>    username <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span>  <span class="token boolean">null</span><span class="token punctuation">,</span>    password <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span>  <span class="token boolean">null</span><span class="token punctuation">,</span>    salt     <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ç„¶ååˆ©ç”¨ MybatisX-generator ç”Ÿæˆç›¸å¯¹åº”çš„ mapper ä»¥åŠå¯¹åº”çš„å®ä½“ç±»ï¼Œè¯¥æ’ä»¶å¯ä»¥åœ¨ idea ä¸­æ‰¾åˆ°å¹¶å®‰è£…ã€‚</p><h2 id="æ³¨å†ŒåŠŸèƒ½å®ç°"><a href="#æ³¨å†ŒåŠŸèƒ½å®ç°" class="headerlink" title="æ³¨å†ŒåŠŸèƒ½å®ç°"></a>æ³¨å†ŒåŠŸèƒ½å®ç°</h2><p>ç”¨æˆ·æ³¨å†Œçš„å®ç°ä¹Ÿæ˜¯éå¸¸ç®€å•çš„ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"register"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">TUser</span> user<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        userService<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"redirect:/login.jsp"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"redirect:/register.jsp"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>å¯†ç çš„åŠ å¯†ä½¿ç”¨çš„æ˜¯ MD5 æ¥å¯¹å¯†ç è¿›è¡ŒåŠ å¯†ï¼Œåˆ©ç”¨åŠ ç›å·¥å…·ç±»ï¼Œä¼ å…¥æ˜æ–‡å¯†ç ï¼Œç›å€¼å’Œè¿­ä»£æ¬¡æ•°å³å¯ï¼Œç›¸å…³çš„ä»£ç åœ¨åé¢çš„é™„å½•ä¸­ã€‚</p><h2 id="ç™»å½•åŠŸèƒ½å®ç°"><a href="#ç™»å½•åŠŸèƒ½å®ç°" class="headerlink" title="ç™»å½•åŠŸèƒ½å®ç°"></a>ç™»å½•åŠŸèƒ½å®ç°</h2><p>ç™»å½•çš„å®ç°é€»è¾‘å¦‚ä¸‹ï¼Œé¦–å…ˆè·å– Subjectï¼Œç„¶åè°ƒç”¨ç™»å½•æ–¹æ³•ã€‚åˆ©ç”¨æ•è·çš„å“ªäº›å¼‚å¸¸æ¥è¯´æ˜ç™»å½•å¤±è´¥çš„åŸå› ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"login"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Subject</span> subject <span class="token operator">=</span> <span class="token class-name">SecurityUtils</span><span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        subject<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">UsernamePasswordToken</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"redirect:/index.jsp"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">UnknownAccountException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·åé”™è¯¯!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IncorrectCredentialsException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å¯†ç é”™è¯¯!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token string">"redirect:/login.jsp"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ç„¶ååœ¨è‡ªå®šä¹‰çš„ Realm ä¸­ï¼Œé‡å†™è®¤è¯çš„æ–¹æ³•ï¼Œè°ƒç”¨ userServiceï¼Œåˆ¤æ–­æ˜¯å¦æŸ¥è¯¢åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œå¦‚æœæœ‰ç”¨æˆ·ä¿¡æ¯ï¼Œé‚£ä¹ˆæ¯”å¯¹ç”¨æˆ·çš„å¯†ç ã€‚åˆ›å»º SimpleAuthenticationInfo å¯¹è±¡æ¥å¯¹ç”¨æˆ·è¿›è¡Œè¿‡è®¤è¯ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">protected</span> <span class="token class-name">AuthenticationInfo</span> <span class="token function">doGetAuthenticationInfo</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationToken</span> authenticationToken<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">AuthenticationException</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"====================================="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> username <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> authenticationToken<span class="token punctuation">.</span><span class="token function">getPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æŒ‰ç…§ç”¨æˆ·åæŸ¥è¯¢</span>    <span class="token class-name">UserService</span> userService <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">UserService</span><span class="token punctuation">)</span> <span class="token class-name">ApplicationUtils</span><span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userService"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">TUser</span> userInfo <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">findUserInfo</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">nonNull</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// ç”¨æˆ·åã€å¯†ç ã€ç›å€¼ã€åå­—ã€‚</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SimpleAuthenticationInfo</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> userInfo<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ByteSource<span class="token punctuation">.</span>Util</span><span class="token punctuation">.</span><span class="token function">bytes</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">.</span><span class="token function">getSalt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>åœ¨ SimpleAuthenticationInfo ç±»ä¸­ï¼Œå¦‚æœæ˜¯å¯¹åŠ å¯†çš„å¯†ç è¿›è¡Œæ¯”è¾ƒï¼Œéœ€è¦æœ‰ 4 ä¸ªå‚æ•°ï¼šä¸€ä¸ªç”¨æˆ·åã€ä¸€ä¸ªåŠ å¯†æ‰€ä½¿ç”¨çš„ç›å€¼ã€ä¸€ä¸ªåŠ å¯†çš„ç±»å‹å’Œ realm çš„åå­—ã€‚å¦‚æœæ˜¯æ¯”è¾ƒæ˜æ–‡çš„è¯ï¼Œåªéœ€è¦ä¸‰ä¸ªå‚æ•°å³å¯ï¼Œåˆ†åˆ«æ˜¯ç”¨æˆ·åã€å¯†ç ã€ realm çš„åå­—ã€‚</p><p>è¿™æ ·ï¼Œç™»å½•åŠŸèƒ½å°±åŸºæœ¬ä¸Šå®ç°äº†ã€‚åªè¦è®¤è¯æˆåŠŸä¹‹åå°±èƒ½è®¿é—®ä¸»é¡µäº†ã€‚</p><p><img src="/journal/shiro-spring/image-20220329114737704.png" alt="image-20220329114737704" loading="lazy"></p><h2 id="é€€å‡ºç™»å½•åŠŸèƒ½å®ç°"><a href="#é€€å‡ºç™»å½•åŠŸèƒ½å®ç°" class="headerlink" title="é€€å‡ºç™»å½•åŠŸèƒ½å®ç°"></a>é€€å‡ºç™»å½•åŠŸèƒ½å®ç°</h2><p>é€€å‡ºåŠŸèƒ½å¾ˆç®€å•ï¼Œåªéœ€è°ƒç”¨ logout æ–¹æ³•å³å¯ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"logout"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Subject</span> subject <span class="token operator">=</span> <span class="token class-name">SecurityUtils</span><span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    subject<span class="token punctuation">.</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"redirect:/login.jsp"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="æˆæƒåŠŸèƒ½å®ç°"><a href="#æˆæƒåŠŸèƒ½å®ç°" class="headerlink" title="æˆæƒåŠŸèƒ½å®ç°"></a>æˆæƒåŠŸèƒ½å®ç°</h2><blockquote><p>è¿™é‡Œåªåšä¸€ä¸ªç®€å•çš„æˆæƒåŠŸèƒ½å®ç°ï¼Œç”±äºè¿˜æ²¡æœ‰æˆæƒä¹‹ç±»çš„ç›¸å…³è¡¨ï¼Œåé¢å†è¯¦ç»†çš„ä»‹ç»æˆæƒçš„å®Œæ•´æµç¨‹ã€‚</p></blockquote><p>æ¯ä¸ªç”¨æˆ·ç™»å½•ä¹‹åï¼Œåº”è¯¥éœ€è¦æˆäºˆå¯¹åº”çš„è§’è‰²å’Œæƒé™ã€‚è‹¥è¦ç»™å¯¹åº”çš„ç”¨æˆ·èµ‹äºˆå¯¹åº”çš„æƒé™ï¼Œåˆ™éœ€è¦åˆ›å»ºä¸€ä¸ª SimpleAuthorizationInfo å¯¹è±¡ï¼Œç”¨äºæˆäºˆè§’è‰²å’Œæƒé™ã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘è¦ç»™ xiaohe123 è¿™ä¸ªç”¨æˆ·æˆäºˆç®¡ç†å‘˜è§’è‰²ã€‚è¯¥ç®¡ç†å‘˜çš„è§’è‰²æ‹¥æœ‰ç”¨æˆ·æ“ä½œï¼Œæ‰€æœ‰è®¢å•ä¿å­˜å’Œæ‰€æœ‰å•†å“ä¿å­˜ï¼Œå¯ä»¥è¿™æ ·å†™ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">protected</span> <span class="token class-name">AuthorizationInfo</span> <span class="token function">doGetAuthorizationInfo</span><span class="token punctuation">(</span><span class="token class-name">PrincipalCollection</span> principalCollection<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// è·å–èº«ä»½ä¿¡æ¯</span>    <span class="token class-name">String</span> username <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> principalCollection<span class="token punctuation">.</span><span class="token function">getPrimaryPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è°ƒç”¨æˆæƒéªŒè¯ï¼š"</span> <span class="token operator">+</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">SimpleAuthorizationInfo</span> authorizationInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleAuthorizationInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"xiaohe123"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        authorizationInfo<span class="token punctuation">.</span><span class="token function">addRole</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        authorizationInfo<span class="token punctuation">.</span><span class="token function">addStringPermission</span><span class="token punctuation">(</span><span class="token string">"user:*:*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        authorizationInfo<span class="token punctuation">.</span><span class="token function">addStringPermission</span><span class="token punctuation">(</span><span class="token string">"order:save:*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        authorizationInfo<span class="token punctuation">.</span><span class="token function">addStringPermission</span><span class="token punctuation">(</span><span class="token string">"shop:save:*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> authorizationInfo<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"xiaohe124"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        authorizationInfo<span class="token punctuation">.</span><span class="token function">addRole</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        authorizationInfo<span class="token punctuation">.</span><span class="token function">addStringPermission</span><span class="token punctuation">(</span><span class="token string">"user:revise:*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        authorizationInfo<span class="token punctuation">.</span><span class="token function">addStringPermission</span><span class="token punctuation">(</span><span class="token string">"user:update:*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> authorizationInfo<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>addRole æ–¹æ³•å°±æ˜¯æˆäºˆè§’è‰²ï¼ŒaddStringPermission å°±æ˜¯æ ¹æ®å­—ç¬¦ä¸²æ¥æˆäºˆç›¸å¯¹åº”çš„æƒé™ã€‚æˆæƒæ–¹å¼å¯ä»¥å‚è€ƒä¸Šä¸€ç¯‡çš„æ—¥å¿—ã€‚</p><h3 id="æƒé™åˆ¤æ–­æ–¹å¼"><a href="#æƒé™åˆ¤æ–­æ–¹å¼" class="headerlink" title="æƒé™åˆ¤æ–­æ–¹å¼"></a>æƒé™åˆ¤æ–­æ–¹å¼</h3><p>æˆæƒå®Œæˆä¹‹åï¼Œå°±å¯ä»¥åˆ¤æ–­ç”¨æˆ·å…·å¤‡é‚£äº›æƒé™äº†ã€‚åˆ¤æ–­æƒé™æœ‰å¤šç§æ–¹å¼ï¼Œå¯ä»¥åœ¨ jsp ä¸­å¼•å…¥ shiro æ ‡ç­¾ï¼Œå¯ä»¥é€šè¿‡ç¨‹åºè¿›è¡Œåˆ¤æ–­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ¥åˆ¤æ–­ã€‚</p><h4 id="Shiro-æ ‡ç­¾å¯¹åˆ¤æ–­æ–¹å¼"><a href="#Shiro-æ ‡ç­¾å¯¹åˆ¤æ–­æ–¹å¼" class="headerlink" title="Shiro æ ‡ç­¾å¯¹åˆ¤æ–­æ–¹å¼"></a>Shiro æ ‡ç­¾å¯¹åˆ¤æ–­æ–¹å¼</h4><p>åˆ©ç”¨ jstl æ ‡ç­¾åˆ¤æ–­æƒé™ï¼Œä¸åŒçš„è§’è‰²æ¥ç”¨äºå±•ç¤ºä¸åŒçš„èœå•é¡µã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">shiro:</span>hasAnyRoles</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user,admin<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç”¨æˆ·ç®¡ç†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">shiro:</span>hasPermission</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user:add:*<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ·»åŠ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">shiro:</span>hasPermission</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">shiro:</span>hasPermission</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user:update:*<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¿®æ”¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">shiro:</span>hasPermission</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">shiro:</span>hasPermission</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user:delete:*<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>åˆ é™¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">shiro:</span>hasPermission</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">shiro:</span>hasPermission</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user:update:*<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ›´æ–°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">shiro:</span>hasPermission</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">shiro:</span>hasAnyRoles</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">shiro:</span>hasRole</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>admin<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- ç®¡ç†å‘˜æƒé™å¯è§ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å•†å“ç®¡ç†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ç‰©æµç®¡ç†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è®¢å•ç®¡ç†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">shiro:</span>hasRole</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></code></pre><p>æŒ‰ç…§æˆæƒçš„ä»£ç æ¥è®²ï¼Œå¦‚æœæˆ‘ç™»å½•çš„è´¦æˆ·æ˜¯ xiaohe123ï¼Œé‚£ä¹ˆå®ƒå…·å¤‡ç”¨æˆ·æ“ä½œçš„æ‰€æœ‰æƒé™ï¼Œå’Œå…¶å®ƒçš„åŠŸèƒ½ã€‚å¦‚æœæ˜¯ xiaohe124ï¼Œé‚£ä¹ˆå®ƒåªæœ‰ç”¨æˆ·çš„ä¿®æ”¹å’Œæ›´æ–°æ“ä½œã€‚</p><p>ä¸‹å›¾æ˜¯ xiaohe124 çš„é¡µé¢ã€‚</p><p><img src="/journal/shiro-spring/image-20220329143610917.png" alt="image-20220329143610917" loading="lazy"></p><p>ä¸‹å›¾æ˜¯ xiaohe123 çš„é¡µé¢ã€‚</p><p><img src="/journal/shiro-spring/image-20220329114737704.png" alt="image-20220329114737704" loading="lazy"></p><h4 id="ç¨‹åºåˆ¤æ–­çš„æ–¹å¼"><a href="#ç¨‹åºåˆ¤æ–­çš„æ–¹å¼" class="headerlink" title="ç¨‹åºåˆ¤æ–­çš„æ–¹å¼"></a>ç¨‹åºåˆ¤æ–­çš„æ–¹å¼</h4><p>ç¨‹åºçš„åˆ¤æ–­åœ¨ä¸Šä¸€ç¯‡çš„æ—¥å¿—ä¸­æœ‰æåŠåˆ°ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚è¿™é‡Œæˆ‘å†™äº†ä¸€ä¸ªå°ä¾‹å­ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"save"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// è·å–ä¸»é¢˜å¯¹è±¡</span>    <span class="token class-name">Subject</span> subject <span class="token operator">=</span> <span class="token class-name">SecurityUtils</span><span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ä»£ç æ–¹å¼</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>subject<span class="token punctuation">.</span><span class="token function">hasRole</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// æŒ‰ç…§æƒé™å­—ç¬¦ä¸²</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>subject<span class="token punctuation">.</span><span class="token function">isPermitted</span><span class="token punctuation">(</span><span class="token string">"order:save:*"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¿å­˜è®¢å•"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¿å­˜è®¢å•å¤±è´¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ— æƒè®¿é—®"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token string">"redirect:/index.jsp"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="æ³¨è§£åˆ¤æ–­æ–¹å¼"><a href="#æ³¨è§£åˆ¤æ–­æ–¹å¼" class="headerlink" title="æ³¨è§£åˆ¤æ–­æ–¹å¼"></a>æ³¨è§£åˆ¤æ–­æ–¹å¼</h4><p>æ³¨è§£çš„åˆ¤æ–­åœ¨æ§åˆ¶å±‚ä¸Šï¼Œåˆ©ç”¨ @RequireRoles æ³¨è§£å°±ç±»ä¼¼äº <code>subject.hasRole</code> æ–¹æ³•æ¥åˆ¤æ–­æƒé™çš„è§„åˆ™ã€‚åˆ©ç”¨ @RequiresPermissions æ³¨è§£ç”¨äºåˆ¤æ–­è¯¥è§’è‰²å¯¹åº”çš„ç›¸å…³æƒé™ã€‚</p><p>æ¯”å¦‚ä¸‹é¢è¿™ä¸ªä»£ç ï¼Œè®¿é—®çš„ç”¨æˆ·å¿…é¡»æ˜¯ admin çš„è§’è‰²ï¼Œä¸”èƒ½å¤Ÿä¿å­˜å•†å“ç¼–å·ä¸º 114 çš„å•†å“ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"saveShop"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@RequiresRoles</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span> <span class="token comment">// ç”¨æ¥åˆ¤æ–­è§’è‰²</span><span class="token annotation punctuation">@RequiresPermissions</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"shop:save:114"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">saveShop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å•†å“ä¿¡æ¯ä¿å­˜ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"redirect:/index.jsp"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>å½“æˆ‘æ˜¯ xiaohe123 æ“ä½œæ—¶ï¼Œå®ƒçš„æƒé™å­—ç¬¦ä¸²æ˜¯ <code>shop:save:*</code> ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒèƒ½å¤Ÿä¿å­˜å…¨éƒ¨çš„å•†å“ä¿¡æ¯ï¼Œè‡ªç„¶ä¹Ÿå°±åŒ…æ‹¬ 114 è¿™ä¸ªå•†å“äº†ã€‚</p><h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><p>UserService ä»£ç </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Service</span><span class="token punctuation">(</span><span class="token string">"userService"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">TUserMapper</span> tUserMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">TUser</span> tUser<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> salt <span class="token operator">=</span> <span class="token class-name">SaltUtils</span><span class="token punctuation">.</span><span class="token function">getSalt</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ç”Ÿæˆ md5ï¼Œä¼ å…¥æ˜æ–‡å¯†ç ï¼Œç›å€¼å’Œè¿­ä»£æ¬¡æ•°ã€‚</span>        <span class="token class-name">Md5Hash</span> md5Hash <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Md5Hash</span><span class="token punctuation">(</span>tUser<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> salt<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        tUser<span class="token punctuation">.</span><span class="token function">setSalt</span><span class="token punctuation">(</span>salt<span class="token punctuation">)</span><span class="token punctuation">;</span>        tUser<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span>md5Hash<span class="token punctuation">.</span><span class="token function">toHex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        tUserMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>tUser<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">TUser</span> <span class="token function">findUserInfo</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">TUser</span> user <span class="token operator">=</span> tUserMapper<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TUser</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> username<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> user<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ApplicationUtils.java</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * è·å– spring å®¹å™¨ä¸­çš„ bean å¯¹è±¡ */</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationUtils</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationContextAware</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ApplicationContext</span> context<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">&#123;</span>        context <span class="token operator">=</span> applicationContext<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>SaltUtils.java</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Random</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SaltUtils</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">getSalt</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> chars <span class="token operator">=</span> <span class="token string">"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&amp;*()"</span><span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">StringBuilder</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">char</span> c <span class="token operator">=</span> chars<span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>chars<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> æƒé™æ¡†æ¶å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> Shiro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shiro å­¦ä¹ å°è®°</title>
      <link href="/journal/shiro-study/"/>
      <url>/journal/shiro-study/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Shiro-ä»‹ç»"><a href="#Shiro-ä»‹ç»" class="headerlink" title="Shiro ä»‹ç»"></a>Shiro ä»‹ç»</h2><p>æƒé™ä½“ç³»åœ¨ç°ä»£è½¯ä»¶åº”ç”¨ä¸­æœ‰ç€éå¸¸é‡è¦çš„åœ°ä½ã€‚ä¸€ä¸ªåº”ç”¨å¦‚æœæ²¡æœ‰æƒé™ä½“ç³»éƒ½ä¼šæ˜¾ç€è¿™ä¸ªç³»ç»Ÿâ€œç‰¹åˆ«ä¸å®‰å…¨â€ï¼Œæ— è®ºæ˜¯ä¼ ç»Ÿçš„ MIS ç³»ç»Ÿè¿˜æ˜¯äº’è”ç½‘é¡¹ç›®å‡ºäºå¯¹ä¸šåŠ¡æ•°æ®å’Œåº”ç”¨è‡ªèº«çš„å®‰å…¨ï¼Œéƒ½ä¼šè®¾ç½®è‡ªå·±çš„å®‰å…¨ç­–ç•¥ã€‚</p><p>Apache Shiro æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å¹¶ä¸”ç®€å•ä½¿ç”¨çš„ Java æƒé™æ¡†æ¶ã€‚ä¸»è¦åº”ç”¨è®¤è¯ï¼ˆAuthenticationï¼‰ã€æˆæƒï¼ˆAuthorizationï¼‰ã€åŠ å¯†ï¼ˆCryptographyï¼‰å’Œ Session Managerã€‚Shiro å…·æœ‰ç®€å•æ˜“æ‡‚çš„ APIï¼Œä½¿ç”¨Shiro å¯ä»¥å¿«é€Ÿå¹¶ä¸”ç®€å•çš„åº”ç”¨åˆ°ä»»ä½•åº”ç”¨ä¸­ï¼Œæ— è®ºæ˜¯ä»æœ€å°çš„ç§»åŠ¨ app åˆ°æœ€å¤§çš„ä¼ä¸šçº§ web åº”ç”¨éƒ½å¯ä»¥ä½¿ç”¨ã€‚</p><span id="more"></span><h2 id="æ ¸å¿ƒåŠŸèƒ½"><a href="#æ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="æ ¸å¿ƒåŠŸèƒ½"></a>æ ¸å¿ƒåŠŸèƒ½</h2><p><strong><font color="red">Authentication</font></strong> è®¤è¯ã€‚å¦‚ç”¨æˆ·çš„ç™»å½•ã€‚</p><p><strong><font color="red">Authorization</font></strong> æˆæƒã€‚ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è®¿é—®æŒ‡å®š URL ç­‰ã€‚</p><p><strong>Cryptography</strong> å¯†ç å­¦ã€‚å¦‚å¯†ç çš„åŠ å¯†ã€‚</p><p><strong>Session Management</strong> Session ç®¡ç†ã€‚</p><p><strong>Web Integration</strong> Webé›†æˆã€‚Shiroä¸ä¾èµ–äºå®¹å™¨ã€‚</p><h2 id="Shiro-çš„æ¶æ„åŸç†"><a href="#Shiro-çš„æ¶æ„åŸç†" class="headerlink" title="Shiro çš„æ¶æ„åŸç†"></a>Shiro çš„æ¶æ„åŸç†</h2><p>Shiro çš„æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ¥ä¸‹æ¥å°†ä»‹ç»æ¶æ„çš„æ¯ä¸€ä¸ªéƒ¨åˆ†ã€‚</p><p><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fattach.dataguru.cn%2Fattachments%2Fforum%2F201403%2F10%2F1435301im3t21cbc0itmbi.png&refer=http%3A%2F%2Fattach.dataguru.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1650680539&t=675d9d7d30c47a14cefe25549d6bbc93" alt="shiroæ¶æ„" loading="lazy"></p><h3 id="Subject"><a href="#Subject" class="headerlink" title="Subject"></a>Subject</h3><p>ä¸»ä½“ã€‚æ¯ä¸ªâ€œç”¨æˆ·â€ç™»å½•æˆåŠŸåéƒ½ä¼šå¯¹åº”ä¸€ä¸ª Subject å¯¹è±¡ï¼Œæ‰€æœ‰â€œç”¨æˆ·â€ä¿¡æ¯éƒ½å­˜æ”¾åœ¨ Subject ä¸­ã€‚å¯ä»¥ç†è§£æˆ Subject å°±æ˜¯ Shiro æä¾›çš„ç”¨æˆ·å®ä½“ç±»ã€‚æ²¡æœ‰ Subject å°±æ²¡æœ‰è®¤è¯è¿™ä¸ªæ“ä½œã€‚</p><h3 id="Security-Manager"><a href="#Security-Manager" class="headerlink" title="Security Manager"></a>Security Manager</h3><p>Shiro æœ€å¤§çš„å®¹å™¨ï¼Œæ­¤å®¢å™¨ä¸­åŒ…å«äº† Shiro çš„ç»å¤§å¤šæ•°åŠŸèƒ½ã€‚åœ¨å…¶å®ƒé¡¹ç›®ä¸­ï¼Œè·å– Security Manager æ˜¯ç¼–å†™ä»£ç çš„ç¬¬ä¸€æ­¥ã€‚ä½†æ˜¯ Spring Boot ä¸­å·²ç»å¸®åŠ©æˆ‘ä»¬è¿›è¡Œè‡ªåŠ¨åŒ–é…ç½®äº†ã€‚</p><h3 id="Authenticator"><a href="#Authenticator" class="headerlink" title="Authenticator"></a>Authenticator</h3><p>è®¤è¯å™¨ã€‚æ‰§è¡Œè®¤è¯è¿‡ç¨‹æ—¶æ‰€è°ƒç”¨çš„ç»„ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†è®¤è¯ç­–ç•¥ã€‚</p><h3 id="Authorizer"><a href="#Authorizer" class="headerlink" title="Authorizer"></a>Authorizer</h3><p>æˆæƒå™¨ã€‚æ‰§è¡Œæˆæƒæ—¶è°ƒç”¨çš„ç»„ä»¶ã€‚</p><h3 id="Session-Manager"><a href="#Session-Manager" class="headerlink" title="Session Manager"></a>Session Manager</h3><p>Shiro è¢« Web é›†æˆåï¼ŒHttpSession å¯¹è±¡ä¼šç”± Shiro çš„ Session Manager è¿›è¡Œç®¡ç†ã€‚</p><h3 id="Cache-Manager"><a href="#Cache-Manager" class="headerlink" title="Cache Manager"></a>Cache Manager</h3><p>ç¼“å­˜ç®¡ç†ã€‚Shiro æ‰§è¡Œå¾ˆå¤šç¬¬ä¸‰æ–¹ç¼“å­˜æŠ€æœ¯ï¼Œå¦‚ EHCache ç­‰ã€‚</p><h3 id="Session-DAO"><a href="#Session-DAO" class="headerlink" title="Session DAO"></a>Session DAO</h3><p>æ“ä½œ Session å†…å®¹çš„ç»„ä»¶ã€‚</p><h3 id="Realms"><a href="#Realms" class="headerlink" title="Realms"></a>Realms</h3><p>Shiro æ¡†æ¶å®ç°æƒé™æ§åˆ¶ä¸ä¾èµ–äºæ•°æ®åº“ï¼Œé€šè¿‡å†…ç½®æ•°æ®ä¹Ÿå¯ä»¥å®ç°æƒé™æ§åˆ¶ï¼Œæ¯”å¦‚åé¢æåˆ°çš„ ini æ–‡ä»¶ã€‚ä½†æ˜¯ç›®å‰ç»å¤§å¤šæ•°åº”ç”¨çš„æ•°æ®éƒ½å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œæ‰€ä»¥ Shiro æä¾›äº† Realms ç»„ä»¶ï¼Œæ­¤ç»„ä»¶çš„ä½œç”¨å°±æ˜¯è®¿é—®æ•°æ®åº“ã€‚Shiro å†…ç½®çš„è®¿é—®æ•°æ®åº“çš„ä»£ç ï¼Œé€šè¿‡ç®€å•é…ç½®å°±å¯ä»¥è®¿é—®æ•°æ®åº“ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰ Realms å®ç°è®¿é—®æ•°æ®åº“é€»è¾‘ã€‚</p><h2 id="Shiro-çš„-INI-æ–‡ä»¶"><a href="#Shiro-çš„-INI-æ–‡ä»¶" class="headerlink" title="Shiro çš„ INI æ–‡ä»¶"></a>Shiro çš„ INI æ–‡ä»¶</h2><p>INI è‹±æ–‡åç§°æ˜¯ Initialization fileï¼ŒINI æ–‡ä»¶æ˜¯ Window ç³»ç»Ÿé…ç½®æ–‡ä»¶çš„æ‰©å±•åã€‚Shiro çš„å…¨å±€é…ç½®æ–‡ä»¶å°±æ˜¯â€œ.iniâ€æ–‡ä»¶ï¼Œini ä¸­æ•°æ®éƒ½æ˜¯å›ºå®šæ•°æ®ã€‚</p><p>.ini æ–‡ä»¶å†…å®¹çš„è¯­æ³•å’Œ .properties ç±»ä¼¼ï¼Œéƒ½æ˜¯ key=value æ ¼å¼ï¼ŒINI æ–‡ä»¶ä¸­åŒ…å«äº† 4 ä¸ªéƒ¨åˆ†ã€‚åˆ†åˆ«æ˜¯ mainã€usersã€rolesã€urlsã€‚</p><p>Shiro çš„é…ç½®æ–‡ä»¶å¤§è‡´æœ‰å¦‚ä¸‹å†…å®¹ï¼š</p><pre class="language-ini" data-language="ini"><code class="language-ini"><span class="token selector">[main]</span><span class="token comment"># Shiro çš„ä¸€äº›å…¨å±€é…ç½®</span><span class="token selector">[users]</span><span class="token comment"># ç”¨æˆ·å=å¯†ç ,è§’è‰²å</span><span class="token constant">xiaohehe</span><span class="token attr-value"><span class="token punctuation">=</span>123456,role1,role2</span><span class="token selector">[roles]</span><span class="token comment"># è§’è‰²å=æƒé™å</span><span class="token constant">role1</span><span class="token attr-value"><span class="token punctuation">=</span>user:inseet,role2=user:update</span><span class="token constant">role2</span><span class="token attr-value"><span class="token punctuation">=</span>insert,update,delete,select</span><span class="token selector">[urls]</span><span class="token comment"># å®šä¹‰å“ªä¸ªæ§åˆ¶å™¨è¢«å“ªä¸ªè¿‡æ»¤å™¨è¿‡æ»¤ã€‚Shiro å†…ç½®å¾ˆå¤šè¿‡æ»¤å™¨ã€‚æ­¤éƒ¨åˆ†ä¸»è¦åœ¨ WEB åº”ç”¨ä¸­ä½¿ç”¨</span><span class="token comment"># æ§åˆ¶å™¨åç§°ï¼ˆå¯ç†è§£æˆurlè¯·æ±‚è·¯å¾„ï¼‰=è¿‡æ»¤å™¨åç§°</span><span class="token constant">/login</span><span class="token attr-value"><span class="token punctuation">=</span>authc</span><span class="token constant">/**</span><span class="token attr-value"><span class="token punctuation">=</span>anon</span></code></pre><h3 id="Shiro-å†…ç½®çš„è¿‡æ»¤å™¨"><a href="#Shiro-å†…ç½®çš„è¿‡æ»¤å™¨" class="headerlink" title="Shiro å†…ç½®çš„è¿‡æ»¤å™¨"></a>Shiro å†…ç½®çš„è¿‡æ»¤å™¨</h3><p>è¿‡æ»¤å™¨åˆ†ä¸ºä¸¤ç±»ï¼šè®¤è¯ç›¸å…³è¿‡æ»¤å™¨å’Œæˆæƒç›¸å…³è¿‡æ»¤å™¨</p><h4 id="è®¤è¯ç›¸å…³çš„è¿‡æ»¤å™¨"><a href="#è®¤è¯ç›¸å…³çš„è¿‡æ»¤å™¨" class="headerlink" title="è®¤è¯ç›¸å…³çš„è¿‡æ»¤å™¨"></a>è®¤è¯ç›¸å…³çš„è¿‡æ»¤å™¨</h4><table><thead><tr><th>è¿‡æ»¤å™¨å</th><th>è¿‡æ»¤å™¨ç±»</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>anon</td><td>AnonymousFilter</td><td>åŒ¿åæ‹¦æˆªå™¨ï¼Œä¸éœ€è¦ç™»å½•å³å¯è®¿é—®çš„èµ„æºï¼ŒåŒ¿åç”¨æˆ·æˆ–æ¸¸å®¢ï¼Œä¸€èˆ¬ç”¨äºè¿‡æ»¤é™æ€èµ„æºã€‚</td></tr><tr><td>authc</td><td>FormAuthenticationFilter</td><td>éœ€è¦è®¤è¯ç™»å½•æ‰èƒ½è®¿é—®</td></tr><tr><td>authcBasic</td><td>BasicHttpAuthenticationFilter</td><td>httpBasic èº«ä»½éªŒè¯æ‹¦æˆªå™¨ã€‚</td></tr><tr><td>user</td><td>UserFilter</td><td>ç”¨æˆ·æ‹¦æˆªå™¨ï¼Œè¡¨ç¤ºå¿…é¡»å­˜åœ¨ç”¨æˆ·ã€‚</td></tr><tr><td>logout</td><td>authc.LogoutFilter</td><td>é€€å‡ºæ‹¦æˆªå™¨ï¼Œæ‰§è¡Œåä¼šç›´æ¥è·³è½¬åˆ°shiroFilterFactoryBean.setLoginUrl() è®¾ç½®çš„ url</td></tr></tbody></table><h4 id="æˆæƒç›¸å…³è¿‡æ»¤å™¨"><a href="#æˆæƒç›¸å…³è¿‡æ»¤å™¨" class="headerlink" title="æˆæƒç›¸å…³è¿‡æ»¤å™¨"></a>æˆæƒç›¸å…³è¿‡æ»¤å™¨</h4><table><thead><tr><th>è¿‡æ»¤å™¨å</th><th>è¿‡æ»¤å™¨ç±»</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>noSessionCreation</td><td>NoSessionCreationFilter</td><td>é˜»æ­¢åœ¨è¯·æ±‚æœŸé—´åˆ›å»ºæ–°çš„ä¼šè¯ã€‚ä»¥ä¿è¯æ— çŠ¶æ€çš„ä½“éªŒ</td></tr><tr><td>perms</td><td>PermissionsAuthorizationFilter</td><td>éªŒè¯ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æƒé™ï¼Œè¡¨ç¤ºéœ€è¦æŸäº›æƒé™æ‰èƒ½é€šè¿‡</td></tr><tr><td>port</td><td>PortFilter</td><td>æŒ‡å®šè¯·æ±‚è®¿é—®çš„ç«¯å£å·ï¼Œå¦‚æœä¸åŒ¹é…åˆ™è·³è½¬åˆ°ç™»å½•é¡µé¢</td></tr><tr><td>rest</td><td>HttpMethodPermissionFilter</td><td>æ ¹æ®è¯·æ±‚çš„æ–¹æ³•</td></tr><tr><td>roles</td><td>RolesAuthorizationFilter</td><td>è§’è‰²è¿‡æ»¤å™¨ã€‚åˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æŒ‡å®šè§’è‰²ã€‚</td></tr><tr><td>ssl</td><td>SslFilter</td><td>è¡¨ç¤ºå®‰å…¨çš„urlè¯·æ±‚ï¼Œåè®®ä¸ºhttpsã€‚</td></tr></tbody></table><blockquote><p>ä»¥ä¸Šçš„æƒé™è¿‡æ»¤å™¨ä¸ä¸€è¦å…¨éƒ¨ç”¨ï¼ŒæŒ‰ç…§é¡¹ç›®çš„å…·ä½“æƒ…å†µæ¥åˆ†é…ç›¸åº”çš„æƒé™ï¼Œä½¿ç”¨ç›¸å…³çš„è¿‡æ»¤å™¨å³å¯ã€‚åé¢åœ¨å­¦ä¹ åˆ°<a href="/journal/shiro-spring">æ•´åˆåˆ° SpringBoot </a>çš„æ—¶å€™ä¼šæŠ½å‡ºä¸€äº›ç”¨æ³•ã€‚</p></blockquote><p><strong>åœ¨ INI æ–‡ä»¶ä¸­çš„é…ç½®æ—¶ï¼Œéœ€è¦æŒ‰ç…§ä¸‹é¢çš„æ–¹å¼é…ç½®ã€‚</strong></p><p>anonï¼šä¸è®¤è¯ä¹Ÿå¯ä»¥è®¿é—®ã€‚ä¾‹å¦‚ï¼š<code>/admin/=anon</code>ï¼Œ<code>/login=anno</code></p><p>authcï¼šå¿…é¡»è®¤è¯ã€‚<code>/**=authc</code> â€”â€”æ‰€æœ‰çš„èµ„æºéƒ½è®¤è¯ã€‚</p><p>authcBasicï¼šæ²¡æœ‰å‚æ•°æ—¶è¡¨ç¤º httpBasic è®¤è¯(å®¢æˆ·ç«¯è®¤è¯æ–¹å¼)ã€‚</p><p>logoutï¼šé€€å‡ºã€‚</p><p>noSessionCreationï¼šæ–°å¢ Filterï¼Œè¡¨ç¤ºæ²¡æœ‰ Session åˆ›å»ºã€‚</p><p>permsï¼šåˆ¤æ–­æ˜¯æœ‰å…·æœ‰æŒ‡å®šæƒé™ã€‚ä¾‹å¦‚ï¼š<code>/admin/user/=perms[ &quot;per1â€ &quot; per2â€ ]</code>ã€‚å¿…é¡»åŒæ—¶å…·æœ‰ç»™å®šæƒé™æ‰å¯ä»¥è®¿é—®ã€‚å¦‚æœåªæœ‰ä¸€ä¸ªæƒé™å¯ä»¥çœç•¥åŒå¼•å·ã€‚</p><p>portï¼šé™åˆ¶ç«¯å£ã€‚ä¾‹å¦‚ï¼š<code>/admin/**=port[8081]</code>ã€‚åªè¦è¯·æ±‚ä¸æ˜¯ 8081 ç«¯å£å°±é‡æ–°å‘é€URLåˆ°8081ç«¯å£ã€‚</p><p>restï¼šè¯·æ±‚æ–¹å¼å’Œæƒé™çš„ç®€ä¾¿å†™æ³•ã€‚ä¾‹å¦‚ï¼š<code>/admin/**=rest[user]</code>ï¼Œç›¸å½“äº<code>/admin/** = perms[user:æ–¹å¼]</code>ï¼Œæ–¹å¼æ˜¯httpè¯·æ±‚çš„æ–¹å¼: post ã€get ç­‰ã€‚</p><p>rolesï¼šåˆ¤æ–­æ˜¯å¦å…·æœ‰æŒ‡å®šè§’è‰²ã€‚<code>/admin/** =roles[role1]</code>ã€‚</p><p>sslï¼šè¡¨ç¤ºæ˜¯å®‰å…¨çš„è¯·æ±‚ã€‚åè®®ä¸º httpsã€‚</p><p>userï¼šè¡¨ç¤ºå¿…é¡»å­˜åœ¨ç”¨æˆ·ã€‚</p><h2 id="Shiro-åŸºæœ¬è®¤è¯æµç¨‹"><a href="#Shiro-åŸºæœ¬è®¤è¯æµç¨‹" class="headerlink" title="Shiro åŸºæœ¬è®¤è¯æµç¨‹"></a>Shiro åŸºæœ¬è®¤è¯æµç¨‹</h2><ol><li>è·å– Subject ä¸»ä½“ï¼Œé€šè¿‡ä¸»ä½“ Subject å¯¹è±¡çš„ login æ–¹æ³•è¿›è¡Œç™»å½•ã€‚</li><li>æŠŠ Subject ä¸­å†…å®¹ä¼ é€’ç»™Security Managerã€‚</li><li>æŠŠ Security Manager å†…éƒ¨ç»„ä»¶ Authenticator è¿›è¡Œè®¤è¯ã€‚</li><li>ä½¿ç”¨ Realm æ¥è®¤è¯æ•°æ®ï¼Œæ¯”å¦‚ä½¿ç”¨ INI Realm æ¥è®¤è¯ï¼Œè°ƒç”¨ ini æ–‡ä»¶ä¸­æ•°æ®ã€‚</li></ol><h3 id="ç®€å•å°è¯•ä¸€ä¸‹"><a href="#ç®€å•å°è¯•ä¸€ä¸‹" class="headerlink" title="ç®€å•å°è¯•ä¸€ä¸‹"></a>ç®€å•å°è¯•ä¸€ä¸‹</h3><p>1ã€åˆ›å»ºä¸€ä¸ª Maven å·¥ç¨‹ã€å¤åˆ¶ä»¥ä¸‹ä¾èµ–ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.shiro<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>shiro-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.8.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>commons-logging<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>commons-logging<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>2ã€åœ¨ resources ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ª ini æ–‡ä»¶ã€‚æ–°å»ºä¸€ä¸ª users é€‰é¡¹ï¼ŒæŒ‰ç…§ <code>ç”¨æˆ·å=å¯†ç </code> çš„æ–¹å¼åœ¨ ini æ–‡ä»¶ä¸­æ·»åŠ ç”¨æˆ·ã€‚</p><pre class="language-ini" data-language="ini"><code class="language-ini"><span class="token selector">[users]</span><span class="token constant">zs</span><span class="token attr-value"><span class="token punctuation">=</span>123</span><span class="token constant">sxc</span><span class="token attr-value"><span class="token punctuation">=</span>123</span><span class="token constant">xiaohehe</span><span class="token attr-value"><span class="token punctuation">=</span>123</span></code></pre><p>3ã€åˆ›å»ºä¸€ä¸ª Main æ–¹æ³•ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>shirofirst</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span></span><span class="token class-name">SecurityUtils</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>authc<span class="token punctuation">.</span></span><span class="token class-name">IncorrectCredentialsException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>authc<span class="token punctuation">.</span></span><span class="token class-name">UnknownAccountException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>authc<span class="token punctuation">.</span></span><span class="token class-name">UsernamePasswordToken</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">IniSecurityManagerFactory</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>mgt<span class="token punctuation">.</span></span><span class="token class-name">SecurityManager</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>subject<span class="token punctuation">.</span></span><span class="token class-name">Subject</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShiroFirstApplication</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello World!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 1ã€è§£æ ini æ–‡ä»¶ï¼Œåˆ›å»º SecurityManager å·¥å‚</span>        <span class="token class-name">IniSecurityManagerFactory</span> managerFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IniSecurityManagerFactory</span><span class="token punctuation">(</span><span class="token string">"classpath:shiro.ini"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 2ã€è·å¾— SecurityManager å®ä¾‹å¯¹è±¡</span>        <span class="token class-name">SecurityManager</span> instance <span class="token operator">=</span> managerFactory<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 3ã€å°† SecurityManager å¯¹è±¡ä¿å­˜åˆ° SecurityUtils ä¸­</span>        <span class="token class-name">SecurityUtils</span><span class="token punctuation">.</span><span class="token function">setSecurityManager</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 4ã€è·å– Subject ä¸»é¢˜å¯¹è±¡</span>        <span class="token class-name">Subject</span> subject <span class="token operator">=</span> <span class="token class-name">SecurityUtils</span><span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 5ã€åˆ›å»ºä»¤ç‰Œå¯¹è±¡ï¼Œç›¸å½“äºæ˜¯ç»™æˆ‘ä»¬ç”¨æˆ·è‡ªå·±è¾“å…¥ç”¨æˆ·åå’Œå¯†ç </span>        <span class="token class-name">UsernamePasswordToken</span> token <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UsernamePasswordToken</span><span class="token punctuation">(</span><span class="token string">"sxc"</span><span class="token punctuation">,</span> <span class="token string">"1123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 6ã€è¿›è¡Œè®¤è¯çš„æ¯”è¾ƒï¼ˆRealmsï¼‰</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            subject<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è®¤è¯æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">UnknownAccountException</span> exception<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è®¤è¯å¤±è´¥ï¼ŒæœªçŸ¥çš„è´¦æˆ·ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IncorrectCredentialsException</span> exception<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è®¤è¯å¤±è´¥ï¼Œä¸æ­£ç¡®çš„å£ä»¤ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>4ã€è¿è¡Œç»“æœ</p><pre class="language-txt" data-language="txt"><code class="language-txt">&#x2F;&#x2F; ç”¨æˆ·åä¸ºsxcã€å¯†ç ä¸º 1123Hello World!SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.SLF4J: Defaulting to no-operation (NOP) logger implementationSLF4J: See http:&#x2F;&#x2F;www.slf4j.org&#x2F;codes.html#StaticLoggerBinder for further details.è®¤è¯å¤±è´¥ï¼Œä¸æ­£ç¡®çš„å£ä»¤ï¼    &#x2F;&#x2F; ç”¨æˆ·åä¸º scã€å¯†ç ä¸º 123Hello World!SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.SLF4J: Defaulting to no-operation (NOP) logger implementationSLF4J: See http:&#x2F;&#x2F;www.slf4j.org&#x2F;codes.html#StaticLoggerBinder for further details.è®¤è¯å¤±è´¥ï¼ŒæœªçŸ¥çš„è´¦æˆ·ï¼&#x2F;&#x2F; ç”¨æˆ·åä¸º sxcã€å¯†ç ä¸º 123Hello World!SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.SLF4J: Defaulting to no-operation (NOP) logger implementationSLF4J: See http:&#x2F;&#x2F;www.slf4j.org&#x2F;codes.html#StaticLoggerBinder for further details.è®¤è¯æˆåŠŸï¼</code></pre><h3 id="è®¤è¯çš„è¿‡ç¨‹"><a href="#è®¤è¯çš„è¿‡ç¨‹" class="headerlink" title="è®¤è¯çš„è¿‡ç¨‹"></a>è®¤è¯çš„è¿‡ç¨‹</h3><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨äº† UsernamePasswordToken ç±»æ¥è¿›è¡Œç”¨æˆ·çš„è®¤è¯ï¼Œè®¤è¯åŸç†é¦–å…ˆæ˜¯æ¯”å¯¹ç”¨æˆ·åï¼Œåˆ¤æ–­ç”¨æˆ·åæ˜¯å¦å­˜åœ¨ï¼Œç„¶åå†åˆ¤æ–­ç”¨æˆ·çš„å¯†ç æ˜¯å¦åŒ¹é…ã€‚å¦‚æœç”¨æˆ·åæˆ–è€…å¯†ç ä¸æ­£ç¡®ï¼Œé‚£ä¹ˆåˆ™é€šè¿‡å¼‚å¸¸æŠ›å‡ºçš„å½¢å¼æç¤ºç”¨æˆ·åæˆ–è€…å¯†ç æ˜¯å¦æœ‰æ•ˆã€‚</p><h2 id="Shiro-çš„æˆæƒ"><a href="#Shiro-çš„æˆæƒ" class="headerlink" title="Shiro çš„æˆæƒ"></a>Shiro çš„æˆæƒ</h2><p>è‹¥è¦åˆ¤æ–­ä¸€ä¸ªç”¨æˆ·æ˜¯å¦æœ‰ä»€ä¹ˆæƒé™ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯åˆ©ç”¨æ–¹æ³•è¿”å›çš„å¸ƒå°”å€¼è¿›è¡Œåˆ¤æ–­ï¼Œå¦ä¸€ç§æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼Œä½†æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œé€šè¿‡æ•è·å¼‚å¸¸çš„æ–¹å¼æ¥å¤„ç†ç”¨æˆ·æœ‰å“ªäº›æƒé™ã€‚</p><p>åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰è§’è‰²ä»¥åŠæƒé™ï¼Œå‰ææ˜¯ç”¨æˆ·èƒ½å¤Ÿæ­£ç¡®çš„é€šè¿‡è®¤è¯ã€‚</p><h3 id="åˆ¤æ–­è§’è‰²"><a href="#åˆ¤æ–­è§’è‰²" class="headerlink" title="åˆ¤æ–­è§’è‰²"></a>åˆ¤æ–­è§’è‰²</h3><p>åˆ¤æ–­è§’è‰²çš„æ–¹æ³•æœ‰ hasRoleã€hasRolesã€hasAllRoleã€checkRole ç­‰ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå¸¦ has å‰ç¼€çš„éƒ½å¸¦è¿”å›å€¼ï¼Œç±»å‹ä¸º boolean å‹ã€‚</p><h4 id="hasRole-æ–¹æ³•"><a href="#hasRole-æ–¹æ³•" class="headerlink" title="hasRole æ–¹æ³•"></a>hasRole æ–¹æ³•</h4><p>åˆ¤æ–­å½“å‰è®¤è¯æˆåŠŸç”¨æˆ·æ˜¯å¦å…·æœ‰æŸä¸€ä¸ªè§’è‰²ï¼Œè¿”å›ä¸€ä¸ª boolean å€¼ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">boolean</span> hasRole <span class="token operator">=</span> subject<span class="token punctuation">.</span><span class="token function">hasRole</span><span class="token punctuation">(</span><span class="token string">"role2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>hasRole<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="hasRoles-æ–¹æ³•"><a href="#hasRoles-æ–¹æ³•" class="headerlink" title="hasRoles æ–¹æ³•"></a>hasRoles æ–¹æ³•</h4><p>åˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦å…·æœ‰å¤šä¸ªè§’è‰²ï¼Œè¿”å›ä¸€ç»„ boolean å€¼ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"role1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"role2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>subject<span class="token punctuation">.</span><span class="token function">hasRoles</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// boolean[] å‹</span></code></pre><h4 id="hasAllRoles-æ–¹æ³•"><a href="#hasAllRoles-æ–¹æ³•" class="headerlink" title="hasAllRoles æ–¹æ³•"></a>hasAllRoles æ–¹æ³•</h4><p>åˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦åŒ…å«å½“å‰åˆ—å‡ºçš„å…¨éƒ¨çš„è§’è‰²ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"role1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"role2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>subject<span class="token punctuation">.</span><span class="token function">hasAllRoles</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="checkPermission-æ–¹æ³•"><a href="#checkPermission-æ–¹æ³•" class="headerlink" title="checkPermission æ–¹æ³•"></a>checkPermission æ–¹æ³•</h4><p>åŠŸèƒ½ä¸Šå’Œ hasRole ä¸€æ ·ï¼Œåªæ˜¯å®ƒæ˜¯é€šè¿‡å¼‚å¸¸æŠ›å‡ºçš„å½¢å¼ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">try</span> <span class="token punctuation">&#123;</span>    subject<span class="token punctuation">.</span><span class="token function">checkRole</span><span class="token punctuation">(</span><span class="token string">"fsffsdf"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">UnauthorizedException</span> exception<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    exception<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="åˆ¤æ–­æƒé™"><a href="#åˆ¤æ–­æƒé™" class="headerlink" title="åˆ¤æ–­æƒé™"></a>åˆ¤æ–­æƒé™</h3><p>æƒé™æ˜¯åŒ…å«åœ¨è§’è‰²ä¸­ï¼Œä¹Ÿå°±æ˜¯æ„å‘³ç€å½“å‰ç”¨æˆ·åŒ…å«ç€è¿™äº›æƒé™ï¼Œæ­¤æ—¶å¯ä»¥åˆ¤æ–­è¯¥ç”¨æˆ·æ‹¥æœ‰å“ªäº›å¯ä»¥æ“ä½œçš„æƒé™äº†ã€‚</p><p>åˆ¤æ–­æƒé™çš„æ–¹æ³•æœ‰ï¼šisPermittedã€isPermittedAllã€checkPermissionã€checkPermissions ç­‰ï¼Œä½¿ç”¨æ–¹æ³•ä¹Ÿå’Œåˆ¤æ–­è§’è‰²ä¸€æ ·ï¼Œä½†æ˜¯ä¼ å…¥çš„å‚æ•°æ˜¯æƒé™åç§°è€Œä¸æ˜¯è§’è‰²åç§°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¸¦ is å‰ç¼€çš„éƒ½å¸¦è¿”å›å€¼ï¼Œç±»å‹ä¸º boolean å‹ã€‚</p><h3 id="æˆæƒæ–¹å¼"><a href="#æˆæƒæ–¹å¼" class="headerlink" title="æˆæƒæ–¹å¼"></a>æˆæƒæ–¹å¼</h3><p>æˆæƒæ–¹å¼åˆ†ä¸ºä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRole-Based Access Controlï¼‰å’ŒåŸºäºèµ„æºçš„è®¿é—®æ§åˆ¶ï¼ˆResource-Based Access Controlï¼‰ï¼Œä¸¤è€…ç®€ç§°éƒ½æ˜¯ RBACã€‚</p><h4 id="åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶"><a href="#åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶" class="headerlink" title="åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶"></a>åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶</h4><p>RBAC åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRole-Based Access Controlï¼‰æ˜¯ä»¥è§’è‰²ä¸ºä¸­å¿ƒè¿›è¡Œè®¿é—®æ§åˆ¶ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">if</span><span class="token punctuation">(</span>subject<span class="token punctuation">.</span><span class="token function">hasRole</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// æ“ä½œä»€ä¹ˆèµ„æº</span><span class="token punctuation">&#125;</span></code></pre><h4 id="åŸºäºèµ„æºçš„è®¿é—®æ§åˆ¶"><a href="#åŸºäºèµ„æºçš„è®¿é—®æ§åˆ¶" class="headerlink" title="åŸºäºèµ„æºçš„è®¿é—®æ§åˆ¶"></a>åŸºäºèµ„æºçš„è®¿é—®æ§åˆ¶</h4><p>RBAC åŸºäºèµ„æºçš„è®¿é—®æ§åˆ¶ï¼ˆResource-Based Access Controlï¼‰æ˜¯ä»¥èµ„æºä¸ºä¸­å¿ƒè¿›è¡Œè®¿é—®æ§åˆ¶ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">if</span><span class="token punctuation">(</span>subject<span class="token punctuation">.</span><span class="token function">isPermission</span><span class="token punctuation">(</span><span class="token string">"user:create:*"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// å¯¹æ‰€æœ‰çš„ç”¨æˆ·å…·æœ‰åˆ›å»ºçš„æƒé™</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span><span class="token punctuation">(</span>subject<span class="token punctuation">.</span><span class="token function">isPermission</span><span class="token punctuation">(</span><span class="token string">"user:update:01"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// å¯¹01çš„ç”¨æˆ·å…·æœ‰åˆ›å»ºçš„æƒé™</span><span class="token punctuation">&#125;</span></code></pre><blockquote><p>æƒé™å­—ç¬¦ä¸²çš„è§„åˆ™æ˜¯ï¼š<code>èµ„æºæ ‡è¯†ç¬¦âˆ¶æ“ä½œï¸°èµ„æºå®ä¾‹æ ‡è¯†ç¬¦</code>ï¼Œæ„æ€æ˜¯å¯¹å“ªä¸ªèµ„æºçš„å“ªä¸ªå®ä¾‹å…·æœ‰ä»€ä¹ˆæ“ä½œï¼Œâ€:â€ æ˜¯èµ„æº / æ“ä½œ / å®ä¾‹çš„åˆ†å‰²ç¬¦,æƒé™å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥ä½¿ç”¨ * é€šé…ç¬¦ã€‚</p><p>userï¼šç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ¨¡å—</p><p>createï¼šåˆ›å»º</p><p>*ï¼šæŸä¸ªèµ„æºçš„å®ä¾‹</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> æƒé™æ¡†æ¶å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Shiro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis å“¨å…µæ¨¡å¼</title>
      <link href="/journal/redis-sentinel/"/>
      <url>/journal/redis-sentinel/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å“¨å…µæ¨¡å¼æ¦‚è¿°"><a href="#å“¨å…µæ¨¡å¼æ¦‚è¿°" class="headerlink" title="å“¨å…µæ¨¡å¼æ¦‚è¿°"></a>å“¨å…µæ¨¡å¼æ¦‚è¿°</h2><p>å°±æ˜¯ä¸»èŠ‚ç‚¹å®•æœºäº†ï¼Œç„¶åé€šè¿‡â€œå“¨å…µâ€æ¥è‡ªåŠ¨ä»å¾ˆå¤šä»èŠ‚ç‚¹ä¸­è‡ªåŠ¨é€‰å‡ºä¸€ä¸ªä¸»èŠ‚ç‚¹æ¥ã€‚ä» Redis 2.8 å¼€å§‹å°±æ­£å¼æä¾›äº† Sentinel ï¼ˆå“¨å…µï¼‰æ¶æ„æ¥è§£å†³â€œæ‰‹åŠ¨åˆ‡æ¢ä¸ºä¸»æœåŠ¡å™¨â€é—®é¢˜ã€‚</p><p>å“¨å…µæ¨¡å¼æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ¨¡å¼ï¼Œé¦–å…ˆ Redis æä¾›äº†å“¨å…µçš„å‘½ä»¤ï¼Œå“¨å…µæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œä½œä¸ºè¿›ç¨‹ï¼Œå®ƒä¼šç‹¬ç«‹è¿è¡Œã€‚å…¶åŸç†æ˜¯<strong>å“¨å…µé€šè¿‡å‘é€å‘½ä»¤ï¼Œç­‰å¾… Redis æœåŠ¡å™¨å“åº”ï¼Œä»è€Œç›‘æ§è¿è¡Œçš„å¤šä¸ª Redis å®ä¾‹ã€‚</strong></p><p><img src="/journal/redis-sentinel/image-20211121081433399.png" alt="image-20211121081433399" loading="lazy"></p><p>å®ƒæ˜¯æ ¹æ®æŠ•ç¥¨çš„æ–¹å¼ï¼Œå¾—å‡ºçš„æŠ•ç¥¨æ•°è‡ªåŠ¨å°†ä»åº“è½¬æ¢ä¸ºä¸»åº“ã€‚</p><span id="more"></span><p>è¿™é‡Œçš„å“¨å…µæœ‰ä¸¤ä¸ªä½œç”¨</p><ul><li>é€šè¿‡å‘é€å‘½ä»¤ï¼Œè®©RedisæœåŠ¡å™¨è¿”å›ç›‘æ§å…¶è¿è¡ŒçŠ¶æ€ï¼ŒåŒ…æ‹¬ä¸»æœåŠ¡å™¨å’Œä»æœåŠ¡å™¨ã€‚</li><li>å½“å“¨å…µç›‘æµ‹åˆ°masterå®•æœºï¼Œä¼šè‡ªåŠ¨å°†slaveåˆ‡æ¢æˆmasterï¼Œç„¶åé€šè¿‡å‘å¸ƒè®¢é˜…æ¨¡å¼é€šçŸ¥å…¶ä»–çš„ä»æœåŠ¡å™¨ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œè®©å®ƒä»¬åˆ‡æ¢ä¸»æœºã€‚</li></ul><p>ç„¶è€Œä¸€ä¸ªå“¨å…µè¿›ç¨‹å¯¹RedisæœåŠ¡å™¨è¿›è¡Œç›‘æ§ï¼Œå¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šä¸ªå“¨å…µè¿›è¡Œç›‘æ§ã€‚å„ä¸ªå“¨å…µä¹‹é—´è¿˜ä¼šè¿›è¡Œç›‘æ§ï¼Œè¿™æ ·å°±å½¢æˆäº†å¤šå“¨å…µæ¨¡å¼ã€‚</p><p><img src="/journal/redis-sentinel/image-20211121081638591.png" alt="image-20211121081638591" loading="lazy"></p><p>å‡è®¾ä¸»æœåŠ¡å™¨å®•æœºï¼Œå“¨å…µ1å…ˆæ£€æµ‹åˆ°è¿™ä¸ªç»“æœï¼Œç³»ç»Ÿå¹¶ä¸ä¼šé©¬ä¸Šè¿›è¡Œ failoverï¼ˆæ•…éšœè½¬ç§»ï¼‰è¿‡ç¨‹ï¼Œä»…ä»…æ˜¯å“¨å…µ1ä¸»è§‚çš„è®¤ä¸ºä¸»æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œè¿™ä¸ªç°è±¡æˆä¸º<strong>ä¸»è§‚ä¸‹çº¿</strong>ã€‚</p><p>å½“åé¢çš„å“¨å…µä¹Ÿæ£€æµ‹åˆ°ä¸»æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œå¹¶ä¸”æ•°é‡è¾¾åˆ°ä¸€å®šå€¼æ—¶ï¼Œé‚£ä¹ˆå“¨å…µä¹‹é—´å°±ä¼šè¿›è¡Œä¸€æ¬¡æŠ•ç¥¨ï¼ŒæŠ•ç¥¨çš„ç»“æœç”±ä¸€ä¸ªå“¨å…µå‘èµ·ï¼Œè¿›è¡Œ failoverï¼ˆæ•…éšœè½¬ç§»ï¼‰æ“ä½œã€‚åˆ‡æ¢æˆåŠŸåï¼Œå°±ä¼šé€šè¿‡å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œè®©å„ä¸ªå“¨å…µæŠŠè‡ªå·±ç›‘æ§çš„ä»æœåŠ¡å™¨å®ç°åˆ‡æ¢ä¸»æœºï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º<strong>å®¢è§‚ä¸‹çº¿</strong>ã€‚</p><h2 id="å¯åŠ¨å“¨å…µæ¨¡å¼"><a href="#å¯åŠ¨å“¨å…µæ¨¡å¼" class="headerlink" title="å¯åŠ¨å“¨å…µæ¨¡å¼"></a>å¯åŠ¨å“¨å…µæ¨¡å¼</h2><p>1ã€é…ç½®å“¨å…µæ¨¡å¼é…ç½®æ–‡ä»¶ <code>sentinel.conf </code></p><pre class="language-conf" data-language="conf"><code class="language-conf"># sentinel monitor &lt;master-name&gt; &lt;ip&gt; &lt;redis-port&gt; &lt;quorum&gt;sentinel monitor redis-master-6379 127.0.0.1 6379 1</code></pre><p>2ã€å¯åŠ¨å“¨å…µ</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@localhost bin<span class="token punctuation">]</span><span class="token comment"># redis-sentinel ./sentinel.conf</span></code></pre><p>3ã€å¦‚æœä¸»èŠ‚ç‚¹å®•æœºäº†ï¼Œé‚£ä¹ˆå“¨å…µæ¨¡å¼å°†ä¼šé€šè¿‡æŠ•ç¥¨çš„æ–¹å¼å†³å®šå“ªå°æ˜¯ä¸»èŠ‚ç‚¹ï¼Œé€šè¿‡æ—¥å¿—å¯ä»¥äº†è§£åˆ°ã€‚</p><pre class="language-conf" data-language="conf"><code class="language-conf">1882:X 21 Nov 2021 08:39:24.386 # +vote-for-leader 8ce966f56d289a4560ef0479726cf5899fdb1101 31882:X 21 Nov 2021 08:39:24.387 # +elected-leader master redis-master-6379 127.0.0.1 63791882:X 21 Nov 2021 08:39:24.387 # +failover-state-select-slave master redis-master-6379 127.0.0.1 63791882:X 21 Nov 2021 08:39:24.443 # +selected-slave slave 127.0.0.1:6381 127.0.0.1 6381 @ redis-master-6379 127.0.0.1 63791882:X 21 Nov 2021 08:39:24.443 * +failover-state-send-slaveof-noone slave 127.0.0.1:6381 127.0.0.1 6381 @ redis-master-6379 127.0.0.1 6379</code></pre>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> Redis çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis ä¸»ä»å¤åˆ¶</title>
      <link href="/journal/redis-master-slave/"/>
      <url>/journal/redis-master-slave/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸»ä»å¤åˆ¶ä¼ªé›†ç¾¤æ­å»º"><a href="#ä¸»ä»å¤åˆ¶ä¼ªé›†ç¾¤æ­å»º" class="headerlink" title="ä¸»ä»å¤åˆ¶ä¼ªé›†ç¾¤æ­å»º"></a>ä¸»ä»å¤åˆ¶ä¼ªé›†ç¾¤æ­å»º</h2><blockquote><p>è¿™é‡Œçš„ä¼ªé›†ç¾¤é…ç½®çš„æ˜¯ 1 ä¸» 2 ä»ã€‚</p></blockquote><p><strong>1ã€å¤åˆ¶ 3 ä¸ªé…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ååˆ†åˆ«ä¸º <code>redis-master-6379.conf</code>ã€<code>redis-slave-6380.conf</code>ã€<code>redis-slave-6381.conf</code></strong></p><p><strong>2ã€ä¿®æ”¹ä¸‰ä¸ªé…ç½®æ–‡ä»¶çš„ç«¯å£å·ã€æ—¥å¿—æ–‡ä»¶å’Œ rdb æ–‡ä»¶ã€‚</strong></p><p><code>redis-master-6379.conf</code> éœ€è¦é…ç½®å†…å®¹å¦‚ä¸‹</p><pre class="language-conf" data-language="conf"><code class="language-conf">pidfile &#x2F;var&#x2F;run&#x2F;redis-slave-6379.pidport 6379logfile &quot;redis-master-6379.log&quot;dbfilename redis-master-6379.rdb</code></pre><p><code>redis-slave-6380.conf</code> éœ€è¦é…ç½®å†…å®¹å¦‚ä¸‹</p><span id="more"></span><pre class="language-conf" data-language="conf"><code class="language-conf">pidfile &#x2F;var&#x2F;run&#x2F;redis-slave-6380.pidport 6380logfile &quot;redis-slave-6380.log&quot;dbfilename redis-slave-6380.rdb</code></pre><p><code>redis-slave-6381.conf</code> éœ€è¦é…ç½®å†…å®¹å¦‚ä¸‹</p><pre class="language-conf" data-language="conf"><code class="language-conf">pidfile &#x2F;var&#x2F;run&#x2F;redis-slave-6381.pidport 6381logfile &quot;redis-slave-6381.log&quot;dbfilename redis-slave-6381.rdb</code></pre><h3 id="ä¸´æ—¶é…ç½®ä¸»ä»èŠ‚ç‚¹"><a href="#ä¸´æ—¶é…ç½®ä¸»ä»èŠ‚ç‚¹" class="headerlink" title="ä¸´æ—¶é…ç½®ä¸»ä»èŠ‚ç‚¹"></a>ä¸´æ—¶é…ç½®ä¸»ä»èŠ‚ç‚¹</h3><p>ä¸´æ—¶é…ç½®éå¸¸ç®€å•ï¼Œåªéœ€è¦å°†ä»èŠ‚ç‚¹é…ç½®æˆä¸»èŠ‚ç‚¹å³å¯ã€‚ä»¥ä¸‹æ˜¯å°† 6380 ç«¯å£çš„ redis é…ç½®æˆä»èŠ‚ç‚¹ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">0</span>></span> SLAVEOF <span class="token number">127.0</span>.0.1 <span class="token number">6379</span></code></pre><p>ä»¥ä¸‹æ˜¯å°† 6381 ç«¯å£çš„ redis é…ç½®æˆä»èŠ‚ç‚¹ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">1</span>></span> SLAVEOF <span class="token number">127.0</span>.0.1 <span class="token number">6379</span></code></pre><p>å¦‚æœåœ¨ä»èŠ‚ç‚¹ï¼Œè¾“å…¥è¿™ä¸ªå‘½ä»¤ï¼Œå°†ä¼šçœ‹åˆ° role æ˜¯ slaver</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">0</span>></span> info replication<span class="token comment"># Replication</span>role:slavemaster_host:127.0.0.1master_port:6379master_link_status:up</code></pre><p>å¦‚æœæ˜¯åœ¨ä¸»èŠ‚ç‚¹ï¼Œè¾“å…¥è¿™ä¸ªå‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸¤å°ä»èŠ‚ç‚¹</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> info replication<span class="token comment"># Replication</span>role:masterconnected_slaves:2slave0:ip<span class="token operator">=</span><span class="token number">127.0</span>.0.1,port<span class="token operator">=</span><span class="token number">6380</span>,state<span class="token operator">=</span>online,offset<span class="token operator">=</span><span class="token number">294</span>,lag<span class="token operator">=</span><span class="token number">1</span>slave1:ip<span class="token operator">=</span><span class="token number">127.0</span>.0.1,port<span class="token operator">=</span><span class="token number">6381</span>,state<span class="token operator">=</span>online,offset<span class="token operator">=</span><span class="token number">294</span>,lag<span class="token operator">=</span><span class="token number">0</span></code></pre><h3 id="æ°¸ä¹…é…ç½®ä¸»ä»èŠ‚ç‚¹"><a href="#æ°¸ä¹…é…ç½®ä¸»ä»èŠ‚ç‚¹" class="headerlink" title="æ°¸ä¹…é…ç½®ä¸»ä»èŠ‚ç‚¹"></a>æ°¸ä¹…é…ç½®ä¸»ä»èŠ‚ç‚¹</h3><p>æ°¸ä¹…é…ç½®çš„è¯ï¼Œåªéœ€å°†é…ç½®ä¸€ä¸‹ä»èŠ‚ç‚¹ä¸­çš„é…ç½®æ–‡ä»¶ã€‚é…ç½®å¦‚ä¸‹</p><pre class="language-conf" data-language="conf"><code class="language-conf"># replicaof &lt;masterip&gt; &lt;masterport&gt;replicaof 127.0.0.1 6379</code></pre><h2 id="ä¸»ä»èŠ‚ç‚¹çš„ä¸€äº›ç»†èŠ‚"><a href="#ä¸»ä»èŠ‚ç‚¹çš„ä¸€äº›ç»†èŠ‚" class="headerlink" title="ä¸»ä»èŠ‚ç‚¹çš„ä¸€äº›ç»†èŠ‚"></a>ä¸»ä»èŠ‚ç‚¹çš„ä¸€äº›ç»†èŠ‚</h2><p>å‘ä¸»èŠ‚ç‚¹å†™å…¥æ•°æ®</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> k1 v1OK<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> keys *<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"tel"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"age"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"k1"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"qq"</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"name"</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">"home"</span></code></pre><p><strong>1ã€ä»èŠ‚ç‚¹ä¸èƒ½å†™æ•°æ®ï¼Œåªèƒ½è¯»å–æ•°æ®</strong></p><pre class="language-none"><code class="language-none">127.0.0.1:6380&gt; set key1 v1(error) READONLY You can&#39;t write against a read only replica.127.0.0.1:6380&gt; get k1&quot;v1&quot;</code></pre><p><strong>2ã€ä¸»èŠ‚ç‚¹å…³é—­</strong></p><p>ä¸»èŠ‚ç‚¹ä¸€æ—¦å…³é—­ï¼Œé‚£ä¹ˆä»èŠ‚ç‚¹è¿˜æ˜¯ä¿æŒåŸæ¥çš„æ¨¡å¼ã€‚ä½†ä¼šæç¤ºä¸»èŠ‚ç‚¹çš„çŠ¶æ€æ˜¯å…³é—­çš„ã€‚ä¹Ÿå°±æ˜¯ä¾ç„¶ä¸èƒ½å†™æ•°æ®</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">0</span>></span> info replication<span class="token comment"># Replication</span>role:slavemaster_host:127.0.0.1master_port:6379master_link_status:down</code></pre><p>å½“ä¸»èŠ‚ç‚¹ä¸€è¿æ¥ä¸Šå»ï¼Œæ­¤æ—¶ä¸»èŠ‚ç‚¹å†å†™å…¥æ•°æ®ï¼Œä»èŠ‚ç‚¹ä¼šç«‹åˆ»å°†ä¸»èŠ‚ç‚¹çš„æ•°æ®å¤åˆ¶è¿‡æ¥ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> k2 veOK<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">0</span>></span> get k2<span class="token string">"ve"</span></code></pre><p><strong>3ã€ä»èŠ‚ç‚¹å…³é—­</strong></p><p>ä»èŠ‚ç‚¹ä¸€æ—¦å…³é—­ï¼Œå¦‚æœåªæ˜¯ä¸´æ—¶å°†å…¶é…ç½®ä¸ºä»èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå½“å®ƒå†æ¬¡å¯åŠ¨æ—¶ï¼Œå®ƒå°±æ¥æ”¶ä¸åˆ°ä¸»èŠ‚ç‚¹çš„æ•°æ®ã€‚å› ä¸ºå¯åŠ¨å®Œæˆä¹‹åï¼Œå®ƒå°±å˜æˆä¸»èŠ‚ç‚¹äº†ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@localhost bin<span class="token punctuation">]</span><span class="token comment"># redis-cli -p 6380</span><span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">0</span>></span> get k3<span class="token punctuation">(</span>nil<span class="token punctuation">)</span><span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">0</span>></span> info replication<span class="token comment"># Replication</span>role:masterconnected_slaves:0</code></pre><p>å¦‚æœæˆ‘å†æ¬¡å°†å…¶è®¾ç½®ä¸ºä»èŠ‚ç‚¹ï¼Œå®ƒè¿˜ä¼šå°†ä¸»èŠ‚ç‚¹ä¸­çš„æ•°æ®å¤åˆ¶è¿‡æ¥å—ï¼Ÿå½“ç„¶ä¼šå°†ä¸»èŠ‚ç‚¹ä¸­çš„æ•°æ®å¤åˆ¶è¿‡æ¥ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">0</span>></span> SLAVEOF <span class="token number">127.0</span>.0.1 <span class="token number">6379</span>OK<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">0</span>></span> get k3<span class="token string">"v3"</span></code></pre><p>å¦‚æœæ˜¯æ°¸ä¹…é…ç½®çš„è¯ï¼Œå†æ¬¡å¯åŠ¨ä»èŠ‚ç‚¹ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨åœ°å°†ä¸»èŠ‚ç‚¹ä¸­çš„æ•°æ®ç»™å¤åˆ¶è¿‡æ¥äº†ã€‚</p><h2 id="ä»èŠ‚ç‚¹å˜æˆä¸»èŠ‚ç‚¹"><a href="#ä»èŠ‚ç‚¹å˜æˆä¸»èŠ‚ç‚¹" class="headerlink" title="ä»èŠ‚ç‚¹å˜æˆä¸»èŠ‚ç‚¹"></a>ä»èŠ‚ç‚¹å˜æˆä¸»èŠ‚ç‚¹</h2><p>è¦æƒ³å˜æˆä¸»èŠ‚ç‚¹ä¹Ÿéå¸¸ç®€å•ï¼Œåªéœ€è¾“å…¥ä»¥ä¸‹å‘½ä»¤ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">1</span>></span> SLAVEOF no oneOK<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">1</span>></span> show replication<span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR unknown <span class="token builtin class-name">command</span> <span class="token variable"><span class="token variable">`</span>show<span class="token variable">`</span></span>, with args beginning with: <span class="token variable"><span class="token variable">`</span>replication<span class="token variable">`</span></span>,<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">1</span>></span> info replication<span class="token comment"># Replication</span>role:masterconnected_slaves:0master_failover_state:no-failover</code></pre><h2 id="ä¸»ä»å¤åˆ¶åŸç†"><a href="#ä¸»ä»å¤åˆ¶åŸç†" class="headerlink" title="ä¸»ä»å¤åˆ¶åŸç†"></a>ä¸»ä»å¤åˆ¶åŸç†</h2><p>Slave å¯åŠ¨æˆåŠŸè¿æ¥åˆ° master åä¼šå‘é€â€”ä¸ª sync åŒæ­¥å‘½ä»¤ã€‚</p><p>Master æ¥åˆ°å‘½ä»¤ï¼Œå¯åŠ¨åå°çš„å­˜ç›˜è¿›ç¨‹ï¼ŒåŒæ—¶æ”¶é›†æ‰€æœ‰æ¥æ”¶åˆ°çš„ç”¨äºä¿®æ”¹æ•°æ®é›†å‘½ä»¤ï¼Œåœ¨åå°è¿›ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œmaster å°†ä¼ é€æ•´ä¸ªæ•°æ®æ–‡ä»¶åˆ° slaveï¼Œå¹¶å®Œæˆä¸€æ¬¡å®Œå…¨åŒæ­¥ã€‚</p><p>ä¸»ä»å¤åˆ¶æœ‰åˆ†ä¸ºä¸¤ç§æƒ…å†µ</p><ul><li><p>å…¨é‡å¤åˆ¶ï¼šè€Œ slave æœåŠ¡åœ¨æ¥æ”¶åˆ°æ•°æ®åº“æ–‡ä»¶æ•°æ®åï¼Œå°†å…¶å­˜ç›˜å¹¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</p></li><li><p>å¢é‡å¤åˆ¶ï¼šMaster ç»§ç»­å°†æ–°çš„æ‰€æœ‰æ”¶é›†åˆ°çš„ä¿®æ”¹å‘½ä»¤ä¾æ¬¡ä¼ ç»™ slaveï¼Œå®ŒæˆåŒæ­¥ã€‚</p></li></ul><p>==åªè¦æ˜¯é‡æ–°è¿æ¥ masterï¼Œä¸€æ¬¡å®Œå…¨åŒæ­¥ï¼ˆå…¨é‡å¤åˆ¶ï¼‰å°†è¢«è‡ªåŠ¨æ‰§è¡Œã€‚==</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> Redis çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java I/O ç¬”è®°ï¼ˆ1ï¼‰</title>
      <link href="/journal/java-io-stream-1/"/>
      <url>/journal/java-io-stream-1/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="I-O-æµæ˜¯ä»€ä¹ˆ"><a href="#I-O-æµæ˜¯ä»€ä¹ˆ" class="headerlink" title="I/O æµæ˜¯ä»€ä¹ˆ"></a>I/O æµæ˜¯ä»€ä¹ˆ</h2><p>Iï¼šInputã€Oï¼šOutputï¼Œå³è¾“å…¥è¾“å‡ºã€‚</p><p>ä¸€ä¸ªæ–‡ä»¶ï¼Œä»ç£ç›˜åˆ°å†…å­˜ï¼Œå«è¾“å…¥ã€‚ä»å†…å­˜åˆ°ç£ç›˜ï¼Œå«è¾“å‡ºã€‚é€šè¿‡ IO å¯ä»¥å®Œæˆç£ç›˜æ–‡ä»¶çš„è¯»å’Œå†™ã€‚</p><p>ä»¥å†…å­˜ä¸ºå‚ç…§ç‰©å°±å¥½ç†è§£äº†ã€‚</p><p><img src="/journal/java-io-stream-1/image-20211113102421553.png" alt="i/o" loading="lazy"></p><p>æµæ˜¯ä»€ä¹ˆï¼Œæµå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ç§æ•°æ®æµå‘ã€‚ä»ç£ç›˜åˆ°å†…å­˜ï¼Œä»å†…å­˜åˆ°ç£ç›˜ï¼Œè¿™å°±æ˜¯æµå‘ã€‚</p><span id="more"></span><h2 id="I-O-æµçš„åˆ†ç±»"><a href="#I-O-æµçš„åˆ†ç±»" class="headerlink" title="I/O æµçš„åˆ†ç±»"></a>I/O æµçš„åˆ†ç±»</h2><p>æŒ‰ç…§æµå‘ï¼Œåˆ†ä¸ºè¾“å…¥æµå’Œè¾“å‡ºæµã€‚</p><p>æŒ‰ç…§ç±»åˆ«åˆ†ï¼Œåˆ†ä¸ºå­—èŠ‚æµå’Œå­—ç¬¦æµã€‚</p><h2 id="Java-I-O-çš„å››å¤§å®¶æ—"><a href="#Java-I-O-çš„å››å¤§å®¶æ—" class="headerlink" title="Java I/O çš„å››å¤§å®¶æ—"></a>Java I/O çš„å››å¤§å®¶æ—</h2><p><code>java.io.InputStream</code> å­—èŠ‚è¾“å…¥æµã€<code>java.io.OutputStream</code> å­—èŠ‚è¾“å‡ºæµ</p><p><code>java.io.Reader</code> å­—ç¬¦è¾“å…¥æµã€<code>java.io.InputStream</code> å­—ç¬¦è¾“å‡ºæµ</p><p>è¯¥å››å¤§å®¶æ—éƒ½æ˜¯æŠ½è±¡ç±»ã€‚å…¶ä¸­ï¼Œæ‰€æœ‰çš„æµéƒ½å®ç°äº† <code>java.io.Closeable</code> æ¥å£ï¼Œéƒ½æ˜¯å¯å…³é—­çš„ï¼Œéƒ½æœ‰ close() æ–¹æ³•ã€‚æµæ¯•ç«Ÿæ˜¯ä¸€ä¸ªç®¡é“ï¼Œè¿™ä¸ªæ˜¯å†…å­˜å’Œç¡¬ç›˜ä¹‹é—´çš„é€šé“ï¼Œç”¨å®Œä¹‹åä¸€å®šè¦å…³é—­ï¼Œä¸ç„¶ä¼šè€—è´¹ï¼ˆå ç”¨ï¼‰å¾ˆå¤šèµ„æºã€‚å…»æˆå¥½ä¹ æƒ¯ï¼Œç”¨å®Œæµä¸€å®šè¦å…³é—­ã€‚</p><p>æ‰€æœ‰çš„è¾“å‡ºæµéƒ½å®ç°äº†ï¼š<code>java.io.Flushable</code> æ¥å£ï¼Œéƒ½æ˜¯å¯åˆ·æ–°çš„ï¼Œéƒ½æœ‰ flush() æ–¹æ³•ã€‚å…»æˆä¸€ä¸ªå¥½ä¹ æƒ¯ï¼Œè¾“å‡ºæµåœ¨æœ€ç»ˆè¾“å‡ºä¹‹åï¼Œä¸€å®šè¦è®°å¾— flush() åˆ·æ–°ä¸€ä¸‹ã€‚è¿™ä¸ªåˆ·æ–°è¡¨ç¤ºå°†ç®¡é“å½“ä¸­å‰©ä½™æœªè¾“å‡ºçš„æ•°æ®å¼ºè¡Œè¾“å‡ºå®Œï¼Œåˆ·æ–°çš„ä½œç”¨å°±æ˜¯æ¸…ç©ºç®¡é“ã€‚</p><h3 id="ä¸€äº›-I-O-ç±»"><a href="#ä¸€äº›-I-O-ç±»" class="headerlink" title="ä¸€äº› I/O ç±»"></a>ä¸€äº› I/O ç±»</h3><p>æ–‡ä»¶ä¸“å±ï¼š</p><ul><li><code>java.io.FileInputStream</code></li><li><code>java.io.FileOutputStream</code></li><li><code>java.io.FileReader</code></li><li><code>java.io.FileWriter</code></li></ul><p>è½¬æ¢æµï¼š(å°†å­—èŠ‚æµè½¬æ¢æˆå­—ç¬¦æµ)</p><ul><li><code>java.io.InputStreanReader</code></li><li><code>java.io.OutputStreamWriter</code></li></ul><p>ç¼“å†²æµä¸“å±ï¼š</p><ul><li><code>java.io.BufferedReader</code></li><li><code>java.io BufferedWriter</code></li><li><code>java.io.BufferedInputStream</code></li><li><code>java.io.BufferedOutputStream</code></li></ul><p>æ•°æ®æµä¸“å±ï¼š</p><ul><li><code>java.io.DataInputStream</code></li><li><code>java.io.DataOutputStream</code></li></ul><p>æ ‡å‡†è¾“å‡ºæµï¼š</p><ul><li><code>java.io.PrintWriter</code></li><li><code>java.io.PrintStream</code></li></ul><p>å¯¹è±¡ä¸“å±æµï¼š</p><ul><li><code>java.io.ObjectInputStream</code></li><li><code>java.io.ObjectOutputStream</code></li></ul><h2 id="å­—èŠ‚æµ"><a href="#å­—èŠ‚æµ" class="headerlink" title="å­—èŠ‚æµ"></a>å­—èŠ‚æµ</h2><p>åˆ©ç”¨å­—èŠ‚æµè¯»å–æ–‡ä»¶å’Œå†™å…¥æ–‡ä»¶ï¼Œè¿™é‡Œä»¥ test.txt æ–‡ä»¶ä¸ºä¾‹ã€‚test.txt çš„å†…å®¹å¦‚ä¸‹ã€‚</p><pre class="language-text" data-language="text"><code class="language-text">my name is vani am a artisti am a performance artistthe deep dark fantasy</code></pre><h3 id="è¯»å–æ–‡ä»¶ï¼Œç£ç›˜-â†’-å†…å­˜"><a href="#è¯»å–æ–‡ä»¶ï¼Œç£ç›˜-â†’-å†…å­˜" class="headerlink" title="è¯»å–æ–‡ä»¶ï¼Œç£ç›˜ â†’ å†…å­˜"></a>è¯»å–æ–‡ä»¶ï¼Œç£ç›˜ â†’ å†…å­˜</h3><blockquote><p>åˆ›å»ºçš„æ­¥éª¤å¤§è‡´éƒ½ä¸€æ ·ï¼Œå…ˆåˆ›å»ºå¯¹è±¡ â†’ è¯»å–æ–‡ä»¶ â†’ å…³é—­æµ</p></blockquote><p>1ã€å…ˆåˆ›å»ºä¸€ä¸ªè¾“å…¥æµ</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"e:\\test.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>2ã€åˆ›å»ºæ–‡ä»¶å®Œä¹‹åï¼Œå°±å¯ä»¥è°ƒç”¨ read() ç›´æ¥è¯»æ•°æ®äº†ã€‚æ•°æ¯è¯»å–ä¸€æ¬¡ï¼Œæ–‡ä»¶æŒ‡é’ˆå°±ä¼šç§»åŠ¨ä¸€ä½ã€‚å½“ç§»åŠ¨åˆ°æ–‡ä»¶æœ«å°¾æ—¶ï¼Œæ­¤æ—¶ read() çš„è¿”å›å€¼ä¸º -1ï¼Œå¯ä»¥ç”¨ while å¾ªç¯è®©å®ƒä¸€ç›´è¯»</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">int</span> read<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>read <span class="token operator">=</span> fis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>read<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>3ã€æœ€åå…³é—­æ–‡ä»¶æµ</p><pre class="language-java" data-language="java"><code class="language-java">fis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä»£ç è¿è¡Œå®Œä¹‹åï¼Œæ§åˆ¶å°è¾“å‡ºå¹¶ä¸æ˜¯å­—ç¬¦ï¼Œè€Œæ˜¯æ¯ä¸ªå­—ç¬¦æ‰€å¯¹åº”çš„ ascii ç ï¼Œå¯ä»¥å¼ºåˆ¶ç±»å‹è½¬æ¢æˆ char ç±»å‹ï¼Œè¾“å‡ºçš„å°±éƒ½æ˜¯å­—ç¬¦äº†ã€‚</p><pre class="language-txt" data-language="txt"><code class="language-txt">109121321109710910132105115......</code></pre><p>ä½†æ˜¯ï¼Œä¸Šé¢è¿™ç§æ–¹å¼è¯»å–æ–‡ä»¶æ•ˆç‡å¤ªä½äº†ï¼Œå› ä¸ºæ˜¯ä¸€ä¸ªä¸€ä¸ªè¯»ã€‚Java è¿˜å¯ä»¥é€šè¿‡å­—èŠ‚æ•°ç»„çš„æ–¹å¼è¯»å–æ•°æ®ï¼Œè¿™æ ·æ•ˆç‡å°±ä¼šé«˜å¾ˆå¤šã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> i<span class="token punctuation">;</span> <span class="token comment">// æ‹¿åˆ°çš„æ˜¯è¯»å–çš„å­—èŠ‚æ•°ï¼Œå½“è¯»å–ä¸åˆ°æ•°æ®çš„æ—¶å€™ï¼Œç›´æ¥è¿”å› -1</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">=</span> fis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// ä¸èƒ½å…¨éƒ¨è¯»å–æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œè¯»åˆ°å“ªé‡ŒæŒ‡é’ˆå°±æŒ‡åˆ°å“ªé‡Œ</span>            <span class="token comment">// System.out.println(new String(bytes));</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>fis <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                fis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="å†™å…¥åˆ°æ–‡ä»¶ï¼Œå†…å­˜-â†’-ç£ç›˜"><a href="#å†™å…¥åˆ°æ–‡ä»¶ï¼Œå†…å­˜-â†’-ç£ç›˜" class="headerlink" title="å†™å…¥åˆ°æ–‡ä»¶ï¼Œå†…å­˜ â†’ ç£ç›˜"></a>å†™å…¥åˆ°æ–‡ä»¶ï¼Œå†…å­˜ â†’ ç£ç›˜</h3><blockquote><p>æ­¥éª¤ï¼šåˆ›å»ºè¾“å‡ºæµ â†’ å†™å…¥ â†’ åˆ·æ–° â†’ å…³é—­</p></blockquote><p>1ã€åˆ›å»ºæ–‡ä»¶è¾“å‡ºæµ</p><pre class="language-Java" data-language="Java"><code class="language-Java">&#x2F;&#x2F; é»˜è®¤æ˜¯ç›´æ¥è¦†ç›–ï¼Œè¦åœ¨æ–‡ä»¶ç»“å°¾è¿½åŠ æ•°æ®ï¼Œåœ¨æ„é€ æ–¹æ³•ä¸­å¦åŠ ä¸€ä¸ªå‚æ•° trueï¼Œè¡¨ç¤ºå¯è¿½åŠ ã€‚FileOutputStream fos &#x3D; new FileOutputStream(path, true);</code></pre><p>2ã€å†™å…¥æ•°æ®ã€‚ç”±äºæ˜¯å­—èŠ‚ï¼Œæ‰€ä»¥åªèƒ½ä¸€ä¸ªä¸€ä¸ªæŒ‰å­—èŠ‚å†™æˆ–è€…é€šè¿‡å­—èŠ‚æ•°ç»„çš„æ–¹å¼æ¥å†™ã€‚</p><pre class="language-Java" data-language="Java"><code class="language-Java">byte[] bytes &#x3D; new byte[]&#123;65, 66, 67, 68&#125;;fos.write(bytes);fos.write(51);</code></pre><p>3ã€åˆ·æ–°æµ</p><pre class="language-java" data-language="java"><code class="language-java">fos<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>4ã€å…³é—­</p><pre class="language-java" data-language="java"><code class="language-java">fos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å¦‚æœä¸åŠ  true çš„è¯ï¼Œé‚£ä¹ˆæ–‡ä»¶ä¸­çš„å†…å®¹æ˜¯ ABCD ï¼ŒåŠ äº† true çš„è¯ï¼Œé‚£ä¹ˆå°±æ˜¯æ–‡ä»¶ç»“å°¾ ABCDã€‚</p><h3 id="å¤åˆ¶ä¸€ä¸ªè§†é¢‘æ–‡ä»¶"><a href="#å¤åˆ¶ä¸€ä¸ªè§†é¢‘æ–‡ä»¶" class="headerlink" title="å¤åˆ¶ä¸€ä¸ªè§†é¢‘æ–‡ä»¶"></a>å¤åˆ¶ä¸€ä¸ªè§†é¢‘æ–‡ä»¶</h3><p>é€šè¿‡å­—èŠ‚è¾“å…¥æµå’Œè¾“å‡ºæµçš„é…åˆï¼Œå¯ä»¥å®ç°ä¸€ä¸ªç®€å•çš„æ–‡ä»¶å¤åˆ¶åŠŸèƒ½ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">copyFileTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token class-name">FileOutputStream</span> fos <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å¼€å§‹å¤åˆ¶......"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è¯»æ–‡ä»¶</span>        fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"D:\\fakepath\\æ˜Ÿæ„¿ï¼ˆèŒ¶ç†ç†ç‰ˆï¼‰.mov"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å†™æ–‡ä»¶</span>        fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"E:\\æ˜Ÿæ„¿ï¼ˆèŒ¶ç†ç†ç‰ˆï¼‰.mov"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ¯æ¬¡è¯»å– 10kb æ•°æ®</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> read<span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>read <span class="token operator">=</span> fis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            fos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// åˆ·æ–°è¾“å‡ºæµ</span>        fos<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è€—æ—¶ï¼š"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" ms"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FileNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>fis <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                fis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>fos <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                fos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="å­—ç¬¦æµ"><a href="#å­—ç¬¦æµ" class="headerlink" title="å­—ç¬¦æµ"></a>å­—ç¬¦æµ</h2><p>å­—ç¬¦æµæ˜¯ä¸“é—¨æ“ä½œçº¯æ–‡æœ¬æ–‡ä»¶çš„ï¼Œå¦‚æœè¦æ“ä½œå›¾ç‰‡ï¼ŒéŸ³é¢‘ï¼Œword æ–‡æ¡£å°±ä¸å¯ä»¥äº†ã€‚å®ƒçš„ä½¿ç”¨æ–¹å¼å’Œå­—èŠ‚æµä¸€æ ·çš„</p><p>è¯»å–æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œé€šè¿‡å­—ç¬¦æ•°ç»„çš„æ–¹å¼ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">FileReader</span> reader <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"e:\\test.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> chars <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> read <span class="token operator">=</span> chars<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>read <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>chars<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>chars<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> read<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FileNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>reader <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                reader<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>å°†å­—ç¬¦ä¸²å†™å…¥åˆ°æ–‡ä»¶ä¸­ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">FileWriter</span> writer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        writer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">"e:\\test2.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"On a sultry evening in August, Zhang Yuwei, "</span> <span class="token operator">+</span>                     <span class="token string">"who works in sales in Shanghai, "</span> <span class="token operator">+</span>                     <span class="token string">"donned a chiffon shirt and hotpants to attend one of "</span> <span class="token operator">+</span>                     <span class="token string">"the first performances of the show in Mandarin."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"å…«æœˆçš„ä¸€ä¸ªé—·çƒ­çš„æ™šä¸Šï¼Œåœ¨ä¸Šæµ·ä»äº‹é”€å”®å·¥ä½œçš„å¼ é›¨è–‡ï¼ˆéŸ³è¯‘ï¼‰ç©¿ç€é›ªçººçº±Tæ¤å’Œçƒ­è£¤å»è§‚çœ‹"</span> <span class="token operator">+</span> <span class="token string">"æ™®é€šè¯ç‰ˆæœ¬çš„æœ€æ—©çš„å‡ åœºæ¼”å‡ºã€‚"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        writer<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>writer <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                writer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>å¤åˆ¶çº¯æ–‡æœ¬æ–‡ä»¶ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCopyFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">FileReader</span> fileReader <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token class-name">FileWriter</span> fileWriter <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        fileReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"D:\\fakepath\\forge-1.14.4-28.2.23-installer.jar.log"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        fileWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">"e:\\forge-1.14.4-28.2.23-installer.jar.log"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> chars <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> read<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>read <span class="token operator">=</span> fileReader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>chars<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            fileWriter<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>chars<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> read<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        fileWriter<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FileNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>fileReader <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                fileReader<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>fileWriter <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                fileWriter<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>åˆ©ç”¨ç¼“å†²æµè¯»å–æ–‡æœ¬ä¸­çš„ä¸€è¡Œæ•°æ®ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">BufferedReader</span> bufferedReader <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å½“ä¸€ä¸ªæµçš„æ„é€ æ–¹æ³•ä¸­éœ€è¦ä¸€ä¸ªæµçš„æ—¶å€™,è¿™ä¸ªè¢«ä¼ è¿›æ¥çš„æµå«åšèŠ‚ç‚¹æµï¼Œæ¯”å¦‚ FileReader</span>        <span class="token class-name">FileReader</span> fr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"e:\\forge-1.14.4-28.2.23-installer.jar.log"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å¤–éƒ¨è´Ÿè´£åŒ…è£…çš„è¿™ä¸ªæµï¼Œå«åšåŒ…è£…æµ,è¿˜æœ‰ä¸€ä¸ªåå­—å«åšå¤„ç†æµï¼Œæ¯”å¦‚ BufferedReader</span>        bufferedReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>fr<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> s<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>s <span class="token operator">=</span> bufferedReader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FileNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>bufferedReader <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                bufferedReader<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="æ ‡å‡†è¾“å…¥è¾“å‡ºæµ"><a href="#æ ‡å‡†è¾“å…¥è¾“å‡ºæµ" class="headerlink" title="æ ‡å‡†è¾“å…¥è¾“å‡ºæµ"></a>æ ‡å‡†è¾“å…¥è¾“å‡ºæµ</h2><p>ä»€ä¹ˆæ˜¯æ ‡å‡†è¾“å…¥è¾“å‡ºæµï¼Œçœ‹ä¼¼æ²¡å¬è¿‡ï¼Œå…¶å®ç»å¸¸ä¼šä½¿ç”¨ï¼Œè€Œä¸”å¾ˆé¢‘ç¹ã€‚<code>System.in</code> å°±æ˜¯æ ‡å‡†è¾“å…¥æµï¼Œ<code>System.out</code> å°±æ˜¯æ ‡å‡†è¾“å‡ºæµã€‚</p><p>é»˜è®¤çš„æ ‡å‡†è¾“å…¥æµæ˜¯é€šè¿‡é”®ç›˜è¯»å–çš„ï¼Œæ ‡å‡†è¾“å‡ºæµæ˜¯è¾“å‡ºåˆ°æ§åˆ¶å°çš„ã€‚è€Œæœ€å¸¸ç”¨çš„ Scanner ç±»ä¹Ÿåªæ˜¯å¯¹æ ‡å‡†è¾“å…¥æµè¿›è¡Œäº†å°è£…è€Œå·²ã€‚</p><p>é»˜è®¤çš„æ ‡å‡†è¾“å…¥è¾“å‡ºæµå…¶å®æ˜¯è¿™æ ·çš„ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// è¾“å…¥</span><span class="token class-name">InputStream</span> in <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">;</span>in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è¾“å‡º</span><span class="token class-name">PrintStream</span> out <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">;</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"fmisfsdfoidk"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æ—¢ç„¶è¾“å…¥å¯ä»¥ç”¨é”®ç›˜ã€è¾“å‡ºå¯ä»¥æ‰“å°åˆ°æ§åˆ¶å°ä¸Šã€‚é‚£è‚¯å®šæ˜¯ä¿®æ”¹æˆå¯ä»¥é€šè¿‡æ–‡ä»¶æ¥è¿›è¡Œè¾“å…¥ã€è¾“å‡ºç»“æœæ‰“å°åˆ°æ–‡ä»¶ä¸Šã€‚</p><p>è¿™æ˜¯å°†ç»“æœè¾“å‡ºåˆ°æ§åˆ¶å°ä¸Šã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">PrintStream</span> ps <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        ps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"log.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">setOut</span><span class="token punctuation">(</span>ps<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello BestGuo!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¸–ç•Œå…¨ç”±ä½ è°±å†™\n"</span> <span class="token operator">+</span>                <span class="token string">"ç›¸å¤„çš„æ—¶é—´ä½ æˆ‘å·²å‘½è¿ç›¸è¿"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FileNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿™æ˜¯é€šè¿‡æ–‡ä»¶çš„æ–¹å¼è¯»å–æ•°æ®ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * æ ‡å‡†è¾“å…¥æµï¼Œé€šè¿‡æ–‡ä»¶çš„æ–¹å¼ * * @throws Exception */</span><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">setIn</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"log.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>scanner<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>scanner<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Java éƒ¨åˆ† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HashMap å®ç°åŸç†</title>
      <link href="/journal/java-hashmap-principle/"/>
      <url>/journal/java-hashmap-principle/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>HashMap åœ¨æˆ‘ä»¬çš„å®é™…å¼€å‘ä¸­æ˜¯éå¸¸é¢‘ç¹ä½¿ç”¨åˆ°çš„ä¸€ä¸ªç±»ï¼Œä¹Ÿéå¸¸çš„æ¸…æ¥šå®ƒä¿å­˜çš„æ˜¯ä¸€ç»„é”®å€¼å¯¹ã€‚ä¸è¿‡ï¼ŒHashMap åœ¨é¢è¯•å½“ä¸­ä¹Ÿæ˜¯éå¸¸é«˜é¢‘é¢è¯•çš„ä¸€ä¸ªç‚¹ã€‚ç»è¿‡æˆ‘çš„äº†è§£åŠç ”ç©¶ï¼Œæˆ‘ä¹Ÿå¼€å§‹å†™ä¸€éæ—¥å¿—ï¼Œæ¥å±•ç°æˆ‘å¯¹ HashMap çš„ä¸€äº›çœ‹æ³•ã€‚</p><p>åœ¨äº†è§£ HashMap ä¹‹å‰ï¼Œæ¥èŠèŠå“ˆå¸Œè¡¨æ˜¯ä»€ä¹ˆå§ã€‚</p><span id="more"></span><h2 id="äº†è§£å“ˆå¸Œè¡¨"><a href="#äº†è§£å“ˆå¸Œè¡¨" class="headerlink" title="äº†è§£å“ˆå¸Œè¡¨"></a>äº†è§£å“ˆå¸Œè¡¨</h2><p>å“ˆå¸Œè¡¨ï¼Œå†ä¹Ÿéå¸¸ç†Ÿæ‚‰ä¸è¿‡çš„ä¸€ç§æ•°æ®ç»“æ„äº†ã€‚</p><p>å®ƒæ˜¯æ ¹æ®å…³é”®ç å€¼æ¥ç›´æ¥è¿›è¡Œè®¿é—®çš„æ•°æ®ç»“æ„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒé€šè¿‡æŠŠå…³é”®ç å€¼æ˜ å°„åˆ°è¡¨ä¸­ä¸€ä¸ªä½ç½®ï¼Œæ¥è®¿é—®å½“å‰ä½ç½®çš„å†…å®¹ï¼Œä»¥åŠ å¿«æŸ¥æ‰¾çš„é€Ÿåº¦ã€‚è¿™ä¸ªæ˜ å°„å‡½æ•°å«åšæ•£åˆ—å‡½æ•°ï¼Œå­˜æ”¾è®°å½•çš„å®¹å™¨å«åšæ•£åˆ—è¡¨ï¼ˆå“ˆå¸Œè¡¨ï¼‰ã€‚</p><blockquote><p>ç å€¼ï¼šå¯ä»¥ç†è§£ä¸ºé”®çš„ HashCode ç»è¿‡å“ˆå¸Œç®—æ³•è®¡ç®—æ‰€å¾—å…ƒç´ çš„ä½ç½®</p></blockquote><p>ä¸€èˆ¬æ¥è¯´ï¼Œå­˜æ”¾è®°å½•çš„å®¹å™¨æ˜¯æ•°ç»„ã€‚å› ä¸ºæ•°ç»„æŸ¥è¯¢çš„æ•ˆç‡å¾ˆé«˜ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(1) ï¼Œéšæœºæ€§ä¹Ÿæ˜¯éå¸¸å¼ºçš„ã€‚å½“ç„¶ï¼Œç”¨é“¾è¡¨ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªä¸è¿‡æŸ¥è¯¢çš„æ•ˆç‡ä½ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚</p><p>æˆ‘å¹¶ä¸è®¤åŒï¼Œå“ˆå¸Œè¡¨å°±æ˜¯â€œæ•°ç»„ + é“¾è¡¨â€çš„ç»“åˆä½“ï¼Œå› ä¸ºæˆ‘è§‰å¾—ä½¿ç”¨é“¾è¡¨åªæ˜¯è§£å†³å“ˆå¸Œå†²çªçš„ä¸€ç§è§£å†³åŠæ³•è€Œå·²ã€‚è¿™ä¸ªé—®é¢˜åˆ°åé¢ä¼šæåŠåˆ°ã€‚</p><h3 id="å“ˆå¸Œç®—æ³•"><a href="#å“ˆå¸Œç®—æ³•" class="headerlink" title="å“ˆå¸Œç®—æ³•"></a>å“ˆå¸Œç®—æ³•</h3><p>å“ˆå¸Œç®—æ³•å¹¶æ²¡æœ‰å›ºå®šçš„ä¸€ç§ç®—æ³•ï¼Œå“ˆå¸Œç®—æ³•å®ƒæ˜¯ä¸€ç§æ€æƒ³ï¼Œç›®çš„å°±æ˜¯ç®—å‡ºå…ƒç´ æ‰€åœ¨çš„ä½ç½®ã€‚åŒæ—¶ï¼Œæ›´å¥½çš„ç®—æ³•è®©å…ƒç´ åœ¨æ•£åˆ—çš„æ—¶å€™å°½é‡å˜å¾—å‡åŒ€èµ·æ¥ã€‚</p><p>åœ¨ Java ä¸­çš„ HashMap ï¼Œå®ƒæ˜¯é€šè¿‡ ( å“ˆå¸Œè¡¨çš„é•¿åº¦ - 1 ) &amp; å“ˆå¸Œå€¼æ¥è®¡ç®—çš„ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡ä¸è¿ç®—æ¥ç®—å‡ºå…ƒç´ è¦æ”¾çš„ä½ç½®ã€‚</p><h3 id="å“ˆå¸Œå†²çª"><a href="#å“ˆå¸Œå†²çª" class="headerlink" title="å“ˆå¸Œå†²çª"></a>å“ˆå¸Œå†²çª</h3><p>äº§ç”Ÿï¼šé€šè¿‡å“ˆå¸Œç®—æ³•å¾—åˆ°çš„ä¸‹æ ‡ï¼Œè¢«å¦ä¸€ä¸ªå…ƒç´ æ‰€å ç”¨ï¼Œå°±æ˜¯å“ˆå¸Œå†²çªäº†ã€‚</p><p>è§£å†³åŠæ³•ï¼šå¼€æ”¾å¯»å€æ³•ã€å†æ•£åˆ—æ³•ã€é“¾åœ°å€æ³•ã€å»ºç«‹ä¸€ä¸ªå…¬å…±æº¢å‡ºåŒºã€‚</p><h2 id="åŸºæœ¬åŸç†"><a href="#åŸºæœ¬åŸç†" class="headerlink" title="åŸºæœ¬åŸç†"></a>åŸºæœ¬åŸç†</h2><p>åœ¨ JDK 1.7 ä¸­ï¼Œå®ƒçš„ HashMap æ˜¯é€šè¿‡â€œæ•°ç»„ + é“¾è¡¨â€æ¥å®ç°çš„ã€‚ä½†æ˜¯åˆ°äº† 1.8 ä¹‹åï¼Œå®ƒçš„å®ç°æ–¹å¼æ˜¯é€šè¿‡â€œæ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘â€å®ç°çš„ã€‚</p><h3 id="æ‰©å®¹"><a href="#æ‰©å®¹" class="headerlink" title="æ‰©å®¹"></a>æ‰©å®¹</h3><p>è¿™æ˜¯ HashMap çš„å“ˆå¸Œè¡¨ï¼Œé€šè¿‡ HashMap çš„ä¸­çš„ä¸è¿ç®—æ¥å¾—åˆ°è¦æ”¾ç½®çš„ä½ç½®ã€‚ä½†æ˜¯ç»™å“ˆå¸Œè¡¨åˆ†é…çš„é•¿åº¦å§‹ç»ˆæ˜¯ 2 çš„ n æ¬¡å¹‚æ¥åˆ†é…ç©ºé—´ã€‚</p><p>å¹¶ä¸”å®ƒæ˜¯é€šè¿‡æ•°ç»„çš„å½¢å¼æ¥ä¿å­˜çš„ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * The table, initialized on first use, and resized as * necessary. When allocated, length is always a power of two. * (We also tolerate length zero in some operations to allow * bootstrapping mechanics that are currently not needed.) */</span><span class="token keyword">transient</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> table<span class="token punctuation">;</span></code></pre><p>ä½†æ˜¯ï¼Œæˆ‘ä»¬åœ¨åˆ›å»º HashMap çš„æ—¶å€™å¹¶æ²¡æœ‰æŒ‡å®šå“ˆå¸Œè¡¨çš„é•¿åº¦ï¼ŒåŸå› æ˜¯è¿™é‡Œé¢é»˜è®¤åˆ›å»ºäº†ä¸€ä¸ªé•¿åº¦ä¸º 16 çš„å“ˆå¸Œè¡¨ã€‚è¿™ä¸ªå† HashMap çš„å¸¸é‡ä¸­ã€æ— å‚çš„æ„é€ æ–¹æ³•ä¸­éƒ½æœ‰éå¸¸æ˜ç¡®çš„æè¿°ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * The default initial capacity - MUST be a power of two. */</span><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_INITIAL_CAPACITY <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// aka 16</span></code></pre><p>ç„¶è€Œï¼Œæ— å‚æ„é€ æ–¹æ³•ä¸­å¹¶æ²¡æœ‰ç›´æ¥åˆå§‹åŒ–è¿™ä¸ªå€¼ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * Constructs an empty &lt;tt>HashMap&lt;/tt> with the default initial capacity * (16) and the default load factor (0.75). */</span><span class="token keyword">public</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>loadFactor <span class="token operator">=</span> DEFAULT_LOAD_FACTOR<span class="token punctuation">;</span> <span class="token comment">// all other fields defaulted</span><span class="token punctuation">&#125;</span></code></pre><p>åœ¨ HashMap é›†åˆä¸­æ·»åŠ ä¸€æ¡æ•°æ®çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨ resize æ–¹æ³•ï¼Œæ‰ç»™å®ƒè¿›è¡Œæ‰©å®¹ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> oldTab <span class="token operator">=</span> table<span class="token punctuation">;</span>    <span class="token keyword">int</span> oldCap <span class="token operator">=</span> <span class="token punctuation">(</span>oldTab <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> oldTab<span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token keyword">int</span> oldThr <span class="token operator">=</span> threshold<span class="token punctuation">;</span>    <span class="token keyword">int</span> newCap<span class="token punctuation">,</span> newThr <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>oldCap <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//æ­¤å¤„çœç•¥......</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>oldThr <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// initial capacity was placed in threshold</span>        newCap <span class="token operator">=</span> oldThr<span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>               <span class="token comment">// zero initial threshold signifies using defaults</span>        newCap <span class="token operator">=</span> DEFAULT_INITIAL_CAPACITY<span class="token punctuation">;</span>        newThr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>DEFAULT_LOAD_FACTOR <span class="token operator">*</span> DEFAULT_INITIAL_CAPACITY<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//æ­¤å¤„çœç•¥......</span>    <span class="token keyword">return</span> newTab<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>æ­¤æ—¶æ–°çš„å®¹é‡å°±æ˜¯ <code>DEFAULT_INITIAL_CAPACITY</code> ï¼Œä¹Ÿå°±æ˜¯ 16ï¼ŒåŒæ—¶ä¹Ÿè®¡ç®—å‡ºé˜ˆå€¼ï¼Œé˜ˆå€¼æ˜¯ä»€ä¹ˆï¼Ÿé˜ˆå€¼å°±æ˜¯ä¸´ç•Œå€¼ï¼Œè®¡ç®—æ–¹æ³•æ˜¯ï¼š<code>é˜ˆå€¼ = å®¹é‡ * è´Ÿè½½å› å­</code>ã€‚å°±æ¯”å¦‚ï¼Œå½“å“ˆå¸Œè¡¨çš„å®¹é‡ä¸º 16 æ—¶ï¼Œé˜ˆå€¼ä¸º 12 ï¼Œå½“å“ˆå¸Œè¡¨ä¸­å…ƒç´ çš„ä¸ªæ•°æ‰©å®¹ï¼Œå®ƒå°†ä¼šå°†åŸæ¥çš„å®¹é‡æ‰©å¤§åˆ°ä¸¤å€ã€‚</p><pre class="language-java" data-language="java"><code class="language-java">newThr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>DEFAULT_LOAD_FACTOR <span class="token operator">*</span> DEFAULT_INITIAL_CAPACITY<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>é»˜è®¤çš„è´Ÿè½½å› å­ä¸º 0.75ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * The load factor used when none specified in constructor. */</span><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">float</span> DEFAULT_LOAD_FACTOR <span class="token operator">=</span> <span class="token number">0.75f</span><span class="token punctuation">;</span></code></pre><p>ä¸ºä»€ä¹ˆä¼šå– 0.75ï¼Œå› ä¸ºæ­¤æ—¶çš„ç©ºé—´åˆ©ç”¨ç‡æ¯”è¾ƒé«˜ï¼Œè€Œä¸”é¿å…äº†ç›¸å½“å¤šçš„å“ˆå¸Œå†²çªï¼Œä½¿å¾—åº•å±‚çš„é“¾è¡¨æˆ–è€…æ˜¯çº¢é»‘æ ‘çš„é«˜åº¦æ¯”è¾ƒä½ï¼Œæå‡äº†ç©ºé—´æ•ˆç‡ã€‚</p><h3 id="æ·»åŠ é”®å€¼å¯¹"><a href="#æ·»åŠ é”®å€¼å¯¹" class="headerlink" title="æ·»åŠ é”®å€¼å¯¹"></a>æ·»åŠ é”®å€¼å¯¹</h3><p>åœ¨å‘ HashMap ä¸­æ·»åŠ ç¬¬ä¸€ç»„é”®å€¼å¯¹ï¼Œå®ƒæ˜¯å¦‚ä½•æ·»åŠ çš„å‘¢ï¼Ÿ</p><p>1ã€ä»è°ƒç”¨ HashMap çš„ put æ–¹æ³•å¼€å§‹ï¼Œå®ƒå®é™…ä¸Šè°ƒç”¨çš„æ˜¯ putVal æ–¹æ³•ï¼ŒputVal å…±æœ‰ 5 ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼Œè·å– key çš„å“ˆå¸Œå€¼ã€keyã€valueã€è¿™ä¸ªé”®æ˜¯å¦å­˜åœ¨å’Œæ˜¯å¦æ’å…¥åˆ°åç»“ç‚¹ã€‚</p><blockquote><p>æœ€åä¸€ä¸ªå‚æ•°æ˜¯ç»™ LinkedHashMapï¼ˆåŸºäºé“¾è¡¨å®ç°çš„ HashMapï¼‰æ‰€ä½¿ç”¨</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">V</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token function">putVal</span><span class="token punctuation">(</span><span class="token function">hash</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>2ã€åˆå§‹åŒ–å®¹é‡ï¼Œä¸€å¼€å§‹ä¼šåˆ¤æ–­ Node æ•°ç»„æ˜¯å¦ä¸º nullã€‚å¼€å§‹è‚¯å®šæ˜¯ nullï¼Œæ‰€ä»¥è‚¯å®šä¼šè°ƒç”¨ resize æ–¹æ³•åˆå§‹åŒ–å®¹é‡ï¼Œä¸”å€¼ä¸º 16ã€‚</p><p>åˆå§‹åŒ–å®¹é‡å®Œæˆä¹‹åï¼Œç„¶åå†å»åˆ©ç”¨ä¸è¿ç®—å¾—åˆ°æ•°ç»„çš„ä¸‹æ ‡ï¼Œè°ƒç”¨ newNodeæ–¹æ³• åˆ›å»ºå‡ºæ¥çš„ Node å¯¹è±¡éœ€è¦æ”¾å…¥åˆ°æ•°ç»„çš„å“ªä¸ªä½ç½®ã€‚è€Œè¿™ä¸ªä½ç½®åˆ™é€šè¿‡å“ˆå¸Œç®—æ³•æ¥å¾—åˆ°çš„ï¼Œåœ¨ä¸Šé¢ä¹ŸæåŠåˆ°è®¡ç®—æ–¹æ³•ã€‚ <code>i = (n - 1) &amp; hash</code>ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">final</span> <span class="token class-name">V</span> <span class="token function">putVal</span><span class="token punctuation">(</span><span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token keyword">boolean</span> onlyIfAbsent<span class="token punctuation">,</span>               <span class="token keyword">boolean</span> evict<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab<span class="token punctuation">;</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> p<span class="token punctuation">;</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> i<span class="token punctuation">;</span>    <span class="token comment">// åˆ¤æ–­è¡¨æ˜¯å¦ä¸º null æˆ–è€…è¡¨çš„é•¿åº¦æ˜¯å¦ä¸º 0</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>tab <span class="token operator">=</span> table<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> tab<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>        n <span class="token operator">=</span> <span class="token punctuation">(</span>tab <span class="token operator">=</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>p <span class="token operator">=</span> tab<span class="token punctuation">[</span>i <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> hash<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>        tab<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">newNode</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ­¤å¤„çœç•¥å¾ˆå¤šä»£ç ......</span>    <span class="token operator">++</span>modCount<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">++</span>size <span class="token operator">></span> threshold<span class="token punctuation">)</span>        <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">afterNodeInsertion</span><span class="token punctuation">(</span>evict<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>3ã€ç¬¬ä¸€ä¸ªå…ƒç´ æˆåŠŸçš„æ·»åŠ è¿›æ¥äº†ï¼Œæ·»åŠ å®Œæˆä¹‹åç»™ HashMap ä¸­é”®å€¼å¯¹çš„ä¸ªæ•° +1 ï¼Œå¦‚æœ HashMap ä¸­é”®å€¼å¯¹çš„ä¸ªæ•°è¶…è¿‡äº†é˜ˆå€¼ï¼Œé‚£ä¹ˆå°†ä¼šè§¦å‘æ‰©å®¹ï¼Œæ‰©å®¹åˆ°åŸæ¥çš„ä¸¤å€ã€‚</p><h3 id="ä¸å¯é¿å…çš„å†²çª"><a href="#ä¸å¯é¿å…çš„å†²çª" class="headerlink" title="ä¸å¯é¿å…çš„å†²çª"></a>ä¸å¯é¿å…çš„å†²çª</h3><p>HashMap æŒ‰ä¸è¿ç®—æ±‚å¾—çš„ä¸‹æ ‡ä½ç½®æ˜¯ä¼šé€ æˆå“ˆå¸Œå†²çªçš„ï¼Œå®ƒçš„è§£å†³åŠæ³•å°±æ˜¯é€šè¿‡é“¾åœ°å€æ³•ï¼ˆæ‹‰é“¾æ³•ï¼‰çš„æ–¹å¼æ¥è§£å†³ã€‚æ‰€ä»¥è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ HashMap åº•å±‚æ•°æ®ç»“æ„åŒ…æ‹¬æ•°ç»„å’Œé“¾è¡¨ã€‚</p><p>æ‰€ä»¥ HashMap å¯ä»¥æƒ³è±¡æˆæ˜¯å¤ä»£çš‡å¸æ‰€æˆ´çš„å¸½å­ï¼ˆ<a href="https://www.baidu.com/s?wd=%E5%86%95%E6%97%92">å†•æ—’</a>ï¼‰ã€‚æ•°ç»„å°±æ˜¯å†•ï¼Œé“¾è¡¨å°±æ˜¯å¸˜å­ã€‚</p><p><img src="https://p1.itc.cn/q_70/images01/20210828/a93b2cc0f0f84010bcc11181b816ff30.png" alt="img" loading="lazy"></p><p>å‡å¦‚å“ˆå¸Œè¡¨ä¸­çš„ç¬¬ 3 ä¸ªå…ƒç´ å·²ç»å­˜åœ¨äº†ä¸€ä¸ª A å…ƒç´ ï¼Œç„¶è€Œå¦å¤–ä¸€ä¸ªå…ƒç´  B å¾—åˆ°çš„ä¸‹æ ‡ä¹Ÿæ˜¯ 3 ï¼Œæ­¤æ—¶é€šè¿‡å°¾æ’æ³•çš„å½¢å¼ï¼Œå°† B å…ƒç´ æ’å…¥åˆ° A çš„åé¢ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">final</span> <span class="token class-name">V</span> <span class="token function">putVal</span><span class="token punctuation">(</span><span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token keyword">boolean</span> onlyIfAbsent<span class="token punctuation">,</span>               <span class="token keyword">boolean</span> evict<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab<span class="token punctuation">;</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> p<span class="token punctuation">;</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> i<span class="token punctuation">;</span>    <span class="token comment">// åˆ¤æ–­è¡¨æ˜¯å¦ä¸º null æˆ–è€…è¡¨çš„é•¿åº¦æ˜¯å¦ä¸º 0ï¼Œä»£ç ç•¥</span>    <span class="token comment">// åˆ¤æ–­å½“å‰ä¸‹æ ‡çš„å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨çš„ä»£ç å·²ç»çœç•¥</span>    <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> e<span class="token punctuation">;</span> <span class="token class-name">K</span> k<span class="token punctuation">;</span>        <span class="token comment">// è¿™æ®µä»£ç æ‹¿åˆ°çš„å½“å‰çš„èŠ‚ç‚¹ä»¥åŠå½“å‰èŠ‚ç‚¹çš„ key</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>hash <span class="token operator">==</span> hash <span class="token operator">&amp;&amp;</span>            <span class="token punctuation">(</span><span class="token punctuation">(</span>k <span class="token operator">=</span> p<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> key <span class="token operator">||</span> <span class="token punctuation">(</span>key <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            e <span class="token operator">=</span> p<span class="token punctuation">;</span>        <span class="token comment">// åˆ¤æ–­èŠ‚ç‚¹çš„ç±»å‹æ˜¯å¦ä¸ºæ ‘</span>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token keyword">instanceof</span> <span class="token class-name">TreeNode</span><span class="token punctuation">)</span>            e <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">)</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putTreeVal</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> tab<span class="token punctuation">,</span> hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//////// è¿™æ˜¯å°¾æ’æ³•çš„å…³é”®ä»£ç éƒ¨åˆ† /////////</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> binCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">;</span> <span class="token operator">++</span>binCount<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// å¦‚æœå½“å‰å…ƒç´ çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ç©ºï¼Œåˆ™æ’å…¥ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ã€‚</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e <span class="token operator">=</span> p<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                p<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token function">newNode</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// å¦‚æœæ•°é‡è¶…è¿‡äº†8ï¼Œåˆ™å°†é“¾è¡¨è¿›è¡Œæ ‘åŒ–ï¼Œå³è½¬æˆçº¢é»‘æ ‘</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>binCount <span class="token operator">>=</span> TREEIFY_THRESHOLD <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// -1 for 1st</span>                    <span class="token function">treeifyBin</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> hash<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>hash <span class="token operator">==</span> hash <span class="token operator">&amp;&amp;</span>                <span class="token punctuation">(</span><span class="token punctuation">(</span>k <span class="token operator">=</span> e<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> key <span class="token operator">||</span> <span class="token punctuation">(</span>key <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            p <span class="token operator">=</span> e<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// æ­¤å¤„çœç•¥å¾ˆå¤šä»£ç ......</span>    <span class="token punctuation">&#125;</span>    <span class="token operator">++</span>modCount<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">++</span>size <span class="token operator">></span> threshold<span class="token punctuation">)</span>        <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">afterNodeInsertion</span><span class="token punctuation">(</span>evict<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="å˜æˆçº¢é»‘æ ‘çš„æ¡ä»¶"><a href="#å˜æˆçº¢é»‘æ ‘çš„æ¡ä»¶" class="headerlink" title="å˜æˆçº¢é»‘æ ‘çš„æ¡ä»¶"></a>å˜æˆçº¢é»‘æ ‘çš„æ¡ä»¶</h3><p>å½“é“¾è¡¨çš„é•¿åº¦å˜ä¸º 8 æ—¶ï¼Œæ­¤æ—¶é“¾è¡¨å°±è½¬æ¢æˆçº¢é»‘æ ‘ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> TREEIFY_THRESHOLD <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span></code></pre><p>å½“çº¢é»‘æ ‘çš„å…ƒç´ ä¸ªæ•°å‡ä¸º 6 æ—¶ï¼Œæ­¤æ—¶çº¢é»‘æ ‘åˆä¼šé™æˆé“¾è¡¨ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> UNTREEIFY_THRESHOLD <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span></code></pre><h3 id="è·å–å€¼"><a href="#è·å–å€¼" class="headerlink" title="è·å–å€¼"></a>è·å–å€¼</h3><p>è·å–å€¼ä½¿ç”¨çš„æ˜¯ get æ–¹æ³•è¿›è¡Œè·å–ï¼Œå®ƒçš„è·å–æµç¨‹å…¶å®å’Œ put å·®ä¸å¤šã€‚</p><p>é¦–å…ˆè¿›è¡Œä¸è¿ç®—ï¼Œä¸è¿ç®—å®Œæˆä¹‹åå¾—åˆ°çš„æ•°ç»„ä¸‹æ ‡ï¼Œæ¯”è¾ƒå¾—åˆ°çš„ key æ˜¯å¦ä¸ºä¼ å…¥çš„ keyï¼Œå¦‚æœæ˜¯çš„è¯å°±è¿”å›å‡ºæ¥ï¼Œå¦‚æœä¸æ˜¯ï¼Œåœ¨é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘ä¸­å¯»æ‰¾ã€‚æ‰¾åˆ°äº†å°±è¿”å›å‡ºå»ï¼Œæ²¡æ‰¾åˆ°å°±è¿”å› nullã€‚</p><p>åœ¨è°ƒç”¨ get æ–¹æ³•æ—¶ï¼Œå…¶å®æ˜¯å»è°ƒç”¨ getNode æ–¹æ³•ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> <span class="token function">getNode</span><span class="token punctuation">(</span><span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab<span class="token punctuation">;</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span> first<span class="token punctuation">,</span> e<span class="token punctuation">;</span> <span class="token keyword">int</span> n<span class="token punctuation">;</span> <span class="token class-name">K</span> k<span class="token punctuation">;</span>    <span class="token comment">// åˆ¤æ–­è¡¨æ˜¯å¦ä¸ºç©º</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>tab <span class="token operator">=</span> table<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> tab<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>        <span class="token punctuation">(</span>first <span class="token operator">=</span> tab<span class="token punctuation">[</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> hash<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// åˆ¤æ–­ key æ˜¯å¦ä¸ºä¼ å…¥çš„ key ä»¥åŠå“ˆå¸Œå€¼æ˜¯å¦ç›¸åŒã€‚</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>first<span class="token punctuation">.</span>hash <span class="token operator">==</span> hash <span class="token operator">&amp;&amp;</span> <span class="token comment">// always check first node</span>            <span class="token punctuation">(</span><span class="token punctuation">(</span>k <span class="token operator">=</span> first<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> key <span class="token operator">||</span> <span class="token punctuation">(</span>key <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> first<span class="token punctuation">;</span>        <span class="token comment">// å¦‚æœä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸ä¸ºç©ºçš„è¯ï¼Œæœ‰å¯èƒ½æ˜¯é“¾è¡¨ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯çº¢é»‘æ ‘ã€‚</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e <span class="token operator">=</span> first<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// å¦‚æœèŠ‚ç‚¹æ˜¯æ ‘ç±»å‹ï¼Œå°±åœ¨æ ‘ä¸­æŸ¥æ‰¾</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>first <span class="token keyword">instanceof</span> <span class="token class-name">TreeNode</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">></span></span><span class="token punctuation">)</span>first<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTreeNode</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">do</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>hash <span class="token operator">==</span> hash <span class="token operator">&amp;&amp;</span>                    <span class="token punctuation">(</span><span class="token punctuation">(</span>k <span class="token operator">=</span> e<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> key <span class="token operator">||</span> <span class="token punctuation">(</span>key <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token keyword">return</span> e<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e <span class="token operator">=</span> e<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="çº¢é»‘æ ‘"><a href="#çº¢é»‘æ ‘" class="headerlink" title="çº¢é»‘æ ‘"></a>çº¢é»‘æ ‘</h2><blockquote><p>ä¸‹æ¬¡æ¥ç€å†™å§ï¼Œæˆ‘å…ˆå­¦å­¦å®ƒã€‚ğŸ’«ğŸ’«</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Java éƒ¨åˆ† </category>
          
          <category> æ·±å…¥ Java çš„åœ°ä¸‹ä¸–ç•Œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis å‘å¸ƒä¸è®¢é˜…</title>
      <link href="/journal/redis-pub-sub/"/>
      <url>/journal/redis-pub-sub/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>Redis å‘å¸ƒè®¢é˜…ï¼ˆpub/subï¼‰æ˜¯ä¸€ç§æ¶ˆæ¯é€šä¿¡æ¨¡å¼ï¸°å‘é€è€…ï¼ˆpubï¼‰å‘é€æ¶ˆæ¯ï¼Œè®¢é˜…è€…ï¼ˆsubï¼‰æ¥æ”¶æ¶ˆæ¯ã€‚</p><p>Redis å®¢æˆ·ç«¯å¯ä»¥è®¢é˜…ä»»æ„æ•°é‡çš„é¢‘é“ï¼Œå…¶å‘å¸ƒä¸è®¢é˜…çš„æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="/journal/redis-pub-sub/20200518084221361.png" alt="img" loading="lazy"></p><p>å½“æ¶ˆæ¯å‘å¸ƒè€…å‘é€ä¸€æ—¦å‘é€ï¼Œå·²ç»è®¢é˜…çš„æ¶ˆæ¯è®¢é˜…è€…å°±ä¼šæ”¶åˆ°ä¿¡æ¯ã€‚</p><span id="more"></span><h2 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h2><ol><li>å®æ—¶æ¶ˆæ¯ç³»ç»Ÿï¼</li><li>å®æ—¶èŠå¤©!ï¼ˆé¢‘é“å½“åšèŠå¤©å®¤ï¼Œå°†ä¿¡æ¯å›æ˜¾ç»™æ‰€æœ‰äººå³å¯ï¼)</li><li>è®¢é˜…ï¼Œå…³æ³¨ç³»ç»Ÿéƒ½æ˜¯å¯ä»¥çš„ï¼</li></ol><p>å®ƒå¯ä»¥åšç®€å•çš„å‘å¸ƒä¸è®¢é˜…ï¼Œä½†æ˜¯å¦‚æœä¸šåŠ¡å¤æ‚ï¼ŒRedis çš„å‘å¸ƒè®¢é˜…å¯èƒ½å°±ä¸å¤ªé€‚ç”¨äº†ï¼Œæ­¤æ—¶éœ€è¦å­¦ä¹ æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆRabbitMQã€RocketMQ ç­‰ç­‰ï¼‰æ¥æ„å»ºå¤æ‚çš„å‘å¸ƒä¸è®¢é˜…æœåŠ¡äº†ã€‚</p><h2 id="ç›¸å…³å‘½ä»¤"><a href="#ç›¸å…³å‘½ä»¤" class="headerlink" title="ç›¸å…³å‘½ä»¤"></a>ç›¸å…³å‘½ä»¤</h2><h3 id="å‘å¸ƒ"><a href="#å‘å¸ƒ" class="headerlink" title="å‘å¸ƒ"></a>å‘å¸ƒ</h3><p>å‘å¸ƒä½¿ç”¨ publish å‘½ä»¤è¿›è¡Œå‘å¸ƒï¼Œç„¶åéœ€è¦è¾“å…¥é¢‘é“åç§°ï¼Œæ¶ˆæ¯å†…å®¹</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> PUBLISH xiaohehe hi<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> PUBLISH xiaohehe hello,xiaohehe<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> PUBLISH xiaohehe hello,redis<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> PUBLISH xiaohehe hello,redis<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> PUBLISH xiaohehe hello,redis<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> PUBLISH xiaohehe hello,redis<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span></code></pre><h3 id="è®¢é˜…"><a href="#è®¢é˜…" class="headerlink" title="è®¢é˜…"></a>è®¢é˜…</h3><p>è®¢é˜…ä½¿ç”¨ subscribe å‘½ä»¤ï¼Œæ¯”å¦‚æˆ‘è¦è®¢é˜… <code>xixaohehe</code> è¿™ä¸ªé¢‘é“ï¼Œæ“ä½œçš„å‘½ä»¤å¦‚ä¸‹ã€‚è¾“å…¥å®Œæˆä¹‹åï¼Œç»ˆç«¯å°±å¼€å§‹è¿›å…¥è®¢é˜…æ¨¡å¼äº†ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> SUBSCRIBE xiaoheheReading messages<span class="token punctuation">..</span>. <span class="token punctuation">(</span>press Ctrl-C to quit<span class="token punctuation">)</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"subscribe"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"xiaohehe"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span></code></pre><p>å¦‚æœå‘å¸ƒç«¯å‘å¸ƒæ¶ˆæ¯ï¼Œè®¢é˜…ç«¯å°±èƒ½æ¥æ”¶åˆ°ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"message"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"xiaohehe"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"hi"</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"message"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"xiaohehe"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"hello,xiaohehe"</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"message"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"xiaohehe"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"hello,redis"</span></code></pre><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>Redis æ˜¯ä½¿ç”¨ C å®ç°çš„ï¼Œé€šè¿‡åˆ†æRedisæºç é‡Œçš„ pubsub.c æ–‡ä»¶ï¼Œäº†è§£å‘å¸ƒå’Œè®¢é˜…æœºåˆ¶çš„åº•å±‚å®ç°ï¼Œç±æ­¤åŠ æ·±å¯¹ Redis çš„ç†è§£ã€‚</p><p>Redis é€šè¿‡ PUBLISHã€SUBSCRIBE å’Œ PSUBSCRIBE ç­‰å‘½ä»¤å®ç°å‘å¸ƒå’Œè®¢é˜…åŠŸèƒ½ã€‚</p><p>é€šè¿‡ SUBSCRIBE å‘½ä»¤è®¢é˜…æŸé¢‘é“åï¼Œredis-server é‡Œç»´æŠ¤äº†ä¸€ä¸ªå­—å…¸ï¼Œå­—å…¸çš„é”®å°±æ˜¯ä¸€ä¸ªä¸ªé¢‘é“!ï¼Œè€Œå­—å…¸çš„å€¼åˆ™æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œé“¾è¡¨ä¸­ä¿å­˜äº†æ‰€æœ‰è®¢é˜…è¿™ä¸ª channel çš„å®¢æˆ·ç«¯ã€‚SUBSCRIBE å‘½ä»¤çš„å…³é”®ï¼Œå°±æ˜¯å°†å®¢æˆ·ç«¯æ·»åŠ åˆ°ç»™å®šchannel çš„è®¢é˜…é“¾è¡¨ä¸­ã€‚</p><p><img src="/journal/redis-pub-sub/20201214083600592383.png" alt="img" loading="lazy"></p><p>é€šè¿‡ PUBLISH å‘½ä»¤å‘è®¢é˜…è€…å‘é€æ¶ˆæ¯ï¼Œredis-server ä¼šä½¿ç”¨ç»™å®šçš„é¢‘é“ä½œä¸ºé”®ï¼Œåœ¨å®ƒæ‰€ç»´æŠ¤çš„ channel å­—å…¸ä¸­æŸ¥æ‰¾è®°å½•äº†è®¢é˜…è¿™ä¸ªé¢‘é“çš„æ‰€æœ‰å®¢æˆ·ç«¯çš„é“¾è¡¨ï¼Œéå†è¿™ä¸ªé“¾è¡¨ï¼Œå°†æ¶ˆæ¯å‘å¸ƒç»™æ‰€æœ‰è®¢é˜…è€…ã€‚</p><p>Pub/Sub ä»å­—é¢ä¸Šç†è§£å°±æ˜¯å‘å¸ƒï¼ˆPublishï¼‰ä¸è®¢é˜…ï¼ˆSubscribeï¼‰ï¼Œåœ¨ Redis ä¸­ï¼Œä½ å¯ä»¥è®¾å®šå¯¹æŸä¸€ä¸ª key å€¼è¿›è¡Œæ¶ˆæ¯å‘å¸ƒåŠæ¶ˆæ¯è®¢é˜…ï¼Œå½“ä¸€ä¸ª key å€¼ä¸Šè¿›è¡Œäº†æ¶ˆæ¯å‘å¸ƒåï¼Œæ‰€æœ‰è®¢é˜…å®ƒçš„å®¢æˆ·ç«¯éƒ½ä¼šæ”¶åˆ°ç›¸åº”çš„æ¶ˆæ¯ã€‚è¿™ä¸€åŠŸèƒ½æœ€æ˜æ˜¾çš„ç”¨æ³•å°±æ˜¯ç”¨ä½œå®æ—¶æ¶ˆæ¯ç³»ç»Ÿï¼Œæ¯”å¦‚æ™®é€šçš„å³æ—¶èŠå¤©ï¼Œç¾¤èŠç­‰åŠŸèƒ½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> Redis çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis æŒä¹…åŒ–</title>
      <link href="/journal/redis-persistence/"/>
      <url>/journal/redis-persistence/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Redis æ˜¯å†…å­˜æ•°æ®åº“ï¼Œå¦‚æœä¸å°†å†…å­˜ä¸­çš„æ•°æ®åº“çŠ¶æ€ä¿å­˜åˆ°ç£ç›˜ï¼Œé‚£ä¹ˆä¸€æ—¦æœåŠ¡å™¨è¿›ç¨‹é€€å‡ºï¼ŒæœåŠ¡å™¨ä¸­çš„æ•°æ®åº“çŠ¶æ€ä¹Ÿä¼šæ¶ˆå¤±ã€‚ å¯¹æ­¤ï¼ŒRedis æä¾›äº†æŒä¹…åŒ–åŠŸèƒ½ï¼</p><p>Redis æ•°æ®æŒä¹…åŒ–å…±æœ‰ä¸¤ç§æ•°æ®ï¼Œåˆ†åˆ«æ˜¯ RDB å’Œ AOFã€‚æ¥ä¸‹æ¥çœ‹çœ‹é‚£è¿™ä¸¤ç§æŒä¹…åŒ–æ–¹å¼æœ‰ä»€ä¹ˆå¼‚åŒã€‚</p><span id="more"></span><h2 id="RDB"><a href="#RDB" class="headerlink" title="RDB"></a>RDB</h2><p>RDB å…¨ç§°ä¹Ÿå« Redis Database</p><p>åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…å°†å†…å­˜ä¸­çš„æ•°æ®é›†å¿«ç…§å†™å…¥ç£ç›˜ï¼Œä¹Ÿå°±æ˜¯è¡Œè¯è®²çš„Snapshotå¿«ç…§ï¼Œå®ƒæ¢å¤æ—¶æ˜¯å°†å¿«ç…§æ–‡ä»¶ç›´æ¥è¯»åˆ°å†…å­˜é‡Œã€‚Redis ä½¿ç”¨ RDB çš„æŒä¹…åŒ–æµç¨‹å¦‚ä¸‹ã€‚</p><p><img src="/journal/redis-persistence/F202004281588086055367603.png" alt="img" loading="lazy"></p><p>Redis ä¼šå•ç‹¬åˆ›å»ºï¼ˆforkï¼‰ ä¸€ä¸ªå­è¿›ç¨‹æ¥è¿›è¡ŒæŒä¹…åŒ–ï¼Œä¼šå…ˆå°†æ•°æ®å†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œå¾…æŒä¹…åŒ–è¿‡ç¨‹éƒ½ç»“æŸäº†ï¼Œå†ç”¨è¿™ä¸ªä¸´æ—¶æ–‡ä»¶æ›¿æ¢ä¸Šä¸€æ¬¡çš„æŒä¹…åŒ–æ–‡ä»¶ã€‚</p><p>åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸»è¿›ç¨‹æ˜¯ä¸è¿›è¡Œä»»ä½• IO æ“ä½œçš„ã€‚è¿™å°±ç¡®ä¿äº†æé«˜çš„æ€§èƒ½ã€‚å¦‚æœéœ€è¦è¿›è¡Œå¤§è§„æ¨¡æ•°æ®çš„æ¢å¤ï¼Œä¸”å¯¹äºæ•°æ®æ¢å¤çš„å®Œæ•´æ€§ä¸æ˜¯éå¸¸æ•æ„Ÿï¼Œé‚£ RDB æ–¹å¼è¦æ¯” AOF æ–¹å¼æ›´åŠ çš„é«˜æ•ˆã€‚</p><p>RDB çš„ç¼ºç‚¹æ˜¯æœ€åä¸€æ¬¡æŒä¹…åŒ–åçš„æ•°æ®å¯èƒ½ä¸¢å¤±ã€‚</p><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>å½“æ—¶é—´åˆ°å¤šå°‘ç§’æ—¶ï¼Œå¦‚æœ redis æ•°æ®å‘ç”Ÿäº†è‡³å°‘å‡ æ¬¡å˜åŒ–ï¼Œåˆ™æ‰§è¡Œ bgsave</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># Save the DB to disk.</span><span class="token comment">#</span><span class="token comment"># save &lt;seconds> &lt;changes></span>save <span class="token number">60</span> <span class="token number">5</span></code></pre><h3 id="è§¦å‘æœºåˆ¶"><a href="#è§¦å‘æœºåˆ¶" class="headerlink" title="è§¦å‘æœºåˆ¶"></a>è§¦å‘æœºåˆ¶</h3><ul><li>åœ¨ save çš„è§„åˆ™æ»¡è¶³çš„æƒ…å†µä¸‹ï¼Œä¼šè‡ªåŠ¨è§¦å‘ rdb è§„åˆ™</li><li>æ‰§è¡Œ flushdbï¼Œä¹Ÿä¼šè§¦å‘ rdb è§„åˆ™</li><li>é€€å‡º redis ï¼Œä¹Ÿä¼šç”Ÿæˆ rdb æ–‡ä»¶</li></ul><h3 id="å¦‚ä½•æ¢å¤"><a href="#å¦‚ä½•æ¢å¤" class="headerlink" title="å¦‚ä½•æ¢å¤"></a>å¦‚ä½•æ¢å¤</h3><ul><li><p>åªéœ€è¦å°† rdb æ–‡ä»¶æ”¾åœ¨æˆ‘ä»¬ redis å¯åŠ¨ç›®å½•å°±å¯ä»¥ï¼Œredis å¯åŠ¨çš„æ—¶å€™ä¼šè‡ªåŠ¨æ£€æŸ¥ dump.rdb æ¢å¤å…¶ä¸­çš„æ•°æ®</p></li><li><p>æŸ¥çœ‹éœ€è¦å­˜åœ¨çš„ä½ç½®</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span>config get <span class="token function">dir</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"dir"</span><span class="token number">2</span><span class="token punctuation">)</span> "/usr/loca1/binâ€ <span class="token comment"># å¦‚æœåœ¨è¿™ä¸ªç›®å½•ä¸‹å­˜åœ¨ dump.rdb æ–‡ä»¶ï¼Œå¯åŠ¨å°±ä¼šè‡ªåŠ¨æ¢å¤å…¶ä¸­çš„æ•°æ®</span></code></pre></li></ul><h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h3><ul><li>é€‚åˆå¤§è§„æ¨¡çš„æ•°æ®æ¢å¤</li><li>å¯¹æ•°æ®çš„å®Œæ•´æ€§ä¸é«˜</li></ul><h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><ul><li>éœ€è¦ä¸€å®šçš„æ—¶é—´é—´éš”å»æ“ä½œï¼Œå¦‚æœ Redis å´©äº†ï¼Œé‚£ä¹ˆæœ€åä¸€æ¬¡ä¿®æ”¹æ•°æ®å°±æ²¡æœ‰äº†ã€‚</li><li>fork è¿›ç¨‹çš„æ—¶å€™ï¼Œä¼šå ç”¨ä¸€å®šçš„å†…å­˜ã€‚</li></ul><h2 id="AOF"><a href="#AOF" class="headerlink" title="AOF"></a>AOF</h2><p>AOF å…¨ç§°æ˜¯ Appnd Only Fileã€‚</p><p>å®ƒå…¶å®æ˜¯æ—¥å¿—ï¼Œä½†æ˜¯é€šè¿‡æ—¥å¿—å½¢å¼æ¥è®°å½•æ¯ä¸ªå†™æ“ä½œï¼Œå°† Redis æ‰§è¡Œè¿‡çš„æ‰€æœ‰æŒ‡ä»¤è®°å½•ä¸‹æ¥ï¼ˆè¯»æ“ä½œä¸è®°å½•ï¼‰ï¼Œåªè®¸è¿½åŠ æ–‡ä»¶ä½†ä¸å¯ä»¥æ”¹å†™æ–‡ä»¶ï¼ŒRedis å¯åŠ¨ä¹‹åˆä¼šè¯»å–è¯¥æ–‡ä»¶é‡æ–°æ„å»ºæ•°æ®ï¼Œæ¢è¨€ä¹‹ï¼Œ Redis é‡å¯çš„è¯å°±æ ¹æ®æ—¥å¿—æ–‡ä»¶çš„å†…å®¹å°†å†™æŒ‡ä»¤ä»å‰åˆ°åæ‰§è¡Œä¸€æ¬¡ä»¥å®Œæˆæ•°æ®çš„æ¢å¤å·¥ä½œã€‚</p><h3 id="é…ç½®-1"><a href="#é…ç½®-1" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>é»˜è®¤æ˜¯ä¸å¼€å¯çš„ï¼Œéœ€è¦æ‰‹åŠ¨è¿›è¡Œé…ç½®ï¼Œå°†å…¶å¼€å¯ã€‚æˆ‘ä»¬åªéœ€è¦å°† appendonly æ”¹ä¸º yes å°±å¼€å¯äº† aof !</p><pre class="language-bash" data-language="bash"><code class="language-bash">appendonly <span class="token function">yes</span><span class="token comment"># The name of the append only file (default: "appendonly.aof")</span>appendfilename <span class="token string">"appendonly.aof"</span></code></pre><h3 id="å¦‚ä½•ä¿®å¤"><a href="#å¦‚ä½•ä¿®å¤" class="headerlink" title="å¦‚ä½•ä¿®å¤"></a>å¦‚ä½•ä¿®å¤</h3><p>ç”±äº AOF æ˜¯è®°å½•å†™æ“ä½œçš„ï¼Œå¦‚æœè¿™ä¸ªæ–‡ä»¶è¢«ç ´åï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿™æ ·ä¿®å¤ï¼Œå³ä½¿ç”¨ <code>redis-check-aof</code> å‘½ä»¤æ¥ä¿®å¤ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">D:<span class="token punctuation">\</span>Development<span class="token punctuation">\</span>Redis<span class="token operator">></span>redis-check-aof.exe --fix appendonly.aof0x              f6: Expected prefix <span class="token string">'*'</span>, got: <span class="token string">'f'</span>AOF analyzed: <span class="token assign-left variable">size</span><span class="token operator">=</span><span class="token number">267</span>, <span class="token assign-left variable">ok_up_to</span><span class="token operator">=</span><span class="token number">246</span>, <span class="token assign-left variable">ok_up_to_line</span><span class="token operator">=</span><span class="token number">51</span>, <span class="token assign-left variable">diff</span><span class="token operator">=</span><span class="token number">21</span>This will shrink the AOF from <span class="token number">267</span> bytes, with <span class="token number">21</span> bytes, to <span class="token number">246</span> bytesContinue? <span class="token punctuation">[</span>y/N<span class="token punctuation">]</span>: ySuccessfully truncated AOF</code></pre><h3 id="é‡å†™è§„åˆ™"><a href="#é‡å†™è§„åˆ™" class="headerlink" title="é‡å†™è§„åˆ™"></a>é‡å†™è§„åˆ™</h3><p>AOF é»˜è®¤å°±æ˜¯æ–‡ä»¶çš„æ— é™è¿½åŠ ï¼Œæ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§ï¼</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># Automatic rewrite of the append only file.</span><span class="token comment"># Redis is able to automatically rewrite the log file implicitly calling</span><span class="token comment"># BGREWRITEAOF when the AOF log size grows by the specified percentage.</span>auto-aof-rewrite-percentage <span class="token number">100</span>auto-aof-rewrite-min-size 64mb</code></pre><p>å¦‚æœè¶…è¿‡ 64 mbï¼Œé‚£ä¹ˆå°±åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ã€‚</p><h3 id="ä¼˜ç‚¹-1"><a href="#ä¼˜ç‚¹-1" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h3><ul><li>æ¯ä¸€æ¬¡ä¿®æ”¹éƒ½åŒæ­¥ï¼Œæ–‡ä»¶çš„å®Œæ•´ä¼šæ›´åŠ å¥½</li><li>æ¯ç§’åŒæ­¥ä¸€æ¬¡ï¼Œå¯èƒ½ä¼šä¸¢å¤±ä¸€ç§’çš„æ•°æ®</li><li>ä»ä¸åŒæ­¥ï¼Œæ•ˆç‡æœ€é«˜çš„!</li></ul><h3 id="ç¼ºç‚¹-1"><a href="#ç¼ºç‚¹-1" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><ul><li>ç›¸å¯¹äºæ•°æ®æ–‡ä»¶æ¥è¯´ï¼ŒAOF è¿œè¿œå¤§äº RDBï¼Œä¿®å¤çš„é€Ÿåº¦ä¹Ÿæ¯” RDB æ…¢ï¼</li><li>AOF è¿è¡Œæ•ˆç‡ä¹Ÿè¦æ¯”rdbæ…¢ï¼Œæ‰€ä»¥æˆ‘ä»¬ Redis é»˜è®¤çš„é…ç½®å°±æ˜¯ RDB æŒä¹…åŒ–ï¼</li></ul><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul><li>RDB æŒä¹…åŒ–æ–¹å¼èƒ½å¤Ÿåœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…å¯¹ä½ çš„æ•°æ®è¿›è¡Œå¿«ç…§å­˜å‚¨</li><li>AOF æŒä¹…åŒ–æ–¹å¼è®°å½•æ¯æ¬¡å¯¹æœåŠ¡å™¨å†™çš„æ“ä½œï¼Œå½“æœåŠ¡å™¨é‡å¯çš„æ—¶å€™ä¼šé‡æ–°æ‰§è¡Œè¿™äº›å‘½ä»¤æ¥æ¢å¤åŸå§‹çš„æ•°æ®ï¼Œ</li><li>AOF å‘½ä»¤ä»¥ Redis åè®®è¿½åŠ ä¿å­˜æ¯æ¬¡å†™çš„æ“ä½œåˆ°æ–‡ä»¶æœ«å°¾ï¼ŒRedis è¿˜èƒ½å¯¹ AOF æ–‡ä»¶è¿›è¡Œåå°é‡å†™ï¼Œä½¿å¾— AOF æ–‡ä»¶çš„ä½“ç§¯ä¸è‡³äºè¿‡å¤§ã€‚</li><li>åªåšç¼“å­˜ï¼Œå¦‚æœä½ åªå¸Œæœ›ä½ çš„æ•°æ®åœ¨æœåŠ¡å™¨è¿è¡Œçš„æ—¶å€™å­˜åœ¨ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ä»»ä½•æŒä¹…åŒ–</li><li>å¦‚æœåŒæ—¶å¼€å¯ä¸¤ç§æŒä¹…åŒ–æ–¹å¼<ul><li>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“ redis é‡å¯çš„æ—¶å€™ä¼šä¼˜å…ˆè½½å…¥ AOF æ–‡ä»¶æ¥æ¢å¤åŸå§‹çš„æ•°æ®ï¼Œå› ä¸ºåœ¨é€šå¸¸æƒ…å†µä¸‹ AOF æ–‡ä»¶ä¿å­˜çš„æ•°æ®é›†è¦æ¯” RDB æ–‡ä»¶ä¿å­˜çš„æ•°æ®é›†è¦å®Œæ•´ã€‚</li><li>RDB çš„æ•°æ®ä¸å®æ—¶ï¼ŒåŒæ—¶ä½¿ç”¨ä¸¤è€…æ—¶æœåŠ¡å™¨é‡å¯ä¹Ÿåªä¼šæ‰¾ AOF æ–‡ä»¶ï¼Œé‚£è¦ä¸è¦åªä½¿ç”¨ AOF å‘¢ï¼Ÿä½œè€…å»ºè®®ä¸è¦ï¼Œå› ä¸ºRDBæ›´é€‚åˆç”¨äºå¤‡ä»½æ•°æ®åº“ï¼ˆAOFåœ¨ä¸æ–­å˜åŒ–ä¸å¥½å¤‡ä»½ï¼‰ï¼Œå¿«é€Ÿé‡å¯ï¼Œè€Œä¸”ä¸ä¼šæœ‰ AOF å¯èƒ½æ½œåœ¨çš„ Bugï¼Œç•™ç€ä½œä¸ºä¸€ä¸ªä¸‡ä¸€çš„æ‰‹æ®µã€‚</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> Redis çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis äº‹åŠ¡</title>
      <link href="/journal/redis-transaction/"/>
      <url>/journal/redis-transaction/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä¸€ç»„å‘½ä»¤çš„é›†åˆï¼Œä¸€ä¸ªäº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤éƒ½ä¼šè¢«åºåˆ—åŒ–ï¼Œåœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹çš„ä¸­ï¼Œä¼šæŒ‰ç…§é¡ºåºæ‰§è¡Œã€‚ä¸€æ¬¡æ€§ã€é¡ºåºæ€§ã€æ’ä»–æ€§ã€‚æ‰§è¡Œä¸€äº›åˆ—çš„å‘½ä»¤ã€‚</p><p>Rediså•æ¡å‘½ä»¤æ˜¯ä¿æŒåŸå­æ€§çš„ï¼Œä½†æ˜¯äº‹åŠ¡ä¸ä¿è¯åŸå­æ€§ï¼</p><p>redisçš„äº‹åŠ¡æ€»å…±ä¸‰æ­¥</p><ul><li>å¼€å¯äº‹åŠ¡ï¼ˆmultiï¼‰</li><li>å‘½ä»¤å…¥é˜Ÿï¼ˆâ€¦â€¦ï¼‰</li><li>æ‰§è¡Œäº‹åŠ¡ï¼ˆexecï¼‰</li></ul><span id="more"></span><h2 id="äº‹åŠ¡æ‰§è¡Œ"><a href="#äº‹åŠ¡æ‰§è¡Œ" class="headerlink" title="äº‹åŠ¡æ‰§è¡Œ"></a>äº‹åŠ¡æ‰§è¡Œ</h2><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> multiOK<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> <span class="token builtin class-name">set</span> name xiaoheheQUEUED<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> mset age <span class="token number">18</span> house <span class="token number">123</span> gender <span class="token number">0</span>QUEUED<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> get nameQUEUED<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> get ageQUEUED<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> mget name age genderQUEUED<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> <span class="token builtin class-name">exec</span><span class="token number">1</span><span class="token punctuation">)</span> OK<span class="token number">2</span><span class="token punctuation">)</span> OK<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"xiaohehe"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"18"</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"xiaohehe"</span>   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"18"</span>   <span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"0"</span></code></pre><h2 id="å–æ¶ˆäº‹åŠ¡"><a href="#å–æ¶ˆäº‹åŠ¡" class="headerlink" title="å–æ¶ˆäº‹åŠ¡"></a>å–æ¶ˆäº‹åŠ¡</h2><p>discard ç”¨äºå–æ¶ˆäº‹åŠ¡ï¼Œäº‹åŠ¡ä¸€æ—¦å–æ¶ˆï¼Œäº‹åŠ¡å‘½ä»¤ä¸­çš„å‘½ä»¤éƒ½ä¸ä¼šæ‰§è¡Œäº†ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> multiOK<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> <span class="token builtin class-name">set</span> name xiaoheheQUEUED<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> mset age <span class="token number">18</span> house <span class="token number">123</span> gender <span class="token number">0</span>QUEUED<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> get nameQUEUED<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> get ageQUEUED<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> mget name age genderQUEUED<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> <span class="token builtin class-name">exec</span><span class="token number">1</span><span class="token punctuation">)</span> OK<span class="token number">2</span><span class="token punctuation">)</span> OK<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"xiaohehe"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"18"</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"xiaohehe"</span>   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"18"</span>   <span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"0"</span></code></pre><h2 id="äº‹åŠ¡å¼‚å¸¸"><a href="#äº‹åŠ¡å¼‚å¸¸" class="headerlink" title="äº‹åŠ¡å¼‚å¸¸"></a>äº‹åŠ¡å¼‚å¸¸</h2><h3 id="ç¼–è¯‘å‹å¼‚å¸¸"><a href="#ç¼–è¯‘å‹å¼‚å¸¸" class="headerlink" title="ç¼–è¯‘å‹å¼‚å¸¸"></a>ç¼–è¯‘å‹å¼‚å¸¸</h3><p>ä»£ç æœ‰é—®é¢˜ï¼Œå‘½ä»¤æœ‰é”™! ï¼Œäº‹åŠ¡ä¸­æ‰€æœ‰çš„å‘½ä»¤éƒ½ä¸ä¼šè¢«æ‰§è¡Œï¼</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> multiOK<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> incr ageQUEUED<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> get ageQUEUED<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> lpush like dancing singing running basketballQUEUED<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> lrange like <span class="token comment"># è¯­æ³•é”™è¯¯</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR wrong number of arguments <span class="token keyword">for</span> <span class="token string">'lrange'</span> <span class="token builtin class-name">command</span><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> lrange like <span class="token number">0</span> -1QUEUED<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> <span class="token builtin class-name">exec</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> EXECABORT Transaction discarded because of previous errors.</code></pre><h3 id="è¿è¡Œæ—¶å¼‚å¸¸"><a href="#è¿è¡Œæ—¶å¼‚å¸¸" class="headerlink" title="è¿è¡Œæ—¶å¼‚å¸¸"></a>è¿è¡Œæ—¶å¼‚å¸¸</h3><p>å¦‚æœäº‹åŠ¡é˜Ÿåˆ—ä¸­å­˜åœ¨è¯­æ³•æ€§ï¼Œé‚£ä¹ˆæ‰§è¡Œå‘½ä»¤çš„æ—¶å€™ï¼Œå…¶ä»–å‘½ä»¤å¼å¯ä»¥æ­£å¸¸æ‰§è¡Œçš„</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> multiOK<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> lrange like <span class="token number">0</span> -1QUEUED<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> linsert like after dance carQUEUED<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> lindex like <span class="token number">10</span>QUEUED<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> incr nameQUEUED<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> <span class="token builtin class-name">exec</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>empty array<span class="token punctuation">)</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>nil<span class="token punctuation">)</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR value is not an integer or out of rang</code></pre><h2 id="ç›‘è§†"><a href="#ç›‘è§†" class="headerlink" title="ç›‘è§†"></a>ç›‘è§†</h2><p>ä½¿ç”¨ watch æŒ‡ä»¤ç›‘è§†æŸä¸€ä¸ªå˜é‡ã€‚ä¸»è¦åœºæ™¯æ˜¯åˆ©ç”¨ watch å®ç°ä¸€ä¸ªä¹è§‚é”ã€‚</p><p>æ‚²è§‚é”ï¸°</p><ul><li>å¾ˆæ‚²è§‚ï¼Œè®¤ä¸ºä»€ä¹ˆæ—¶å€™éƒ½ä¼šå‡ºé—®é¢˜ï¼Œæ— è®ºåšä»€ä¹ˆéƒ½ä¼šåŠ é”ï¼</li></ul><p>ä¹è§‚é”âˆ¶</p><ul><li><p>å¾ˆä¹è§‚ï¼Œè®¤ä¸ºä»€ä¹ˆæ—¶å€™éƒ½ä¸ä¼šå‡ºé—®é¢˜ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ã€‚æ›´æ–°æ•°æ®çš„æ—¶å€™å»åˆ¤æ–­ä¸€ä¸‹ï¼Œåœ¨æ­¤æœŸé—´æ˜¯å¦æœ‰äººä¿®æ”¹è¿‡è¿™ä¸ªæ•°æ®ã€‚</p></li><li><p>è·å– version</p></li><li><p>æ›´æ–°çš„æ—¶å€™æ¯”è¾ƒ versionï¼Œå¦‚æœ version å‘ç”Ÿå˜åŒ–ï¼Œåˆ™æ›´æ–°å¤±è´¥ï¼Œå¦åˆ™æ›´æ–°æˆåŠŸã€‚</p></li></ul><h3 id="æ­£å¸¸è¿‡ç¨‹"><a href="#æ­£å¸¸è¿‡ç¨‹" class="headerlink" title="æ­£å¸¸è¿‡ç¨‹"></a>æ­£å¸¸è¿‡ç¨‹</h3><p>è¿™ä¸ªä¾‹å­æ¨¡æ‹Ÿäº†ä»˜æ¬¾çš„è¿‡ç¨‹ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> money <span class="token number">1000</span>OK<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> out <span class="token number">0</span>OK<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token function">watch</span> moneyOK<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> MULTIOK<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> decrby money <span class="token number">10</span>QUEUED<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> incrby out <span class="token number">10</span>QUEUED<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> <span class="token builtin class-name">exec</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">990</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">10</span></code></pre><p>äº‹åŠ¡æ‰§è¡Œå®Œæˆï¼Œæ‰§è¡Œæ­£å¸¸ã€‚</p><h3 id="ä¿®æ”¹å¤±è´¥è¿‡ç¨‹"><a href="#ä¿®æ”¹å¤±è´¥è¿‡ç¨‹" class="headerlink" title="ä¿®æ”¹å¤±è´¥è¿‡ç¨‹"></a>ä¿®æ”¹å¤±è´¥è¿‡ç¨‹</h3><p>ç¬¬ä¸€ä¸ªç»ˆç«¯çš„æ“ä½œ</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token function">watch</span> moneyOK<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> multiOK<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> decrby money <span class="token number">20</span>QUEUED<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> incrby out <span class="token number">20</span>QUEUED</code></pre><p>æ­¤æ—¶åˆå¯åŠ¨ä¸€ä¸ªç»ˆç«¯ï¼Œç›´æ¥ä¿®æ”¹äº† money çš„å€¼ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> get money<span class="token string">"990"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> incrby money <span class="token number">30</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1020</span></code></pre><p>æœ€åå›åˆ°ç¬¬ä¸€ä¸ªç»ˆç«¯ï¼Œæ‰§è¡Œäº‹åŠ¡ï¼Œè¾“å‡ºçš„ç»“æœä¸º nilï¼Œè¾“å‡ºä¸º nilã€‚ç”±äº money å‘ç”Ÿäº†æ”¹å˜ï¼Œå¯¼è‡´äº†è¿™ä¸ª money çš„ version å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥è¯¥äº‹åŠ¡çš„æ“ä½œéƒ½æ˜¯æ— æ•ˆçš„ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">></span> <span class="token builtin class-name">exec</span><span class="token punctuation">(</span>nil<span class="token punctuation">)</span></code></pre><p>ç”±äºäº‹åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¯¼è‡´å½“å‰çš„ç›‘è§†å·²ç»å¤±æ•ˆï¼Œéœ€è¦é‡æ–°ç›‘è§†ï¼Œé‡æ–°ç›‘è§†çš„ç›®çš„å°±æ˜¯è·å–æ–°çš„ versionã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> UNWATCHOK<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> WATCH moneyOK</code></pre>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> Redis çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis åŸºæœ¬æ•°æ®ç±»å‹çš„æ“ä½œ</title>
      <link href="/journal/redis-type-of-data/"/>
      <url>/journal/redis-type-of-data/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Redis æœ‰è¿™äº›æ•°æ®ç±»å‹ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹ï¼šStringã€Listã€Hashã€Setã€Zsetï¼Œç‰¹æ®Šçš„æ•°æ®ç±»å‹ï¼šGeospatialã€Hyperloglogã€Bitmapã€‚</p><p>å‘½ä»¤å¹¶æœªåŒ…å«å…¨éƒ¨çš„ï¼Œå¯ä¾›å‚è€ƒï¼Œè¦æŸ¥è¯¢æ›´å¤šå‘½ä»¤ï¼Œè¯·<a href="http://www.redis.cn/commands.htm">ç‚¹æ­¤</a>ã€‚</p><h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><p>Stringï¼Œä¹Ÿå«å­—ç¬¦ä¸²ï¼Œæ˜¯åŸºæœ¬çš„æ•°æ®ç±»å‹ä¹‹ä¸€ã€‚</p><h3 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h3><h4 id="set"><a href="#set" class="headerlink" title="set"></a>set</h4><p>è®¾ç½®å€¼</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> name xiaoheheOK</code></pre><h4 id="get"><a href="#get" class="headerlink" title="get"></a>get</h4><p>è·å¾—å€¼</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> get name<span class="token string">"xiaohehe"</span></code></pre><span id="more"></span><h4 id="append"><a href="#append" class="headerlink" title="append"></a>append</h4><p>è¿½åŠ å­—ç¬¦ä¸²ï¼Œå¦‚æœå½“å‰ key ä¸å­˜åœ¨ï¼Œå®ƒçš„ç”¨æ³•å’Œ set å‘½ä»¤ä¸€æ ·ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> append name <span class="token number">2021</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">12</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> get name<span class="token string">"xiaohehe2021"</span></code></pre><h4 id="strlen"><a href="#strlen" class="headerlink" title="strlen"></a>strlen</h4><p>å¾—åˆ°å­—ç¬¦ä¸²çš„é•¿åº¦</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> strlen name<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">12</span></code></pre><h4 id="mset"><a href="#mset" class="headerlink" title="mset"></a>mset</h4><p>è®¾ç½®å¤šç»„ key : value</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> mset age <span class="token number">23</span> sex <span class="token number">0</span> address bestguo.topOK</code></pre><h4 id="mget"><a href="#mget" class="headerlink" title="mget"></a>mget</h4><p>è¾“å…¥å¤šä¸ª keyï¼Œè·å–å¯¹åº”çš„ value</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> mget age sex address<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"23"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"0"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"bestguo.top"</span></code></pre><h4 id="getset"><a href="#getset" class="headerlink" title="getset"></a>getset</h4><p>è·å– key ä¸­çš„å€¼å¹¶æ›¿æ¢ key ä¸­çš„å€¼ï¼Œå¦‚æœ key åœ¨æ•°æ®åº“ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› nullï¼Œå¹¶ä¸”ç»™ key è®¾ç½®å€¼ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> getset name2 <span class="token number">1111</span><span class="token punctuation">(</span>nil<span class="token punctuation">)</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> get name2<span class="token string">"1111"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> getset age <span class="token number">18</span><span class="token string">"23"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> get age<span class="token string">"18"</span></code></pre><h3 id="æˆªå–ä¸æ›¿æ¢"><a href="#æˆªå–ä¸æ›¿æ¢" class="headerlink" title="æˆªå–ä¸æ›¿æ¢"></a>æˆªå–ä¸æ›¿æ¢</h3><h4 id="getrange"><a href="#getrange" class="headerlink" title="getrange"></a>getrange</h4><p>æå–å­—ç¬¦ä¸²ä¸­ä»‹äºä¸¤ä¸ªæŒ‡å®šä¸‹æ ‡ä¹‹é—´çš„å­—ç¬¦ï¼Œç±»æ¯” substring</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> getrange name <span class="token number">0</span> <span class="token number">3</span><span class="token string">"xiao"</span></code></pre><h4 id="setrange"><a href="#setrange" class="headerlink" title="setrange"></a>setrange</h4><p>æ›¿æ¢æŒ‡å®šä½ç½®å¼€å§‹çš„å­—ç¬¦ä¸²ä½ç½®ï¼Œå¹¶ä¸”ä¹‹åçš„å­—ç¬¦ä¼šè¢«æ›¿æ¢æ‰</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> get name<span class="token string">"xiaxiaoe2021"</span></code></pre><h3 id="åŒæ—¶è®¾ç½®"><a href="#åŒæ—¶è®¾ç½®" class="headerlink" title="åŒæ—¶è®¾ç½®"></a>åŒæ—¶è®¾ç½®</h3><h4 id="setex"><a href="#setex" class="headerlink" title="setex"></a>setex</h4><p>è®¾ç½®å€¼çš„æ—¶å€™ï¼ŒåŒæ—¶è®¾ç½®è¿‡æœŸæ—¶é—´</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> setex tel <span class="token number">10</span> <span class="token number">123456789</span>OK<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> get tel<span class="token string">"123456789"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> ttl tel<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> ttl tel<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> ttl tel<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> ttl tel<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> -2<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> get tel<span class="token punctuation">(</span>nil<span class="token punctuation">)</span></code></pre><h4 id="setnx"><a href="#setnx" class="headerlink" title="setnx"></a>setnx</h4><p>key ä¸å­˜åœ¨æ—¶ï¼Œåˆ™è®¾ç½®å€¼ï¼Œåä¹‹åˆ™ä¸è®¾ç½®å€¼ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> setex tel <span class="token number">10</span> <span class="token number">123456789</span>OK<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> setnx tel <span class="token number">111</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> setnx tel <span class="token number">111</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> setnx tel <span class="token number">111</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> get tel<span class="token string">"111"</span></code></pre><h4 id="msetnx"><a href="#msetnx" class="headerlink" title="msetnx"></a>msetnx</h4><p>è®¾ç½®å¤šä¸ªå€¼çš„æ—¶å€™ï¼ŒåŒæ—¶è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚ä»–æ˜¯ä¸€ä¸ªåŸå­æ€§çš„æ“ä½œï¼Œè¦ä¹ˆä¸€èµ·æˆåŠŸï¼Œè¦ä¹ˆä¸€èµ·å¤±è´¥ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ç”±äºhouseä¸å­˜åœ¨ï¼Œè‚¯å®šè®¾ç½®å¤±è´¥</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> msetnx name xiaohehe2020 house <span class="token number">111</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> get house<span class="token punctuation">(</span>nil<span class="token punctuation">)</span><span class="token comment"># ä¹‹å‰æˆ‘æŠŠ tel çš„å€¼ç»™åˆ é™¤äº†ï¼Œç„¶åå†é‡æ–°è®¾ç½®å€¼ï¼Œæ­¤æ—¶éƒ½è®¾ç½®æˆåŠŸäº†</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> msetnx tel <span class="token number">1234</span> house <span class="token number">111</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> mget tel house<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"1234"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"111"</span></code></pre><h3 id="å¢åŠ ä¸å‡å°‘"><a href="#å¢åŠ ä¸å‡å°‘" class="headerlink" title="å¢åŠ ä¸å‡å°‘"></a>å¢åŠ ä¸å‡å°‘</h3><h4 id="incr"><a href="#incr" class="headerlink" title="incr"></a>incr</h4><p>è‡ªå¢å‘½ä»¤ï¼Œæ¯æ¬¡å¢åŠ 1</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> get age<span class="token string">"18"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> incr age<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">19</span><span class="token comment"># ä¸èƒ½æ˜¯è‹±æ–‡</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> getset age a<span class="token string">"19"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> incr age<span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR value is not an integer or out of range</code></pre><h4 id="decr"><a href="#decr" class="headerlink" title="decr"></a>decr</h4><p>è‡ªå‡å‘½ä»¤ï¼Œæ¯æ¬¡å‡å°‘1</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> decr age<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">18</span></code></pre><h4 id="incrby"><a href="#incrby" class="headerlink" title="incrby"></a>incrby</h4><p>å¢åŠ å‘½ä»¤ï¼ŒæŒ‡å®šè®¾ç½®è‡ªå¢é‡</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> incrby age <span class="token number">10</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">28</span></code></pre><h4 id="decrby"><a href="#decrby" class="headerlink" title="decrby"></a>decrby</h4><p>å‡å°‘å‘½ä»¤ï¼ŒæŒ‡å®šè®¾ç½®è‡ªå‡é‡</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> decrby age <span class="token number">8</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">20</span></code></pre><h3 id="ç®€å•ç¤ºä¾‹"><a href="#ç®€å•ç¤ºä¾‹" class="headerlink" title="ç®€å•ç¤ºä¾‹"></a>ç®€å•ç¤ºä¾‹</h3><p>è®¾ç½® user1 å¯¹è±¡ï¼Œå€¼ä¸º json å­—ç¬¦ä¸²æ¥ä¿å­˜</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">set</span> user:1 <span class="token punctuation">&#123;</span>name: zhangsan, age: <span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token builtin class-name">set</span> user:1:name zhangsan user:1:age <span class="token number">3</span></code></pre><h3 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h3><ul><li>è®¡æ•°å™¨</li><li>å¯¹è±¡ç¼“å­˜å­˜å‚¨</li></ul><h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><p>Listï¼Œä¹Ÿå«åˆ—è¡¨ï¼Œæ˜¯åŸºæœ¬çš„æ•°æ®ç±»å‹ä¹‹ä¸€ï¼ŒRedis çš„åˆ—è¡¨å¯ä»¥å½“æˆæ ˆã€é˜Ÿåˆ—ã€‚å› ä¸ºæœ‰è¿™äº›æ“ä½œå‘½ä»¤ã€‚åœ¨ Redis ä¸­ï¼Œå®ƒçš„å®ç°æ–¹å¼æ˜¯åŒå‘é“¾è¡¨ã€‚å› æ­¤ï¼Œå®ƒæœ‰åŒå‘é“¾è¡¨çš„ç‰¹ç‚¹ã€‚</p><blockquote><p>æç¤ºï¼šç»å¤§éƒ¨åˆ†çš„ List å‘½ä»¤éƒ½æ˜¯ç”± L å¼€å¤´çš„ã€‚</p></blockquote><h3 id="æ·»åŠ "><a href="#æ·»åŠ " class="headerlink" title="æ·»åŠ "></a>æ·»åŠ </h3><h4 id="lpush"><a href="#lpush" class="headerlink" title="lpush"></a>lpush</h4><p>ä»ç¬¬ä¸€ä¸ªä½ç½®æ’å…¥å…ƒç´ </p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lpush words one two three four<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span></code></pre><h4 id="lrange"><a href="#lrange" class="headerlink" title="lrange"></a>lrange</h4><p>é€šè¿‡åŒºé—´å–å¾—å…ƒç´ </p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lrange words <span class="token number">0</span> -1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"four"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"three"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"two"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"one"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lrange words <span class="token number">0</span> <span class="token number">2</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"four"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"three"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"two"</span></code></pre><h4 id="rpush"><a href="#rpush" class="headerlink" title="rpush"></a>rpush</h4><p>ä»æœ€åä¸€ä¸ªä½ç½®æ’å…¥å…ƒç´ </p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lrange words <span class="token number">0</span> -1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"four"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"three"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"two"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"one"</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"five"</span></code></pre><h3 id="ç§»é™¤"><a href="#ç§»é™¤" class="headerlink" title="ç§»é™¤"></a>ç§»é™¤</h3><h4 id="lpop"><a href="#lpop" class="headerlink" title="lpop"></a>lpop</h4><p>ä»ç¬¬ä¸€ä¸ªä½ç½®ç§»é™¤å…ƒç´ </p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lpop words<span class="token string">"four"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lrange words <span class="token number">0</span> -1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"three"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"two"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"one"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"five"</span><span class="token comment"># ä»ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹ï¼Œç§»é™¤2ä¸ªå…ƒç´ </span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lpop words <span class="token number">2</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"three"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"two"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lrange words <span class="token number">0</span> -1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"five"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"one"</span></code></pre><h4 id="rpop"><a href="#rpop" class="headerlink" title="rpop"></a>rpop</h4><p>ä»æœ€åä¸€ä¸ªä½ç½®ç§»é™¤å…ƒç´ </p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> rpop words<span class="token string">"one"</span></code></pre><h3 id="ä¸¤è€…ç»“åˆ"><a href="#ä¸¤è€…ç»“åˆ" class="headerlink" title="ä¸¤è€…ç»“åˆ"></a>ä¸¤è€…ç»“åˆ</h3><h4 id="rpoplpush"><a href="#rpoplpush" class="headerlink" title="rpoplpush"></a>rpoplpush</h4><p>ä»æœ€åä¸€ä¸ªä½ç½®ç§»é™¤å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ æ”¾åˆ°å¦ä¸€ä¸ªåˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªä½ç½®</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> rpoplpush words words2<span class="token string">"five"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lrange words <span class="token number">0</span> -1<span class="token punctuation">(</span>empty array<span class="token punctuation">)</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lrange words2 <span class="token number">0</span> -1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"five"</span></code></pre><h3 id="å…¶å®ƒå‘½ä»¤"><a href="#å…¶å®ƒå‘½ä»¤" class="headerlink" title="å…¶å®ƒå‘½ä»¤"></a>å…¶å®ƒå‘½ä»¤</h3><blockquote><p>ç°åœ¨ï¼Œwords ä¸­æœ‰ä»¥ä¸‹å†…å®¹ï¼šfive,four,three,two,one</p></blockquote><h4 id="lindex"><a href="#lindex" class="headerlink" title="lindex"></a>lindex</h4><p>æŒ‡å®šä¸‹æ ‡è·å–å…ƒç´ </p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lindex words <span class="token number">1</span><span class="token string">"four"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lindex words <span class="token number">0</span><span class="token string">"five"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lindex words -2<span class="token string">"two"</span></code></pre><h4 id="llen"><a href="#llen" class="headerlink" title="llen"></a>llen</h4><p>è·å–åˆ—è¡¨çš„é•¿åº¦</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> llen words<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">5</span></code></pre><h4 id="lrem"><a href="#lrem" class="headerlink" title="lrem"></a>lrem</h4><p>ç§»é™¤åˆ—è¡¨ä¸­æŒ‡å®šçš„å…ƒç´ ï¼Œéœ€è¦æŒ‡å®šä¸ªæ•°ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> rpush words two<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">5</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lrem words <span class="token number">2</span> two<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span></code></pre><h4 id="ltrim"><a href="#ltrim" class="headerlink" title="ltrim"></a>ltrim</h4><p>é€šè¿‡ä¸‹æ ‡æˆªå–æŒ‡å®šçš„é•¿åº¦ï¼Œè¿™ä¸ª list å·²ç»è¢«æ”¹å˜äº†ã€æˆªæ–­äº†åªå‰©ä¸‹æˆªå–çš„å…ƒç´ ï¼</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> ltrim words <span class="token number">0</span> <span class="token number">2</span>OK<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lrange words <span class="token number">0</span> -1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"five"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"four"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"three"</span></code></pre><h4 id="exists"><a href="#exists" class="headerlink" title="exists"></a>exists</h4><p>åˆ¤æ–­åˆ—è¡¨æ˜¯å¦å­˜åœ¨</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> exists words<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span></code></pre><h4 id="lset"><a href="#lset" class="headerlink" title="lset"></a>lset</h4><p>æŒ‡å®šåˆ—è¡¨ä¸­çš„ä¸‹æ ‡è®¾ç½®å…ƒç´ ï¼Œå¦‚æœåˆ—è¡¨æ˜¯ç©ºçš„ï¼Œåˆ™ä¼šæ’å…¥å¤±è´¥</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lset words <span class="token number">0</span> fiveOK<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lrange words <span class="token number">0</span> -1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"five"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"three"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"two"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"one"</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"two"</span></code></pre><h4 id="linsert"><a href="#linsert" class="headerlink" title="linsert"></a>linsert</h4><p>åœ¨æŒ‡å®šçš„ä½ç½®æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œå¯ä»¥åœ¨ç›®æ ‡ä½ç½®ä¹‹å‰ï¼Œä¹Ÿå¯ä»¥åœ¨ç›®æ ‡ä½ç½®ä¹‹å</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åœ¨ three ä¹‹å‰æ·»åŠ  six</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> linsert words before three six<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">6</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lrange words <span class="token number">0</span> -1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"five"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"six"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"three"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"two"</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"one"</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">"two"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> linsert words after one seven<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">7</span><span class="token comment"># åœ¨ one ä¹‹åæ·»åŠ  seven</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lrange words <span class="token number">0</span> -1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"five"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"six"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"three"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"two"</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"one"</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">"seven"</span><span class="token number">7</span><span class="token punctuation">)</span> <span class="token string">"two"</span></code></pre><h4 id="lmove"><a href="#lmove" class="headerlink" title="lmove"></a>lmove</h4><p>å°†åˆ—è¡¨ä¸­çš„æŒ‡å®šçš„å…ƒç´ ç§»åŠ¨åˆ°å¦å¤–ä¸€ä¸ªåˆ—è¡¨ä¸­ã€‚éœ€è¦æŒ‡å®šä»åˆ—è¡¨çš„å“ªä¸€è¾¹ï¼Œç§»åŠ¨åˆ°å¦ä¸€ä¸ªåˆ—è¡¨çš„å“ªä¸€è¾¹ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ä»åˆ—è¡¨çš„å·¦è¾¹å–å‡ºä¸€ä¸ªå…ƒç´ ï¼Œå†ç§»å…¥åˆ°å¦ä¸€ä¸ªåˆ—è¡¨çš„å·¦è¾¹ã€‚</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lmove words words2 left left<span class="token string">"five"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lrange words2 <span class="token number">0</span> -1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"five"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lmove words words2 left left<span class="token string">"six"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lrange words2 <span class="token number">0</span> -1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"six"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"five"</span><span class="token comment"># ä»åˆ—è¡¨çš„å·¦è¾¹å–å‡ºä¸€ä¸ªå…ƒç´ ï¼Œå†ç§»å…¥åˆ°å¦ä¸€ä¸ªåˆ—è¡¨çš„å·¦è¾¹ã€‚</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lmove words words2 left right<span class="token string">"three"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lrange words2 <span class="token number">0</span> -1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"six"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"five"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"three"</span><span class="token comment"># ä»åˆ—è¡¨çš„å³è¾¹å–å‡ºä¸€ä¸ªå…ƒç´ ï¼Œå†ç§»å…¥åˆ°å¦ä¸€ä¸ªåˆ—è¡¨çš„å·¦è¾¹ã€‚</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lmove words words2 right left<span class="token string">"two"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lrange words2 <span class="token number">0</span> -1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"two"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"six"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"five"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"three"</span><span class="token comment"># ä»åˆ—è¡¨çš„å³è¾¹å–å‡ºä¸€ä¸ªå…ƒç´ ï¼Œå†ç§»å…¥åˆ°å¦ä¸€ä¸ªåˆ—è¡¨çš„å³è¾¹ã€‚</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lmove words words2 right right<span class="token string">"seven"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lrange words2 <span class="token number">0</span> -1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"two"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"six"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"five"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"three"</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"seven"</span></code></pre><h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><p>Setï¼Œä¹Ÿå«é›†åˆï¼Œæ˜¯åŸºæœ¬çš„æ•°æ®ç±»å‹ä¹‹ä¸€ï¼Œé›†åˆä¸­çš„å…ƒç´ ä¸é‡å¤ä¸”æ— åºã€‚</p><blockquote><p>æç¤ºï¼šæ‰€æœ‰çš„ Set å‘½ä»¤éƒ½æ˜¯ç”± s å¼€å¤´çš„ã€‚</p></blockquote><h3 id="åŸºæœ¬æ“ä½œ-1"><a href="#åŸºæœ¬æ“ä½œ-1" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h3><h4 id="sadd"><a href="#sadd" class="headerlink" title="sadd"></a>sadd</h4><p>æ·»åŠ ä¸€ç»„å…ƒç´ </p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> sadd s1 b g a o f c<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">6</span></code></pre><h4 id="scard"><a href="#scard" class="headerlink" title="scard"></a>scard</h4><p>è·å– set é›†åˆä¸­çš„å†…å®¹å…ƒç´ ä¸ªæ•°</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> scard s1<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">6</span></code></pre><h4 id="smembers"><a href="#smembers" class="headerlink" title="smembers"></a>smembers</h4><p>æŸ¥çœ‹æŒ‡å®š set é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ </p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> smembers s1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"o"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"a"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"b"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"c"</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"g"</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">"f"</span></code></pre><h4 id="sismember"><a href="#sismember" class="headerlink" title="sismember"></a>sismember</h4><p>åˆ¤æ–­æŸä¸€ä¸ªå€¼æ˜¯ä¸æ˜¯åœ¨ set é›†åˆä¸­</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> smembers s1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"o"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"a"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"b"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"c"</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"g"</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">"f"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> sismember s1 s<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> sismember s1 a<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span></code></pre><h4 id="srandmember"><a href="#srandmember" class="headerlink" title="srandmember"></a>srandmember</h4><p>éšæœºæŠ½å–å…ƒç´ ï¼Œé»˜è®¤å–å‡ºä¸€ä¸ªã€‚å¯ä»¥æŒ‡å®šå–å‡ºå¤šä¸ªå…ƒç´ ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å–å‡ºä¸€ä¸ªå…ƒç´ </span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> srandmember s1<span class="token string">"f"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> srandmember s1<span class="token string">"g"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> srandmember s1<span class="token string">"o"</span><span class="token comment"># å–å‡ºå¤šä¸ªå…ƒç´ </span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> srandmember s1 <span class="token number">3</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"g"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"c"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"a"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> srandmember s1 <span class="token number">3</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"g"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"c"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"f"</span></code></pre><h4 id="spop"><a href="#spop" class="headerlink" title="spop"></a>spop</h4><p>éšæœºå¼¹å‡ºä¸€ä¸ªå…ƒç´ </p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> spop s1<span class="token string">"g"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> spop s1<span class="token string">"b"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> smembers s1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"o"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"c"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"a"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"f"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span></code></pre><h4 id="smove"><a href="#smove" class="headerlink" title="smove"></a>smove</h4><p>å°†é›†åˆä¸­çš„æŒ‡å®šçš„å…ƒç´ ç§»åŠ¨åˆ°å¦å¤–ä¸€ä¸ªé›†åˆä¸­ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> smembers s1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"o"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"c"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"a"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"f"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> smove s1 s2 c<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> smembers s2<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"c"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> smembers s1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"o"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"a"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"f"</span></code></pre><h3 id="ç›¸å…³è¿ç®—"><a href="#ç›¸å…³è¿ç®—" class="headerlink" title="ç›¸å…³è¿ç®—"></a>ç›¸å…³è¿ç®—</h3><blockquote><p>å‡è®¾ s1 ä¸­æœ‰ â€œoâ€ã€â€bâ€ã€â€câ€ã€â€aâ€ã€â€fâ€ 5 ä¸ªå…ƒç´ ï¼Œs2 ä¸­æœ‰ â€œcâ€ã€â€eâ€ã€â€dâ€ã€â€fâ€ 4 ä¸ªå…ƒç´ ã€‚</p></blockquote><p>é›†åˆä¸­çš„è¿ç®—åˆ†åˆ«æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯äº¤é›†ï¼Œå¹¶é›†å’Œå·®é›†ã€‚</p><h4 id="sdiff"><a href="#sdiff" class="headerlink" title="sdiff"></a>sdiff</h4><p>è®¡ç®—ä¸¤ä¸ªå…ƒç´ çš„å·®é›†</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token function">sdiff</span> s1 s2<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"a"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"o"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"b"</span></code></pre><h4 id="sinter"><a href="#sinter" class="headerlink" title="sinter"></a>sinter</h4><p>è®¡ç®—ä¸¤ä¸ªå…ƒç´ çš„äº¤é›†</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> sinter s1 s2<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"c"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"f"</span></code></pre><h4 id="sunion"><a href="#sunion" class="headerlink" title="sunion"></a>sunion</h4><p>è®¡ç®—ä¸¤ä¸ªå…ƒç´ çš„å¹¶é›†</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> sunion s1 s2<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"d"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"e"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"o"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"b"</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"c"</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">"a"</span><span class="token number">7</span><span class="token punctuation">)</span> <span class="token string">"f"</span></code></pre><h2 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h2><p>Hash æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå°±ç±»ä¼¼äº Java ä¸­çš„ Map é›†åˆã€‚Map é›†åˆä¸­éƒ½æ˜¯ä»¥é”®å€¼å¯¹çš„å½¢å¼ã€‚åœ¨æœ¬è´¨ä¸Šå’Œ String ç±»å‹æ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ï¼Œè¿˜æ˜¯ä¸€ä¸ªç®€å•çš„é”®å€¼å¯¹å½¢å¼ã€‚</p><blockquote><p>æç¤ºï¼šæ‰€æœ‰çš„ Hash å‘½ä»¤éƒ½æ˜¯ç”± h å¼€å¤´çš„ã€‚</p></blockquote><h3 id="åŸºæœ¬æ“ä½œ-2"><a href="#åŸºæœ¬æ“ä½œ-2" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h3><h4 id="hset"><a href="#hset" class="headerlink" title="hset"></a>hset</h4><p>è®¾ç½®ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œå¹¶ä¸”ä¿å­˜ä¸€å¯¹é”®å€¼å¯¹ã€‚ä¸è¿‡ hset ä¹Ÿå¯ä»¥å¤šå¯¹é”®å€¼å¯¹</p><blockquote><p>hset å‘½ä»¤ï¼š<code>hset key field value [field value ...]</code></p><p>hmset å‘½ä»¤ï¼š<code>hmset key field value [field value ...]</code></p></blockquote><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hset user name xiaohehe age <span class="token number">18</span> sex <span class="token number">0</span> house <span class="token number">122</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span></code></pre><h4 id="hget"><a href="#hget" class="headerlink" title="hget"></a>hget</h4><p>ä»å“ˆå¸Œè¡¨ä¸­çš„é”®ä¸­æ‹¿å‡ºä¸€ä¸ªå€¼ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hget user age<span class="token string">"18"</span></code></pre><h4 id="hmset"><a href="#hmset" class="headerlink" title="hmset"></a>hmset</h4><p>è®¾ç½®ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œå¹¶ä¸”ä¿å­˜å¤šå¯¹é”®å€¼å¯¹ï¼Œç”¨æ³•å’Œ hset ä¸€æ ·</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hset user name xiaohehe age <span class="token number">18</span> sex <span class="token number">0</span> house <span class="token number">122</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span></code></pre><h4 id="hmget"><a href="#hmget" class="headerlink" title="hmget"></a>hmget</h4><p>ä»å“ˆå¸Œè¡¨ä¸­ä½¿ç”¨å¤šä¸ªé”®ä¸­æ‹¿å‡ºå¤šä¸ªå€¼ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hmget user name age asd<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"xiaohehe"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"18"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>nil<span class="token punctuation">)</span></code></pre><h4 id="hgetall"><a href="#hgetall" class="headerlink" title="hgetall"></a>hgetall</h4><p>è·å–å…¨éƒ¨çš„æ•°æ®ï¼ŒåŒ…æ‹¬é”®å’Œå€¼ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hgetall user<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"name"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"xiaohehe"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"age"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"18"</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"sex"</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">"0"</span><span class="token number">7</span><span class="token punctuation">)</span> <span class="token string">"house"</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token string">"122"</span></code></pre><h4 id="hdel"><a href="#hdel" class="headerlink" title="hdel"></a>hdel</h4><p>åˆ é™¤å“ˆå¸Œè¡¨ä¸­æŒ‡å®šçš„ key å­—æ®µ</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hdel user sex<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hgetall user<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"name"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"xiaohehe"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"age"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"18"</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"house"</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">"122"</span></code></pre><h4 id="hlen"><a href="#hlen" class="headerlink" title="hlen"></a>hlen</h4><p>è·å–å“ˆå¸Œè¡¨çš„é•¿åº¦</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hlen user<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span></code></pre><h4 id="hexists"><a href="#hexists" class="headerlink" title="hexists"></a>hexists</h4><p>åˆ¤æ–­å“ˆå¸Œè¡¨ä¸­æŒ‡å®šçš„ key æ˜¯å¦å­˜åœ¨</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hexists user sex<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hexists user name<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span></code></pre><h4 id="hkeys"><a href="#hkeys" class="headerlink" title="hkeys"></a>hkeys</h4><p>è·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰çš„ key</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hkeys user<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"name"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"age"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"house"</span></code></pre><h4 id="hvals"><a href="#hvals" class="headerlink" title="hvals"></a>hvals</h4><p>è·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰çš„ value</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hvals user<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"xiaohehe"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"18"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"122"</span></code></pre><h3 id="å¢åŠ å’Œå‡å°‘"><a href="#å¢åŠ å’Œå‡å°‘" class="headerlink" title="å¢åŠ å’Œå‡å°‘"></a>å¢åŠ å’Œå‡å°‘</h3><blockquote><p>è¿™å’Œ String æ•°æ®ç±»å‹ä¸­çš„å¢åŠ å’Œå‡å°‘æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å®ƒå¹¶æ²¡æœ‰ decrby çš„å‘½ä»¤ã€‚å¦‚æœè¦å‡å°‘çš„è¯ï¼Œå¯ä»¥è®¾ç½®å¢åŠ è´Ÿæ•°çš„ç›®çš„æ¥è¾¾åˆ°å‡å°‘</p></blockquote><h4 id="hincrby"><a href="#hincrby" class="headerlink" title="hincrby"></a>hincrby</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hincrby user age <span class="token number">2</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">20</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hincrby user age -1<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">19</span></code></pre><h3 id="åŒæ—¶è®¾ç½®-1"><a href="#åŒæ—¶è®¾ç½®-1" class="headerlink" title="åŒæ—¶è®¾ç½®"></a>åŒæ—¶è®¾ç½®</h3><h4 id="hsetnx"><a href="#hsetnx" class="headerlink" title="hsetnx"></a>hsetnx</h4><p>å“ˆå¸Œè¡¨ä¸­çš„ key ä¸å­˜åœ¨æ—¶ï¼Œåˆ™è®¾ç½®å€¼ï¼Œåä¹‹åˆ™ä¸è®¾ç½®å€¼ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hsetnx user age <span class="token number">100</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hsetnx user asd <span class="token string">"this is a redis"</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hget user asd<span class="token string">"this is a redis"</span></code></pre><h2 id="Zset"><a href="#Zset" class="headerlink" title="Zset"></a>Zset</h2><p>åœ¨ set çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ä¸€ä¸ªå€¼ã€‚</p><blockquote><p>æç¤ºï¼šæ‰€æœ‰çš„ Zset å‘½ä»¤éƒ½æ˜¯ç”± z å¼€å¤´çš„ã€‚</p></blockquote><h3 id="åŸºæœ¬æ“ä½œ-3"><a href="#åŸºæœ¬æ“ä½œ-3" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h3><blockquote><p>å¼€å§‹æœ‰å¦‚ä¸‹æ•°æ®ï¼š</p><p>85 xiaoqiang<br>90 zhangsan<br>91 lisi<br>95 wanwu<br>76 zhaoliu</p></blockquote><h4 id="zadd"><a href="#zadd" class="headerlink" title="zadd"></a>zadd</h4><p>å‘æœ‰åºé›†ä¸­æ·»åŠ ä¸€ä¸ªå€¼ï¼Œå¯ä»¥æ·»åŠ å¤šä¸ªå€¼</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zadd grade a xiaoqiang<span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR value is not a valid float<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zadd grade <span class="token number">85</span> xiaoqiang<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zadd grade <span class="token number">90</span> zhangsan<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zadd grade <span class="token number">90</span> zhangsan <span class="token number">91</span> lisi <span class="token number">95</span> wanwu <span class="token number">76</span> zhaoliu<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span></code></pre><h4 id="zrange"><a href="#zrange" class="headerlink" title="zrange"></a>zrange</h4><p>å‘æœ‰åºé›†åˆä¸­é€šè¿‡ä¸‹æ ‡åŒºé—´å–å¾—å…ƒç´ </p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zrange grade <span class="token number">0</span> -1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"zhaoliu"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"xiaoqiang"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"zhangsan"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"lisi"</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"wanwu"</span><span class="token comment"># é€†åº</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zrange grade <span class="token number">0</span> -1 <span class="token function">rev</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"wanwu"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"lisi"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"zhangsan"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"xiaoqiang"</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"zhaoliu"</span><span class="token comment"># æŒ‰ç…§ score æˆªå–ï¼Œå¯ä»¥æ›¿æ¢æˆ zrangebyscore</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zrange grade <span class="token number">95</span> <span class="token number">100</span> byscore<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"wanwu"</span></code></pre><h4 id="zrevrange"><a href="#zrevrange" class="headerlink" title="zrevrange"></a>zrevrange</h4><p>å‘æœ‰åºé›†åˆä¸­é€šè¿‡ä¸‹æ ‡åŒºé—´å–å¾—å…ƒç´ ï¼Œå¹¶ä¸”æ˜¯é€†åºçš„</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zrevrange grade <span class="token number">0</span> -1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"wanwu"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"lisi"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"zhangsan"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"xiaoqiang"</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"zhaoliu"</span></code></pre><h4 id="zrem"><a href="#zrem" class="headerlink" title="zrem"></a>zrem</h4><p>ç§»é™¤æœ‰åºé›†åˆä¸­æŒ‡å®šçš„å…ƒç´ </p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zrem grade zhaoliu xiaoqiang<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zrange grade <span class="token number">0</span> -1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"zhangsan"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"lisi"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"wanwu"</span></code></pre><h4 id="zcard"><a href="#zcard" class="headerlink" title="zcard"></a>zcard</h4><p>è·å–æœ‰åºé›†åˆä¸­çš„ä¸ªæ•°</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zcard grade<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span></code></pre><h4 id="zcount"><a href="#zcount" class="headerlink" title="zcount"></a>zcount</h4><p>è·å–æŒ‡å®š score åŒºé—´çš„æˆå‘˜çš„æ•°é‡</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zcount grade <span class="token number">85</span> <span class="token number">1000</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span></code></pre><h3 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h3><h4 id="zrangebyscore"><a href="#zrangebyscore" class="headerlink" title="zrangebyscore"></a>zrangebyscore</h4><p>ç»™é›†åˆä¸­çš„æ•°æ®æŒ‡å®š score çš„åŒºé—´èŒƒå›´å¹¶ä»å°åˆ°å¤§æ’åº</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zrangebyscore grade <span class="token number">85</span> <span class="token number">100</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"zhangsan"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"lisi"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"wanwu"</span></code></pre><h4 id="zrevrangebyscore"><a href="#zrevrangebyscore" class="headerlink" title="zrevrangebyscore"></a>zrevrangebyscore</h4><p>ç»™é›†åˆä¸­çš„æ•°æ®æŒ‡å®š score çš„åŒºé—´èŒƒå›´å¹¶ä»å¤§åˆ°å°æ’åº</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zrevrangebyscore grade <span class="token number">100</span> <span class="token number">85</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"wanwu"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"lisi"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"zhangsan"</span></code></pre><h2 id="Geospatial"><a href="#Geospatial" class="headerlink" title="Geospatial"></a>Geospatial</h2><p>Redisçš„ Geospatial åœ¨ Redis 3.2 å°±å·²ç»æœ‰äº†ï¼Œå®ƒå¯ä»¥æ¨ç®—å‡ºåœ°ç†ä½ç½®çš„ä¿¡æ¯ï¼Œä¸¤åœ°ä¹‹é—´çš„è·ç¦»ï¼Œæ–¹åœ†ä¹‹å†…çš„äººã€‚å…³äºåœ°ç†ä½ç½®çš„å¯ä»¥å‚è€ƒå®ƒï¼š<a href="https://www.redis.net.cn/order/3685.html">Redis åœ°ç†ä½ç½®(geo)</a></p><blockquote><p>æ³¨æ„ï¼š</p><p>è¯¥å‘½ä»¤ä»¥é‡‡ç”¨æ ‡å‡†æ ¼å¼çš„å‚æ•° xï¼ˆçº¬åº¦ï¼‰ï¼Œyï¼ˆç»åº¦ï¼‰ï¼Œæ‰€ä»¥ç»åº¦å¿…é¡»åœ¨çº¬åº¦ä¹‹å‰ã€‚è¿™äº›åæ ‡çš„é™åˆ¶æ˜¯å¯ä»¥è¢«ç¼–å…¥ç´¢å¼•çš„ï¼ŒåŒºåŸŸé¢ç§¯å¯ä»¥å¾ˆæ¥è¿‘æç‚¹ä½†æ˜¯ä¸èƒ½ç´¢å¼•ã€‚å…·ä½“çš„é™åˆ¶ï¼Œç”± EPSG:900913 / EPSG:3785 / OSGEO:41001 è§„å®šå¦‚ä¸‹ï¼š</p><ul><li>æœ‰æ•ˆçš„ç»åº¦ä» -180 åº¦åˆ° 180 åº¦ã€‚</li><li>æœ‰æ•ˆçš„çº¬åº¦ä» -85.05112878 åº¦åˆ° 85.05112878 åº¦ã€‚</li></ul><p>å½“åæ ‡ä½ç½®è¶…å‡ºä¸Šè¿°æŒ‡å®šèŒƒå›´æ—¶ï¼Œè¯¥å‘½ä»¤å°†ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p></blockquote><h3 id="åŸºæœ¬æ“ä½œ-4"><a href="#åŸºæœ¬æ“ä½œ-4" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h3><h4 id="geoadd"><a href="#geoadd" class="headerlink" title="geoadd"></a>geoadd</h4><p>æ·»åŠ å…ƒç´ çš„ä½ç½®ï¼ŒåŒ…å«ï¼ˆç»åº¦ã€çº¬åº¦ã€åç§°ï¼‰æ ·æ¿ï¼š<code>geoadd key [NX|XX] [CH] longitudeï¼ˆç»åº¦ï¼‰ latitudeï¼ˆçº¬åº¦ï¼‰ member [longitude latitude member ...]</code></p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å¦é—¨ç†å·¥å­¦é™¢å’Œé›†ç¾å¤§å­¦</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> geoadd xiamen <span class="token number">118.08745238</span> <span class="token number">24.62416819</span> xmut <span class="token number">118.09534880</span> <span class="token number">24.57996881</span> jmu<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> geoadd xiamen <span class="token number">118.08518860</span> <span class="token number">24.60387997</span> huaqiao <span class="token comment"># åä¾¨å¤§å­¦</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> geoadd xiamen <span class="token number">118.06637022</span> <span class="token number">24.61626788</span> xit <span class="token comment"># å¦é—¨å·¥å­¦é™¢</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> geoadd xiamen <span class="token number">118.08278534</span> <span class="token number">24.63070263</span> huaxia <span class="token comment"># å¦é—¨åå¤å­¦é™¢</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> geoadd xiamen <span class="token number">118.10268733</span> <span class="token number">24.43600074</span> xmu <span class="token comment"># å¦é—¨å¤§å­¦</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> geoadd xiamen <span class="token number">118.16647331</span> <span class="token number">24.46291879</span> xmcu <span class="token comment"># å¦é—¨åŸå¸‚èŒä¸šå­¦é™¢</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span></code></pre><h4 id="getpos"><a href="#getpos" class="headerlink" title="getpos"></a>getpos</h4><p>è·å–å…ƒç´ çš„ä½ç½®ï¼Œè·å–åˆ°çš„æ˜¯åæ ‡å€¼ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> geopos xiamen xmut jmu huaqiao xit huaxia xmu xmcu<span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"118.0874517560005188"</span>   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"24.62416844172170016"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"118.09534817934036255"</span>   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"24.57996797414514134"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"118.08518797159194946"</span>   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"24.60388053356235361"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"118.06636959314346313"</span>   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"24.61626771586804097"</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"118.08278471231460571"</span>   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"24.63070295287047173"</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"118.10268670320510864"</span>   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"24.43600088173700868"</span><span class="token number">7</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"118.16647499799728394"</span>   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"24.46291962044919188"</span></code></pre><h4 id="geodist"><a href="#geodist" class="headerlink" title="geodist"></a>geodist</h4><p>æ¯”è¾ƒä¸¤ä¸ªç‚¹ä¹‹é—´çš„ç›´çº¿è·ç¦»ã€‚å¯ä»¥æŒ‡å®šè·ç¦»å•ä½ï¼ŒRedis æä¾›äº† 4 ä¸ªå•ä½ã€‚</p><ul><li>mè¡¨ç¤ºå•ä½ä¸ºç±³ã€‚</li><li>kmè¡¨ç¤ºå•ä½ä¸ºåƒç±³ã€‚</li><li>miè¡¨ç¤ºå•ä½ä¸ºè‹±é‡Œã€‚</li><li>ftè¡¨ç¤ºå•ä½ä¸ºè‹±å°ºã€‚</li></ul><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å¦é—¨ç†å·¥å­¦é™¢ä¸å¦é—¨å¤§å­¦çš„ç›´çº¿è·ç¦»ï¼ˆåƒç±³ï¼‰</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> geodist xiamen xmut xmu km<span class="token string">"20.9859"</span><span class="token comment"># å¦é—¨ç†å·¥å­¦é™¢ä¸å¦é—¨åŸå¸‚èŒä¸šå­¦é™¢çš„ç›´çº¿è·ç¦»ï¼ˆåƒç±³ï¼‰</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> geodist xiamen xmut xmcu km<span class="token string">"19.6365"</span></code></pre><h4 id="georadius"><a href="#georadius" class="headerlink" title="georadius"></a>georadius</h4><p>ä»¥ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œè¿”å›é”®åŒ…å«çš„ä½ç½®å…ƒç´ å½“ä¸­ï¼Œä¸ä¸­å¿ƒçš„è·ç¦»ä¸è¶…è¿‡ç»™å®šæœ€å¤§è·ç¦»çš„æ‰€æœ‰ä½ç½®å…ƒç´ ã€‚è¿™å°±åƒæ˜¯å¯»æ‰¾é™„è¿‘çš„äººã€‚æ¯”å¦‚ï¼Œåœ¨ 20 km èŒƒå›´å†…æœ‰å“ªäº›äººã€‚</p><blockquote><p>ç»åº¦ï¼š118.08835144ï¼Œçº¬åº¦ï¼š24.63347195 æ‰€åœ¨çš„ä½ç½®æ˜¯å¦é—¨ç†å·¥å­¦é™¢é›†ç¾è‹‘å®¿èˆã€‚</p></blockquote><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åœ¨å¦é—¨ç†å·¥å­¦é™¢é›†ç¾è‹‘å®¿èˆï¼Œæ–¹åœ†5å…¬é‡Œå†…æœ‰å“ªäº›å­¦æ ¡ã€‚</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> georadius xiamen <span class="token number">118.08835144</span> <span class="token number">24.63347195</span> <span class="token number">5</span> km<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"xit"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"huaqiao"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"xmut"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"huaxia"</span><span class="token comment"># åœ¨å¦é—¨ç†å·¥å­¦é™¢é›†ç¾è‹‘å®¿èˆï¼Œæ–¹åœ†2å…¬é‡Œå†…æœ‰å“ªäº›å­¦æ ¡ã€‚</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> GEORADIUS xiamen <span class="token number">118.08835144</span> <span class="token number">24.63347195</span> <span class="token number">2000</span> m<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"huaxia"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"xmut"</span><span class="token comment"># åŒæ—¶æ˜¾ç¤ºè·ç¦»é›†ç¾è‹‘å¤šå°‘å…¬é‡Œå’Œä»–ä»¬çš„ç»çº¬åº¦</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> GEORADIUS xiamen <span class="token number">118.08835144</span> <span class="token number">24.63347195</span> <span class="token number">2</span> km withcoord withdist<span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"huaxia"</span>   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"0.6416"</span>   <span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"118.08278471231460571"</span>      <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"24.63070295287047173"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"xmut"</span>   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"1.0388"</span>   <span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"118.0874517560005188"</span>      <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"24.62416844172170016"</span></code></pre><h4 id="georadiusbymember"><a href="#georadiusbymember" class="headerlink" title="georadiusbymember"></a>georadiusbymember</h4><p>æ‰¾å‡ºä½äºæŒ‡å®šå…ƒç´ å‘¨å›´çš„å…¶ä»–å…ƒç´ ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å¯»æ‰¾å¦é—¨å¤§å­¦æ–¹åœ†10å…¬é‡Œå†…æœ‰å“ªäº›å­¦æ ¡</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> GEORADIUSBYMEMBER xiamen xmu <span class="token number">10</span> km withcoord withdist<span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"xmu"</span>   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"0.0000"</span>   <span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"118.10268670320510864"</span>      <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"24.43600088173700868"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"xmcu"</span>   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"7.1189"</span>   <span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"118.16647499799728394"</span>      <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"24.46291962044919188"</span></code></pre><h4 id="geohash"><a href="#geohash" class="headerlink" title="geohash"></a>geohash</h4><p>è¿”å›ä¸€ä¸ªæˆ–å¤šä¸ªä½ç½®å…ƒç´ çš„ geohash è¡¨ç¤ºï¼Œå°†äºŒç»´çš„ç»çº¬åº¦è½¬æ¢ä¸ºä¸€ç»´çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²è¶Šæ¥è¿‘ï¼Œé‚£ä¹ˆåˆ™è·ç¦»è¶Šè¿‘ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> geohash xiamen xmu xmut<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"ws7gp2ry000"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"ws7up4swjj0"</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> geohash xiamen xmu huaxia<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"ws7gp2ry000"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"ws7up5ck0r0"</span><span class="token comment"># å¦é—¨ç†å·¥å­¦é™¢å’Œå¦é—¨åå¤å­¦é™¢å¾ˆè¿‘</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> geohash xiamen xmut huaxia<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"ws7up4swjj0"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"ws7up5ck0r0"</span></code></pre><h3 id="å…¶å®ƒæ“ä½œ"><a href="#å…¶å®ƒæ“ä½œ" class="headerlink" title="å…¶å®ƒæ“ä½œ"></a>å…¶å®ƒæ“ä½œ</h3><p>geo åº•å±‚çš„å®ç°åŸç†å…¶å®å°±æ˜¯ Zsetï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Zset å‘½ä»¤æ¥æ“ä½œ geoï¼å¯ä»¥å‚ç…§ <a href="#Zset">Zset</a> çš„æ“ä½œæ¥ã€‚</p><h4 id="é›†åˆä¸­æœ‰å‡ æ‰€å¤§å­¦"><a href="#é›†åˆä¸­æœ‰å‡ æ‰€å¤§å­¦" class="headerlink" title="é›†åˆä¸­æœ‰å‡ æ‰€å¤§å­¦"></a>é›†åˆä¸­æœ‰å‡ æ‰€å¤§å­¦</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> ZCARD xiamen<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">7</span></code></pre><h4 id="åˆ—å‡ºè¿™äº›å¤§å­¦çš„åå­—"><a href="#åˆ—å‡ºè¿™äº›å¤§å­¦çš„åå­—" class="headerlink" title="åˆ—å‡ºè¿™äº›å¤§å­¦çš„åå­—"></a>åˆ—å‡ºè¿™äº›å¤§å­¦çš„åå­—</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zrange xiamen <span class="token number">0</span> -1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"xmu"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"jmu"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"xit"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"huaqiao"</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"xmut"</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">"huaxia"</span><span class="token number">7</span><span class="token punctuation">)</span> <span class="token string">"xmcu"</span></code></pre><h4 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> ZREM xiamen xit<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zrange xiamen <span class="token number">0</span> -1<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"xmu"</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"jmu"</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"huaqiao"</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"xmut"</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"huaxia"</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">"xmcu"</span></code></pre><h2 id="Hyperloglog"><a href="#Hyperloglog" class="headerlink" title="Hyperloglog"></a>Hyperloglog</h2><p>Redis 2.8.9ç‰ˆæœ¬å°±æ›´æ–°äº† Hyperloglog æ•°æ®ç»“æ„ï¼</p><p>Redis Hyperloglog åŸºæ•°ç»Ÿè®¡çš„ç®—æ³•ï¼</p><p>ä¼˜ç‚¹âˆ¶å ç”¨çš„å†…å­˜æ˜¯å›ºå®šï¼Œ2^64ä¸åŒçš„å…ƒç´ çš„æŠ€æœ¯ï¼Œåªéœ€è¦ 12KB å†…å­˜ï¼å¦‚æœè¦ä»å†…å­˜è§’åº¦æ¥æ¯”è¾ƒçš„è¯ Hyperloglog æ˜¯é¦–é€‰ï¼Œè™½ç„¶ set é›†åˆä¹Ÿèƒ½åšåˆ°ï¼Œå¯æ˜¯å®ƒçš„å†…å­˜å¹¶éæ˜¯å›ºå®šçš„ï¼</p><p>ç½‘é¡µçš„ UVï¼ˆä¸€ä¸ªäººè®¿é—®ä¸€ä¸ªç½‘ç«™å¤šæ¬¡ï¼Œä½†æ˜¯è¿˜æ˜¯ç®—ä½œä¸€ä¸ªäººï¼ï¼‰</p><p>ä¼ ç»Ÿçš„æ–¹å¼ï¼Œset ä¿å­˜ç”¨æˆ·çš„ idï¼Œç„¶åå°±å¯ä»¥ç»Ÿè®¡ set ä¸­çš„å…ƒç´ æ•°é‡ä½œä¸ºæ ‡å‡†åˆ¤æ–­!</p><p>è¿™ä¸ªæ–¹å¼å¦‚æœä¿å­˜å¤§é‡çš„ç”¨æˆ· idï¼Œå°±ä¼šæ¯”è¾ƒéº»çƒ¦!æˆ‘ä»¬çš„ç›®çš„æ˜¯ä¸ºäº†è®¡æ•°ï¼Œè€Œä¸æ˜¯ä¿å­˜ç”¨æˆ·id;</p><p>0.81% é”™è¯¯ç‡ï¼ç»Ÿè®¡ UV ä»»åŠ¡ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡ï¼</p><blockquote><p>å¦‚æœå…è®¸å®¹é”™ï¼Œé‚£ä¹ˆä¸€å®šå¯ä»¥ä½¿ç”¨ Hyperloglogï¼Œå¦‚æœä¸å…è®¸å®¹é”™ï¼Œå°±ä½¿ç”¨ set æˆ–è€…è‡ªå·±çš„æ•°æ®ç±»å‹ã€‚</p></blockquote><h3 id="åŸºæœ¬æ“ä½œ-5"><a href="#åŸºæœ¬æ“ä½œ-5" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h3><h4 id="pfadd"><a href="#pfadd" class="headerlink" title="pfadd"></a>pfadd</h4><p>åˆ›å»ºä¸€ç»„å…ƒç´ ï¼Œå¯ä»¥é‡å¤ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> PFADD online_users a s d f g h j q s<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span></code></pre><h4 id="pfcount"><a href="#pfcount" class="headerlink" title="pfcount"></a>pfcount</h4><p>ç»Ÿè®¡ key ä¸­å…ƒç´ çš„åŸºæ•°æ•°é‡ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> PFCOUNT online_users<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">8</span></code></pre><h4 id="pfmerge"><a href="#pfmerge" class="headerlink" title="pfmerge"></a>pfmerge</h4><p>å°†ä¸¤ç»„å…ƒç´ è¿›è¡Œåˆå¹¶</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> PFMERGE best_users online_users hot_usersOK<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> PFCOUNT best_users<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">15</span></code></pre><h2 id="Bitmap"><a href="#Bitmap" class="headerlink" title="Bitmap"></a>Bitmap</h2><p>ä½å­˜å‚¨ã€‚ç»Ÿè®¡ç”¨æˆ·ä¿¡æ¯ï¼Œæ´»è·ƒï¼Œä¸æ´»è·ƒï¼›ç™»å½•ã€æœªç™»å½•ï¼›æ‰“å¡ï¼Œ365 æ‰“å¡ã€‚åªè¦æ˜¯æ¶‰åŠä¸¤ä¸ªçŠ¶æ€çš„ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ Bitmapã€‚</p><h3 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h3><h4 id="setbit"><a href="#setbit" class="headerlink" title="setbit"></a>setbit</h4><p>è®¾ç½®æˆ–è€…æ¸…ç©º key çš„ valueï¼ˆå­—ç¬¦ä¸²ï¼‰åœ¨ offset å¤„çš„ bit å€¼ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> setbit daka <span class="token number">0</span> <span class="token number">0</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> setbit daka <span class="token number">1</span> <span class="token number">1</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> setbit daka <span class="token number">2</span> <span class="token number">1</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> setbit daka <span class="token number">3</span> <span class="token number">0</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> setbit daka <span class="token number">4</span> <span class="token number">1</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span></code></pre><h4 id="getbit"><a href="#getbit" class="headerlink" title="getbit"></a>getbit</h4><p>è¿”å› key å¯¹åº”çš„ string åœ¨ offset å¤„çš„ bit å€¼ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> getbit daka <span class="token number">1</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> getbit daka <span class="token number">3</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> getbit daka <span class="token number">4</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span></code></pre><h4 id="bitcount"><a href="#bitcount" class="headerlink" title="bitcount"></a>bitcount</h4><p>ç»Ÿè®¡å­—ç¬¦ä¸²è¢«è®¾ç½®ä¸º 1 çš„ bit æ•°ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> bitcount daka <span class="token number">0</span> <span class="token number">10</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> Redis çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äº†è§£ NoSQL å’Œ Redis å®‰è£…</title>
      <link href="/journal/redis-tutoral/"/>
      <url>/journal/redis-tutoral/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æ—¢ç„¶è¦å­¦ä¹  Redisï¼Œé‚£ä¹ˆå°±å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯ NoSQL å§ã€‚</p><blockquote><p>NoSQL çš„å…¨ç§°æ˜¯ Not Only SQLï¼Œä¸ä»…æ˜¯ SQLã€‚</p></blockquote><h2 id="ä»€ä¹ˆæ˜¯-NoSQL"><a href="#ä»€ä¹ˆæ˜¯-NoSQL" class="headerlink" title="ä»€ä¹ˆæ˜¯ NoSQL"></a>ä»€ä¹ˆæ˜¯ NoSQL</h2><p>NoSQL æ³›æŒ‡éå…³ç³»å‹æ•°æ®åº“ï¼Œä¼´éšç€ web2.0 äº’è”ç½‘çš„è¯ç”Ÿã€‚ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“æ—©å·²å¾ˆéš¾å¯¹ä»˜ web2.0 æ—¶ä»£ï¼Œå°¤å…¶æ˜¯è¶…å¤§è§„æ¨¡çš„é«˜å¹¶å‘èˆå¼ƒï¼Œæš´éœ²å‡ºæ¥å¾ˆå¤šéš¾ä»¥å…‹æœçš„é—®é¢˜ï¼ŒNoSQL åœ¨å½“ä»Šå¤§æ•°æ®ç¯å¢ƒä¸‹å‘å±•çš„ååˆ†è¿…é€Ÿï¼ŒRedis æ˜¯å‘å±•æœ€å¿«çš„ã€‚</p><p>å¾ˆå¤šçš„æ•°æ®ç±»å‹ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ï¼Œç¤¾äº¤ç½‘ç»œï¼Œåœ°ç†ä½ç›¾ã€‚è¿™äº›æ•°æ®ç±»å‹çš„å­˜å‚¨ä¸éœ€è¦ä¸€ä¸ªå›ºå®šçš„æ ¼å¼ï¼ä¸éœ€è¦å¤šä½™çš„æ“ä½œå°±å¯ä»¥æ¨ªå‘æ‰©å±•çš„ï¼</p><p>æ¯”å¦‚ Java ä¸­çš„ Map&lt;String, Object&gt; ä½¿ç”¨æ˜¯é”®å€¼å¯¹çš„æ–¹å¼æ¥æ§åˆ¶çš„ï¼Œå®ƒæ˜¯ NoSQL çš„ä¸€ç§è¡¨ç°å½¢å¼ã€‚</p><span id="more"></span><h3 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><ol><li>æ–¹ä¾¿æ‰©å±•<ol><li>æ•°æ®ä¹‹é—´æ²¡æœ‰å…³ç³»</li></ol></li><li>å¤§æ•°æ®é‡ï¼Œé«˜æ€§èƒ½<ol><li>ä¸€ç§’å†™ 8 ä¸‡æ¬¡ï¼Œè¯»å– 11 ä¸‡ï¼ŒNoSQL çš„ç¼“å­˜è®°å½•çº§ï¼Œæ˜¯ä¸€ç§ç»†ç²’åº¦çš„ç¼“å­˜ï¼Œæ€§èƒ½ä¼šæ¯”è¾ƒé«˜ã€‚</li></ol></li><li>æ•°æ®ç±»å‹å¤šæ ·åŒ–<ol><li>ä¸éœ€è¦äº‹å…ˆè®¾è®¡æ•°æ®åº“ï¼Œéšå–éšç”¨ï¼Œå¦‚æœæ˜¯æ•°æ®é‡ååˆ†å¤§çš„è¡¨ï¼Œå¾ˆå¤šäººå°±æ— æ³•è®¾è®¡äº†ï¼</li></ol></li><li>ä¼ ç»Ÿ RDBMS å’Œ Nosql<ol><li>ä¼ ç»Ÿçš„ RDBMS<ol><li>ç»“æ„åŒ–ç»„ç»‡</li><li>SQL</li><li>æ•°æ®å’Œå…³ç³»éƒ½åœ¨å•ç‹¬çš„è¡¨ä¸­</li><li>DDLã€DMLã€DCLã€DQL</li><li>ä¸¥æ ¼çš„ä¸€è‡´æ€§</li><li>åŸºç¡€çš„äº‹åŠ¡</li><li>â€¦â€¦</li></ol></li><li>Nosql<ol><li>æ²¡æœ‰å›ºå®šçš„æŸ¥è¯¢è¯­è¨€</li><li>é”®å€¼å¯¹å­˜å‚¨ï¼Œåˆ—å­˜å‚¨ï¼Œæ–‡æ¡£å­˜å‚¨ï¼Œå›¾å½¢æ•°æ®åº“(ç¤¾äº¤å…³ç³»)</li><li>æœ€ç»ˆä¸€è‡´æ€§ï¼Œ</li><li>CAP å®šç†å’Œ BASE (å¼‚åœ°å¤šæ´»)åˆçº§æ¶æ„å¸ˆ!ï¼ˆç‹‚ç¥ç†å¿µ:åªè¦å­¦ä¸æ­»ï¼Œå°±å¾€æ­»é‡Œå­¦!)</li><li>é«˜æ€§èƒ½ï¼Œé«˜å¯ç”¨ï¼Œé«˜å¯æ‰©</li><li>â€¦â€¦</li></ol></li></ol></li></ol><p>ç›®å‰ï¼ŒNoSQL å’Œ RDBMS ç»“åˆèµ·æ¥ä½¿ç”¨ï¼Œä½¿æ€§èƒ½è¾¾åˆ°æœ€ä½³ã€‚</p><h3 id="NoSQL-çš„å››å¤§åˆ†ç±»"><a href="#NoSQL-çš„å››å¤§åˆ†ç±»" class="headerlink" title="NoSQL çš„å››å¤§åˆ†ç±»"></a>NoSQL çš„å››å¤§åˆ†ç±»</h3><p><strong>KVé”®å€¼å¯¹ï¼š</strong></p><ul><li>æ–°æµªï¼šRedis</li><li>ç¾å›¢ï¼šRedis +Tair</li><li>é˜¿é‡Œã€ç™¾åº¦ï¼šRedis + memecache</li></ul><p><strong>æ–‡æ¡£å‹æ•°æ®åº“ ( bson æ ¼å¼å’Œ json ä¸€æ ·)âˆ¶</strong></p><ul><li>MongoDB (ä¸€èˆ¬å¿…é¡»è¦æŒæ¡)<ul><li>MongoDB æ˜¯ä¸€ä¸ªåŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„æ•°æ®åº“ï¼ŒC++ç¼–å†™ï¼Œä¸»è¦ç”¨æ¥å¤„ç†å¤§é‡çš„æ–‡æ¡£!</li><li>MongoDB æ˜¯ä¸€ä¸ªä»‹äºå…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»å‹æ•°æ®ä¸­ä¸­é—´çš„äº§å“!MongoDBæ˜¯éå…³ç³»å‹æ•°æ®åº“ä¸­åŠŸèƒ½æœ€ä¸°å¯Œï¼Œæœ€åƒå…³ç³»å‹æ•°æ®åº“çš„!</li></ul></li><li>CouchDB</li></ul><p><strong>åˆ—å­˜å‚¨æ•°æ®åº“</strong></p><ul><li>HBase</li><li>åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</li></ul><p><strong>å›¾å…³ç³»æ•°æ®åº“</strong></p><p>å›¾å…³ç³»æ•°æ®åº“å­˜çš„æ˜¯å…³ç³»ï¼Œè€Œä¸æ˜¯å›¾å½¢ã€‚</p><p><img src="/journal/redis-tutoral/84ec07ee9fb648e5bac595e1c1ee250d.png" alt="img" loading="lazy"></p><h2 id="Redis-æ˜¯ä»€ä¹ˆ"><a href="#Redis-æ˜¯ä»€ä¹ˆ" class="headerlink" title="Redis æ˜¯ä»€ä¹ˆ"></a>Redis æ˜¯ä»€ä¹ˆ</h2><p>Redis ( Remote Dictionary Server )ï¼Œå³è¿œç¨‹å­—å…¸æœåŠ¡!</p><p>æ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨ ANSl C è¯­è¨€ç¼–å†™ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€Key-Value æ•°æ®åº“ï¼Œå¹¶æä¾›å¤šç§è¯­è¨€çš„ APIã€‚</p><h2 id="Redis-èƒ½åšä»€ä¹ˆ"><a href="#Redis-èƒ½åšä»€ä¹ˆ" class="headerlink" title="Redis èƒ½åšä»€ä¹ˆ"></a>Redis èƒ½åšä»€ä¹ˆ</h2><ol><li>å†…å­˜å­˜å‚¨ã€æŒä¹…åŒ–ï¼ˆrdbã€aofï¼‰</li><li>æ•ˆç‡é«˜ï¼Œå¯ä»¥ç”¨äºé«˜é€Ÿç¼“å­˜</li><li>å‘å¸ƒè®¢é˜…ç³»ç»Ÿ</li><li>åœ°å›¾ä¿¡æ¯åˆ†æ</li><li>è®¡æ—¶å™¨ã€è®¡æ•°å™¨</li><li>â€¦</li></ol><h2 id="å®‰è£…-Redis"><a href="#å®‰è£…-Redis" class="headerlink" title="å®‰è£… Redis"></a>å®‰è£… Redis</h2><p>Redis çš„å®‰è£…æœ‰ Windows ç‰ˆå’Œ Linux ç‰ˆï¼ŒWindows ç‰ˆè§£å‹ç›´æ¥è¿è¡Œ redis-server å³å¯ã€‚Linux ç‰ˆåªæä¾›æºä»£ç ï¼Œéœ€è¦è‡ªå·±é€šè¿‡ç¼–è¯‘æºä»£ç çš„æ–¹å¼æ¥å®‰è£…ã€‚</p><p>æˆ‘åœ¨å­¦ä¹ çš„æ—¶å€™ç”¨çš„æ˜¯ Linux ç‰ˆï¼Œå®‰è£…æ—¶å€™æœ‰å‡ ä¸ªæ­¥éª¤ã€‚</p><p>1ã€ä½¿ç”¨ wget å‘½ä»¤å»ä¸‹è½½ï¼Œå¦‚æœæç¤º <code>-bash: wget: command not found</code> ï¼Œåˆ™éœ€è¦å®‰è£…ä¸€ä¸‹ wgetï¼Œç„¶åå†ä¸‹è½½ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">31</span>  yum -y <span class="token function">install</span> <span class="token function">wget</span><span class="token number">33</span>  <span class="token function">wget</span> https://download.redis.io/releases/redis-6.2.5.tar.gz</code></pre><p>2ã€è§£å‹ï¼Œè¿›å…¥ç›®å½•</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">tar</span> zxvf redis-6.2.5.tar.gz <span class="token builtin class-name">cd</span> redis-6.2.5</code></pre><p>3ã€å®‰è£…ä¸€ä¸‹ c++ çš„ç¼–è¯‘å™¨ï¼Œå¦‚æœä½ æœ‰ï¼Œå°±ä¸ç”¨è£…ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">yum -y <span class="token function">install</span> gcc-c++</code></pre><p>4ã€ç¼–è¯‘å¹¶å®‰è£…</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">make</span> <span class="token assign-left variable">MALLOC</span><span class="token operator">=</span>libc<span class="token function">make</span> <span class="token function">install</span></code></pre><p>è¿™æ ·ï¼ŒRedis å°±å®‰è£…å®Œæˆäº†ã€‚</p><h2 id="å¯åŠ¨-Redis"><a href="#å¯åŠ¨-Redis" class="headerlink" title="å¯åŠ¨ Redis"></a>å¯åŠ¨ Redis</h2><p>Redis çš„é»˜è®¤çš„å®‰è£…ä½ç½®æ˜¯åœ¨ <code>/usr/local/bin</code> ï¼Œé‡Œé¢æœ‰å¦‚ä¸‹ä¿¡æ¯ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@localhost bin<span class="token punctuation">]</span><span class="token comment"># ls</span>redis-benchmark  redis-check-aof  redis-check-rdb  redis-cli  redis-sentinel  redis-server</code></pre><p>Redis çš„é…ç½®æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯ä¿å­˜åœ¨è§£å‹æ–‡ä»¶ä¸­ã€‚å»ºè®®å°†é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°ä¸Šé¢æåˆ°çš„è·¯å¾„å½“ä¸­ã€‚</p><p>ç”±äº Redis é»˜è®¤ä¸æ˜¯ä»¥åå°è¿è¡Œçš„ï¼Œæ‰€ä»¥è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ°ä»¥ä¸‹å±æ€§å¹¶é…ç½®æˆ yesã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment">################################# GENERAL #####################################</span><span class="token comment"># By default Redis does not run as a daemon. Use 'yes' if you need it.</span><span class="token comment"># Note that Redis will write a pid file in /var/run/redis.pid when daemonized.</span><span class="token comment"># When Redis is supervised by upstart or systemd, this parameter has no impact.</span>daemonize <span class="token function">yes</span></code></pre><p>ç„¶åå…ˆè¿è¡ŒæœåŠ¡ç«¯ï¼Œå†è¿è¡Œå®¢æˆ·ç«¯ï¼Œè¾“å…¥ ping å‘½ä»¤çœ‹çœ‹èƒ½ä¸èƒ½è”é€šï¼Œå¦‚æœè¿”å› PONGï¼Œè¯´æ˜è¿æ¥æˆåŠŸäº†ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@localhost bin<span class="token punctuation">]</span><span class="token comment"># ./redis-server redis_conf/redis.conf </span><span class="token punctuation">[</span>root@localhost bin<span class="token punctuation">]</span><span class="token comment"># redis-cli</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token function">ping</span>PONG<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span></code></pre><p>æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„ Redis è¿›ç¨‹</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep redis</span>root       <span class="token number">1372</span>      <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">16</span>:49 ?        00:00:00 ./redis-server <span class="token number">127.0</span>.0.1:6379root       <span class="token number">1376</span>   <span class="token number">1299</span>  <span class="token number">0</span> <span class="token number">16</span>:49 pts/0    00:00:00 redis-cliroot       <span class="token number">1400</span>   <span class="token number">1382</span>  <span class="token number">0</span> <span class="token number">16</span>:52 pts/1    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto redis</code></pre><h3 id="å°è¯•ä¸€ä¸‹"><a href="#å°è¯•ä¸€ä¸‹" class="headerlink" title="å°è¯•ä¸€ä¸‹"></a>å°è¯•ä¸€ä¸‹</h3><p>è¯•ç”¨ set å’Œ get å‘½ä»¤ï¼Œä¿å­˜ä¸€äº›ä¿¡æ¯å¹¶è·å–ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> name xiaoheheOK<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> get name<span class="token string">"xiaohehe"</span></code></pre><p>è¯•ç”¨ redis-benchmark å‘½ä»¤æ¥æµ‹è¯• redis çš„å•æœºæ€§èƒ½ï¼Œredis çš„æ€§èƒ½ä¼šå—åˆ°æœåŠ¡å™¨çš„åˆ¶çº¦ï¼Œæ¥æ„Ÿå—ä¸€ä¸‹é€Ÿåº¦ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># redis-benchmark -h localhost -p 6379 -c 100 -n 100000</span></code></pre><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ LPUSH çš„å¤„ç†è¯·æ±‚ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span> LPUSH <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>                                                     <span class="token number">100000</span> requests completed <span class="token keyword">in</span> <span class="token number">3.43</span> seconds  <span class="token number">100</span> parallel clients  <span class="token number">3</span> bytes payload  keep alive: <span class="token number">1</span>  <span class="token function">host</span> configuration <span class="token string">"save"</span><span class="token builtin class-name">:</span> <span class="token number">3600</span> <span class="token number">1</span> <span class="token number">300</span> <span class="token number">100</span> <span class="token number">60</span> <span class="token number">10000</span>  <span class="token function">host</span> configuration <span class="token string">"appendonly"</span><span class="token builtin class-name">:</span> no  multi-thread: noLatency by percentile distribution:<span class="token number">0.000</span>% <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token number">0.991</span> milliseconds <span class="token punctuation">(</span>cumulative count <span class="token number">2</span><span class="token punctuation">)</span><span class="token number">50.000</span>% <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token number">2.287</span> milliseconds <span class="token punctuation">(</span>cumulative count <span class="token number">50170</span><span class="token punctuation">)</span><span class="token number">75.000</span>% <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token number">2.895</span> milliseconds <span class="token punctuation">(</span>cumulative count <span class="token number">75016</span><span class="token punctuation">)</span><span class="token number">87.500</span>% <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token number">3.471</span> milliseconds <span class="token punctuation">(</span>cumulative count <span class="token number">87608</span><span class="token punctuation">)</span><span class="token number">93.750</span>% <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token number">3.951</span> milliseconds <span class="token punctuation">(</span>cumulative count <span class="token number">93756</span><span class="token punctuation">)</span><span class="token number">96.875</span>% <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token number">4.351</span> milliseconds <span class="token punctuation">(</span>cumulative count <span class="token number">96879</span><span class="token punctuation">)</span><span class="token number">98.438</span>% <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token number">4.695</span> milliseconds <span class="token punctuation">(</span>cumulative count <span class="token number">98458</span><span class="token punctuation">)</span><span class="token number">99.219</span>% <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token number">5.031</span> milliseconds <span class="token punctuation">(</span>cumulative count <span class="token number">99224</span><span class="token punctuation">)</span><span class="token number">99.609</span>% <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token number">5.399</span> milliseconds <span class="token punctuation">(</span>cumulative count <span class="token number">99610</span><span class="token punctuation">)</span><span class="token number">99.805</span>% <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token number">5.847</span> milliseconds <span class="token punctuation">(</span>cumulative count <span class="token number">99805</span><span class="token punctuation">)</span><span class="token number">99.902</span>% <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token number">6.303</span> milliseconds <span class="token punctuation">(</span>cumulative count <span class="token number">99903</span><span class="token punctuation">)</span><span class="token number">99.951</span>% <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token number">10.199</span> milliseconds <span class="token punctuation">(</span>cumulative count <span class="token number">99952</span><span class="token punctuation">)</span><span class="token number">99.976</span>% <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token number">10.535</span> milliseconds <span class="token punctuation">(</span>cumulative count <span class="token number">99976</span><span class="token punctuation">)</span><span class="token number">99.988</span>% <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token number">10.703</span> milliseconds <span class="token punctuation">(</span>cumulative count <span class="token number">99988</span><span class="token punctuation">)</span><span class="token number">99.994</span>% <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token number">10.791</span> milliseconds <span class="token punctuation">(</span>cumulative count <span class="token number">99994</span><span class="token punctuation">)</span><span class="token number">99.997</span>% <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token number">10.839</span> milliseconds <span class="token punctuation">(</span>cumulative count <span class="token number">99997</span><span class="token punctuation">)</span><span class="token number">99.998</span>% <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token number">10.871</span> milliseconds <span class="token punctuation">(</span>cumulative count <span class="token number">99999</span><span class="token punctuation">)</span><span class="token number">99.999</span>% <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token number">10.911</span> milliseconds <span class="token punctuation">(</span>cumulative count <span class="token number">100000</span><span class="token punctuation">)</span><span class="token number">100.000</span>% <span class="token operator">&lt;</span><span class="token operator">=</span> <span class="token number">10.911</span> milliseconds <span class="token punctuation">(</span>cumulative count <span class="token number">100000</span><span class="token punctuation">)</span></code></pre><p>æµ‹è¯• LPUSH æ—¶ï¼Œåœ¨ è¯·æ±‚æ¬¡æ•°ä¸º 100000 ï¼Œæ¯æ¬¡å†™å…¥ 3 ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œ100ä¸ªå®¢æˆ·ç«¯åŒæ—¶å¹¶å‘çš„æƒ…å†µä¸‹ï¼ŒèŠ±è´¹äº† 10.9 msï¼Œå¦‚æœä¸æ˜¯åœ¨è™šæ‹Ÿæœºä¹Ÿè®¸ä¼šæ›´å¿«ã€‚</p><h2 id="Redis-åŸºç¡€çŸ¥è¯†å’ŒåŸºæœ¬å‘½ä»¤"><a href="#Redis-åŸºç¡€çŸ¥è¯†å’ŒåŸºæœ¬å‘½ä»¤" class="headerlink" title="Redis åŸºç¡€çŸ¥è¯†å’ŒåŸºæœ¬å‘½ä»¤"></a>Redis åŸºç¡€çŸ¥è¯†å’ŒåŸºæœ¬å‘½ä»¤</h2><p>Redis é»˜è®¤æœ‰ 16 ä¸ªæ•°æ®åº“ï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æŸ¥çœ‹å¹¶ä¿®æ”¹æ•°æ®åº“ä¸ªæ•°ï¼Œé»˜è®¤ä½¿ç”¨çš„æ•°æ®åº“æ˜¯ç¬¬ 0 ä¸ªã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># Set the number of databases. The default database is DB 0, you can select</span><span class="token comment"># a different one on a per-connection basis using SELECT &lt;dbid> where</span><span class="token comment"># dbid is a number between 0 and 'databases'-1</span>databases <span class="token number">16</span></code></pre><p>select å‘½ä»¤æ˜¯åˆ‡æ¢æ•°æ®åº“ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token keyword">select</span> <span class="token number">4</span> <span class="token comment"># åˆ‡æ¢åˆ°4å·æ•°æ®åº“</span>OK<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">></span></code></pre><p>dbsize æŸ¥çœ‹æ•°æ®åº“å¤§å°ï¼Œæ¯ä¸€ç»„é”®å€¼å¯¹å ç”¨ä¸€ä¸ªå•ä½ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">></span> <span class="token builtin class-name">set</span> name xiaoheheOK<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">></span> get name<span class="token string">"xiaohehe"</span><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">></span> dbsize<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span></code></pre><p>æŸ¥çœ‹æ•°æ®åº“ä¸­çš„é”®</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">></span> keys *<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"name"</span><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">></span></code></pre><p>flushdb æ¸…ç©ºå½“å‰æ•°æ®åº“</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">></span> flushdbOK<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">></span> dbsize<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span></code></pre><p>flushall æ¸…ç©ºå…¨éƒ¨æ•°æ®åº“</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">></span> flushallOK<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">></span> <span class="token keyword">select</span> <span class="token number">0</span>OK<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> DBSIZE<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span></code></pre><p>exists åˆ¤æ–­å½“å‰çš„ key æ˜¯å¦å­˜åœ¨</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> exists name<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span></code></pre><p>move ç§»é™¤å½“å‰çš„ key åˆ°å…¶å®ƒæ•°æ®åº“ä¸­</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> name2 xiaoheheOK<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> move name2 <span class="token number">2</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token keyword">select</span> <span class="token number">2</span>OK<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">></span> get name2<span class="token string">"xiaohehe"</span></code></pre><p>expire è®¾ç½® key çš„è¿‡æœŸæ—¶é—´ï¼Œå•ä½æ˜¯ç§’</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">></span> expire name2 <span class="token number">10</span><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span></code></pre><p>ttl æŸ¥çœ‹ key çš„å‰©ä½™æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ï¼Œ-1 ä¸ºæ°¸ä¹…ï¼Œ-2 ä¸ºä¸å­˜åœ¨ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> ttl name2<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">6</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> ttl name2<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> ttl name2<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> ttl name2<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> ttl name2<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> -2</code></pre><p>type æŸ¥çœ‹ key ä¸­æ‰€ä¿å­˜çš„å€¼çš„ç±»å‹ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> age <span class="token number">20</span>OK<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">type</span> agestring</code></pre><h2 id="Redis-æ˜¯å•çº¿ç¨‹çš„"><a href="#Redis-æ˜¯å•çº¿ç¨‹çš„" class="headerlink" title="Redis æ˜¯å•çº¿ç¨‹çš„"></a>Redis æ˜¯å•çº¿ç¨‹çš„</h2><p>ä¸ºä»€ä¹ˆï¼Ÿ</p><p>æ˜ç™½ Redis æ˜¯å¾ˆå¿«çš„ï¼Œå› ä¸º Redis æ˜¯åŸºäºå†…å­˜æ“ä½œï¼ŒCPU å¹¶ä¸æ˜¯ Redis æ€§èƒ½ç“¶é¢ˆï¼ŒçœŸæ­£çš„ Redis çš„æ€§èƒ½ç“¶é¢ˆæ˜¯åœ¨æœºå™¨çš„å†…å­˜å’Œç½‘ç»œå¸¦å®½ï¼Œæ—¢ç„¶å¯ä»¥ä½¿ç”¨å•çº¿ç¨‹æ¥å®ç°ï¼Œå°±ä½¿ç”¨å•çº¿ç¨‹äº†ã€‚</p><blockquote><p>QPSï¼ˆQuery Per Secondï¼‰ï¼ŒQPS å…¶å®æ˜¯è¡¡é‡ååé‡ï¼ˆThroughputï¼‰çš„ä¸€ä¸ªå¸¸ç”¨æŒ‡æ ‡ï¼Œå°±æ˜¯è¯´æœåŠ¡å™¨åœ¨ä¸€ç§’çš„æ—¶é—´å†…å¤„ç†äº†å¤šå°‘ä¸ªè¯·æ±‚ â€”â€” æˆ‘ä»¬é€šå¸¸æ˜¯æŒ‡ HTTP è¯·æ±‚ï¼Œæ˜¾ç„¶æ•°å­—è¶Šå¤§ä»£è¡¨æœåŠ¡å™¨çš„è´Ÿè·è¶Šé«˜ã€å¤„ç†èƒ½åŠ›è¶Šå¼ºã€‚ä½œä¸ºå‚è€ƒï¼Œä¸€ä¸ªæœ‰ç€ç®€å•ä¸šåŠ¡é€»è¾‘ï¼ˆåŒ…æ‹¬æ•°æ®åº“è®¿é—®ï¼‰çš„ç¨‹åºåœ¨å•æ ¸å¿ƒè¿è¡Œæ—¶å¯ä»¥æä¾› 50 - 100 å·¦å³çš„ QPSï¼Œå³æ¯ç§’å¯ä»¥å¤„ç† 50 - 100 ä¸ªè¯·æ±‚ã€‚</p></blockquote><p>Redis æ˜¯ C è¯­è¨€å†™çš„ï¼Œå®˜æ–¹æä¾›çš„æ•°æ®ä¸º 100000+ çš„ QPSï¼Œå®Œå…¨ä¸æ¯”åŒæ ·æ˜¯ä½¿ç”¨ key-value çš„ Memecache å·®ã€‚</p><h2 id="Redis-ä¸ºä»€ä¹ˆå¾ˆå¿«"><a href="#Redis-ä¸ºä»€ä¹ˆå¾ˆå¿«" class="headerlink" title="Redis ä¸ºä»€ä¹ˆå¾ˆå¿«"></a>Redis ä¸ºä»€ä¹ˆå¾ˆå¿«</h2><p>è¯¯åŒº1âˆ¶é«˜æ€§èƒ½çš„æœåŠ¡å™¨ä¸€å®šæ˜¯å¤šçº¿ç¨‹çš„?</p><p>è¯¯åŒº2âˆ¶å¤šçº¿ç¨‹ä¸€å®šæ¯”å•çº¿ç¨‹æ•ˆç‡é«˜ï¼</p><p>Redis æ˜¯å°†æ‰€æœ‰çš„æ•°æ®å…¨éƒ¨æ”¾åœ¨å†…å­˜ä¸­çš„ï¼Œæ‰€ä»¥è¯´ä½¿ç”¨å•çº¿ç¨‹å»æ“ä½œæ•ˆç‡å°±æ˜¯æœ€é«˜çš„ï¼Œç”±äºå¤šçº¿ç¨‹æ¶‰åŠåˆ°ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè¿™å¯¹äºå†…å­˜ç³»ç»Ÿæ¥è¯´å°±æ˜¯æµªè´¹æ—¶é—´ï¼Œå¦‚æœæ²¡æœ‰ä¸Šä¸‹æ–‡åˆ‡æ¢æ•ˆç‡å°±æ˜¯æœ€é«˜çš„ï¼å¤šæ¬¡è¯»å†™éƒ½æ˜¯åœ¨ä¸€ä¸ª CPU ä¸Šçš„ï¼Œåœ¨å†…å­˜æƒ…å†µè¿™ä¸ªå°±æ˜¯æœ€ä½³çš„æ–¹æ¡ˆï¼</p><h2 id="å‘½ä»¤æŸ¥è¯¢"><a href="#å‘½ä»¤æŸ¥è¯¢" class="headerlink" title="å‘½ä»¤æŸ¥è¯¢"></a>å‘½ä»¤æŸ¥è¯¢</h2><p><a href="http://www.redis.cn/commands.html">http://www.redis.cn/commands.html</a></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> Redis çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> NoSQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€ä¸ªä»¿ bilibili çš„ web ç§»åŠ¨ç«¯ç½‘é¡µ</title>
      <link href="/journal/imitate-bilibili/"/>
      <url>/journal/imitate-bilibili/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>è¿™æ˜¯ä¸€ä¸ªä»¿ b ç«™çš„ç½‘é¡µ ï¼Œç‚¹æ­¤å¯ä»¥æŸ¥çœ‹æ•ˆæœå“Ÿ ã€‚ğŸ‘‰ <a href="http://124.71.21.146:8080/">ç‚¹å‡»æ­¤å¤„</a></p><p>æœ¬æ¬¡æ¨¡ä»¿ b ç«™ç§»åŠ¨ç«¯ç½‘é¡µçš„ç›®çš„æ˜¯å¯¹ç›®å‰å­¦ä¹ çš„ Vue çŸ¥è¯†è¿›è¡Œè¿ç”¨ï¼Œä»¥åŠç”¨ Vue-Cli è¿›è¡Œæ¨¡å—åŒ–å¼€å‘ã€‚é¡¹ç›®çš„éƒ¨åˆ†é¢„è§ˆæ•ˆæœå¦‚ä¸‹ã€‚</p><p><img src="/journal/imitate-bilibili/image-20210915104706151.png" alt="image-20210915104706151" loading="lazy"></p><span id="more"></span><h2 id="çŸ¥é“äº†ä»€ä¹ˆï¼Ÿ"><a href="#çŸ¥é“äº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="çŸ¥é“äº†ä»€ä¹ˆï¼Ÿ"></a>çŸ¥é“äº†ä»€ä¹ˆï¼Ÿ</h2><p>ä½¿ç”¨ Vue è¿™ç§æ¡†æ¶ï¼Œèƒ½å¤Ÿåƒåç«¯ä¸€æ ·åˆ†åŠŸèƒ½ã€‚å°±å¥½æ¯”ï¼Œåç«¯éœ€è¦å®ç°â€œå­¦ç”Ÿç®¡ç†æ¨¡å—â€ï¼Œè¿™ä¸ªæ¨¡å—çš„ä»£ç å†™åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼›å‰ç«¯ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œæ¯ä¸€ä¸ªæ¨¡å—çš„ç•Œé¢ä»£ç ä¹Ÿæ˜¯ä¿å­˜åœ¨æ–‡ä»¶ä¸­ã€‚ä»¥ä¸‹æ˜¯å‰åç«¯ä¸¤ç§é¡¹ç›®çš„å¯¹æ¯”æ–¹å¼</p><p>è¿™æ˜¯åç«¯çš„é¡¹ç›®ç»“æ„</p><p><img src="/journal/imitate-bilibili/image-20210915111221924.png" alt="image-20210915111221924" loading="lazy"></p><p>è¿™æ˜¯ä½¿ç”¨ Vue çš„é¡¹ç›®ç»“æ„</p><p><img src="/journal/imitate-bilibili/image-20210915110538346.png" alt="image-20210915110538346" loading="lazy"></p><h2 id="ä¸-jQuery-çš„æ¯”è¾ƒ"><a href="#ä¸-jQuery-çš„æ¯”è¾ƒ" class="headerlink" title="ä¸ jQuery çš„æ¯”è¾ƒ"></a>ä¸ jQuery çš„æ¯”è¾ƒ</h2><p>ç›¸å¯¹äºä½¿ç”¨åŸç”Ÿ JavaScript å’Œ jQueryï¼ŒçœŸçš„æ˜¯æ–¹ä¾¿å¤ªå¤šå¤ªå¤šäº†ã€‚jQuery è™½ç„¶å®ƒçš„ç›®æ ‡æ˜¯å†™çš„æ›´å°‘ï¼Œåšçš„æ›´å¤šï¼›å¦‚æœé¡¹ç›®è§„æ¨¡éå¸¸å¤§çš„è¯ï¼Œç”¨ jQuery å°±ä¼šæ‚ä¹±æ— ç« ï¼Œåé¢ä¿®æ”¹æˆ–ç»´æŠ¤èµ·æ¥ä¹Ÿè¾ƒéº»çƒ¦ã€‚æˆ‘è¿˜è®°å¾—æš‘å‡çš„æ—¶å€™å†™äº†ä¸€ä¸ªåŸºäº WebSocket çš„ Web åœ¨çº¿èŠå¤©ç³»ç»Ÿï¼Œç”¨ jQuery å»æ¸²æŸ“ html çš„ä»£ç å°±ä¼šæ˜¾å¾—ç‰¹åˆ«çš„è‡ƒè‚¿ã€‚</p><p>è™½ç„¶åœ¨å›½å†…æ¥çœ‹ç”¨ jQuery çš„é¡¹ç›®åœ¨æ¸æ¸å‡å°‘ï¼Œä½†æ˜¯è¿™ä¹Ÿå¹¶ä¸æ„å‘³ç€ jQuery å°±æ²¡å¿…è¦å­¦ä¹ ã€‚å› ä¸ºåœ¨æŸäº›å…¬å¸ç”¨çš„è¿˜æ˜¯ jQuery ã€‚</p><p>æ²¡æœ‰æœ€å¥½çš„æŠ€æœ¯ï¼Œåªæœ‰æœ€åˆé€‚çš„æŠ€æœ¯ã€‚</p><h2 id="æƒ³å½“ç„¶çš„è·¨åŸŸ"><a href="#æƒ³å½“ç„¶çš„è·¨åŸŸ" class="headerlink" title="æƒ³å½“ç„¶çš„è·¨åŸŸ"></a>æƒ³å½“ç„¶çš„è·¨åŸŸ</h2><blockquote><p>æˆ‘åŸæœ¬ä»¥ä¸ºåœ¨ç”Ÿäº§ç¯å¢ƒçš„ Vue é¡¹ç›®ä¹Ÿä¼šè‡ªåŠ¨è·¨åŸŸï¼Œç„¶è€Œå¹¶ä¸æ˜¯ï¼Œæˆ‘æƒ³å¤ªå¤šã€‚ğŸ¤¥ğŸ¤¥</p></blockquote><p>ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿè·¨åŸŸå°±æ˜¯ä»å½“å‰ç½‘ç«™å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œæ¥è®¿é—®å¦ä¸€ä¸ªç½‘ç«™ä¸Šçš„è¯·æ±‚ã€‚æ¯”å¦‚è¿™ä¸ªä»¿ b ç«™çš„é¡µé¢ï¼Œå®ƒå½“å‰çš„åŸŸæ˜¯ <code>124.71.21.146:8080</code> ï¼Œç„¶åè¿™äº›é¡µé¢æ•°æ®æ˜¯ä»å¦ä¸€ä¸ªåŸŸ <code>api.bilibili.com</code> ä¸‹æ¥è·å–çš„ã€‚äºæ˜¯ï¼Œè·¨åŸŸå°±äº§ç”Ÿäº†ã€‚</p><p><img src="/journal/imitate-bilibili/cross-domain1.jpg" alt="img" loading="lazy"></p><p>å½“æˆ‘å°è¯•ä»¥ç”Ÿäº§ç¯å¢ƒçš„æ–¹å¼éƒ¨ç½²åˆ° Vercel æ—¶å€™ï¼Œå‡ºç°äº†è·¨å› åŸŸçš„é—®é¢˜è€ŒæŠ¥é”™ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å“åº”å¤´ä¸­ <code>Access-Control-Allow-Origin</code> ä¸­ï¼Œä»…æœ‰åœ¨å½“å‰çš„ <code>api.bilibili.com</code> ä¸‹çš„åŸŸåæ‰èƒ½å¤Ÿè®¿é—®ã€‚</p><p>é‚£ä¸ºä»€ä¹ˆæˆ‘çš„å°±å¯ä»¥ï¼Ÿ</p><p>å› ä¸ºæˆ‘ç°åœ¨è¿è¡Œçš„æ¨¡å¼æ˜¯å¼€å‘æ¨¡å¼ï¼Œå¼€å‘æ¨¡å¼ä¼šå¯åŠ¨ä¸€å°ä»£ç†æœåŠ¡å™¨ï¼Œä»£ç†æ˜¯ç”± Node.js å¼€å¯çš„ï¼Œæ‰€ä»¥æˆ‘æ˜¯é€šè¿‡ä»£ç†çš„æ–¹å¼æ¥è§£å†³è·¨åŸŸçš„ã€‚</p><p><img src="/journal/imitate-bilibili/2F25278837-1313a0937d77524e.png" alt="img" loading="lazy"></p><p>ä»£ç†çš„è¿‡ç¨‹ç±»ä¼¼äºä¸Šå›¾ï¼Œåªæ˜¯ä¸­é—´çš„ä»£ç†è¿‡ç¨‹æ˜¯ç”± Node.js æ¥å¤„ç†çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å°èµ«èµ«çš„é¡¹ç›®æ—¥å¿— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue åŸºç¡€è¯­æ³•å¤ä¹ å°è®°</title>
      <link href="/journal/vue-getting-start/"/>
      <url>/journal/vue-getting-start/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Vue çš„å…¥é—¨ï¼Œå‘ç°ä¸æ˜¯å¾ˆéš¾ï¼Œå…¶å®åªè¦æ˜¯æœ‰å¯¹åº”çš„ç¼–ç¨‹è¯­è¨€åŸºç¡€ï¼Œå°†å…¶è¿›è¡Œç±»æ¯”ï¼Œå­¦ä¹ èµ·æ¥è¿˜æ˜¯å¾ˆç®€å•çš„ã€‚ä¸è¿‡å¼€å§‹çš„æ—¶å€™æ˜¯é€šè¿‡å¼•å…¥ vue.js æ¥å­¦ä¹ ï¼ŒåæœŸè¦çœŸæ­£çš„ä½¿ç”¨ Vue å»å¼€å‘ç½‘é¡µçš„æ—¶å€™ï¼Œå°†ä½¿ç”¨çš„æ˜¯ vite æˆ–è€…åŸºäº webpack çš„ vue è„šæ‰‹æ¶è¿›è¡Œå¼€å‘</p><p>åˆå­¦æ—¶å¾ˆç®€å•ï¼Œå¼•å…¥ä»¥ä¸‹ js æ–‡ä»¶</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><span id="more"></span><h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><blockquote><p>æˆ‘æ²¡ä½¿ç”¨ cdn ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯æœ¬åœ°çš„ vue.js æ–‡ä»¶</p></blockquote><p>é€šè¿‡ <code>&#123;&#123;&#125;&#125;</code> æ¥è¯»å– data å±æ€§ä¸­çš„å†…å®¹ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/vue.js<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/axios/dist/axios.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>&#123;&#123;msg&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">        <span class="token comment">// vue å¯¹è±¡</span><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>el<span class="token operator">:</span> <span class="token string">"#box"</span><span class="token punctuation">,</span>data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>msg<span class="token operator">:</span> <span class="token string">"Hello xiaohehe"</span><span class="token punctuation">,</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="æ¡ä»¶åˆ¤æ–­"><a href="#æ¡ä»¶åˆ¤æ–­" class="headerlink" title="æ¡ä»¶åˆ¤æ–­"></a>æ¡ä»¶åˆ¤æ–­</h2><p>æ¡ä»¶åˆ¤æ–­ä½¿ç”¨ v-ifã€v-else-ifã€v-else å°±å’Œä½¿ç”¨ ifã€else ifã€else ä¸€æ ·çš„ã€‚çŒœçŒœåœ¨ç½‘é¡µä¸Šè¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/vue.js<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/axios/dist/axios.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>msg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123;msg&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- if else --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>score &lt; 60<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¸åŠæ ¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>score &lt; 70<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>åŠæ ¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>score &lt; 80<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ™®é€š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>score &lt; 90<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è‰¯å¥½<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>score &lt; 100<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>ä¼˜ç§€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span>å®Œç¾<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">        <span class="token comment">// vue å¯¹è±¡</span><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>el<span class="token operator">:</span> <span class="token string">"#box"</span><span class="token punctuation">,</span>data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>score<span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h2><p>å¾ªç¯ä½¿ç”¨çš„æ˜¯ v-for å»å¾ªç¯çš„ï¼Œæ¯”å¦‚ <code>v-for=&quot;g in grades&quot;</code> å…¶ä¸­ v-for å³è¾¹çš„å€¼æ‰€ä»£è¡¨çš„æ„ä¹‰æ˜¯ï¼Œg åœ¨ grade çš„é‡Œé¢ã€‚ä¹Ÿå°±æ˜¯è¯´å°† grade æ•°ç»„ä¸­çš„å…ƒç´ æŒ¨ä¸ªéå†å‡ºæ¥ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/vue.js<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/axios/dist/axios.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>å§“å<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>å¹´é¾„<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>æ€§åˆ«<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>åˆ†æ•°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>æ“ä½œ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>g in grades<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>&#123;&#123;g.name&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>&#123;&#123;g.age&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>&#123;&#123;g.sex&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>&#123;&#123;g.score&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>javascript:void(0)<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>showDetail<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æŸ¥çœ‹è¯¦æƒ…<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">        <span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>el<span class="token operator">:</span> <span class="token string">"#box"</span><span class="token punctuation">,</span>data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>grades<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span>name<span class="token operator">:</span> <span class="token string">"xiaohehe"</span><span class="token punctuation">,</span>age<span class="token operator">:</span> <span class="token string">"22"</span><span class="token punctuation">,</span>sex<span class="token operator">:</span> <span class="token string">"ç”·"</span><span class="token punctuation">,</span>score<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>name<span class="token operator">:</span> <span class="token string">"xiaozhezhe"</span><span class="token punctuation">,</span>age<span class="token operator">:</span> <span class="token string">"22"</span><span class="token punctuation">,</span>sex<span class="token operator">:</span> <span class="token string">"ç”·"</span><span class="token punctuation">,</span>score<span class="token operator">:</span> <span class="token number">90</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">]</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="å•å‘æ•°æ®ç»‘å®šå’ŒåŒå‘æ•°æ®ç»‘å®š"><a href="#å•å‘æ•°æ®ç»‘å®šå’ŒåŒå‘æ•°æ®ç»‘å®š" class="headerlink" title="å•å‘æ•°æ®ç»‘å®šå’ŒåŒå‘æ•°æ®ç»‘å®š"></a>å•å‘æ•°æ®ç»‘å®šå’ŒåŒå‘æ•°æ®ç»‘å®š</h2><p>å•å‘ç»‘å®šä½¿ç”¨çš„æ˜¯ v-bind ï¼Œè€ŒåŒå‘ç»‘å®šä½¿ç”¨çš„æ˜¯ v-model ã€‚</p><h3 id="å•å‘æ•°æ®ç»‘å®š"><a href="#å•å‘æ•°æ®ç»‘å®š" class="headerlink" title="å•å‘æ•°æ®ç»‘å®š"></a>å•å‘æ•°æ®ç»‘å®š</h3><p>ä½¿ç”¨æ–¹æ³•ï¼š<code>v-bind:å±æ€§å=&quot;å€¼&quot;</code> ï¼Œæ¯”å¦‚æˆ‘è¦ç»™ h3 æ ‡ç­¾æ·»åŠ  title å±æ€§ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/vue.js<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/axios/dist/axios.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>msg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123;msg&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">        <span class="token comment">// vue å¯¹è±¡</span><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>el<span class="token operator">:</span> <span class="token string">"#box"</span><span class="token punctuation">,</span>data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>msg<span class="token operator">:</span> <span class="token string">"Hello xiaohehe"</span><span class="token punctuation">,</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>å½“ç„¶ï¼Œv-bind å¯ä»¥å»æ‰ï¼Œä¹Ÿå°±æ˜¯è¯´ h3 æ ‡ç­¾å¯¹ä¸­å¯ä»¥è¿™æ ·</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>msg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123;msg&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h5</span><span class="token punctuation">></span></span></code></pre><h3 id="åŒå‘æ•°æ®ç»‘å®š"><a href="#åŒå‘æ•°æ®ç»‘å®š" class="headerlink" title="åŒå‘æ•°æ®ç»‘å®š"></a>åŒå‘æ•°æ®ç»‘å®š</h3><p>ä½¿ç”¨æ–¹æ³•ï¼š<code>v-model=&quot;å€¼&quot;</code> ï¼Œå¸¸ç”¨äºå„ç§è¾“å…¥æ¡†ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/vue.js<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/axios/dist/axios.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- æ™®é€šè¾“å…¥æ¡† --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>value1<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span>&#123;&#123;value1&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- å•é€‰æ¡† --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>value2<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç”·<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>ç”·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>value2<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å¥³<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>å¥³<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span> ä½ çš„æ€§åˆ«æ˜¯ï¼š&#123;&#123;value2&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- å¤šé€‰æ¡† --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>value3<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å”±<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>å”±<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>value3<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>è·³<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>è·³<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>value3<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rap<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>rap<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>value3<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç¯®çƒ<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>ç¯®çƒ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span> ä½ çš„çˆ±å¥½æ˜¯ï¼š&#123;&#123;value3&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- ä¸‹æ‹‰é€‰æ‹©æ¡† --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>value4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¯·é€‰æ‹©ä½ çš„è€å©†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>é¦™é£æ™ºä¹ƒ<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>é¦™é£æ™ºä¹ƒ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>è¡€å°æ¿å¦¹å¦¹<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¡€å°æ¿å¦¹å¦¹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å¾¡å‚<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å¾¡å‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>è¹è‰è€å¸ˆ<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è¹è‰è€å¸ˆ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>ä½ é€‰æ‹©çš„è€å©†æ˜¯ï¼š&#123;&#123;value4&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">        <span class="token comment">// vue å¯¹è±¡</span><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>el<span class="token operator">:</span> <span class="token string">"#box"</span><span class="token punctuation">,</span>data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>value1<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>value2<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>value3<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>value4<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="äº‹ä»¶ä¸æ–¹æ³•"><a href="#äº‹ä»¶ä¸æ–¹æ³•" class="headerlink" title="äº‹ä»¶ä¸æ–¹æ³•"></a>äº‹ä»¶ä¸æ–¹æ³•</h2><p>ä½¿ç”¨ v-on æ¥è§¦å‘äº‹ä»¶ï¼Œå¦‚æœæ˜¯ç‚¹å‡»äº‹ä»¶ï¼Œåˆ™ <code>v-on:click=&quot;æ–¹æ³•å&quot;</code> ã€‚å¦‚æœè¦è‡ªå·±å†™ä¸€ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆéœ€è¦åœ¨ Vue å¯¹è±¡ä¸­ï¼Œåˆ›å»ºä¸€ä¸ª methods å±æ€§ ï¼Œé‡Œé¢å†™çš„æ˜¯æ–¹æ³•ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/vue.js<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/axios/dist/axios.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">v-on:</span>click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>showMessgae<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ‰“å¼€å¯¹è¯æ¡†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">        <span class="token comment">// vue å¯¹è±¡</span><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>el<span class="token operator">:</span> <span class="token string">"#box"</span><span class="token punctuation">,</span>data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>msg<span class="token operator">:</span> <span class="token string">"Hello xiaohehe"</span><span class="token punctuation">,</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token comment">// æ–¹æ³•</span>                methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token function-variable function">showMessgae</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>è¿˜æœ‰ä¸€ç§æ›´ç®€å•çš„å†™æ³•ï¼Œä½¿ç”¨ <code>@äº‹ä»¶å=&#39;æ–¹æ³•å&#39;</code> ï¼Œæ¯”å¦‚ @click=â€æ–¹æ³•åâ€ ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>showMessgae<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ‰“å¼€å¯¹è¯æ¡†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></code></pre><h2 id="è®¡ç®—å±æ€§"><a href="#è®¡ç®—å±æ€§" class="headerlink" title="è®¡ç®—å±æ€§"></a>è®¡ç®—å±æ€§</h2><p>å†™æ³•å’Œæ–¹æ³•ç±»ä¼¼ï¼Œä½†è¿˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚è®¡ç®—å±æ€§çš„æ€§è´¨å’Œå˜é‡ä¸€æ ·ï¼Œè€Œæ–¹æ³•åœ¨è°ƒç”¨çš„æ—¶å€™å¿…é¡»è¦åŠ ä¸€ä¸ªæ‹¬å·ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/vue.js<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/axios/dist/axios.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>&#123;&#123;showMessgae()&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>&#123;&#123;currentTimeStamp&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">        <span class="token comment">// vue å¯¹è±¡</span><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>el<span class="token operator">:</span> <span class="token string">"#box"</span><span class="token punctuation">,</span>data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>msg<span class="token operator">:</span> <span class="token string">"Hello xiaohehe"</span><span class="token punctuation">,</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token comment">// æ–¹æ³•</span>                methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token function-variable function">showMessgae</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token comment">// è®¡ç®—å±æ€§</span>                computed<span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token comment">// ES6 è¯­æ³•</span><span class="token function">currentTimeStamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="è¯·æ±‚å‘é€"><a href="#è¯·æ±‚å‘é€" class="headerlink" title="è¯·æ±‚å‘é€"></a>è¯·æ±‚å‘é€</h2><p>è¯·æ±‚å‘é€ä½¿ç”¨çš„æ˜¯ axios æ¥å‘é€çš„ã€‚å‘é€ get è¯·æ±‚å°± axios.get ï¼Œpost è¯·æ±‚æ—¶å°± axios.post ã€‚é€šè¿‡è°ƒç”¨ then æ–¹æ³•æ¥æ¥æ”¶æœåŠ¡ç«¯çš„å“åº”ï¼Œæœ€ç»ˆå±•ç¤ºåˆ°é¡µé¢ä¸Šã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/vue.js<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/axios/dist/axios.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>                æœ€è¿‘æ›´æ–°æ—¥æœŸï¼š&#123;&#123;weather.lastUpdate&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>                åŸå¸‚ï¼š&#123;&#123;weather.location.name&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>                åœ°ç‚¹ï¼š&#123;&#123;weather.location.path&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">        <span class="token comment">// vue å¯¹è±¡</span><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>el<span class="token operator">:</span> <span class="token string">"#box"</span><span class="token punctuation">,</span>data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>weather<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token function-variable function">mounted</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"http://weather.cma.cn/api/weather/"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>weather <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="è‡ªå®šä¹‰ç»„ä»¶ä¸æ•°æ®ä¼ é€’"><a href="#è‡ªå®šä¹‰ç»„ä»¶ä¸æ•°æ®ä¼ é€’" class="headerlink" title="è‡ªå®šä¹‰ç»„ä»¶ä¸æ•°æ®ä¼ é€’"></a>è‡ªå®šä¹‰ç»„ä»¶ä¸æ•°æ®ä¼ é€’</h2><p>è‡ªå®šä¹‰ç»„ä»¶å°±åƒæ˜¯ç¼–ç¨‹ä¸­çš„æ–¹æ³•å°è£…ï¼Œå°±æ˜¯å°†ä½¿ç”¨é¢‘ç¹ï¼Œé‡å¤çš„ä»£ç å°†å…¶å°è£…åˆ°æ–¹æ³•ä¸­ã€‚<code>Vue.component</code> å°±å’Œå®ƒç±»ä¼¼ã€‚è¿™æ ·ä¸€æ¥ï¼Œå‰ç«¯çš„ä»£ç ä¹Ÿå¯ä»¥é€šè¿‡æ¨¡å—åŒ–çš„æ–¹å¼å¼€å‘äº†ã€‚</p><p>é€šè¿‡å®ƒæ¥æ³¨å†Œä¸€ä¸ªç»„ä»¶ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/vue.js<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/axios/dist/axios.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- è‡ªå®šä¹‰ç»„ä»¶ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>grade-xiaohehe</span> <span class="token attr-name">@details</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getDetail<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">v-bind:</span>grades</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>grades<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>grade-xiaohehe</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><span class="token comment">// æ³¨å†Œç»„ä»¶</span>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'grade-xiaohehe'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'grades'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// çˆ¶ä¼ å­ä½¿ç”¨ props </span>template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;table border="1">&lt;thead>&lt;tr>&lt;th>å§“å&lt;/th>&lt;th>å¹´é¾„&lt;/th>&lt;th>æ€§åˆ«&lt;/th>&lt;th>åˆ†æ•°&lt;/th>&lt;th>æ“ä½œ&lt;/th>&lt;/tr>&lt;/thead>&lt;tbody>&lt;tr v-for="g in grades">&lt;td>&#123;&#123;g.name&#125;&#125;&lt;/td>&lt;td>&#123;&#123;g.age&#125;&#125;&lt;/td>&lt;td>&#123;&#123;g.sex&#125;&#125;&lt;/td>&lt;td>&#123;&#123;g.score&#125;&#125;&lt;/td>&lt;a href="javascript:void(0)" @click="showDetail">æŸ¥çœ‹è¯¦æƒ…&lt;/a>&lt;/tr>&lt;/tbody>&lt;/table></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token function">showDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">"details"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>name<span class="token operator">:</span> <span class="token string">"xiaohehe"</span><span class="token punctuation">,</span> score<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å­ä¼ çˆ¶ä½¿ç”¨ $emit æ–¹æ³•ï¼Œé€šè¿‡è§¦å‘è‡ªå®šä¹‰äº‹ä»¶æ¥ä¼ å€¼ï¼Œ</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// vue å¯¹è±¡</span><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>el<span class="token operator">:</span> <span class="token string">"#box"</span><span class="token punctuation">,</span>data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>weather<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token function">getDetail</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"å§“åï¼š"</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">", å¾—åˆ†ï¼š"</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>score<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">mounted</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"http://weather.cma.cn/api/weather/"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>weather <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>åœ¨ä¸Šè¿°çš„ä»£ç ä¸­ï¼Œæœ‰å‡ºç°æ•°æ®ä¼ é€’ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„â€œçˆ¶ä¼ å­â€å’Œâ€œå­ä¼ çˆ¶â€äº†ã€‚</p><p>å¦‚æœæ˜¯ä» Vue å®ä¾‹ä¸­çš„æ•°æ®ä¼ é€’åˆ°è‡ªå·±æ³¨å†Œçš„ç»„ä»¶ä¸­ï¼ˆçˆ¶ä¼ å­ï¼‰ï¼Œåˆ™éœ€è¦ä½¿ç”¨ propsï¼›å¦‚æœæ˜¯å­ä¼ çˆ¶åˆ™ä½¿ç”¨ $emit æ–¹æ³•ï¼Œé€šè¿‡è§¦å‘è‡ªå®šä¹‰äº‹ä»¶æ¥ä¼ å€¼ã€‚</p><h2 id="æ’æ§½"><a href="#æ’æ§½" class="headerlink" title="æ’æ§½"></a>æ’æ§½</h2><p>åœ¨æ³¨å†Œçš„ç»„ä»¶ä¸­ä¸ªï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨è‡ªå·±æ³¨å†Œçš„ç»„ä»¶ä¸­ä½¿ç”¨ <code>slot</code> æ ‡ç­¾å¯¹ç”¨äºæ³¨å†Œç»„ä»¶ã€‚å¦‚æœè¦æ’å…¥ä¸€æ®µ html çš„ä»£ç åœ¨æ’æ§½ä¸­ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ <code>template</code> æ ‡ç­¾å¯¹å°†éœ€è¦æ’å…¥çš„ä»£ç æ”¾åˆ°é‡Œé¢å»ï¼Œè¿™æ ·æ‰ä¼šç”Ÿæ•ˆã€‚</p><p>å¦‚æœæ’æ§½ä¸­æ”¾å…¥çš„æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„ç»„ä»¶çš„è¯ï¼Œé‚£ä¹ˆå°±ä¸è¦ç”¨ <code>template</code> æ ‡ç­¾å¯¹å°†å…¶åŒ…è£¹èµ·æ¥ã€‚</p><p>å¦‚æœåœ¨æˆ‘ä»¬è‡ªå®šä¹‰çš„ç»„ä»¶ä¸­å®šä¹‰å¤šä¸ªæ’æ§½ï¼Œé‚£ä¹ˆåˆ™éœ€è¦å¯¹æ¯ä¸€ä¸ªæ’æ§½è¿›è¡Œå‘½åï¼Œç„¶åé€šè¿‡æ’æ§½åå­—æ¥å¯¹åº”å…¶æ’æ§½ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/vue.js<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/axios/dist/axios.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- æ’æ§½ --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>weather-days</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>weather-head<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>æ—¥æœŸ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>å¤©æ°”<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>é£å‘<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>æ¸©åº¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>ç™½å¤©é£é€Ÿ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>å¤œé—´é£é€Ÿ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>weather-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>detail in weather.daily<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>&#123;&#123;detail.date&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>&#123;&#123;detail.dayText&#125;&#125; è½¬ &#123;&#123;detail.nightText&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>&#123;&#123;detail.dayWindDirection&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>&#123;&#123;detail.low&#125;&#125; - &#123;&#123;detail.high&#125;&#125;â„ƒ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>&#123;&#123;detail.dayWindScale&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>&#123;&#123;detail.nightWindScale&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>weather-days</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">        <span class="token comment">// æ³¨å†Œæ—¥æœŸç»„ä»¶</span>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'weather-days'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;table border="1">&lt;thead>&lt;slot name="weather-head">&lt;/slot>&lt;/thead>&lt;tbody>&lt;slot name="weather-item">&lt;/slot>&lt;/tbody>&lt;/table></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">// vue å¯¹è±¡</span><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>el<span class="token operator">:</span> <span class="token string">"#box"</span><span class="token punctuation">,</span>data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>weather<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function-variable function">mounted</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"http://weather.cma.cn/api/weather/"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>weather <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jvm å…¥é—¨</title>
      <link href="/journal/jvm-getting-start/"/>
      <url>/journal/jvm-getting-start/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>è·Ÿç€ç‹‚ç¥è€å¸ˆå…¥é—¨æ‰€æ€»ç»“çš„ç¬”è®°ã€‚</p></blockquote><h2 id="jvm-æ˜¯ä»€ä¹ˆ"><a href="#jvm-æ˜¯ä»€ä¹ˆ" class="headerlink" title="jvm æ˜¯ä»€ä¹ˆ"></a>jvm æ˜¯ä»€ä¹ˆ</h2><p>jvm å…¨ç§°å« java virtual machine ï¼Œä¹Ÿå« Java è™šæ‹Ÿæœº ï¼ŒJava è™šæ‹Ÿæœºæ˜¯ä¸€ä¸ªä½¿ç”¨ c++ ç¼–å†™çš„ï¼Œç»™ Java ç¨‹åºè¿è¡Œçš„ä¸€ä¸ªç¯å¢ƒ ã€‚å®ƒè¿è¡Œäºæ“ä½œç³»ç»Ÿä¹‹ä¸Š ã€‚</p><p>jvm æœ‰å¾ˆå¤šç§ï¼Œç›®å‰æˆ‘æ‰€ä½¿ç”¨çš„ jvm æ˜¯ HotSpot ã€‚é™¤äº† Hotspot ï¼Œè¿˜æœ‰ Microsoft JDKï¼ŒOpen JDK ç­‰ç­‰ç­‰ç­‰</p><p>æ€ä¹ˆè¯´å‘¢ï¼Ÿjvm æ˜¯ä¸€ç§æ¨¡å‹ï¼Œä¸€ç§è§„èŒƒ ã€‚è€Œ HotSpot ã€Microsoft JDKï¼ŒOpen  JDK æ˜¯ä¸€ç§å®ç° ã€‚</p><span id="more"></span><h2 id="æ¢ç´¢-jvm-çš„å†…éƒ¨æ„é€ "><a href="#æ¢ç´¢-jvm-çš„å†…éƒ¨æ„é€ " class="headerlink" title="æ¢ç´¢ jvm çš„å†…éƒ¨æ„é€ "></a>æ¢ç´¢ jvm çš„å†…éƒ¨æ„é€ </h2><p>åœ¨ä¸€ä¸ª jvm ä¸­ ï¼Œæœ‰è¿™äº›éƒ¨ä»¶ï¼Œåˆ†åˆ«æ˜¯â€œç±»åŠ è½½å™¨â€ã€â€œæ ˆâ€ã€â€œå †â€ã€â€œæ–¹æ³•åŒºâ€ã€â€œç¨‹åºè®¡æ•°å™¨â€ã€â€æœ¬åœ°æ–¹æ³•æ ˆâ€œã€â€œæ‰§è¡Œå¼•æ“â€ã€â€œæœ¬åœ°æ–¹æ³•æ¥å£â€å’Œâ€œæœ¬åœ°æ–¹æ³•åº“â€ã€‚</p><p><img src="/journal/jvm-getting-start/image-20210826100704331.png" alt="image-20210826100704331" loading="lazy"></p><p>jvm çš„å¤§è‡´æ¶æ„å¦‚å›¾æ‰€ç¤º ã€‚</p><!-- more --><h3 id="ç±»åŠ è½½å™¨"><a href="#ç±»åŠ è½½å™¨" class="headerlink" title="ç±»åŠ è½½å™¨"></a>ç±»åŠ è½½å™¨</h3><p>ä¸€ä¸ª class æ–‡ä»¶çš„åŠ è½½ï¼Œé¦–å…ˆæ˜¯éœ€è¦ç»è¿‡åŠ è½½å™¨ ClassLoader è¿›è¡ŒåŠ è½½ï¼Œå½“åŠ è½½å®Œæˆä¹‹åï¼Œæ”¾åˆ°äº†æ–¹æ³•åŒºã€‚å¦‚æœè¦åˆ›å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œå°±ä»æ–¹æ³•åŒºè°ƒå–ï¼Œå°†è¯¥å®ä¾‹å¯¹è±¡å­˜å…¥å †ä¸­ ï¼Œç„¶åé€šè¿‡å¼•ç”¨æ¥è·å–å¯¹è±¡ã€‚</p><p><img src="/journal/jvm-getting-start/20170926221307_4062.png" alt="img" loading="lazy"></p><p>ç±»çš„åŠ è½½å¹¶ä¸æ˜¯é‚£ä¹ˆçš„ç®€å•ï¼Œå®ƒæœ‰ä¸€å¥—æœºåˆ¶ï¼Œå«â€œåŒäº²å§”æ´¾æœºåˆ¶â€ ã€‚åœ¨ Java ä¸­ï¼Œç±»çš„åŠ è½½å™¨åˆ†ä¸º 4 ç±»ï¼Œå³â€œå¯åŠ¨ç±»ï¼ˆæ ¹ï¼‰åŠ è½½å™¨â€ã€â€œæ‰©å±•ç±»åŠ è½½å™¨â€ã€â€œåº”ç”¨ç¨‹åºï¼ˆç³»ç»Ÿç±»ï¼‰åŠ è½½å™¨â€ã€â€œç”¨æˆ·è‡ªå®šä¹‰åŠ è½½å™¨â€ ã€‚</p><p>å…¶ä¸­ï¼Œå‰ä¸‰ä¸ªåŠ è½½å™¨éå¸¸é‡è¦ï¼š</p><p>æ ¹åŠ è½½å™¨åˆå« Bootstrap åŠ è½½å™¨ ï¼šä¸»è¦æ˜¯åŠ è½½ rt.jar é‡Œé¢çš„ç±» ï¼Œç„¶ååŠ è½½åˆ°ç±»åŠ è½½å™¨ä¸­ã€‚</p><p>æ‰©å±•åŠ è½½å™¨</p><p>è¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„å®éªŒï¼Œæ—è¾¹çš„æ³¨é‡Šæ˜¯è¿è¡Œçš„ç»“æœ</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Car</span> car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Car</span><span class="token punctuation">></span></span> aClass <span class="token operator">=</span> car<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">ClassLoader</span><span class="token punctuation">.</span><span class="token function">getSystemClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// sun.misc.Launcher$AppClassLoader@18b4aac2 </span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>aClass<span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// sun.misc.Launcher$AppClassLoader@18b4aac2</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>aClass<span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// sun.misc.Launcher$ExtClassLoader@7ea987ac</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>aClass<span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>getSystemClassLoader()ï¼šæ˜¯è·å–åº”ç”¨ç¨‹åºåŠ è½½å™¨ï¼Œä¹Ÿå«ç³»ç»ŸåŠ è½½å™¨ã€‚å¦‚æœåº”ç”¨ç¨‹åºä¸­æ²¡æœ‰è‡ªå®šä¹‰è¿‡è‡ªå·±çš„ç±»åŠ è½½å™¨ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è¿™ä¸ªå°±æ˜¯ç¨‹åºä¸­é»˜è®¤çš„ç±»åŠ è½½å™¨ã€‚</p><p>getClassLoader()ï¼šè·å–å½“å‰ç±»çš„åŠ è½½å™¨ï¼Œæ­¤æ—¶çš„åŠ è½½å™¨æ˜¯ AppClassLoader ã€‚</p><p>getParent()ï¼šè·å–çˆ¶åŠ è½½å™¨ï¼Œæ­¤æ—¶çš„çˆ¶åŠ è½½å™¨æ˜¯ ExtClassLoader ï¼Œå«æ‰©å±•ç±»åŠ è½½å™¨ã€‚å¦‚æœå†è°ƒç”¨çˆ¶åŠ è½½å™¨åˆ™è¿”å›çš„æ˜¯ null ã€‚è¿”å›ä¸º null çš„åŸå› æ˜¯ Bootstrap ç±»åŠ è½½å™¨ï¼Œæ˜¯ç”¨ C++ å®ç°çš„ï¼Œæ˜¯è™šæ‹Ÿæœºè‡ªèº«çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚æœè·å–å®ƒçš„å¯¹è±¡ï¼Œå°†ä¼šè¿”å› null ã€‚</p><blockquote><p>æ³¨æ„ï¼Œè¿™é‡Œæ‰€è°“çš„çˆ¶åŠ è½½å™¨å’Œå½“å‰çš„åŠ è½½å™¨ï¼Œä¸æ˜¯ç»§æ‰¿å…³ç³» ã€‚</p></blockquote><h4 id="åŒäº²å§”æ´¾æœºåˆ¶"><a href="#åŒäº²å§”æ´¾æœºåˆ¶" class="headerlink" title="åŒäº²å§”æ´¾æœºåˆ¶"></a>åŒäº²å§”æ´¾æœºåˆ¶</h4><p>è¿™é‡Œæœ‰ä¸€ä¸ªå®éªŒï¼Œå‡å¦‚æˆ‘åœ¨è‡ªå·±æ–°å»ºçš„å·¥ç¨‹ä¸­æ–°å»ºä¸€ä¸ª <code>java.lang.String</code> ç±» ã€‚è¿™å…¶å®æ˜¯ä¸ä¼šå†²çªçš„ï¼Œç„¶åæˆ‘ä»¬å† String ç±»ä¸­åˆ›å»ºä¸€ä¸ª main æ–¹æ³•ï¼Œç„¶åè¿è¡Œè¯¥ç±»ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">java<span class="token punctuation">.</span>lang</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">String</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ç»“æœï¼ŒæŠ¥äº†ä¸€ä¸ªå¾ˆæ˜¯ä»¤äººä¸ç†è§£çš„é”™è¯¯ã€‚è¯´æˆ‘çš„ String ç±»ä¸­å±…ç„¶æ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œå¯æ˜¯æˆ‘æ˜æ˜æœ‰ main æ–¹æ³•å‘€ï¼Œè¿™æ˜¯ä»€ä¹ˆé¬¼ï¼</p><pre class="language-bash" data-language="bash"><code class="language-bash">é”™è¯¯: åœ¨ç±» java.lang.String ä¸­æ‰¾ä¸åˆ° main æ–¹æ³•, è¯·å°† main æ–¹æ³•å®šä¹‰ä¸º:   public static void main<span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>å¦åˆ™ JavaFX åº”ç”¨ç¨‹åºç±»å¿…é¡»æ‰©å±•javafx.application.Application</code></pre><p>å‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åŒäº²å§”æ´¾æœºåˆ¶é€ æˆçš„ï¼Œè¯´ç™½äº†ï¼ŒåŒäº²å§”æ´¾æœºåˆ¶å°±æ˜¯ä¿è¯ Java ä¸­å†…ç½®çš„ä¸€äº›ä»£ç ä¿è¯æ˜¯å®‰å…¨çš„ ï¼Œè¿™ä¹Ÿæ˜¯ç±»åŠ è½½çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚</p><blockquote><p>æ³¨æ„ï¼Œè¿™é‡Œæ‰€è°“çš„çˆ¶åŠ è½½å™¨å’Œå½“å‰çš„åŠ è½½å™¨ï¼Œä¸æ˜¯ç»§æ‰¿å…³ç³» ã€‚</p></blockquote><p>å‡è®¾ï¼Œæˆ‘ä»¬çš„ <code>java.lang.String</code> è¦è¢«åŠ è½½æ—¶ï¼Œåœ¨ä¸è€ƒè™‘æˆ‘ä»¬è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œé¦–å…ˆä¼šåœ¨ AppClassLoader ä¸­æ£€æŸ¥æ˜¯å¦åŠ è½½è¿‡ï¼Œå¦‚æœæœ‰é‚£å°±ä¸ç”¨å†åŠ è½½äº†ã€‚</p><p>å¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆä¼šæ‹¿åˆ°çˆ¶åŠ è½½å™¨ï¼Œç„¶åè°ƒç”¨çˆ¶åŠ è½½å™¨çš„ loadClass æ–¹æ³•ã€‚çˆ¶åŠ è½½å™¨ä¸­åŒç†ä¹Ÿä¼šå…ˆæ£€æŸ¥è‡ªå·±æ˜¯å¦å·²ç»åŠ è½½è¿‡ï¼Œå¦‚æœè¿˜æ²¡æœ‰å†å¾€ä¸Šï¼Œç›´åˆ°åˆ°è¾¾ Bootstrap ç±»åŠ è½½å™¨ä¹‹å‰ï¼Œéƒ½æ˜¯åœ¨æ£€æŸ¥æ˜¯å¦åŠ è½½è¿‡ï¼Œå¹¶ä¸ä¼šé€‰æ‹©è‡ªå·±å»åŠ è½½ã€‚ç›´åˆ° Bootstrap ç±»åŠ è½½å™¨ï¼Œå·²ç»æ²¡æœ‰çˆ¶åŠ è½½å™¨äº†ï¼Œè¿™æ—¶å€™å¼€å§‹è€ƒè™‘è‡ªå·±æ˜¯å¦èƒ½åŠ è½½äº†ã€‚</p><blockquote><p>æ­¤ Bootstrap éå½¼ Bootstrap</p></blockquote><p>ç„¶åå°±å¼€å§‹å‘ä¸‹æ‰¾ã€‚é€šè¿‡æ ¹åŠ è½½å™¨å‘ç° rt.jar ä¸­å‘ç°äº† <code>java.lang.String</code> ï¼Œæ‰¾åˆ°äº†ä¹‹åå°±ä¸ä¼šå‘ä¸‹ç»§ç»­å¼€å§‹æ‰¾äº†ã€‚å¦‚æœæ²¡æ‰¾åˆ°ï¼Œä»–å°±åœ¨æ‰©å±•åŠ è½½å™¨ä¸­åŠ è½½ï¼Œå¦‚æœæœ€ååœ¨åº”ç”¨ç¨‹åºåŠ è½½å™¨ä¸­è¿˜æ²¡æ‰¾åˆ°ï¼ˆä¸è€ƒè™‘è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼‰ï¼Œé‚£å°±ä¼šæŠ›å‡º <code>ClassNotFoundException</code> å¼‚å¸¸ã€‚</p><p>ç±»åŠ è½½æ—¶çš„è¿è¡Œå›¾å¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://img-blog.csdnimg.cn/20201217213314510.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2NvZGV5YW5iYW8=,size_16,color_FFFFFF,t_70" alt="ç±»åŠ è½½çš„è¿‡ç¨‹" loading="lazy"></p><p>åŠ è½½è¿‡ç¨‹çš„ç›¸å…³ä»£ç å¦‚ä¸‹æ‰€ç¤º</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">protected</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> <span class="token function">loadClass</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">boolean</span> resolve<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token function">getClassLoadingLock</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// é¦–å…ˆæ£€æŸ¥è¿™ä¸ªç±»æ˜¯å¦å·²ç»åŠ è½½</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> c <span class="token operator">=</span> <span class="token function">findLoadedClass</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">long</span> t0 <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    c <span class="token operator">=</span> parent<span class="token punctuation">.</span><span class="token function">loadClass</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¦‚æœæœ‰çˆ¶åŠ è½½å™¨å°±åŠ è½½</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                    c <span class="token operator">=</span> <span class="token function">findBootstrapClassOrNull</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ²¡æœ‰æ‰¾åˆ°æ ¹å¯åŠ¨å™¨ï¼ˆBootstrapï¼‰</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// ClassNotFoundException thrown if class not found</span>                <span class="token comment">// from the non-null parent class loader</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// If still not found, then invoke findClass in order</span>                <span class="token comment">// to find the class.</span>                <span class="token keyword">long</span> t1 <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                c <span class="token operator">=</span> <span class="token function">findClass</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// this is the defining class loader; record the stats</span>                <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span></span>PerfCounter</span><span class="token punctuation">.</span><span class="token function">getParentDelegationTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addTime</span><span class="token punctuation">(</span>t1 <span class="token operator">-</span> t0<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span></span>PerfCounter</span><span class="token punctuation">.</span><span class="token function">getFindClassTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addElapsedTimeFrom</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span></span>PerfCounter</span><span class="token punctuation">.</span><span class="token function">getFindClasses</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">resolveClass</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> c<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="æ²™ç®±å®‰å…¨æœºåˆ¶"><a href="#æ²™ç®±å®‰å…¨æœºåˆ¶" class="headerlink" title="æ²™ç®±å®‰å…¨æœºåˆ¶"></a><a href="https://blog.csdn.net/qq_30336433/article/details/83268945">æ²™ç®±å®‰å…¨æœºåˆ¶</a></h4><p>ğŸ‘† å‚è§ï¼ŒJava ä¸­çš„å®‰å…¨æ²™ç®±æ¨¡å‹</p><h3 id="Native-å’Œæœ¬åœ°æ–¹æ³•æ ˆ"><a href="#Native-å’Œæœ¬åœ°æ–¹æ³•æ ˆ" class="headerlink" title="Native å’Œæœ¬åœ°æ–¹æ³•æ ˆ"></a>Native å’Œæœ¬åœ°æ–¹æ³•æ ˆ</h3><h4 id="native"><a href="#native" class="headerlink" title="native"></a>native</h4><p>ä½ æˆ–è®¸æœ‰çœ‹è¿‡è¿™ç§â€œå¥‡è‘©â€çš„å†™æ³•ï¼Œæ¯”å¦‚æ‰“å¼€ä¸€ä¸ª Object ç±»ã€‚çœ‹èµ·æ¥å¾ˆåƒæ¥å£ï¼Œæ²¡æœ‰æ–¹æ³•ä½“ï¼Œå´åˆæ²¡æœ‰æŠ¥é”™ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Object</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">native</span> <span class="token keyword">void</span> <span class="token function">registerNatives</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token punctuation">&#123;</span>        <span class="token function">registerNatives</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">native</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> <span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">native</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">native</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//.......</span>    <span class="token punctuation">&#125;</span></code></pre><p>è¿™ï¼Œå°±æ˜¯æœ¬åœ°æ–¹æ³•ã€‚ä¸è¿‡æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±å†™ä¸€ä¸ªè¿™æ ·çš„æ–¹æ³•ï¼Œä¸è¿‡æˆ‘ä»¬è‡ªå·±å†™çš„æ˜¯æ²¡æœ‰ç”¨çš„ã€‚è°ƒç”¨å®ƒä¼šæŠ¥é”™ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">native</span> <span class="token keyword">void</span> <span class="token function">helloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å¦‚æœæ–¹æ³•å¸¦äº† native å…³å¥å­—ï¼Œå°±æ²¡æœ‰æ–¹æ³•ä½“ï¼Œè¯´æ˜ Java çš„ä½œç”¨èŒƒå›´è¾¾ä¸åˆ°äº†ã€‚è¿›å…¥æœ¬åœ°æ–¹æ³•æ ˆï¼Œè°ƒç”¨ JNIï¼ˆæœ¬åœ°æ–¹æ³•æœ¬åœ°æ¥å£ï¼‰ï¼Œä»è€Œå¯ä»¥è°ƒç”¨ C ã€C++ åº•å±‚çš„ä»£ç ã€‚ </p><p>JNI ä½œç”¨ï¼šæ‰©å±• Java çš„ä½¿ç”¨ï¼Œèåˆä¸åŒçš„ç¼–ç¨‹è¯­è¨€ä¸º Java æ‰€ç”¨ ã€‚åœ¨ Java è¯ç”Ÿçš„æ—¶å€™ï¼Œå½“æ—¶ C ã€C++ æ¨ªè¡Œï¼Œé‚£æ—¶æƒ³è¦ç«‹è¶³å°±å¿…é¡»è¦æœ‰ C ã€C++ çš„èƒ½åŠ›ï¼Œäºæ˜¯å°±æœ‰äº† Native å…³é”®å­—ã€‚</p><h4 id="æœ¬åœ°æ–¹æ³•æ ˆ"><a href="#æœ¬åœ°æ–¹æ³•æ ˆ" class="headerlink" title="æœ¬åœ°æ–¹æ³•æ ˆ"></a>æœ¬åœ°æ–¹æ³•æ ˆ</h4><p>å®ƒçš„å…·ä½“åšæ³•æ˜¯åœ¨ Native Method Stackï¼ˆæœ¬åœ°æ–¹æ³•æ ˆï¼‰ä¸­ç™»è®° native æ–¹æ³•ï¼Œåœ¨æ‰§è¡Œå¼•æ“æ‰§è¡Œçš„æ—¶å€™ï¼ŒåŠ è½½æœ¬åœ°æ–¹æ³•åº“ä¸­çš„æ–¹æ³•ã€‚</p><h3 id="PC-å¯„å­˜å™¨"><a href="#PC-å¯„å­˜å™¨" class="headerlink" title="PC å¯„å­˜å™¨"></a>PC å¯„å­˜å™¨</h3><p>ç¨‹åºè®¡æ•°å™¨ï¼šProgram Counter Register</p><p>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªç¨‹åºè®¡æ•°å™¨ï¼Œæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æ–¹æ³•åŒºä¸­çš„æ–¹æ³•å­—èŠ‚ç ï¼ˆç”¨æ¥å­˜å‚¨æŒ‡å‘åƒä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼Œä¹Ÿå³å°†è¦æ‰§è¡Œçš„æŒ‡ä»¤ä»£ç ï¼‰ï¼Œåœ¨æ‰§è¡Œå¼•æ“è¯»å–ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼Œæ˜¯ä¸€ä¸ªéå¸¸å°çš„å†…å­˜ç©ºé—´ï¼Œå‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ ã€‚</p><h3 id="æ–¹æ³•åŒº"><a href="#æ–¹æ³•åŒº" class="headerlink" title="æ–¹æ³•åŒº"></a>æ–¹æ³•åŒº</h3><p>æ–¹æ³•åŒºæ˜¯è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ï¼Œæ‰€æœ‰å­—æ®µå’Œæ–¹æ³•å­—èŠ‚ç ï¼ˆæŒ‡ä»¤ï¼‰ï¼Œä»¥åŠä¸€äº›ç‰¹æ®Šæ–¹æ³•ï¼Œå¦‚æ„é€ å‡½æ•°ï¼Œæ¥å£ä»£ç ä¹Ÿåœ¨æ­¤å®šä¹‰ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰å®šä¹‰çš„æ–¹æ³•çš„ä¿¡æ¯éƒ½ä¿å­˜åœ¨è¯¥åŒºåŸŸï¼Œæ­¤åŒºåŸŸå±äºå…±äº«åŒºé—´ã€‚</p><p><strong>é™æ€å˜é‡ï¼ˆstaticï¼‰ã€å¸¸é‡ï¼ˆfinalï¼‰ã€ç±»ï¼ˆClassï¼‰ä¿¡æ¯(æ„é€ æ–¹æ³•ã€æ¥å£å®šä¹‰)ã€è¿è¡Œæ—¶çš„å¸¸é‡æ± </strong>å­˜åœ¨æ–¹æ³•åŒºä¸­ï¼Œä½†æ˜¯å®ä¾‹å˜é‡å­˜åœ¨å †å†…å­˜ä¸­ï¼Œå’Œæ–¹æ³•åŒºæ— å…³ ã€‚</p><h3 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h3><p>æ ˆå†…å­˜ï¼Œä¸»ç®¡ç¨‹åºçš„è¿è¡Œï¼Œæ ˆçš„ç”Ÿå‘½å‘¨æœŸå’Œçº¿ç¨‹åŒæ­¥ã€‚æ ˆéµå¾ªç€ FILO (First In Last Out) çš„åŸåˆ™ã€‚</p><p>çº¿ç¨‹ç»“æŸï¼Œæ ˆå†…å­˜ä¹Ÿå°±æ˜¯é‡Šæ”¾ï¼Œå¯¹äºæ ˆæ¥è¯´ï¼Œä¸å­˜åœ¨åƒåœ¾å›æ”¶é—®é¢˜ã€‚</p><p>å¦‚æœæ ˆæ»¡äº†ï¼Œå°±ä¼šçˆ†å‡ºä¸€ä¸ª StackOverflowError çš„é”™è¯¯ ï¼Œè™šæ‹Ÿæœºè¢«è¿«åœæ­¢è¿è¡Œã€‚</p><p><strong>æ ˆå¸§æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>æ ˆå¸§æ˜¯ Java è™šæ‹Ÿæœºä¸­æ ˆçš„ç»„æˆå…ƒç´ ï¼Œæ ˆå¸§ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š<strong>å±€éƒ¨å˜é‡åŒºã€æ“ä½œæ•°æ ˆã€å¸§æ•°æ®åŒº</strong>ã€‚å±€éƒ¨å˜é‡åŒºå’Œæ“ä½œæ•°æ ˆçš„å¤§å°è¦è§†å¯¹åº”çš„æ–¹æ³•è€Œå®šï¼Œä»–ä»¬æ˜¯æŒ‰å­—é•¿è®¡ç®—çš„ã€‚ä½†è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œå®ƒä»ç±»å‹ä¿¡æ¯ä¸­å¾—åˆ°æ­¤æ–¹æ³•å±€éƒ¨å˜é‡åŒºå’Œæ“ä½œæ•°æ ˆå¤§å°ï¼Œå¹¶æ®æ­¤åˆ†é…æ ˆå†…å­˜ï¼Œç„¶åå‹å…¥ Java æ ˆã€‚</p><p>å±€éƒ¨å˜é‡åŒºï¼šå­˜æ”¾äº†åŸºæœ¬æ•°æ®ç±»å‹ã€å¯¹è±¡å¼•ç”¨å’Œ returnAddress ç±»å‹ï¼ˆæŒ‡å‘ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼‰ã€‚</p><p>æ“ä½œæ•°æ ˆï¼šJava æ²¡æœ‰å¯„å­˜å™¨ï¼Œæ‰€æœ‰å‚æ•°ä¼ é€’éƒ½æ˜¯ä½¿ç”¨æ“ä½œæ•°æ ˆã€‚</p><p>å¸§æ•°æ®åŒºï¼šé™¤äº†å±€éƒ¨å˜é‡åŒºå’Œæ“ä½œæ•°æ ˆå¤–ï¼ŒJava æ ˆå¸§è¿˜éœ€è¦ä¸€äº›æ•°æ®æ¥æ”¯æŒå¸¸é‡æ± è§£æã€æ­£å¸¸æ–¹æ³•è¿”å›ä»¥åŠå¼‚å¸¸æ´¾å‘æœºåˆ¶ã€‚è¿™äº›æ•°æ®éƒ½ä¿å­˜åœ¨ Java æ ˆå¸§çš„å¸§æ•°æ®åŒºä¸­ã€‚å½“ JVM æ‰§è¡Œåˆ°éœ€è¦å¸¸é‡æ± æ•°æ®çš„æŒ‡ä»¤æ—¶ï¼Œå®ƒéƒ½ä¼šé€šè¿‡å¸§æ•°æ®åŒºä¸­æŒ‡å‘å¸¸é‡æ± çš„æŒ‡é’ˆæ¥è®¿é—®å®ƒã€‚</p><p>é™¤äº†å¤„ç†å¸¸é‡æ± è§£æå¤–ï¼Œå¸§é‡Œçš„æ•°æ®è¿˜è¦å¤„ç† Java æ–¹æ³•çš„æ­£å¸¸ç»“æŸå’Œå¼‚å¸¸ç»ˆæ­¢ã€‚å¦‚æœæ˜¯é€šè¿‡ return æ­£å¸¸ç»“æŸï¼Œåˆ™å½“å‰æ ˆå¸§ä» Java æ ˆä¸­å¼¹å‡ºï¼Œæ¢å¤å‘èµ·è°ƒç”¨çš„æ–¹æ³•çš„æ ˆã€‚å¦‚æœæ–¹æ³•åˆè¿”å›å€¼ï¼ŒJVM ä¼šæŠŠè¿”å›å€¼å‹å…¥åˆ°å‘èµ·è°ƒç”¨æ–¹æ³•çš„æ“ä½œæ•°æ ˆã€‚</p><h3 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h3><p>ä¸€ä¸ª JVM åªæœ‰ä¸€ä¸ªå †å†…å­˜ï¼Œå †å†…å­˜å¯ä»¥äººä¸ºçš„å»åˆ†é…ã€‚ç±»åŠ è½½å™¨è¯»å–äº†ç±»æ–‡ä»¶åï¼Œå°†å¯¹è±¡å®ä¾‹ï¼ˆå¯¹è±¡å®ä¾‹ä¸­åŒ…å«æˆå‘˜æ–¹æ³•ã€æˆå‘˜å˜é‡ï¼‰ã€å¸¸é‡ä¿å­˜åˆ°å †ä¸­ ã€‚</p><p>å †å†…å­˜ä¸­è¿˜éœ€è¦ç»†åˆ†ä¸ºä¸‰ä¸ªåŒºåŸŸã€‚</p><ul><li><p>æ–°ç”ŸåŒº</p><ul><li>Eden Spaceï¼ˆä¼Šç”¸å›­ï¼‰<ul><li>æ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯ä»â€œä¼Šç”¸å›­â€åˆ›å»ºå‡ºæ¥çš„ã€‚</li></ul></li><li>å¹¸å­˜åŒº 0 åŒº</li><li>å¹¸å­˜åŒº 1 åŒº</li></ul></li><li><p>è€å¹´åŒº</p></li><li><p>æ°¸ä¹…åŒºï¼šè¯¥åŒºåŸŸå¸¸é©»å†…å­˜ã€‚ç”¨æ¥å­˜æ”¾ JDK è‡ªèº«æºå¸¦çš„ Class å¯¹è±¡ã€‚Interface å…ƒæ•°æ®ï¼Œå­˜å‚¨ Java è¿è¡Œæ—¶çš„ä¸€äº›ç¯å¢ƒæˆ–ç±»ä¿¡æ¯ï¼Œæ°¸ä¹…åŒºåŸŸä¸å­˜åœ¨åƒåœ¾å›æ”¶ã€‚</p><p>æ°¸ä¹…åŒºå¯èƒ½é€ æˆçš„å†…å­˜æº¢å‡ºï¼šåŠ è½½å¾ˆå¤šç¬¬ä¸‰æ–¹çš„ jar åŒ…ã€‚</p><p>åœ¨ä¸åŒç‰ˆæœ¬çš„ jdk ï¼Œå„ç§å‘½åéƒ½ä¸ä¸€æ ·ã€‚</p><ul><li>jdk 1.6 ä¹‹å‰ï¼Œå«æ°¸ä¹…ä»£ï¼Œå¸¸é‡æ± æ˜¯åœ¨æ–¹æ³•åŒºä¸­ã€‚</li><li>jdk 1.7 æ°¸ä¹…ä»£å¼€å§‹é€€åŒ–ï¼Œå¸¸é‡æ± åœ¨å †ä¸­ã€‚</li><li>jdk 1.8 ä¹‹åï¼šæ— æ°¸ä¹…ä»£ï¼Œå¸¸é‡æ± åœ¨å…ƒç©ºé—´ä¸­ã€‚</li></ul></li></ul><h4 id="åƒåœ¾å›æ”¶è§„åˆ™ï¼ˆGCï¼‰"><a href="#åƒåœ¾å›æ”¶è§„åˆ™ï¼ˆGCï¼‰" class="headerlink" title="åƒåœ¾å›æ”¶è§„åˆ™ï¼ˆGCï¼‰"></a>åƒåœ¾å›æ”¶è§„åˆ™ï¼ˆGCï¼‰</h4><p>æ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯ä»æ–°ç”ŸåŒºçš„â€œä¼Šç”¸å›­â€ä¸­åˆ›å»ºå‡ºæ¥çš„ï¼Œå‡è®¾â€œä¼Šç”¸å›­â€ã€â€œå¹¸å­˜åŒº 0 åŒºâ€ã€â€œå¹¸å­˜åŒº 1 åŒºâ€ å’Œ â€œè€å¹´åŒºâ€åˆ†åˆ«éƒ½åªèƒ½ä¿å­˜ 10 ä¸ªå¯¹è±¡ã€‚å¦‚æœä¼Šç”¸å›­åŒºçš„å¯¹è±¡æ»¡äº†ï¼Œå°±ä¼šè§¦å‘åƒåœ¾å›æ”¶ï¼ˆè½»GCï¼‰ã€‚</p><p>å¦‚æœ Java æ ˆä¸­æœ‰å¼•ç”¨å †ä¸­çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå°±ä¸ä¼šè¢«æ¸…é™¤ ï¼Œå¹¶ä¸”è¿›å…¥å¹¸å­˜è€…åŒºï¼ˆå¯èƒ½æ˜¯ 0 åŒºï¼Œä¹Ÿå¯èƒ½æ˜¯ 1 åŒºï¼‰ï¼›å¦‚æœå¯¹è±¡æœªè¢«å¼•ç”¨ï¼Œåˆ™ä¼šè¢«åƒåœ¾å›æ”¶å™¨ï¼ˆè½»GCï¼‰ç»™å›æ”¶æ‰ï¼Œæ­¤æ—¶è¿™äº›åœ¨å¹¸å­˜è€…åŒºçš„å¯¹è±¡åœ¨å·¦å³æ¨ªè·³ã€‚</p><p><img src="/journal/jvm-getting-start/a42e7d020c5069a4850fa8d25010ac6a.jpg" alt="img" loading="lazy"></p><p>å¦‚æœæ–°ç”ŸåŒºæ»¡äº†ï¼Œå³è¿™é‡Œé¢çš„ä¸‰ä¸ªåŒºéƒ½æ»¡äº†ï¼Œåˆ™åˆä¼šè§¦å‘ä¸€æ¬¡åƒåœ¾å›æ”¶ï¼Œé€šè¿‡åƒåœ¾å›æ”¶å™¨ï¼ˆé‡GCï¼‰å°†åœ¨æ–°ç”ŸåŒºå­˜æ´»çš„å¯¹è±¡æ”¾åˆ°è€å¹´åŒºä¸­ã€‚</p><p><img src="/journal/jvm-getting-start/heap.png" alt="img" loading="lazy"></p><p>å¦‚æœæ–°ç”ŸåŒºå’Œè€å¹´åŒºéƒ½æ»¡äº†ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥ä¸¥é‡çš„å†…å­˜æº¢å‡ºé”™è¯¯ã€‚</p><h4 id="å†…å­˜æº¢å‡ºçš„åŸå› "><a href="#å†…å­˜æº¢å‡ºçš„åŸå› " class="headerlink" title="å†…å­˜æº¢å‡ºçš„åŸå› "></a>å†…å­˜æº¢å‡ºçš„åŸå› </h4><p>é€ æˆæº¢å‡ºçš„åŸå› æ˜¯å› ä¸ºæ–°ç”ŸåŒºå’Œè€å¹´åŒºéƒ½æ»¡äº†ï¼Œåˆ™ä¼šæŠ¥é”™ä¸¥é‡çš„å†…å­˜æº¢å‡ºé”™è¯¯ã€‚</p><p>ä¸‹é¢æœ‰ä¸€ä¸ªå®éªŒæ¥æµ‹è¯•å †å†…å­˜æº¢å‡ºçš„é”™è¯¯ ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Random</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">"asdfghkfofksodffdsfdsfdsfsdfdf"</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            str <span class="token operator">+=</span> str<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">"asdfghkfofksodffdsfdsfdsfsdfdf"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">888888888</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œå‡ ç§’é’Ÿ ï¼Œå¾ˆå¿«å°±çˆ†å‡ºäº†å†…å­˜æº¢å‡ºçš„é”™è¯¯ã€‚çˆ†å‡ºçš„é”™è¯¯çš„åŸå› æ˜¯å †å†…å­˜æº¢å‡ºçš„é”™è¯¯ã€‚</p><pre class="language-none"><code class="language-none">Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap spaceat java.util.Arrays.copyOf(Arrays.java:3332)at java.lang.String.concat(String.java:2032)at Hello.main(Hello.java:8)</code></pre><p>å¦‚æœæˆ‘ä»¬å°†å †å†…å­˜å¤§å°è°ƒæ•´åˆ° 10Mï¼Œçœ‹çœ‹æ˜¯æ€ä¹ˆæŠ¥é”™çš„ï¼Œåœ¨è¿è¡Œä¹‹å‰åŠ å…¥è¿™ä¸ªå‚æ•° <code>-Xmx10m -Xms10m -XX:+PrintGCDetails</code> ï¼Œåœ¨è¿è¡Œçš„ç»“æœåé¢ï¼Œæœ‰æ ‡æ³¨å †å†…å­˜çš„ä¸‰ä¸ªåŒºï¼Œå…¶ä¸­ PSYoungGen æ˜¯æ–°ç”ŸåŒºã€ParOldGen æ˜¯è€å¹´åŒºã€Metaspace å«å…ƒç©ºé—´ ã€‚</p><blockquote><p>è¿è¡Œæ—¶çš„å‚æ•°è§£é‡Š</p><ul><li>-Xms è®¾ç½® jvm åˆå§‹åŒ–å¯¹å†…å­˜åˆ†é…å¤§å° ï¼Œé»˜è®¤æ˜¯æœ€å¤§åˆ†é…å†…å­˜çš„ 1/64</li><li>-Xmx è®¾ç½® jvm æœ€å¤§åˆ†é…çš„å†…å­˜å¤§å°ï¼Œé»˜è®¤æ˜¯ç‰©ç†å†…å­˜çš„ 1/4</li><li>-XX:+PrintGCDetails è¯¥å‚æ•°æ˜¯æ‰“å° GC çš„åƒåœ¾å›æ”¶å™¨å›æ”¶æ—¶çš„å†…å­˜çŠ¶æ€ã€‚</li><li>-XX:+HeapDumpOnOutOfMemoryError å°†â€œå†…å­˜æº¢å‡ºé”™è¯¯â€çš„çŠ¶æ€è½¬å‚¨åˆ°æ–‡ä»¶ä¸­ã€‚å½“ç„¶ï¼ŒHeapDumpOn åé¢å¯ä»¥å¯¼å‡ºå…¶å®ƒçš„é”™è¯¯ã€‚</li></ul></blockquote><details>    <summary>ç‚¹å‡»æŸ¥çœ‹è¿è¡Œç»“æœ</summary><pre>[GC (Allocation Failure) [PSYoungGen: 2048K->496K(2560K)] 2048K->724K(9728K), 0.0340698 secs] [Times: user=0.00 sys=0.00, real=0.06 secs] [GC (Allocation Failure) [PSYoungGen: 2441K->512K(2560K)] 2670K->1040K(9728K), 0.0120401 secs] [Times: user=0.00 sys=0.00, real=0.01 secs] [GC (Allocation Failure) [PSYoungGen: 2482K->512K(2560K)] 3010K->1591K(9728K), 0.0015323 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] [Full GC (Ergonomics) [PSYoungGen: 2206K->0K(2560K)] [ParOldGen: 6594K->3920K(7168K)] 8801K->3920K(9728K), [Metaspace: 3053K->3053K(1056768K)], 0.0076374 secs] [Times: user=0.00 sys=0.00, real=0.01 secs] [GC (Allocation Failure) [PSYoungGen: 20K->32K(2560K)] 6146K->6158K(9728K), 0.0006039 secs] [Times: user=0.03 sys=0.00, real=0.00 secs] [GC (Allocation Failure) [PSYoungGen: 32K->32K(2560K)] 6158K->6158K(9728K), 0.0005377 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] [Full GC (Allocation Failure) [PSYoungGen: 32K->0K(2560K)] [ParOldGen: 6126K->3919K(7168K)] 6158K->3919K(9728K), [Metaspace: 3053K->3053K(1056768K)], 0.0061232 secs] [Times: user=0.00 sys=0.00, real=0.01 secs] [GC (Allocation Failure) [PSYoungGen: 40K->32K(1536K)] 6166K->6157K(8704K), 0.0015948 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] [GC (Allocation Failure) [PSYoungGen: 32K->32K(2048K)] 6157K->6157K(9216K), 0.0005505 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] [Full GC (Allocation Failure) [PSYoungGen: 32K->0K(2048K)] [ParOldGen: 6125K->2816K(7168K)] 6157K->2816K(9216K), [Metaspace: 3053K->3053K(1056768K)], 0.0071274 secs] [Times: user=0.03 sys=0.00, real=0.01 secs] [GC (Allocation Failure) [PSYoungGen: 20K->0K(2048K)] 5043K->5022K(9216K), 0.0004772 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] [GC (Allocation Failure) [PSYoungGen: 0K->0K(2048K)] 5022K->5022K(9216K), 0.0004349 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] [Full GC (Allocation Failure) [PSYoungGen: 0K->0K(2048K)] [ParOldGen: 5022K->5022K(7168K)] 5022K->5022K(9216K), [Metaspace: 3053K->3053K(1056768K)], 0.0028990 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] [GC (Allocation Failure) [PSYoungGen: 0K->0K(2048K)] 5022K->5022K(9216K), 0.0004763 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] [Full GC (Allocation Failure) [PSYoungGen: 0K->0K(2048K)] [ParOldGen: 5022K->5005K(7168K)] 5022K->5005K(9216K), [Metaspace: 3053K->3053K(1056768K)], 0.0087491 secs] [Times: user=0.03 sys=0.00, real=0.01 secs] Heap PSYoungGen      total 2048K, used 40K [0x00000000ffd00000, 0x0000000100000000, 0x0000000100000000)  eden space 1024K, 3% used [0x00000000ffd00000,0x00000000ffd0a2f8,0x00000000ffe00000)  from space 1024K, 0% used [0x00000000fff00000,0x00000000fff00000,0x0000000100000000)  to   space 1024K, 0% used [0x00000000ffe00000,0x00000000ffe00000,0x00000000fff00000) ParOldGen       total 7168K, used 5034K [0x00000000ff600000, 0x00000000ffd00000, 0x00000000ffd00000)  object space 7168K, 70% used [0x00000000ff600000,0x00000000ffaea8f8,0x00000000ffd00000) Metaspace       used 3257K, capacity 4496K, committed 4864K, reserved 1056768K  class space    used 353K, capacity 388K, committed 512K, reserved 1048576KException in thread "main" java.lang.OutOfMemoryError: Java heap space    at java.util.Arrays.copyOf(Arrays.java:3332)    at java.lang.String.concat(String.java:2032)    at Hello.main(Hello.java:8)</pre></details><h4 id="å¦‚ä½•è§£å†³å†…å­˜æº¢å‡ºçš„é—®é¢˜"><a href="#å¦‚ä½•è§£å†³å†…å­˜æº¢å‡ºçš„é—®é¢˜" class="headerlink" title="å¦‚ä½•è§£å†³å†…å­˜æº¢å‡ºçš„é—®é¢˜"></a>å¦‚ä½•è§£å†³å†…å­˜æº¢å‡ºçš„é—®é¢˜</h4><ul><li>å°è¯•æ‰©å¤§å †å†…å­˜å¤§å°</li><li>å¦‚æœæ‰©å……å †å†…å­˜å¤§å°è¿˜æ˜¯ä¼šæœ‰å†…å­˜é”™è¯¯ï¼Œå¯ä»¥ä½¿ç”¨å†…å­˜å¿«ç…§åˆ†æå·¥å…·å¯¹å†…å­˜æº¢å‡ºäº§ç”Ÿçš„åŸå› è¿›è¡Œåˆ†æã€‚æ¯”å¦‚ JProfiler ã€MAT ç­‰ç­‰ï¼Œä½¿ç”¨å†…å­˜åˆ†æå·¥å…·å¯ä»¥çŸ¥é“æˆ‘ä»¬å†…å­˜æº¢å‡ºçš„æ ¹æœ¬åŸå› ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ˜¯ç¬¬å‡ è¡Œçš„ä»£ç å¯¼è‡´å†…å­˜æº¢å‡ºã€‚</li></ul><h4 id="åƒåœ¾å›æ”¶ç®—æ³•"><a href="#åƒåœ¾å›æ”¶ç®—æ³•" class="headerlink" title="åƒåœ¾å›æ”¶ç®—æ³•"></a>åƒåœ¾å›æ”¶ç®—æ³•</h4><p>åœ¨ Java ä¸­ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶æœ‰ 4 ç§ ï¼Œåˆ†åˆ«æ˜¯â€œå¤åˆ¶æ³•â€ã€â€œæ ‡è®°å‹ç¼©æ³•â€ã€â€œæ ‡è®°æ¸…é™¤æ³•â€ã€â€œå¼•ç”¨è®¡æ•°æ³•â€ã€‚</p><h5 id="å¤åˆ¶æ³•"><a href="#å¤åˆ¶æ³•" class="headerlink" title="å¤åˆ¶æ³•"></a>å¤åˆ¶æ³•</h5><p>å¤åˆ¶ç®—æ³•çš„æ ¸å¿ƒå°±æ˜¯ï¼Œå°†åŸæœ‰çš„å†…å­˜ç©ºé—´ä¸€åˆ†ä¸ºäºŒï¼Œæ¯æ¬¡åªç”¨å…¶ä¸­çš„ä¸€å—ï¼Œåœ¨åƒåœ¾å›æ”¶æ—¶ï¼Œå°†æ­£åœ¨ä½¿ç”¨çš„å¯¹è±¡å¤åˆ¶åˆ°å¦å¤–ä¸€ä¸ªå†…å­˜ç©ºé—´ä¸­ï¼Œç„¶åå°†è¯¥å†…å­˜ç©ºé—´æ¸…ç©ºï¼Œäº¤æ¢ä¸¤ä¸ªå†…å­˜çš„è§’è‰²ï¼Œå®Œæˆåƒåœ¾å›æ”¶ã€‚</p><ol><li>æ¯æ¬¡ GC éƒ½ä¼šå°† Eden åŒºå­˜æ´»çš„å¯¹è±¡ç§»åˆ°å¹¸å­˜åŒºä¸­ï¼Œâ€”æ—¦ Eden åŒºè¢« GC åï¼ŒEden åŒºå­˜æ´»çš„éƒ½åœ¨å¹¸å­˜åŒºï¼Œå³ Eden åŒºæ˜¯ç©ºçš„ã€‚</li><li>ç„¶ååœ¨å¹¸å­˜åŒºï¼Œè¿™äº›å­˜æ´»çš„å¯¹è±¡åœ¨ from åŒºï¼ˆå¯èƒ½æ˜¯å¹¸å­˜ 0 åŒºæ˜¯ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å¹¸å­˜ 1 åŒºï¼Œä¸è¿‡è¿™å·²ç»ä¸é‡è¦äº†ï¼‰ï¼Œå¦‚æœ to åŒºæ˜¯ç©ºçš„ï¼Œå¹¸å­˜çš„å¯¹è±¡å°±ä¼šåˆ° to åŒºï¼Œç„¶åå°±è¿™æ ·ä¸€ç›´å¾ªç¯ 15 æ¬¡ ã€‚</li><li>å¦‚æœå¹¸å­˜åŒºçš„å¯¹è±¡ç»å†äº† 15 æ¬¡çš„â€œæ‹·æ‰“â€ï¼Œé‚£ä¹ˆè¿™äº›å¹¸å­˜çš„å¯¹è±¡å°±ä¿å­˜åˆ°è€å¹´åŒºã€‚</li></ol><p>ç”±äºæ˜¯å°†åŸæœ‰çš„å†…å­˜ä¸€åˆ†ä¸ºäºŒï¼Œæ‰€ä»¥å¤åˆ¶æ³•éå¸¸é€‚åˆæ–°ç”ŸåŒºçš„å¯¹è±¡ã€‚</p><p><img src="/journal/jvm-getting-start/e2djsndsin29383" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p><p>ä¼˜ç¼ºç‚¹ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šåœ¨åƒåœ¾å¯¹è±¡å¤šçš„æƒ…å†µä¸‹ï¼Œæ•ˆç‡è¾ƒé«˜ã€‚æ¸…ç†åï¼Œå†…å­˜æ— ç¢ç‰‡ã€‚</li><li>ç¼ºç‚¹ï¼šåœ¨åƒåœ¾å¯¹è±¡å°‘çš„æƒ…å†µä¸‹ï¼Œä¸é€‚ç”¨ï¼Œæµªè´¹å†…å­˜ã€‚</li></ul><h5 id="æ ‡è®°æ¸…é™¤æ³•"><a href="#æ ‡è®°æ¸…é™¤æ³•" class="headerlink" title="æ ‡è®°æ¸…é™¤æ³•"></a>æ ‡è®°æ¸…é™¤æ³•</h5><p>æ ‡è®°æ¸…é™¤é¡¾åæ€ä¹‰æ˜¯ä¸€ç§åˆ†ä¸¤é˜¶æ®µå¯¹å¯¹è±¡è¿›è¡Œåƒåœ¾å›æ”¶çš„ç®—æ³•ã€‚</p><p>ç¬¬ä¸€é˜¶æ®µï¼šæ ‡è®°ã€‚ä»æ ¹ç»“ç‚¹å‡ºå‘éå†å¯¹è±¡ï¼Œå¯¹è®¿é—®è¿‡çš„å¯¹è±¡æ‰“ä¸Šæ ‡è®°ï¼Œè¡¨ç¤ºè¯¥å¯¹è±¡å¯è¾¾ã€‚</p><p>ç¬¬äºŒé˜¶æ®µï¼šæ¸…é™¤ã€‚å¯¹é‚£äº›æ²¡æœ‰æ ‡è®°çš„å¯¹è±¡è¿›è¡Œå›æ”¶ï¼Œè¿™æ ·ä½¿å¾—ä¸èƒ½åˆ©ç”¨çš„ç©ºé—´èƒ½å¤Ÿé‡æ–°è¢«åˆ©ç”¨ã€‚</p><p><img src="/journal/jvm-getting-start/2fb3up3j2ee.png" alt="img" loading="lazy"></p><p>ä¼˜ç‚¹ï¼šä¸ä¼šæŸå¤±50%çš„ç©ºé—´ã€å¯è§£å†³å¾ªç¯å¼•ç”¨çš„é—®é¢˜</p><p>ç¼ºç‚¹ï¼šæ•ˆç‡ä¸é«˜ã€ä¼šäº§ç”Ÿå¤§é‡ä¸è¿ç»­çš„å†…å­˜ç¢ç‰‡</p><h5 id="æ ‡è®°å‹ç¼©æ³•"><a href="#æ ‡è®°å‹ç¼©æ³•" class="headerlink" title="æ ‡è®°å‹ç¼©æ³•"></a>æ ‡è®°å‹ç¼©æ³•</h5><p>æ ‡è®°å‹ç¼©æ³•ï¼Œå°±æ˜¯æ‰§è¡Œäº†æ ‡è®°æ¸…é™¤ä¹‹åï¼Œå†å°†ç¢ç‰‡åŒ–çš„å†…å­˜ç©ºé—´è¿›è¡Œç§»åŠ¨ï¼Œæœ€ç»ˆå˜æˆè¿ç»­çš„ç©ºé—´ã€‚</p><p><img src="/journal/jvm-getting-start/pem3ncyobou.png" alt="img" loading="lazy"></p><p>ä¼˜ç‚¹ï¼šä¸ä¼šæŸå¤±50%çš„ç©ºé—´ã€å›æ”¶åç©ºé—´è¿ç»­</p><p>ç¼ºç‚¹ï¼šæ•ˆç‡ä¸é«˜</p><p>å…¶ä¸­ï¼Œæ ‡è®°æ¸…é™¤æ³•å’Œæ ‡è®°å‹ç¼©æ³•ä¸»è¦æ˜¯åœ¨è€å¹´åŒºä¸­ã€‚</p><h5 id="å¼•ç”¨è®¡æ•°æ³•"><a href="#å¼•ç”¨è®¡æ•°æ³•" class="headerlink" title="å¼•ç”¨è®¡æ•°æ³•"></a>å¼•ç”¨è®¡æ•°æ³•</h5><blockquote><p>java è™šæ‹Ÿæœºä¸é‡‡ç”¨è¿™ç§åƒåœ¾å›æ”¶ç®—æ³•ï¼ŒPython é‡‡ç”¨çš„æ˜¯è¿™ç§ç®—æ³•</p></blockquote><p>å¼•ç”¨è®¡æ•°æ³•ï¼Œå®é™…ä¸Šæ˜¯é€šè¿‡åœ¨å¯¹è±¡å¤´ä¸­åˆ†é…ä¸€ä¸ªç©ºé—´æ¥ä¿å­˜è¯¥å¯¹è±¡è¢«å¼•ç”¨çš„æ¬¡æ•°ã€‚å¦‚æœè¯¥å¯¹è±¡è¢«å…¶å®ƒå¯¹è±¡å¼•ç”¨ï¼Œåˆ™å®ƒçš„å¼•ç”¨è®¡æ•°åŠ  1ï¼Œå¦‚æœåˆ é™¤å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒçš„å¼•ç”¨è®¡æ•°å°±å‡ 1ï¼Œå½“è¯¥å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º 0 æ—¶ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å°±ä¼šè¢«å›æ”¶ã€‚</p><p>æ¯”å¦‚æˆ‘åˆ›å»ºäº†ä¸€ä¸ª String å¯¹è±¡ ï¼Œåˆ›å»ºå®Œæˆä¹‹åï¼Œp æŒ‡å‘æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„å¯¹è±¡ã€‚æ­¤æ—¶è®¡æ•°å™¨æ˜¯ 1 ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å¦‚æœæˆ‘ä»¬å°† p æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œæ­¤æ—¶ <code>new String(&quot;abc&quot;)</code> çš„è®¡æ•°å™¨æ˜¯ 0 ï¼Œå°±è¦è¢« GC å¤„ç†æ‰ã€‚</p><pre class="language-java" data-language="java"><code class="language-java">p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">"bdc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å½“å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º0æ—¶ï¼Œåƒåœ¾å›æ”¶å°±å‘ç”Ÿäº†ã€‚è¿™è·Ÿå‰é¢ä¸‰ç§åƒåœ¾æ”¶é›†ç®—æ³•ä¸åŒï¼Œå‰é¢ä¸‰ç§åƒåœ¾æ”¶é›†éƒ½æ˜¯åœ¨ä¸ºæ–°å¯¹è±¡åˆ†é…å†…å­˜ç©ºé—´æ—¶ç”±äºå†…å­˜ç©ºé—´ä¸è¶³è€Œè§¦å‘çš„ï¼Œè€Œä¸”åƒåœ¾æ”¶é›†æ˜¯é’ˆå¯¹æ•´ä¸ªå †ä¸­çš„æ‰€æœ‰å¯¹è±¡è¿›è¡Œçš„ã€‚è€Œå¼•ç”¨è®¡æ•°åƒåœ¾æ”¶é›†æœºåˆ¶ä¸ä¸€æ ·ï¼Œå®ƒåªæ˜¯åœ¨å¼•ç”¨è®¡æ•°å˜åŒ–ä¸º0æ—¶å³åˆ»å‘ç”Ÿï¼Œè€Œä¸”åªé’ˆå¯¹æŸä¸€ä¸ªå¯¹è±¡ä»¥åŠå®ƒæ‰€ä¾èµ–çš„å…¶å®ƒå¯¹è±¡ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¹Ÿç§°å‘¼å¼•ç”¨è®¡æ•°åƒåœ¾æ”¶é›†ä¸º<strong>ç›´æ¥</strong>çš„åƒåœ¾æ”¶é›†æœºåˆ¶ï¼Œè€Œå‰é¢ä¸‰ç§éƒ½å±äº<strong>é—´æ¥</strong>çš„åƒåœ¾æ”¶é›†æœºåˆ¶ã€‚</p><h4 id="ä¸‰ç§åƒåœ¾å›æ”¶ç®—æ³•çš„æ¯”è¾ƒ"><a href="#ä¸‰ç§åƒåœ¾å›æ”¶ç®—æ³•çš„æ¯”è¾ƒ" class="headerlink" title="ä¸‰ç§åƒåœ¾å›æ”¶ç®—æ³•çš„æ¯”è¾ƒ"></a>ä¸‰ç§åƒåœ¾å›æ”¶ç®—æ³•çš„æ¯”è¾ƒ</h4><p>å†…å­˜æ•ˆç‡ï¼šå¤åˆ¶ç®—æ³• &gt; æ ‡è®°æ¸…é™¤ç®—æ³• &gt; æ ‡è®°å‹ç¼©ç®—æ³•ï¼ˆæ—¶é—´å¤æ‚åº¦ï¼‰</p><p>å†…å­˜æ•´é½åº¦ï¼šå¤åˆ¶ç®—æ³• = æ ‡è®°å‹ç¼©ç®—æ³• &gt; æ ‡è®°æ¸…é™¤ç®—æ³•</p><p>å†…å­˜åˆ©ç”¨ç‡ï¼šæ ‡è®°å‹ç¼©ç®—æ³• = æ ‡è®°æ¸…é™¤ç®—æ³• &gt; å¤åˆ¶ç®—æ³•</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li>æ·±å…¥ç†è§£Javaç±»åŠ è½½ï¼š<a href="https://www.cnblogs.com/czwbig/p/11127222.html">https://www.cnblogs.com/czwbig/p/11127222.html</a></li><li>æ²™ç®±å®‰å…¨æœºåˆ¶ï¼š<a href="https://blog.csdn.net/qq_30336433/article/details/83268945">https://blog.csdn.net/qq_30336433/article/details/83268945</a></li><li>é€šä¿—æ˜“æ‡‚çš„åŒäº²å§”æ´¾æœºåˆ¶ï¼š<a href="https://blog.csdn.net/codeyanbao/article/details/82875064">https://blog.csdn.net/codeyanbao/article/details/82875064</a></li><li>JVMä¹‹è™šæ‹Ÿæœºæ ˆè¯¦è§£ï¼š<a href="https://juejin.cn/post/6844903983400632327">https://juejin.cn/post/6844903983400632327</a></li><li>JVMåƒåœ¾å›æ”¶ä¹‹å¤åˆ¶ç®—æ³•ï¼š<a href="https://blog.csdn.net/yanghenan19870513/article/details/92803409">https://blog.csdn.net/yanghenan19870513/article/details/92803409</a></li><li>åƒåœ¾å›æ”¶ç®—æ³•è¯¦è§£ï¼š<a href="https://blog.csdn.net/m0_37860933/article/details/82154989">https://blog.csdn.net/m0_37860933/article/details/82154989</a></li><li>å¼•ç”¨è®¡æ•°ç®—æ³•ï¼š<a href="https://www.jianshu.com/p/1d5fa7f6035c">https://www.jianshu.com/p/1d5fa7f6035c</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Java éƒ¨åˆ† </category>
          
          <category> æ·±å…¥ Java çš„åœ°ä¸‹ä¸–ç•Œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jvm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆè§å¾®æœåŠ¡å’ŒSpring Cloud</title>
      <link href="/journal/spring-cloud-totoral/"/>
      <url>/journal/spring-cloud-totoral/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="è°ˆè°ˆå¾®æœåŠ¡"><a href="#è°ˆè°ˆå¾®æœåŠ¡" class="headerlink" title="è°ˆè°ˆå¾®æœåŠ¡"></a>è°ˆè°ˆå¾®æœåŠ¡</h2><p>å•ä½“åº”ç”¨å’Œåˆ†å¸ƒå¼åœ¨æˆ‘ä¹‹å‰äº†è§£ä¸­é—´ä»¶çš„æ—¶å€™ï¼Œè¯¦æƒ…å¯ä»¥<a href="https://www.bestguo.top/journal/what-s-middleware/">ç‚¹å‡»è¿™é‡Œ</a>ï¼Œæ¥ä¸‹æ¥å’±ä»¬è¯´è¯´å¾®æœåŠ¡ã€‚</p><p>å¾®æœåŠ¡æ˜¯ç”± <strong>Martin Fowler</strong> å‘ç°çš„ã€‚</p><p>ä»–è¯´å¾®æœåŠ¡å…¶å®æ˜¯ä¸€ç§æ¶æ„é£æ ¼ï¼Œæˆ‘ä»¬åœ¨å¼€å‘ä¸€ä¸ªåº”ç”¨çš„æ—¶å€™è¿™ä¸ªåº”ç”¨åº”è¯¥æ˜¯ç”±ä¸€ç»„å°å‹æœåŠ¡ç»„æˆï¼Œæ¯ä¸ªå°å‹æœåŠ¡éƒ½è¿è¡Œåœ¨è‡ªå·±çš„è®²ç¨‹å†…ï¼›å°æœåŠ¡ä¹‹é—´ HTTP çš„æ–¹å¼è¿›è¡Œäº’è”äº’é€šã€‚</p><p><img src="/journal/spring-cloud-totoral/sketch.png" alt="å•ä½“å’Œåˆ†å¸ƒå¼" loading="lazy"></p><span id="more"></span><h3 id="å¾®æœåŠ¡æ¶æ„çš„å¸¸è§é—®é¢˜"><a href="#å¾®æœåŠ¡æ¶æ„çš„å¸¸è§é—®é¢˜" class="headerlink" title="å¾®æœåŠ¡æ¶æ„çš„å¸¸è§é—®é¢˜"></a>å¾®æœåŠ¡æ¶æ„çš„å¸¸è§é—®é¢˜</h3><p>â€”ä¸”é‡‡ç”¨å¾®æœåŠ¡ç³»ç»Ÿæ¶æ„ï¼Œå°±åŠ¿å¿…ä¼šé‡åˆ°è¿™æ ·å‡ ä¸ªé—®é¢˜:</p><ul><li>è¿™ä¹ˆå¤šå°æœåŠ¡ï¼Œå¦‚ä½•ç®¡ç†ä»–ä»¬ï¼Ÿ<strong>ï¼ˆæœåŠ¡æ²»ç†æ³¨å†Œä¸­å¿ƒ[æœåŠ¡æ³¨å†Œå‘ç°å‰”é™¤]ï¼‰nacos</strong></li><li>è¿™ä¹ˆå¤šå°æœåŠ¡ï¼Œä»–ä»¬ä¹‹é—´å¦‚ä½•é€šè®¯ï¼Ÿ<strong>ï¼ˆrestful rpc dubbo feignï¼‰httpclient(â€œurl;å‚æ•°)ï¼ŒspringBoot restTemplate(â€œurlâ€å‚æ•°)ï¼Œfeign</strong>ã€‚</li><li>è¿™ä¹ˆå¤šå°æœåŠ¡ï¼Œå®¢æˆ·ç«¯æ€ä¹ˆè®¿é—®ä»–ä»¬ï¼Ÿ<strong>ï¼ˆç½‘å…³ï¼‰gateway</strong></li><li>è¿™ä¹ˆå¤šå°æœåŠ¡ï¼Œä¸€æ—¦å‡ºç°é—®é¢˜äº†ï¼Œåº”è¯¥å¦‚ä½•è‡ªå¤„ç†ï¼Ÿ<strong>ï¼ˆå®¹é”™ï¼‰</strong></li><li>è¿™ä¹ˆå¤šå°æœåŠ¡ï¼Œä¸€æ—¦å‡ºç°é—®é¢˜äº†ï¼Œåº”è¯¥å¦‚ä½•æ’é”™ï¼Ÿ<strong>ï¼ˆé“¾è·¯è¿½è¸ªï¼‰</strong></li></ul><p>å¯¹äºä¸Šé¢çš„é—®é¢˜ï¼Œæ˜¯ä»»ä½•ä¸€ä¸ªå¾®æœåŠ¡è®¾è®¡è€…éƒ½ä¸èƒ½ç»•è¿‡å»çš„ï¼Œå› æ­¤å¤§éƒ¨åˆ†çš„å¾®æœåŠ¡äº§å“éƒ½é’ˆå¯¹æ¯ä¸€ä¸ªé—®é¢˜æä¾›äº†ç›¸åº”çš„ç»„ä»¶æ¥è§£å†³å®ƒä»¬ã€‚</p><p><img src="/journal/spring-cloud-totoral/5d4ce623e4b06e49190c5c0a.png" alt="5d4ce623e4b06e49190c5c0a" loading="lazy"></p><h3 id="Spring-Cloud-æ˜¯ä»€ä¹ˆ"><a href="#Spring-Cloud-æ˜¯ä»€ä¹ˆ" class="headerlink" title="Spring Cloud æ˜¯ä»€ä¹ˆ"></a>Spring Cloud æ˜¯ä»€ä¹ˆ</h3><p>åˆ†å¸ƒå¼ç³»æµä¸­çš„å¸¸è§æ¨¡å¼ç»™äº† Spring Cloud ä¸€ä¸ªæ¸…çš„å®šä½ï¼Œå³â€œæ¨¡å¼â€ï¼Œä¹Ÿå°±æ˜¯è¯´ Spring Cloud æ˜¯é’ˆåŠ¨åˆ†å¸ƒå¼ç³»ç»Ÿå¼€å‘æ‰€çš„é€šç”¨æŠ½è±¡ï¼Œæ˜¯æ ‡å‡†æ¨¡å¼çš„å®ç°ã€‚è¿™ä¸ªå®šä¹‰éå‰æŠ½è±¡ï¼Œçœ‹å®Œä¹‹åå¹¶ä¸èƒ½çŸ¥é“ Spring Cloudå…·ä½“åŒ…åˆä»€ä¹ˆå†…åœ¨ã€‚å†çœ‹ä¸€ä¸‹ Spring å®˜æ–¹ç»™å‡ºçš„æ¶æ„å›¾ï¼Œå°±å¯ä»¥å¯¹è¿™å¥—æ¨¡å¼æœ‰æ›´æ¸…æ™°çš„è®¤è¯†</p><p><img src="/journal/spring-cloud-totoral/diagram-microservices-88e01c7d34c688cb49556435c130d352.svg" alt="diagram-microservices-88e01c7d34c688cb49556435c130d352.svg" loading="lazy"></p><h3 id="å¸¸è§çš„å¾®æœåŠ¡æ¶æ„"><a href="#å¸¸è§çš„å¾®æœåŠ¡æ¶æ„" class="headerlink" title="å¸¸è§çš„å¾®æœåŠ¡æ¶æ„"></a>å¸¸è§çš„å¾®æœåŠ¡æ¶æ„</h3><p>è™½ç„¶è¿™äº›ç»„ä»¶éƒ½æ²¡è§è¿‡ï¼Œä½†æ˜¯è¿˜æ˜¯äº†è§£äº†è§£å§</p><h4 id="dubbo"><a href="#dubbo" class="headerlink" title="dubbo"></a>dubbo</h4><p>zookeeper +dubbo + SpringMVclSpringBoot</p><ul><li>é…å¥—é€šä¿¡æ–¹å¼: rpc</li><li>æ³¨å†Œä¸­å¿ƒ: zookeeper / redis</li><li>é…ç½®ä¸­å¿ƒ: diamond</li></ul><h4 id="Spring-Cloud"><a href="#Spring-Cloud" class="headerlink" title="Spring Cloud"></a>Spring Cloud</h4><p>Spring å…¨å®¶æ¡¶ + è½»æ¾åµŒå…¥ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼ˆNetflixï¼‰</p><ul><li>é…å¥—é€šä¿¡æ–¹å¼: http restful</li><li>æ³¨å†Œä¸­å¿ƒï¼šeruka / consul</li><li>é…ç½®ä¸­å¿ƒ: config</li><li>æ–­è·¯å™¨ï¼šhystrix</li><li>ç½‘å…³ï¼šzuul</li><li>åˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿï¼šsleuth + zipkin</li></ul><h2 id="ä½“éªŒï¼šåˆ†å¸ƒå¼æ¶æ„çš„æœåŠ¡è°ƒç”¨"><a href="#ä½“éªŒï¼šåˆ†å¸ƒå¼æ¶æ„çš„æœåŠ¡è°ƒç”¨" class="headerlink" title="ä½“éªŒï¼šåˆ†å¸ƒå¼æ¶æ„çš„æœåŠ¡è°ƒç”¨"></a>ä½“éªŒï¼šåˆ†å¸ƒå¼æ¶æ„çš„æœåŠ¡è°ƒç”¨</h2><p>ä¸Šé¢æåˆ°ï¼ŒæœåŠ¡ä¹‹é—´çš„é€šä¿¡æ–¹å¼æœ‰å¾ˆå¤šç§ã€‚ä¸‹é¢è¿™ç§è°ƒç”¨æ–¹å¼å°†ä½¿ç”¨ http åè®®è¿›è¡ŒæœåŠ¡ä¹‹é—´çš„è°ƒç”¨ã€‚</p><blockquote><p>æœåŠ¡ï¼šå¯ä»¥ç†è§£æˆæ˜¯åŠŸèƒ½æ¨¡å—ã€‚</p></blockquote><p>åˆ›å»ºä¸€ä¸ªçˆ¶é¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨ Spring Initializer æ¥æ„å»ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ maven æ¥æ„ä»¶ã€‚çˆ¶é¡¹ç›®çš„ maven ä¾èµ–å¦‚ä¸‹æ‰€ç¤º</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">></span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">></span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modules</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">></span></span>Order<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">></span></span>stock<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modules</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>top.bestguo.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springcloudalibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>springcloudalibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">></span></span>Demo project for Spring Boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">></span></span>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- springbootåœºæ™¯å¯åŠ¨å™¨ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">></span></span></code></pre><p>çˆ¶é¡¹ç›®ä¸­ï¼Œä¸éœ€è¦ src æ–‡ä»¶å¤¹ï¼Œå°†å…¶åˆ é™¤ã€‚</p><p>æ¥ä¸‹æ¥æ˜¯ä¸¤ä¸ª Module ï¼Œä¸€ä¸ªä¸º Order ï¼Œä¸€ä¸ªä¸º Stock ï¼Œä»–ä»¬ä¿©çš„ä¾èµ–éƒ½æ˜¯ä¸€æ ·çš„</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springcloudalibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>top.bestguo.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">></span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>order<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">></span></span></code></pre><p>åœ¨è¿™ä¸¤ä¸ª Module ä¸­ï¼Œéƒ½åˆ†åˆ«åˆ›å»ºä¸€ä¸ªé…ç½®ç±»ï¼Œç”¨äºæ³¨å†Œ RestTemplate ç»„ä»¶ï¼Œæ³¨å†Œçš„å†…å®¹å¦‚ä¸‹</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyConfig</span> <span class="token punctuation">&#123;</span>        <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">restTemplate</span><span class="token punctuation">(</span><span class="token class-name">RestTemplateBuilder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span></code></pre><p>ç„¶åæ–°å»ºæ§åˆ¶ç±»ï¼Œä¸€ä¸ªæ˜¯åœ¨ order ï¼Œå¦ä¸€ä¸ªæ˜¯åœ¨ stock ã€‚</p><p>order</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/order"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderController</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/add"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¸‹å•æˆåŠŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> forObject <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8011/stock/add"</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>forObject<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"Hello Worldï¼Œ"</span> <span class="token operator">+</span> forObject<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>stock</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/stock"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StockController</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/add"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‰£å‡åº“å­˜"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"æ‰£å‡åº“å­˜"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œä¹‹åï¼Œè®¿é—® <code>http://localhost:8012/order/add</code> ä¹‹åï¼Œæ§åˆ¶å°è¾“å‡ºç»“æœå¦‚ä¸‹ã€‚</p><pre class="language-none"><code class="language-none">ä¸‹å•æˆåŠŸæ‰£å‡åº“å­˜</code></pre><p>æ­¤æ—¶å‘ç° stock æœåŠ¡ï¼Œè°ƒç”¨æˆåŠŸäº†ã€‚</p><p>è¯´å®è¯ï¼Œæˆ‘å€’æ˜¯è§‰å¾—å¾®æœåŠ¡å¾ˆåƒå‰åç«¯åˆ†ç¦»ï¼Œæ˜¯å› ä¸ºæä¾›ä¸€ä¸ªæ¥å£ï¼Œä¼ é€’ä»€ä¹ˆå‚æ•°ï¼Œç„¶åè¿”å›ä»€ä¹ˆå†…å®¹ã€‚è¿™é‡Œå°±å¾ˆåƒæ˜¯å‰åç«¯çš„åˆ†ç¦»ï¼Œç°åœ¨å‘ç°ï¼Œå¾®æœåŠ¡å…¶å®ä¹Ÿå¹¶ä¸æ˜¯ä»€ä¹ˆå¾ˆæ–°é²œçš„ä¸œè¥¿ã€‚</p><h2 id="ä¸Šè¿°çš„é—®é¢˜"><a href="#ä¸Šè¿°çš„é—®é¢˜" class="headerlink" title="ä¸Šè¿°çš„é—®é¢˜"></a>ä¸Šè¿°çš„é—®é¢˜</h2><p>ä¸Šé¢æœ‰ä¸¤ä¸ªæœåŠ¡ï¼Œorder è°ƒç”¨ stock è°ƒç”¨æˆåŠŸäº†ã€‚ä¸¤ä¸ªæœåŠ¡è¿˜å¥½è¯´ï¼Œè¦æ˜¯æœ‰å‡ ç™¾ä¸ªæœåŠ¡ï¼Œéœ€è¦åœ¨æ¯å„æœåŠ¡ä¸­éœ€è¦è®°å½•è¿™äº› ip åœ°å€å°†æ˜¯ä¸€ä»¶éå¸¸éº»çƒ¦çš„äº‹æƒ…ã€‚å¦‚æœåœ¨è¿™å‡ ç™¾ä¸ªæœåŠ¡ä¸­ï¼Œæœ‰ä¸€ä¸ªæœåŠ¡çš„ ip åœ°å€æ”¹å˜äº†ï¼Œå‡è®¾è¿™ä¸ªæœåŠ¡è¢« 40 ä¸ªæœåŠ¡è°ƒç”¨ç€ï¼Œé‚£å°±éœ€è¦ä¿®æ”¹ 40 ä¸ªæœåŠ¡ä¸­è®°å½•çš„ ip åœ°å€ï¼Œè¿™æ˜¯éå¸¸æµªè´¹æ—¶é—´çš„ã€‚</p><p><img src="/journal/spring-cloud-totoral/hsmkfyn1415173.jpg" alt="hsmkfyn1415173.jpg" loading="lazy"></p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™äº› ip åœ°å€æ”¾åˆ°ä¸€ä¸ªé›†ä¸­ç®¡ç†çš„åœ°æ–¹ã€‚è¿™æ ·ï¼Œä¸€ä¸ªåœ°æ–¹å‘ç”Ÿå˜åŒ–ï¼Œæˆ‘ä»¬ç”šè‡³éƒ½ä¸éœ€è¦æ›´æ”¹ ip åœ°å€å°±èƒ½ç›´æ¥è®¿é—®åˆ°ç›¸å¯¹åº”çš„æœåŠ¡ä¸­äº†ã€‚</p><p>åœ¨ Spring Cloud ä¸­ ï¼Œæœ‰è®¸å¤šè¡ç”Ÿçš„å¾®æœåŠ¡æ¶æ„ï¼Œå…¶ä¸­ Spring Cloud Alibaba å°±æ˜¯ä¸€ä¸ªéå¸¸ä¹‹ä¼˜ç§€çš„å¾®æœåŠ¡æ¶æ„ï¼Œå®ƒé‡Œé¢æœ‰ä¸€ä¸ªç»„ä»¶å«åš Nacos ï¼Œå®ƒæ˜¯å•¥ï¼Ÿ</p><p>å®ƒæ˜¯ç”¨äºè§£å†³ä¸Šè¿°é—®é¢˜çš„ã€‚å°†æ¯ä¸€ä¸ªæœåŠ¡çš„è®¿é—®åœ°å€æ·»åŠ  Nacos ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥å»éå¸¸æ–¹ä¾¿çš„è°ƒç”¨æœåŠ¡ï¼Œå½“ç„¶è¿˜èƒ½å¤Ÿè§£å†³è´Ÿè½½å‡è¡¡ï¼ŒæŸä¸ªæœåŠ¡å®•æœºä¹‹ååœç”¨è¿™ä¸ªæœåŠ¡éƒ½éœ€è¦å®ƒæ¥ç›‘æ§å¹¶æ“ä½œã€‚å®ƒçš„èŒè´£æ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°ã€‚</p><h2 id="å¾…ç»­"><a href="#å¾…ç»­" class="headerlink" title="å¾…ç»­"></a>å¾…ç»­</h2><p>åæœŸåœ¨å­¦ä¹ â€œæœåŠ¡æ³¨å†Œä¸å‘ç°â€ä¹‹ Nacos æ—¶ï¼Œå°†ä¼šè¯¦ç»†çš„å†™ä¸€ç¯‡æ—¥å¿—æ¥ä½œä¸ºè®°å½•å§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> åˆ†å¸ƒå¼ä¸å¾®æœåŠ¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®æœåŠ¡ </tag>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
            <tag> Spring Cloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java çš„å¤šçº¿ç¨‹</title>
      <link href="/journal/java-multi-thread/"/>
      <url>/journal/java-multi-thread/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="è¿›ç¨‹å’Œçº¿ç¨‹"><a href="#è¿›ç¨‹å’Œçº¿ç¨‹" class="headerlink" title="è¿›ç¨‹å’Œçº¿ç¨‹"></a>è¿›ç¨‹å’Œçº¿ç¨‹</h2><p>è¿›ç¨‹ï¼Œç»å¤§éƒ¨åˆ†ä½¿ç”¨è¿‡ç”µè„‘çš„äººéƒ½çŸ¥é“è¿™ä¸œè¥¿ã€‚è¿›ç¨‹æ˜¯ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºï¼ŒWindows ä¸Šæ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨å°±å¯ä»¥çœ‹åˆ°è®¸è®¸å¤šå¤šçš„è¿›ç¨‹ï¼Œæœ‰ä»€ä¹ˆç³»ç»Ÿè¿›ç¨‹å’Œç”¨æˆ·è¿›ç¨‹ã€‚</p><p><img src="/journal/java-multi-thread/image-20210806100924445.png" alt="image-20210806100924445" loading="lazy"></p><p>çº¿ç¨‹ï¼Œçº¿ç¨‹ä¼¼ä¹ç»å¤§éƒ¨åˆ†ä½¿ç”¨çš„è¿‡ç”µè„‘çš„äººéƒ½ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œä¹Ÿè®¸åªåœ¨â€œæ€§èƒ½â€æ¨¡å—ä¸­çš„â€œCPUâ€ä¸­çœ‹åˆ°çº¿ç¨‹æ•°ã€‚çº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€ä¸ªæ‰§è¡Œå•å…ƒï¼Œè¿™æ€ä¹ˆè§£é‡Šå‘¢ï¼Ÿæ¯”å¦‚è‘—åçš„ x ç‹—æµè§ˆå™¨ï¼ˆéæ°é¥­ï¼‰ï¼Œæœ‰ä¸€ä¸ªçº¿ç¨‹æ˜¯ç”¨æˆ·åŠ è½½æµè§ˆå™¨çš„ç•Œé¢çš„ï¼Œæœ‰ä¸€ä¸ªçº¿ç¨‹æ˜¯ç”¨äºåŠ è½½é¡µé¢ï¼Œæœ‰ä¸€ä¸ªçº¿ç¨‹æ˜¯ç”¨äºä¸‹è½½å›¾ç‰‡çš„ã€‚æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½åœ¨åšç€è‡ªå·±è¯¥åšçš„å·¥ä½œï¼Œå„å¸å…¶èŒã€‚</p><p><img src="/journal/java-multi-thread/QQ%E6%88%AA%E5%9B%BE20210625220159.png" loading="lazy"></p><p>è¿›ç¨‹ï¼Œå¥½æ¯”ä¸€å®¶å…¬å¸ã€‚è€Œçº¿ç¨‹ï¼Œå°±å¥½æ¯”å…¬å¸é‡Œçš„å‘˜å·¥ï¼Œä¸ºå…¬å¸åˆ›é€ ä»·å€¼ã€‚</p><span id="more"></span><h2 id="çº¿ç¨‹å’Œè¿›ç¨‹çš„å…³ç³»"><a href="#çº¿ç¨‹å’Œè¿›ç¨‹çš„å…³ç³»" class="headerlink" title="çº¿ç¨‹å’Œè¿›ç¨‹çš„å…³ç³»"></a>çº¿ç¨‹å’Œè¿›ç¨‹çš„å…³ç³»</h2><p>å‰é¢æåˆ°è¿‡ï¼Œçº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€ä¸ªæ‰§è¡Œå•å…ƒã€‚ä¸€ä¸ªè¿›ç¨‹ä¸­å¿…é¡»è¦æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œå¯ä»¥æœ‰å¤šä¸ªè¿›ç¨‹ã€‚</p><p>æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½å¯ä»¥ä½¿ç”¨è¿›ç¨‹æ‰€å¼€è¾Ÿçš„å†…å­˜ç©ºé—´ä¸­çš„å†…å®¹ã€‚</p><p>è¿™å°±å¯ä»¥æ¯”å–»æˆï¼Œä½ å¯ä»¥ä½¿ç”¨ä½ æ‰€åœ¨çš„å…¬å¸é‡Œçš„ wifi æ¥ä¸Šç½‘ï¼Œä½¿ç”¨å…¬å¸é‡Œçš„ç©ºè°ƒæ¥äº«å—ç€å¸¦æ¥çš„å‡‰çˆ½ã€‚ä½†æ˜¯ä¸èƒ½ä½¿ç”¨å…¶å®ƒè¿›ç¨‹ä¸­çš„å†…å­˜ç©ºé—´ã€‚</p><p>æ¯”å¦‚ä½ æ˜¯æ‹¼å¤•å¤•çš„å‘˜å·¥ï¼Œä½ æƒ³ç›´æ¥å»äº¬ä¸œè¹­ wifi å—ï¼Œè¿™èƒ½è¡Œå—ï¼Ÿè¿™æ˜¾ç„¶æ˜¯ä¸å¯ä»¥çš„ã€‚çº¿ç¨‹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><h2 id="java-ä¸­çš„çº¿ç¨‹"><a href="#java-ä¸­çš„çº¿ç¨‹" class="headerlink" title="java ä¸­çš„çº¿ç¨‹"></a>java ä¸­çš„çº¿ç¨‹</h2><p>åœ¨ java ä¸­ï¼Œæˆ‘ä»¬å¹³æ—¶å†™çš„æ§åˆ¶å°ç¨‹åºï¼Œè¿è¡Œæ—¶è®¤ä¸ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯ main æ–¹æ³•æ‰€æ‰§è¡Œçš„çº¿ç¨‹ã€‚ä½†æ˜¯å¹¶ä¸æ˜¯ï¼Œè¿˜æœ‰ä¸€ä¸ªåƒåœ¾å›æ”¶å™¨çš„çº¿ç¨‹ï¼Œæ€»å…±æœ‰ä¸¤ä¸ªçº¿ç¨‹ã€‚åƒåœ¾å›æ”¶å™¨çš„ç›®çš„å°±æ˜¯å°†æ— ç”¨çš„èµ„æºé‡Šæ”¾æ‰ï¼Œä¸º java è™šæ‹Ÿæœºè…¾å‡ºæ›´å¤šçš„å†…å­˜ç©ºé—´ï¼Œç”±äºè¿™é‡Œä¸»è¦æ˜¯è®¨è®ºå¤šçº¿ç¨‹ï¼Œå…³äºåƒåœ¾å›æ”¶å™¨ï¼Œè¿™é‡Œä¸è¿‡å¤šèµ˜è¿°ã€‚</p><p><strong>é‚£ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±åˆ›å»ºçº¿ç¨‹å—ï¼Ÿ</strong></p><p>è¿™ä¸æ˜¯ FIFA å˜›ï¼Œå†™è¿™ç¯‡æ—¥å¿—çš„ç›®çš„å°±æ˜¯è®©æˆ‘è‡ªå·±èƒ½å¤Ÿæ›´åŠ çš„äº†è§£ java çš„çº¿ç¨‹ï¼Œä»¥åŠçº¿ç¨‹ä¸­çš„ä¸€äº›é—®é¢˜ã€‚</p><p><strong>æä¸ªç®€å•çš„é—®é¢˜å§</strong></p><p>æˆ‘æœ€è¿‘åœ¨å­¦ä¹ çš„æ—¶å€™ï¼Œçœ‹åˆ°ä¸€ä¸ªè¿™æ ·çš„ä»£ç ï¼Œä»–é—®ï¼Œç¨‹åºåœ¨æ‰§è¡Œæ—¶å…±å¼€å¯äº†å¤šå°‘ä¸ªçº¿ç¨‹ï¼Ÿ</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Question1</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"mainæ‰§è¡Œ--------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"mainç»“æŸ--------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"method1æ‰§è¡Œ--------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"method1ç»“æŸ--------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"method2æ‰§è¡Œ--------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">method3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"method2ç»“æŸ--------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">method3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"method3æ‰§è¡Œ--------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¯·ä¸è¦ç«‹å³å±•å¼€ï¼Œå…ˆæ€è€ƒ 30 ç§’é’Ÿã€‚</p><details>    <p>æ€ä¹ˆæ ·ï¼Œè‚¯å®šæœ‰äººè®¤ä¸ºè¿™æ˜¯ 4 ä¸ªçº¿ç¨‹å§ã€‚å…¶å®ï¼Œçº¿ç¨‹åªæœ‰ 1 ä¸ªï¼</p>    <p>å› ä¸ºè¿™å¾ˆç®€å•ï¼Œåªæ˜¯æ–¹æ³•ä¹‹é—´çš„è°ƒç”¨è€Œå·²å‘€ã€‚</p></details><h3 id="åˆ›å»ºä¸€ä¸ªçº¿ç¨‹"><a href="#åˆ›å»ºä¸€ä¸ªçº¿ç¨‹" class="headerlink" title="åˆ›å»ºä¸€ä¸ªçº¿ç¨‹"></a>åˆ›å»ºä¸€ä¸ªçº¿ç¨‹</h3><p>çº¿ç¨‹çš„åˆ›å»ºéå¸¸ç®€å•çš„ï¼Œæ€»å…±æœ‰ä¸‰ç§æ–¹æ³•ã€‚ç›®å‰æˆ‘ä¹Ÿæ˜¯åˆšåˆšå­¦ï¼Œæ‰€ä»¥ç›®å‰åªçŸ¥é“ä¸¤ç§åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ï¼Œä¸€ä¸ªæ˜¯é€šè¿‡ç»§æ‰¿ Thread ç±»æ¥åˆ›å»ºçº¿ç¨‹ï¼Œä¸€ä¸ªæ˜¯é€šè¿‡è‡ªå·±å®ç° Runnable æ¥å£æ¥åˆ›å»ºçº¿ç¨‹ã€‚</p><p>ç„¶åå†è°ƒç”¨ start æ–¹æ³•å»åˆ›å»ºçº¿ç¨‹ï¼Œè¿™æ ·ï¼Œä¸€ä¸ªçº¿ç¨‹å°±è¿™æ ·æˆåŠŸçš„å¼€èµ·äº†ã€‚</p><h4 id="ç»§æ‰¿-Thread-ç±»"><a href="#ç»§æ‰¿-Thread-ç±»" class="headerlink" title="ç»§æ‰¿ Thread ç±»"></a>ç»§æ‰¿ Thread ç±»</h4><p>ç»§æ‰¿ Thread ç±»çš„ç›¸å…³ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyThreadTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">MyThread</span> myThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        myThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¸»çº¿ç¨‹------"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * ä½¿ç”¨ç»§æ‰¿çš„æ–¹å¼ */</span><span class="token keyword">class</span> <span class="token class-name">MyThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å­çº¿ç¨‹------"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="å®ç°-Runnable-æ¥å£"><a href="#å®ç°-Runnable-æ¥å£" class="headerlink" title="å®ç° Runnable æ¥å£"></a>å®ç° Runnable æ¥å£</h4><p>å®ç° Runnable æ¥å£åˆ›å»ºçº¿ç¨‹çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚è¿™é‡Œä½¿ç”¨åˆ°çš„æ–¹å¼æ˜¯ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»çš„æ–¹å¼ï¼Œå½“ç„¶ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªç±»æ¥å®ç° Runnable æ¥å£çš„æ–¹å¼ï¼Œå®ä¾‹åŒ–ä½ åˆ›å»ºçš„ç±»ï¼Œä¼ å…¥åˆ° Thread ç±»ä¸­çš„æ„é€ æ–¹æ³•å³å¯ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRunnableTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Thread</span> myThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å­çº¿ç¨‹------"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        myThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¸»çº¿ç¨‹------"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="è¿è¡Œç»“æœ"><a href="#è¿è¡Œç»“æœ" class="headerlink" title="è¿è¡Œç»“æœ"></a>è¿è¡Œç»“æœ</h4><p>ç”±äºè¿è¡Œç»“æœå®åœ¨æ˜¯å¤ªé•¿äº†ï¼Œæˆ‘å°†è¿è¡Œçš„ç»“æœè¿›è¡ŒæŠ˜å äº†ã€‚åç»­çš„è¿è¡Œç»“æœä¹Ÿæ˜¯å¦‚æ­¤</p><details>    <summary>ç‚¹å‡»æŸ¥çœ‹è¿è¡Œç»“æœ</summary><pre>ä¸»çº¿ç¨‹------0å­çº¿ç¨‹------0å­çº¿ç¨‹------1å­çº¿ç¨‹------2å­çº¿ç¨‹------3å­çº¿ç¨‹------4å­çº¿ç¨‹------5å­çº¿ç¨‹------6å­çº¿ç¨‹------7å­çº¿ç¨‹------8å­çº¿ç¨‹------9å­çº¿ç¨‹------10å­çº¿ç¨‹------11å­çº¿ç¨‹------12å­çº¿ç¨‹------13å­çº¿ç¨‹------14å­çº¿ç¨‹------15å­çº¿ç¨‹------16å­çº¿ç¨‹------17å­çº¿ç¨‹------18å­çº¿ç¨‹------19å­çº¿ç¨‹------20å­çº¿ç¨‹------21å­çº¿ç¨‹------22å­çº¿ç¨‹------23å­çº¿ç¨‹------24å­çº¿ç¨‹------25å­çº¿ç¨‹------26å­çº¿ç¨‹------27å­çº¿ç¨‹------28å­çº¿ç¨‹------29å­çº¿ç¨‹------30å­çº¿ç¨‹------31å­çº¿ç¨‹------32å­çº¿ç¨‹------33å­çº¿ç¨‹------34å­çº¿ç¨‹------35å­çº¿ç¨‹------36å­çº¿ç¨‹------37å­çº¿ç¨‹------38å­çº¿ç¨‹------39å­çº¿ç¨‹------40å­çº¿ç¨‹------41å­çº¿ç¨‹------42å­çº¿ç¨‹------43å­çº¿ç¨‹------44å­çº¿ç¨‹------45å­çº¿ç¨‹------46å­çº¿ç¨‹------47å­çº¿ç¨‹------48å­çº¿ç¨‹------49å­çº¿ç¨‹------50å­çº¿ç¨‹------51å­çº¿ç¨‹------52å­çº¿ç¨‹------53å­çº¿ç¨‹------54å­çº¿ç¨‹------55å­çº¿ç¨‹------56å­çº¿ç¨‹------57å­çº¿ç¨‹------58å­çº¿ç¨‹------59å­çº¿ç¨‹------60å­çº¿ç¨‹------61å­çº¿ç¨‹------62å­çº¿ç¨‹------63å­çº¿ç¨‹------64å­çº¿ç¨‹------65å­çº¿ç¨‹------66å­çº¿ç¨‹------67å­çº¿ç¨‹------68å­çº¿ç¨‹------69å­çº¿ç¨‹------70å­çº¿ç¨‹------71å­çº¿ç¨‹------72å­çº¿ç¨‹------73å­çº¿ç¨‹------74å­çº¿ç¨‹------75å­çº¿ç¨‹------76å­çº¿ç¨‹------77å­çº¿ç¨‹------78å­çº¿ç¨‹------79å­çº¿ç¨‹------80å­çº¿ç¨‹------81ä¸»çº¿ç¨‹------1ä¸»çº¿ç¨‹------2ä¸»çº¿ç¨‹------3å­çº¿ç¨‹------82å­çº¿ç¨‹------83å­çº¿ç¨‹------84å­çº¿ç¨‹------85å­çº¿ç¨‹------86å­çº¿ç¨‹------87å­çº¿ç¨‹------88å­çº¿ç¨‹------89å­çº¿ç¨‹------90å­çº¿ç¨‹------91å­çº¿ç¨‹------92å­çº¿ç¨‹------93å­çº¿ç¨‹------94å­çº¿ç¨‹------95å­çº¿ç¨‹------96å­çº¿ç¨‹------97å­çº¿ç¨‹------98å­çº¿ç¨‹------99ä¸»çº¿ç¨‹------4ä¸»çº¿ç¨‹------5ä¸»çº¿ç¨‹------6ä¸»çº¿ç¨‹------7ä¸»çº¿ç¨‹------8ä¸»çº¿ç¨‹------9ä¸»çº¿ç¨‹------10ä¸»çº¿ç¨‹------11ä¸»çº¿ç¨‹------12ä¸»çº¿ç¨‹------13ä¸»çº¿ç¨‹------14ä¸»çº¿ç¨‹------15ä¸»çº¿ç¨‹------16ä¸»çº¿ç¨‹------17ä¸»çº¿ç¨‹------18ä¸»çº¿ç¨‹------19ä¸»çº¿ç¨‹------20ä¸»çº¿ç¨‹------21ä¸»çº¿ç¨‹------22ä¸»çº¿ç¨‹------23ä¸»çº¿ç¨‹------24ä¸»çº¿ç¨‹------25ä¸»çº¿ç¨‹------26ä¸»çº¿ç¨‹------27ä¸»çº¿ç¨‹------28ä¸»çº¿ç¨‹------29ä¸»çº¿ç¨‹------30ä¸»çº¿ç¨‹------31ä¸»çº¿ç¨‹------32ä¸»çº¿ç¨‹------33ä¸»çº¿ç¨‹------34ä¸»çº¿ç¨‹------35ä¸»çº¿ç¨‹------36ä¸»çº¿ç¨‹------37ä¸»çº¿ç¨‹------38ä¸»çº¿ç¨‹------39ä¸»çº¿ç¨‹------40ä¸»çº¿ç¨‹------41ä¸»çº¿ç¨‹------42ä¸»çº¿ç¨‹------43ä¸»çº¿ç¨‹------44ä¸»çº¿ç¨‹------45ä¸»çº¿ç¨‹------46ä¸»çº¿ç¨‹------47ä¸»çº¿ç¨‹------48ä¸»çº¿ç¨‹------49ä¸»çº¿ç¨‹------50ä¸»çº¿ç¨‹------51ä¸»çº¿ç¨‹------52ä¸»çº¿ç¨‹------53ä¸»çº¿ç¨‹------54ä¸»çº¿ç¨‹------55ä¸»çº¿ç¨‹------56ä¸»çº¿ç¨‹------57ä¸»çº¿ç¨‹------58ä¸»çº¿ç¨‹------59ä¸»çº¿ç¨‹------60ä¸»çº¿ç¨‹------61ä¸»çº¿ç¨‹------62ä¸»çº¿ç¨‹------63ä¸»çº¿ç¨‹------64ä¸»çº¿ç¨‹------65ä¸»çº¿ç¨‹------66ä¸»çº¿ç¨‹------67ä¸»çº¿ç¨‹------68ä¸»çº¿ç¨‹------69ä¸»çº¿ç¨‹------70ä¸»çº¿ç¨‹------71ä¸»çº¿ç¨‹------72ä¸»çº¿ç¨‹------73ä¸»çº¿ç¨‹------74ä¸»çº¿ç¨‹------75ä¸»çº¿ç¨‹------76ä¸»çº¿ç¨‹------77ä¸»çº¿ç¨‹------78ä¸»çº¿ç¨‹------79ä¸»çº¿ç¨‹------80ä¸»çº¿ç¨‹------81ä¸»çº¿ç¨‹------82ä¸»çº¿ç¨‹------83ä¸»çº¿ç¨‹------84ä¸»çº¿ç¨‹------85ä¸»çº¿ç¨‹------86ä¸»çº¿ç¨‹------87ä¸»çº¿ç¨‹------88ä¸»çº¿ç¨‹------89ä¸»çº¿ç¨‹------90ä¸»çº¿ç¨‹------91ä¸»çº¿ç¨‹------92ä¸»çº¿ç¨‹------93ä¸»çº¿ç¨‹------94ä¸»çº¿ç¨‹------95ä¸»çº¿ç¨‹------96ä¸»çº¿ç¨‹------97ä¸»çº¿ç¨‹------98ä¸»çº¿ç¨‹------99</pre></details><h4 id="å»ºè®®åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼"><a href="#å»ºè®®åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼" class="headerlink" title="å»ºè®®åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼"></a>å»ºè®®åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼</h4><p>å¼ºçƒˆå»ºè®®ä½¿ç”¨å®ç° Runnable æ¥å£çš„æ–¹å¼ï¼Œå› ä¸ºåœ¨ java ä¸­ï¼Œç»§æ‰¿åªèƒ½æ˜¯å•ä¸€çš„ç»§æ‰¿ï¼Œä¸èƒ½å¤šç»§æ‰¿ï¼Œå¦‚æœä½¿ç”¨ç»§æ‰¿ Thread çš„æ–¹å¼ï¼Œå°±ä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜ã€‚è€Œåœ¨ java ä¸­ï¼Œå¯ä»¥è¿™æ ·å­å†™ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Example1</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractModule</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//......</span><span class="token punctuation">&#125;</span></code></pre><h3 id="è´¨ç–‘"><a href="#è´¨ç–‘" class="headerlink" title="è´¨ç–‘"></a>è´¨ç–‘</h3><ol><li>ä¸ºä»€ä¹ˆæˆ‘è¿è¡Œçš„ç»“æœå’Œè§†é¢‘ä¸Šè¿è¡Œçš„ç»“æœæ˜¯å®Œå…¨ä¸ä¸€æ ·çš„å‘€ï¼Ÿ</li><li>ä¸ºä»€ä¹ˆæˆ‘è¿è¡Œçš„æ—¶å€™ï¼Œæ€»æ˜¯ä¸»çº¿ç¨‹ç°æ‰§è¡Œè€Œä¸æ˜¯å­çº¿ç¨‹å…ˆæ‰§è¡Œï¼Ÿ</li><li>ä¸»çº¿ç¨‹ä¸€å®šæ˜¯æœ€å…ˆè¿è¡Œçš„å—ï¼Œå­çº¿ç¨‹å°±æ²¡æœ‰å…ˆè¾“å‡ºçš„æƒåˆ©å—ï¼Ÿ</li><li>ä½ çœ‹ï¼Œæˆ‘çš„è¿è¡Œç»“æœå®Œäº†ä¹‹åï¼Œå®ƒå°±æ˜¯ä¸»çº¿ç¨‹å…ˆæ‰§è¡Œå®Œå†æ‰§è¡Œå­çº¿ç¨‹ï¼Œè¿™æˆ‘è§‰å¾—å’Œå•çº¿ç¨‹æ²¡ä»€ä¹ˆåŒºåˆ«å‘€ï¼Ÿ</li><li>è°ƒç”¨ start æ–¹æ³•å’Œè°ƒç”¨çš„ run çš„æ–¹æ³•å¥½åƒæ²¡ä»€ä¹ˆåŒºåˆ«å§ï¼Ÿ</li><li>â€¦â€¦</li></ol><p>ä»¥ä¸Šæ˜¯æˆ‘åœ¨å¤šçº¿ç¨‹å­¦ä¹ æ—¶ï¼Œæˆ‘ç›®å‰æ‰€é‡åˆ°çš„ç–‘é—®ï¼Œå¯èƒ½è¿˜æœ‰å…¶å®ƒçš„é—®é¢˜ã€‚æ˜¾ç„¶ï¼Œå‡ºç° 1~4 ç‚¹è¿™æ ·çš„ç–‘é—®çš„åŸå› ç»å¤§å¤šæ˜¯ä¸äº†è§£çš„çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸæ‰€é€ æˆçš„ã€‚å½“ç„¶ï¼Œç¬¬ 5 ç‚¹æ˜¯è‡ªèº« java åŸºç¡€çš„é—®é¢˜äº†ã€‚</p><p>è¿™ä¹Ÿæ˜¯æˆ‘å¤§ä¸“æ—¶æœŸåˆšå­¦ä¹  java çš„æ—¶å€™å­¦ä¹ å¤šçº¿ç¨‹éƒ¨åˆ†æ‰€ç¢°åˆ°çš„é—®é¢˜ã€‚</p><h3 id="è§£ç­”"><a href="#è§£ç­”" class="headerlink" title="è§£ç­”"></a>è§£ç­”</h3><p>å…ˆä»æœ€ç®€å•çš„ç¬¬ 5 ç‚¹å¼€å§‹è¯´èµ·å§ã€‚</p><p>è°ƒç”¨ run æ–¹æ³•å’Œè°ƒç”¨ start æ–¹æ³•çš„éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯å…¥æ ˆå’Œå¼¹æ ˆï¼Œä»…ä»…åªæ˜¯è°ƒç”¨äº†ç±»ä¸­çš„æ–¹æ³•è€Œå·²ã€‚ä½†æ˜¯ä»”ç»†æ€è€ƒï¼Œrun æ–¹æ³•é‡Œé¢çš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Ÿæ¯”å¦‚ä¸Šé¢é‚£ä¸¤ä¸ªä¾‹å­ï¼Œrun æ–¹æ³•æ˜¯éœ€è¦è‡ªå·±å®ç°çš„ï¼Œå®ç°çš„é‡Œé¢æ˜¯ä¸€ä¸ª for å¾ªç¯ã€‚è€Œ start æ–¹æ³•é‡Œé¢æ˜¯å•¥ï¼Œæˆ‘æŠŠå†…å®¹æ”¾å‡ºæ¥å¦‚ä¸‹ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**      * This method is not invoked for the main method thread or "system"      * group threads created/set up by the VM. Any new functionality added      * to this method in the future may have to also be added to the VM.      *      * A zero status value corresponds to state "NEW".      */</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>threadStatus <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalThreadStateException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/* Notify the group that this thread is about to be started     * so that it can be added to the group's list of threads     * and the group's unstarted count can be decremented. */</span>    group<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">boolean</span> started <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        <span class="token function">start0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        started <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>started<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                group<span class="token punctuation">.</span><span class="token function">threadStartFailed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> ignore<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">/* do nothing. If start0 threw a Throwable then                  it will be passed up the call stack */</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>å…ˆä¸çœ‹è¿™é‡Œé¢å¤æ‚çš„å†…å®¹ï¼Œä½†æ˜¯æ²¡æœ‰çœ‹åˆ° start æ–¹æ³•é‡Œæœ‰åœ¨è°ƒç”¨ run æ–¹æ³•ã€‚è¿™å°±æ„å‘³ç€ï¼Œstart æ–¹æ³•å’Œ run æ–¹æ³•æ˜¯ä¸¤ä¸ªä¸åŒçš„ä¸œè¥¿ã€‚åˆ›å»ºå‡ºæ¥çš„çº¿ç¨‹ï¼Œè¿™ä¸ª run æ–¹æ³•å…¶å®å°±ç›¸å½“äºä¸»çº¿ç¨‹ä¸­çš„ main æ–¹æ³•ä¸€æ ·çš„ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ start æ–¹æ³•å°±æ˜¯åˆ›å»ºçº¿ç¨‹ç”¨çš„ã€‚</p><p>ä»¥ä¸Šçš„å››ä¸ªé—®é¢˜ï¼Œå°±å•ç‹¬ç”¨ä¸€ä¸ªå†…å®¹æ¥è¯´ã€‚</p><h2 id="çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ"></a>çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</h2><p>çº¿ç¨‹ä¸»è¦æœ‰ 5 ç§çŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯ â€œåˆ›å»ºâ€ã€â€œå°±ç»ªâ€ã€â€œè¿è¡Œâ€ã€â€œé˜»å¡â€ å’Œ â€œæ­»äº¡â€ è¿™ 5 ç§çŠ¶æ€ã€‚å¯ä»¥ç”¨è¿™å¼ å›¾æ¥æè¿°ä¸€ä¸‹ã€‚</p><blockquote><p>ä»€ä¹ˆæ˜¯æ—¶é—´ç‰‡ï¼Ÿå¦‚æœä½ å­¦è¿‡ç—›è‹¦çš„æ“ä½œç³»ç»Ÿï¼Œä½ å°±çŸ¥é“ã€‚</p><p>æ—¶é—´ç‰‡å³ CPU åˆ†é…ç»™å„ä¸ªç¨‹åºçš„æ—¶é—´ï¼Œæ¯ä¸ªçº¿ç¨‹è¢«åˆ†é…ä¸€ä¸ªæ—¶é—´æ®µï¼Œç§°ä½œå®ƒçš„æ—¶é—´ç‰‡ï¼Œå³è¯¥çº¿ç¨‹å…è®¸è¿è¡Œçš„æ—¶é—´ã€‚</p></blockquote><p><img src="/journal/java-multi-thread/image-20210806154504981.png" alt="image-20210806154504981" loading="lazy"></p><p>åœ¨ java ä¸­ï¼Œé€šè¿‡åˆ›å»ºå‡ºæ¥çš„ Thread å¯¹è±¡ï¼Œè¦æƒ³çœŸæ­£çš„åˆ›å»ºå‡ºçº¿ç¨‹ï¼Œåˆ™å¿…é¡»è°ƒç”¨å…¶ start æ–¹æ³•ã€‚è°ƒç”¨å®ƒçš„ start æ–¹æ³•ï¼Œæ­¤æ—¶çº¿ç¨‹åˆ›å»ºå®Œæˆã€‚</p><p>åˆ›å»ºçš„çº¿ç¨‹èƒ½å¤Ÿç›´æ¥è¿è¡Œå—ï¼Ÿå½“ç„¶ä¸èƒ½ï¼Œè¦å…ˆè¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œç­‰å¾… CPU çš„è°ƒåº¦æ‰èƒ½å¤Ÿæ‰§è¡Œã€‚å‡å¦‚è¿™ä¸ªç¨‹åºä¸­å…±æœ‰ 2 ä¸ªçº¿ç¨‹ï¼Œå½“ç¬¬ä¸€ä¸ªç¨‹åºçš„æ—¶é—´ç‰‡åˆ°äº†ï¼Œä»–å°±éœ€è¦è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œç­‰å¾… CPU çš„è°ƒåº¦ã€‚ä½†æ˜¯ç¬¬äºŒä¸ªçº¿ç¨‹ä¸€å®šä¼šè¿è¡ŒçŠ¶æ€ä¹ˆï¼Ÿæ˜¾ç„¶è¿™æ˜¯ä¸ä¸€å®šçš„ï¼Œæœ‰å¯èƒ½çº¿ç¨‹ 1 ä¼šç»§ç»­æ‰§è¡Œï¼Œä¹Ÿæœ‰å¯èƒ½çº¿ç¨‹ 2 ä¼šç»§ç»­æ‰§è¡Œã€‚è¿™å°±æœ‰äº†ä¸Šé¢çš„ç¤ºä¾‹æ‰€è¾“å‡ºçš„ç»“æœï¼Œå³ä¸»çº¿ç¨‹æ‰§è¡Œåˆ° 0 ï¼Œå­çº¿ç¨‹å°±çªç„¶ä» 0 ä¸€æ¬¡æ€§æ‰§è¡Œåˆ° 99ï¼Œä¹Ÿå°±æœ‰äº†æ¯æ¬¡è¾“å‡ºéƒ½æ˜¯ä¸åŒçš„ç»“æœçš„åŸå› äº†ã€‚</p><p>ç”±äº CPU çš„åˆ‡æ¢çš„é¢‘ç‡éå¸¸ä¹‹å¿«ã€‚è¿™å°±çœ‹èµ·æ¥åƒæ˜¯ï¼Œå®è§‚ä¸Šæ˜¯å¹¶è¡Œï¼ˆåŒæ—¶è¿è¡Œï¼‰ï¼Œå¾®è§‚ä¸Šæ˜¯ä¸²è¡Œï¼ˆä¸€ä¸ªä¸€ä¸ªè¿è¡Œï¼‰ã€‚</p><p>é‚£é˜»å¡çŠ¶æ€ä»€ä¹ˆæ—¶å€™ä¼šå‡ºç°å‘ï¼Ÿæ¯”å¦‚ï¼Œçº¿ç¨‹ 2 ä¸­çªç„¶é‡åˆ°äº†é”®ç›˜è¾“å…¥çš„æ“ä½œï¼Œéœ€è¦ç­‰å¾…ç”¨æˆ·è¾“å…¥å®Œæˆæ‰èƒ½æ‰§è¡Œçš„ä¸‹ä¸€æ­¥æ“ä½œï¼Œåœ¨è¾“å…¥å®Œæˆä¹‹å‰ï¼Œå¤„äºè¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹ 2 å°±è¿›å…¥äº†é˜»å¡çŠ¶æ€ï¼Œæ­¤æ—¶çº¿ç¨‹ 1 å—åˆ° CPU çš„è°ƒåº¦ç»§ç»­æ‰§è¡Œç€ã€‚ç”¨æˆ·è¾“å…¥å®Œæˆä¹‹åï¼Œçº¿ç¨‹ 2 åªå¥½è¿›å…¥å°±ç»ªçš„çŠ¶æ€äº†ï¼Œç­‰å¾… CPU çš„è°ƒåº¦äº†ã€‚</p><p>é‚£æ­»äº¡çŠ¶æ€åˆæ˜¯æ€ä¹ˆä¸€å›äº‹ï¼Ÿåœ¨ java ä¸­ï¼Œæ­»äº¡çŠ¶æ€å°±æ˜¯çº¿ç¨‹ä¸­çš„ run æ–¹æ³•ï¼Œæˆ–è€…ä¸»çº¿ç¨‹çš„ main æ–¹æ³•ä¸­çš„ä»£ç è¿è¡Œç»“æŸäº†ã€‚çº¿ç¨‹å°±å¤„äºæ­»äº¡çŠ¶æ€äº†ã€‚</p><p>ä½†æ˜¯ï¼Œä¸»çº¿ç¨‹è¿è¡Œç»“æŸäº†ï¼Œå­çº¿ç¨‹å°±æå‰æŒ‚äº†å—ï¼Ÿè¿™æ˜¯ç»å¯¹ä¸å¯èƒ½çš„ã€‚</p><p>å…¶å®ï¼Œä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹å¹¶ä¸æ˜¯â€œçˆ¶å­â€å…³ç³»ï¼Œè€Œæ˜¯â€œå…„å¼Ÿâ€å…³ç³»ã€‚</p><h2 id="java-å¤šçº¿ç¨‹çš„ä¸€äº›ç®€å•æ“ä½œ"><a href="#java-å¤šçº¿ç¨‹çš„ä¸€äº›ç®€å•æ“ä½œ" class="headerlink" title="java å¤šçº¿ç¨‹çš„ä¸€äº›ç®€å•æ“ä½œ"></a>java å¤šçº¿ç¨‹çš„ä¸€äº›ç®€å•æ“ä½œ</h2><p>æ¯”å¦‚ï¼Œè·å–ã€ä¿®æ”¹çº¿ç¨‹çš„åå­—ï¼Œè·å–å½“å‰çº¿ç¨‹çš„å¯¹è±¡ï¼Œè®©å½“å‰çº¿ç¨‹ä¼‘çœ ï¼ˆè¿›å…¥é˜»å¡çŠ¶æ€ï¼‰ï¼Œå”¤é†’æ­£åœ¨ä¼‘çœ çš„çº¿ç¨‹ï¼Œå¼ºè¡Œæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Œåˆç†çš„å…³é—­æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ã€‚</p><h3 id="è·å–ã€ä¿®æ”¹çº¿ç¨‹çš„åå­—"><a href="#è·å–ã€ä¿®æ”¹çº¿ç¨‹çš„åå­—" class="headerlink" title="è·å–ã€ä¿®æ”¹çº¿ç¨‹çš„åå­—"></a>è·å–ã€ä¿®æ”¹çº¿ç¨‹çš„åå­—</h3><p>ä½¿ç”¨ setName æ–¹æ³•æ¥ä¿®æ”¹çº¿ç¨‹çš„åå­—ï¼Œä½¿ç”¨ getName æ–¹æ³•æ¥è·å–çº¿ç¨‹çš„åå­—</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// do something......</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è®¾ç½®çº¿ç¨‹åå­—</span>t1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"å°èµ«èµ«"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>t1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="è·å–å½“å‰çº¿ç¨‹çš„å¯¹è±¡"><a href="#è·å–å½“å‰çº¿ç¨‹çš„å¯¹è±¡" class="headerlink" title="è·å–å½“å‰çº¿ç¨‹çš„å¯¹è±¡"></a>è·å–å½“å‰çº¿ç¨‹çš„å¯¹è±¡</h3><p>è·å–å½“å‰çº¿ç¨‹å¯¹è±¡çš„æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œä½¿ç”¨ currentThread æ–¹æ³•æ¥è°ƒç”¨å½“å‰çš„çº¿ç¨‹å¯¹è±¡ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Thread</span> currentThread <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å¦‚æœæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸‹ï¼Œå¾—åˆ°çš„æ˜¯ä¸»çº¿ç¨‹çš„å¯¹è±¡ã€‚å¦‚æœæ˜¯è‡ªå·±åˆ›å»ºçš„çº¿ç¨‹ï¼Œå°±è·å–è‡ªå·±åˆ›å»ºçº¿ç¨‹çš„å¯¹è±¡ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// æ–°çº¿ç¨‹å¯¹è±¡</span>    <span class="token class-name">Thread</span> mainThread <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// do something......</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ä¸»çº¿ç¨‹å¯¹è±¡</span><span class="token class-name">Thread</span> mainThread <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="çº¿ç¨‹ä¼‘çœ ä¸å”¤é†’"><a href="#çº¿ç¨‹ä¼‘çœ ä¸å”¤é†’" class="headerlink" title="çº¿ç¨‹ä¼‘çœ ä¸å”¤é†’"></a>çº¿ç¨‹ä¼‘çœ ä¸å”¤é†’</h3><p>ä½¿ç”¨ sleep æ–¹æ³•æ¥ä¼‘çœ ä¸€ä¸ªçº¿ç¨‹ã€‚å•ä½æ˜¯æ¯«ç§’ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œå”¤é†’ä¸€ä¸ªçº¿ç¨‹æ˜¯éœ€è¦è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„ interrupt æ–¹æ³•ï¼Œé€šè¿‡ java å¼‚å¸¸æœºåˆ¶æ¥å”¤é†’çº¿ç¨‹</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// do something......</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å”¤é†’ t1 çº¿ç¨‹</span>t1<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="ç»ˆæ­¢ä¸€ä¸ªçº¿ç¨‹"><a href="#ç»ˆæ­¢ä¸€ä¸ªçº¿ç¨‹" class="headerlink" title="ç»ˆæ­¢ä¸€ä¸ªçº¿ç¨‹"></a>ç»ˆæ­¢ä¸€ä¸ªçº¿ç¨‹</h3><p>ä½¿ç”¨ stop æ–¹æ³•æ¥ç»ˆæ­¢å¼ºè¡Œç»ˆæ­¢ä¸€ä¸ªçº¿ç¨‹ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// do something......</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>t1<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿™æ ·åšå…¶å®æ˜¯éå¸¸ä¸å®‰å…¨çš„ï¼Œå› ä¸ºè¿™æ ·å¾ˆå®¹æ˜“é€ æˆæ•°æ®çš„ä¸¢å¤±ï¼Œé‚£æˆ‘ä»¬å¦‚ä½•æ­£å¸¸çš„å…³é—­ä¸€ä¸ªçº¿ç¨‹å‘¢ï¼Ÿ</p><p>å½“ç„¶æ˜¯å¯ä»¥çš„ã€‚</p><p>è¿™ä¸ªç›®å‰åªèƒ½å¤Ÿé€šè¿‡ä»£ç çš„æ–¹å¼æ¥ç»ˆæ­¢ï¼Œè€Œä¸æ˜¯ä½¿ç”¨çº¿ç¨‹ç±»ä¸­çš„æ–¹æ³•ã€‚</p><p>ä¸€ä¸ªä¾‹å­</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// çº¿ç¨‹åœæ­¢çš„çŠ¶æ€</span>    isEnd <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>isEnd<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// do something......</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// stop to do another......</span>        <span class="token comment">// å¦‚æœæ˜¯æ•°æ®åº“çš„è¿æ¥ï¼Œåˆ™å¯ä»¥åšå…³é—­æ•°æ®åº“è¿æ¥çš„æ“ä½œ</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// åœæ­¢çº¿ç¨‹</span>t1<span class="token punctuation">.</span>isEnd <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></code></pre><h3 id="å…³äºçº¿ç¨‹ä¼‘çœ çš„ç–‘é—®"><a href="#å…³äºçº¿ç¨‹ä¼‘çœ çš„ç–‘é—®" class="headerlink" title="å…³äºçº¿ç¨‹ä¼‘çœ çš„ç–‘é—®"></a>å…³äºçº¿ç¨‹ä¼‘çœ çš„ç–‘é—®</h3><p>è¿™é‡Œæœ‰ä¸€æ®µä»£ç ï¼Œæˆ‘è°ƒç”¨ t çº¿ç¨‹çš„ sleep æ–¹æ³•ã€‚é‚£ä¹ˆæ˜¯ t çº¿ç¨‹ä¼šä¸ä¼šä¼‘çœ ï¼Œè¿˜æ˜¯ä¸»çº¿ç¨‹ä¼šä¸ä¼šä¼‘çœ ï¼Ÿ</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Question2</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è°ƒç”¨ t çº¿ç¨‹çš„ sleep æ–¹æ³•</span>        t<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    system<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"he11o world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">MyThread3</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"--->"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¯·ä¸è¦ç«‹å³å±•å¼€ï¼Œå…ˆæ€è€ƒ 30 ç§’</p><details>    <p>æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼Œä¸»çº¿ç¨‹ä¼‘çœ ï¼</p>    <p>æ€ä¹ˆæ ·ï¼Œæœ‰å’Œæˆ‘ä¸€æ ·è¢«è¯¯è®¤ä¸ºæ˜¯ t çº¿ç¨‹ä¼‘çœ çš„å—ï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆã€‚</p>    <p>å› ä¸º sleep æ–¹æ³•å®ƒæ˜¯ä¸€ä¸ªé™æ€çš„æ–¹æ³•ï¼Œé™æ€æ–¹æ³•å’Œé™æ€æˆå‘˜å˜é‡éƒ½æ˜¯éšç€ç±»çš„åŠ è½½è€ŒåŠ è½½å‘€ã€‚æ‰€ä»¥ <code>t.sleep()</code> å’Œ <code>Thread.sleep()</code> æ˜¯ä¸€æ ·çš„æ•ˆæœï¼Œåªè¦å†™åœ¨å“ªä¸ªçº¿ç¨‹é‡Œé¢ï¼Œå°±æ˜¯åœ¨å“ªä¸ªçº¿ç¨‹ä¸­ä¼‘çœ ã€‚</p></details><h2 id="java-å¤šçº¿ç¨‹çš„ä¸€äº›è°ƒåº¦"><a href="#java-å¤šçº¿ç¨‹çš„ä¸€äº›è°ƒåº¦" class="headerlink" title="java å¤šçº¿ç¨‹çš„ä¸€äº›è°ƒåº¦"></a>java å¤šçº¿ç¨‹çš„ä¸€äº›è°ƒåº¦</h2><h3 id="çº¿ç¨‹ä¼˜å…ˆçº§"><a href="#çº¿ç¨‹ä¼˜å…ˆçº§" class="headerlink" title="çº¿ç¨‹ä¼˜å…ˆçº§"></a>çº¿ç¨‹ä¼˜å…ˆçº§</h3><p>åœ¨ java çš„å¤šçº¿ç¨‹ä¸­ï¼Œå¯ä»¥ç»™çº¿ç¨‹è®¾ç½®ä¼˜å…ˆçº§ã€‚è®¾ç½®çº¿ç¨‹çš„ä¼˜å…ˆçº§éœ€è¦è·å–å½“å‰çš„çº¿ç¨‹å¯¹è±¡ï¼Œæ‰èƒ½å¤Ÿè®¾ç½®çº¿ç¨‹çš„ä¼˜å…ˆçº§ã€‚é¦–å…ˆï¼Œåœ¨ Thread ç±»ä¸­ï¼Œå…±æœ‰ä¸‰ä¸ªå¸¸é‡ã€‚å®ƒä»¬åˆ†åˆ«æ˜¯æœ€ä½ä¼˜å…ˆçº§ï¼Œæ­£å¸¸ä¼˜å…ˆçº§å’Œæœ€é«˜ä¼˜å…ˆçº§ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/**  * The minimum priority that a thread can have.  */</span><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> MIN_PRIORITY <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">/**  * The default priority that is assigned to a thread.  */</span><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> NORM_PRIORITY <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token comment">/**  * The maximum priority that a thread can have.  */</span><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> MAX_PRIORITY <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></code></pre><p>å½“ç„¶ï¼Œçº¿ç¨‹çš„ä¼˜å…ˆçº§ä¹Ÿå¯ä»¥é€šè¿‡æ•°å­—ï¼ˆ1-10ï¼‰çš„æ–¹å¼æ¥è®¾ç½®ã€‚</p><p>ä»¥ä¸‹æ˜¯è®¾ç½®ä¼˜å…ˆçº§çš„æ–¹æ³•ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>MAX_PRIORITY<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è®¾ç½®ä¼˜å…ˆçº§çš„ç›®çš„åœ¨äºè®©è¯¥çº¿ç¨‹å¤„äºè¿è¡Œæ€çš„æ—¶é—´ä¼šæ›´ä¹…ä¸€äº›ã€‚</p><h3 id="çº¿ç¨‹è®©ä½"><a href="#çº¿ç¨‹è®©ä½" class="headerlink" title="çº¿ç¨‹è®©ä½"></a>çº¿ç¨‹è®©ä½</h3><p>å°±æ˜¯å½“å‰çš„çº¿ç¨‹çš„è¿è¡Œæ—¶é—´ç‰‡ï¼Œè®©ç»™å…¶å®ƒçº¿ç¨‹ã€‚åœ¨ java ä¸­ï¼Œä½¿ç”¨é™æ€ yield æ–¹æ³•æ¥å°†çº¿ç¨‹è¿›è¡Œè®©ä½</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token keyword">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œæ¯è¿è¡Œåˆ° 10 çš„æ—¶å€™ï¼Œå°±è®©ä½ä¸€æ¬¡ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRunnableTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"çº¿ç¨‹"</span> <span class="token operator">+</span> thread<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"------"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"t1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">10</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token keyword">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ¯10æ¬¡è®©ç»™ t1 çº¿ç¨‹</span>            <span class="token punctuation">&#125;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"çº¿ç¨‹"</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"------"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><details>    <summary>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œè¯·å±•å¼€</summary><pre>çº¿ç¨‹main------1çº¿ç¨‹main------2çº¿ç¨‹main------3çº¿ç¨‹main------4çº¿ç¨‹main------5çº¿ç¨‹main------6çº¿ç¨‹main------7çº¿ç¨‹main------8çº¿ç¨‹main------9çº¿ç¨‹t1------1çº¿ç¨‹t1------2çº¿ç¨‹t1------3çº¿ç¨‹t1------4çº¿ç¨‹t1------5çº¿ç¨‹t1------6çº¿ç¨‹t1------7çº¿ç¨‹t1------8çº¿ç¨‹t1------9çº¿ç¨‹t1------10çº¿ç¨‹t1------11çº¿ç¨‹t1------12çº¿ç¨‹t1------13çº¿ç¨‹t1------14çº¿ç¨‹t1------15çº¿ç¨‹t1------16çº¿ç¨‹t1------17çº¿ç¨‹t1------18çº¿ç¨‹t1------19çº¿ç¨‹t1------20çº¿ç¨‹t1------21çº¿ç¨‹t1------22çº¿ç¨‹t1------23çº¿ç¨‹t1------24çº¿ç¨‹t1------25çº¿ç¨‹t1------26çº¿ç¨‹t1------27çº¿ç¨‹t1------28çº¿ç¨‹t1------29çº¿ç¨‹t1------30çº¿ç¨‹t1------31çº¿ç¨‹t1------32çº¿ç¨‹t1------33çº¿ç¨‹t1------34çº¿ç¨‹t1------35çº¿ç¨‹t1------36çº¿ç¨‹t1------37çº¿ç¨‹t1------38çº¿ç¨‹t1------39çº¿ç¨‹t1------40çº¿ç¨‹t1------41çº¿ç¨‹t1------42çº¿ç¨‹t1------43çº¿ç¨‹t1------44çº¿ç¨‹t1------45çº¿ç¨‹t1------46çº¿ç¨‹t1------47çº¿ç¨‹t1------48çº¿ç¨‹t1------49çº¿ç¨‹t1------50çº¿ç¨‹t1------51çº¿ç¨‹t1------52çº¿ç¨‹t1------53çº¿ç¨‹t1------54çº¿ç¨‹t1------55çº¿ç¨‹t1------56çº¿ç¨‹t1------57çº¿ç¨‹t1------58çº¿ç¨‹t1------59çº¿ç¨‹t1------60çº¿ç¨‹t1------61çº¿ç¨‹t1------62çº¿ç¨‹t1------63çº¿ç¨‹t1------64çº¿ç¨‹t1------65çº¿ç¨‹t1------66çº¿ç¨‹t1------67çº¿ç¨‹t1------68çº¿ç¨‹t1------69çº¿ç¨‹t1------70çº¿ç¨‹t1------71çº¿ç¨‹t1------72çº¿ç¨‹t1------73çº¿ç¨‹t1------74çº¿ç¨‹t1------75çº¿ç¨‹t1------76çº¿ç¨‹t1------77çº¿ç¨‹t1------78çº¿ç¨‹t1------79çº¿ç¨‹t1------80çº¿ç¨‹t1------81çº¿ç¨‹t1------82çº¿ç¨‹t1------83çº¿ç¨‹t1------84çº¿ç¨‹t1------85çº¿ç¨‹t1------86çº¿ç¨‹t1------87çº¿ç¨‹t1------88çº¿ç¨‹t1------89çº¿ç¨‹t1------90çº¿ç¨‹t1------91çº¿ç¨‹t1------92çº¿ç¨‹t1------93çº¿ç¨‹t1------94çº¿ç¨‹t1------95çº¿ç¨‹t1------96çº¿ç¨‹t1------97çº¿ç¨‹t1------98çº¿ç¨‹t1------99çº¿ç¨‹t1------100çº¿ç¨‹main------10çº¿ç¨‹main------11çº¿ç¨‹main------12çº¿ç¨‹main------13çº¿ç¨‹main------14çº¿ç¨‹main------15çº¿ç¨‹main------16çº¿ç¨‹main------17çº¿ç¨‹main------18çº¿ç¨‹main------19çº¿ç¨‹main------20çº¿ç¨‹main------21çº¿ç¨‹main------22çº¿ç¨‹main------23çº¿ç¨‹main------24çº¿ç¨‹main------25çº¿ç¨‹main------26çº¿ç¨‹main------27çº¿ç¨‹main------28çº¿ç¨‹main------29çº¿ç¨‹main------30çº¿ç¨‹main------31çº¿ç¨‹main------32çº¿ç¨‹main------33çº¿ç¨‹main------34çº¿ç¨‹main------35çº¿ç¨‹main------36çº¿ç¨‹main------37çº¿ç¨‹main------38çº¿ç¨‹main------39çº¿ç¨‹main------40çº¿ç¨‹main------41çº¿ç¨‹main------42çº¿ç¨‹main------43çº¿ç¨‹main------44çº¿ç¨‹main------45çº¿ç¨‹main------46çº¿ç¨‹main------47çº¿ç¨‹main------48çº¿ç¨‹main------49çº¿ç¨‹main------50çº¿ç¨‹main------51çº¿ç¨‹main------52çº¿ç¨‹main------53çº¿ç¨‹main------54çº¿ç¨‹main------55çº¿ç¨‹main------56çº¿ç¨‹main------57çº¿ç¨‹main------58çº¿ç¨‹main------59çº¿ç¨‹main------60çº¿ç¨‹main------61çº¿ç¨‹main------62çº¿ç¨‹main------63çº¿ç¨‹main------64çº¿ç¨‹main------65çº¿ç¨‹main------66çº¿ç¨‹main------67çº¿ç¨‹main------68çº¿ç¨‹main------69çº¿ç¨‹main------70çº¿ç¨‹main------71çº¿ç¨‹main------72çº¿ç¨‹main------73çº¿ç¨‹main------74çº¿ç¨‹main------75çº¿ç¨‹main------76çº¿ç¨‹main------77çº¿ç¨‹main------78çº¿ç¨‹main------79çº¿ç¨‹main------80çº¿ç¨‹main------81çº¿ç¨‹main------82çº¿ç¨‹main------83çº¿ç¨‹main------84çº¿ç¨‹main------85çº¿ç¨‹main------86çº¿ç¨‹main------87çº¿ç¨‹main------88çº¿ç¨‹main------89çº¿ç¨‹main------90çº¿ç¨‹main------91çº¿ç¨‹main------92çº¿ç¨‹main------93çº¿ç¨‹main------94çº¿ç¨‹main------95çº¿ç¨‹main------96çº¿ç¨‹main------97çº¿ç¨‹main------98çº¿ç¨‹main------99çº¿ç¨‹main------100</pre></details><p>è¿è¡Œç»“æœå‘ç°ï¼Œå½“è¾“å‡ºåˆ° 9 æ—¶ï¼ˆå…¶å®å·²ç»æ˜¯ 10 äº†ï¼Œåªæ˜¯ 10 æ˜¯åœ¨è®©æ­¥ä¹‹åæ‰ä¼šæ‰“å°ï¼‰ ã€‚ä¸»çº¿ç¨‹å°±è®©å‡ºç»™å…¶å®ƒçº¿ç¨‹ ï¼Œç”±äºè¿™é‡Œæ˜¯ t1 å°±å¼€å§‹æ‰§è¡Œ ã€‚</p><p>ç”±äº t1 å·²ç»æ­»äº¡äº†ï¼Œæ­¤æ—¶ä¸»çº¿ç¨‹åœ¨</p><h3 id="çº¿ç¨‹åˆå¹¶"><a href="#çº¿ç¨‹åˆå¹¶" class="headerlink" title="çº¿ç¨‹åˆå¹¶"></a>çº¿ç¨‹åˆå¹¶</h3><p>çº¿ç¨‹çš„åˆå¹¶ï¼Œä½¿ç”¨ join æ–¹æ³•å¯¹çº¿ç¨‹è¿›è¡Œåˆå¹¶ ã€‚</p><p>ç¤ºä¾‹å¦‚ä¸‹</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRunnableTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"çº¿ç¨‹"</span> <span class="token operator">+</span> thread<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"------"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"t1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"çº¿ç¨‹"</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"------"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                t1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><details>    <summary>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œè¯·å±•å¼€ï¼ˆæ‰§è¡Œç»“æœå¤ªé•¿ï¼Œçœç•¥äº†éƒ¨åˆ†ï¼‰</summary><pre>çº¿ç¨‹main------1çº¿ç¨‹t1------1çº¿ç¨‹t1------2çº¿ç¨‹t1------3çº¿ç¨‹t1------4çº¿ç¨‹t1------5çº¿ç¨‹t1------6çº¿ç¨‹t1------7çº¿ç¨‹t1------8çº¿ç¨‹t1------9çº¿ç¨‹t1------10çº¿ç¨‹t1------11çº¿ç¨‹t1------12çº¿ç¨‹t1------13çº¿ç¨‹t1------14çº¿ç¨‹t1------15çº¿ç¨‹t1------16çº¿ç¨‹t1------17çº¿ç¨‹t1------18çº¿ç¨‹t1------19çº¿ç¨‹t1------20çº¿ç¨‹t1------21çº¿ç¨‹t1------22çº¿ç¨‹t1------23çº¿ç¨‹t1------24çº¿ç¨‹t1------25çº¿ç¨‹t1------26çº¿ç¨‹t1------27çº¿ç¨‹t1------28çº¿ç¨‹t1------29çº¿ç¨‹t1------30çº¿ç¨‹t1------31çº¿ç¨‹t1------32çº¿ç¨‹t1------33çº¿ç¨‹t1------34çº¿ç¨‹t1------35çº¿ç¨‹t1------36çº¿ç¨‹t1------37çº¿ç¨‹t1------38çº¿ç¨‹t1------39çº¿ç¨‹t1------40çº¿ç¨‹t1------41çº¿ç¨‹t1------42çº¿ç¨‹t1------43çº¿ç¨‹t1------44çº¿ç¨‹t1------45çº¿ç¨‹t1------46çº¿ç¨‹t1------47çº¿ç¨‹t1------48çº¿ç¨‹t1------49çº¿ç¨‹t1------50çº¿ç¨‹t1------51çº¿ç¨‹t1------52çº¿ç¨‹t1------53çº¿ç¨‹t1------54çº¿ç¨‹t1------55çº¿ç¨‹t1------56çº¿ç¨‹t1------57çº¿ç¨‹t1------58çº¿ç¨‹t1------59çº¿ç¨‹t1------60çº¿ç¨‹t1------61çº¿ç¨‹t1------62çº¿ç¨‹t1------63çº¿ç¨‹t1------64çº¿ç¨‹t1------65çº¿ç¨‹t1------66çº¿ç¨‹t1------67çº¿ç¨‹t1------68çº¿ç¨‹t1------69çº¿ç¨‹t1------70çº¿ç¨‹t1------71çº¿ç¨‹t1------72çº¿ç¨‹t1------73çº¿ç¨‹t1------74çº¿ç¨‹t1------75çº¿ç¨‹t1------76çº¿ç¨‹t1------77çº¿ç¨‹t1------78çº¿ç¨‹t1------79çº¿ç¨‹t1------80çº¿ç¨‹t1------81çº¿ç¨‹t1------82çº¿ç¨‹t1------83çº¿ç¨‹t1------84çº¿ç¨‹t1------85çº¿ç¨‹t1------86çº¿ç¨‹t1------87çº¿ç¨‹t1------88çº¿ç¨‹t1------89çº¿ç¨‹t1------90çº¿ç¨‹t1------91çº¿ç¨‹t1------92çº¿ç¨‹t1------93çº¿ç¨‹t1------94çº¿ç¨‹t1------95çº¿ç¨‹t1------96çº¿ç¨‹t1------97çº¿ç¨‹t1------98çº¿ç¨‹t1------99çº¿ç¨‹t1------100çº¿ç¨‹main------2çº¿ç¨‹main------3çº¿ç¨‹main------4çº¿ç¨‹main------5çº¿ç¨‹main------6çº¿ç¨‹main------7çº¿ç¨‹main------8çº¿ç¨‹main------9çº¿ç¨‹main------10çº¿ç¨‹main------11çº¿ç¨‹main------12çº¿ç¨‹main------13çº¿ç¨‹main------14çº¿ç¨‹main------15çº¿ç¨‹main------16çº¿ç¨‹main------17çº¿ç¨‹main------18çº¿ç¨‹main------19çº¿ç¨‹main------20çº¿ç¨‹main------21çº¿ç¨‹main------22çº¿ç¨‹main------23çº¿ç¨‹main------24çº¿ç¨‹main------25çº¿ç¨‹main------26çº¿ç¨‹main------27çº¿ç¨‹main------28çº¿ç¨‹main------29çº¿ç¨‹main------30çº¿ç¨‹main------31çº¿ç¨‹main------32çº¿ç¨‹main------33çº¿ç¨‹main------34çº¿ç¨‹main------35çº¿ç¨‹main------36çº¿ç¨‹main------37çº¿ç¨‹main------38çº¿ç¨‹main------39çº¿ç¨‹main------40çº¿ç¨‹main------41çº¿ç¨‹main------42çº¿ç¨‹main------43çº¿ç¨‹main------44çº¿ç¨‹main------45çº¿ç¨‹main------46çº¿ç¨‹main------47çº¿ç¨‹main------48çº¿ç¨‹main------49çº¿ç¨‹main------50çº¿ç¨‹main------51çº¿ç¨‹main------52çº¿ç¨‹main------53çº¿ç¨‹main------54çº¿ç¨‹main------55çº¿ç¨‹main------56çº¿ç¨‹main------57çº¿ç¨‹main------58.......çº¿ç¨‹main------9997çº¿ç¨‹main------9998çº¿ç¨‹main------9999çº¿ç¨‹main------10000</pre></details><p>è¿è¡Œçš„æ•ˆæœå’Œè®©æ­¥ä¸€æ ·ï¼Ÿå…¶å®ä¸æ˜¯ã€‚å’Œè®©æ­¥çš„åŒºåˆ«å¤§ç€å‘¢ï¼Œçº¿ç¨‹åˆå¹¶æ˜¯ t1 çº¿ç¨‹åˆå¹¶åˆ°å½“å‰çº¿ç¨‹ä¸­ï¼Œæ­¤æ—¶å½“å‰çº¿ç¨‹å—é˜»ï¼ˆæš‚åœæ‰§è¡Œï¼‰ï¼Œåªèƒ½ç­‰åˆ° t1 çº¿ç¨‹ç»“æŸä¹‹åï¼Œä¸»çº¿ç¨‹æ‰ä¼šç»§ç»­æ‰§è¡Œã€‚</p><h2 id="çº¿ç¨‹å®‰å…¨é—®é¢˜"><a href="#çº¿ç¨‹å®‰å…¨é—®é¢˜" class="headerlink" title="çº¿ç¨‹å®‰å…¨é—®é¢˜"></a>çº¿ç¨‹å®‰å…¨é—®é¢˜</h2><p>çº¿ç¨‹å®‰å…¨ï¼Œåœ¨å¤šçº¿ç¨‹ä¸­æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„é—®é¢˜ã€‚é‚£ä»€ä¹ˆæ—¶å€™ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨çš„é—®é¢˜å‘¢ï¼Ÿ</p><p>ä¸¾ä¸ªä¾‹å­å§ã€‚</p><p>å‡å¦‚æˆ‘æœ‰ä¸€ä¸ªè´¦æˆ·ï¼Œåå­—å« xiaohehe ï¼Œè´¦æˆ·é‡Œé¢è¿™é‡Œé¢æœ‰ 8000 å…ƒ ï¼Œæˆ‘ä¿©æ˜¯åœ¨åŒä¸€å®¶é“¶è¡Œä¸åŒçš„ä½ç½®çš„ ATM æœºã€‚æœ‰ä¸€æ¬¡ï¼Œæˆ‘å»é“¶è¡Œé‡Œå– 4000 å…ƒ ï¼Œæˆ‘æ˜¯ä¸€ä¸ªçº¿ç¨‹ ï¼Œç„¶åæˆ‘<del>å¥³æœ‹å‹ï¼ˆç›®å‰è¿˜æ²¡æœ‰å•¦ï¼‰</del>è¿™ä¸ªæ—¶å€™ä¹Ÿå»å– 4000 å…ƒ ï¼Œå¥³æœ‹å‹ä¹Ÿæ˜¯ä¸€ä¸ªçº¿ç¨‹ï¼Œç„¶åæˆ‘ä¿©è¿™æ—¶å€™é’±ï¼Œå–é’±çš„æ—¶å€™ä¼šå‡ºç°ä»¥ä¸‹æƒ…å†µã€‚</p><p><strong>1ã€åˆšå¥½å–å®Œ</strong></p><p>æˆ‘ï¼šå–å®Œ 4000ï¼Œæ˜¾ç¤ºçš„ä½™é¢å‰© 4000</p><p>æ•°æ®å–å®Œä¹‹åï¼Œä½™é¢æ›´æ–°æˆåŠŸã€‚</p><p>å¥³æœ‹å‹ï¼šå–å®Œ 4000ï¼Œä½™é¢ä¹Ÿæ›´æ–°æˆåŠŸï¼Œä½™é¢ä¸º 0 ã€‚</p><p><strong>2ã€åŒä¸€æ—¶åˆ»å–é’±</strong></p><p>æˆ‘ï¼šå–å®Œ 8000ï¼Œä½™é¢å‰© 4000ã€‚</p><p>å–å®Œä¹‹åï¼Œç”±äºç½‘ç»œå¾ˆä¸å¥½ï¼Œå¯¼è‡´ä½™é¢è¿˜æœªæ›´æ–°ï¼Œè¿˜æ˜¯ 8000ï¼Œæ­¤æ—¶å¥³æœ‹å‹æ­¤æ—¶ä¹Ÿå–äº† 4000 å…ƒã€‚</p><p>å¥³æœ‹å‹ï¼šå–å®Œ 8000ï¼Œä½™é¢å‰© 4000ã€‚</p><p>æœ‰æ²¡æœ‰å‘ç°ï¼Œä¸‹é¢è¿™ç§æƒ…å†µæ˜¯ä¸æ˜¯å¤šäº† 4000 å…ƒ ã€‚ç”±äºå–é’±è¿˜å‰©ä½™ 4000 å…ƒ ã€‚è¿™æ ·å°±å‡ºç°äº†çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»£ç ç¤ºä¾‹æ¥éªŒè¯è¿™ä¸€æƒ³æ³•ã€‚</p><h3 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h3><p>è¿™æ˜¯è´¦æˆ·ç±»ï¼Œè´¦æˆ·ç±»ä¸­æœ‰ä¸€ä¸ªå–æ¬¾çš„æ–¹æ³•ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Account</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">double</span> balance<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token keyword">double</span> balance<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>balance <span class="token operator">=</span> balance<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> balance<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBalance</span><span class="token punctuation">(</span><span class="token keyword">double</span> balance<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>balance <span class="token operator">=</span> balance<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">withdraw</span><span class="token punctuation">(</span><span class="token keyword">double</span> balance<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å–æ¬¾</span>        <span class="token keyword">double</span> before <span class="token operator">=</span> <span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä»˜é’±</span>        <span class="token keyword">double</span> after <span class="token operator">=</span> before <span class="token operator">-</span> balance<span class="token punctuation">;</span>        <span class="token comment">// æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// æ›´æ–°</span>        <span class="token function">setBalance</span><span class="token punctuation">(</span>after<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"Account&#123;"</span> <span class="token operator">+</span>                <span class="token string">"balance="</span> <span class="token operator">+</span> balance <span class="token operator">+</span>                <span class="token string">", name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">'&#125;'</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿™æ˜¯ç”¨æˆ·å–æ¬¾çš„åŠ¨ä½œ Runnable ï¼Œé€šè¿‡å®ƒæ¥åˆ›å»ºçº¿ç¨‹ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserRunnable</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Account</span> account<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">UserRunnable</span><span class="token punctuation">(</span><span class="token class-name">Account</span> account<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>account <span class="token operator">=</span> account<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">double</span> a <span class="token operator">=</span> <span class="token number">4000</span><span class="token punctuation">;</span>        account<span class="token punctuation">.</span><span class="token function">withdraw</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·ï¼š"</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"ï¼Œå–äº†ï¼š"</span> <span class="token operator">+</span> a <span class="token operator">+</span> <span class="token string">"ï¼Œå‰©ä¸‹ï¼š"</span> <span class="token operator">+</span> account<span class="token punctuation">.</span><span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œæµ‹è¯•ç±»</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadSecurityTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// è´¦æˆ·</span>        <span class="token class-name">Account</span> account <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token number">8000</span><span class="token punctuation">,</span> <span class="token string">"xiaohehe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æˆ‘è‡ªå·±</span>        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">UserRunnable</span><span class="token punctuation">(</span>account<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"me"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æˆ‘å¥³æœ‹å‹</span>        <span class="token class-name">Thread</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">UserRunnable</span><span class="token punctuation">(</span>account<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"å¥³ç›†å‹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å…¨éƒ¨å¼€å¯</span>        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œçš„ç»“æœå¦‚ä¸‹ï¼Œä¸ç®¡æ˜¯å¦‚ä½•è¿è¡Œï¼Œè¿è¡Œçš„ç»“æœéƒ½æ˜¯å¦‚æ­¤ã€‚</p><pre class="language-none"><code class="language-none">ç”¨æˆ·ï¼šmeï¼Œå–äº†ï¼š4000.0ï¼Œå‰©ä¸‹ï¼š4000.0ç”¨æˆ·ï¼šå¥³ç›†å‹ï¼Œå–äº†ï¼š4000.0ï¼Œå‰©ä¸‹ï¼š4000.0</code></pre><h3 id="å­˜åœ¨å®‰å…¨é—®é¢˜çš„ä¸‰ä¸ªæ¡ä»¶"><a href="#å­˜åœ¨å®‰å…¨é—®é¢˜çš„ä¸‰ä¸ªæ¡ä»¶" class="headerlink" title="å­˜åœ¨å®‰å…¨é—®é¢˜çš„ä¸‰ä¸ªæ¡ä»¶"></a>å­˜åœ¨å®‰å…¨é—®é¢˜çš„ä¸‰ä¸ªæ¡ä»¶</h3><ol><li>å¤šçº¿ç¨‹å¹¶å‘</li><li>æœ‰å…±äº«çš„æ•°æ®</li><li>ä¸”å…±äº«çš„æ•°æ®å…·æœ‰ä¿®æ”¹çš„è¡Œä¸º</li></ol><p><strong>ä¸Šé¢çš„ä¾‹å­ä¹Ÿæ­£å¥½ç¬¦åˆè¿™ä¸‰ä¸ªæ¡ä»¶ï¼Œé¦–å…ˆè´¦æˆ·æ˜¯å…±äº«çš„ï¼Œè‚¯å®šæ˜¯å¤šçº¿ç¨‹å¹¶å‘çš„ï¼Œç„¶åå–æ¬¾å°±æ˜¯ä¿®æ”¹æ•°æ®çš„æ“ä½œ</strong></p><h3 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h3><p>å°†çº¿ç¨‹è¿›è¡Œæ’é˜Ÿï¼Œè¯´çš„ä¸“ä¸šä¸€ç‚¹å°±æ˜¯çº¿ç¨‹åŒæ­¥äº†ã€‚ä½¿ç”¨ synchronized åŒæ­¥ä»£ç å—ï¼Œä»£ç çš„ç¤ºä¾‹å¦‚ä¸‹ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">synchronized</span> <span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// éœ€è¦æ‰§è¡Œçš„ä»£ç </span><span class="token punctuation">&#125;</span></code></pre><p>åŒæ­¥ä»£ç å—ä¸­æœ‰ä¸€ä¸ªå°æ‹¬å·ï¼Œé‚£è¿™ä¸ª obj å°±æ˜¯å…±äº«çš„å¯¹è±¡äº†ã€‚å¦‚æœè¦è§£å†³ä¸Šé¢çš„çº¿ç¨‹é—®é¢˜ï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">withdraw</span><span class="token punctuation">(</span><span class="token keyword">double</span> balance<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å–æ¬¾</span>        <span class="token keyword">double</span> before <span class="token operator">=</span> <span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä»˜é’±</span>        <span class="token keyword">double</span> after <span class="token operator">=</span> before <span class="token operator">-</span> balance<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// æ›´æ–°</span>        <span class="token function">setBalance</span><span class="token punctuation">(</span>after<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>thisï¼Œå°±æ˜¯å½“å‰å®ä¾‹å¯¹è±¡äº†ï¼Œä¹Ÿå°±æ˜¯ Account ï¼Œå®ƒæ˜¯è¢«æˆ‘å’Œâ€œå¥³ç›†å‹â€å…±äº«çš„ï¼Œå¯ä¿®æ”¹çš„ï¼Œä¸”å¤„äºå¹¶å‘çš„ç¯å¢ƒä¸­ã€‚</p><h3 id="å“ªç§å˜é‡ä¸ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜"><a href="#å“ªç§å˜é‡ä¸ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜" class="headerlink" title="å“ªç§å˜é‡ä¸ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜"></a>å“ªç§å˜é‡ä¸ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜</h3><p>åœ¨ java ä¸­ï¼Œå˜é‡æœ‰ä¸‰ç§ï¼Œä¸€ä¸ªæ˜¯å±€éƒ¨å˜é‡ã€ä¸€ä¸ªæ˜¯å®ä¾‹å˜é‡ã€ä¸€ä¸ªæ˜¯é™æ€å˜é‡ã€‚åªæœ‰å±€éƒ¨å˜é‡ä¸ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚å› ä¸ºå±€éƒ¨å˜é‡æ˜¯ä¿å­˜åœ¨æ ˆä¸­çš„ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªï¼Œå°±æ˜¯å¸¸é‡ã€‚å› ä¸ºå¸¸é‡æ˜¯ä¸å¯ä¿®æ”¹çš„ã€‚</p><h3 id="åŒæ­¥å…³é”®å­—å†™åœ¨æ–¹æ³•ä¸Š"><a href="#åŒæ­¥å…³é”®å­—å†™åœ¨æ–¹æ³•ä¸Š" class="headerlink" title="åŒæ­¥å…³é”®å­—å†™åœ¨æ–¹æ³•ä¸Š"></a>åŒæ­¥å…³é”®å­—å†™åœ¨æ–¹æ³•ä¸Š</h3><p>å¦‚æœè¦å…±äº«çš„å¯¹è±¡å°±æ˜¯å½“å‰çš„å¯¹è±¡ï¼ˆthisï¼‰ï¼Œå¹¶ä¸”è¦æ‰§è¡Œçš„ä»£ç æ˜¯æ•´ä¸ªæ–¹æ³•ä½“ï¼Œåˆ™å¯ä»¥åœ¨æ–¹æ³•ä¸Šä½¿ç”¨åŒæ­¥å…³é”®å­—ï¼Œæ¯”å¦‚ä¸Šè¿°çš„ä¾‹å­ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">withdraw</span><span class="token punctuation">(</span><span class="token keyword">double</span> balance<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// å–æ¬¾</span>    <span class="token keyword">double</span> before <span class="token operator">=</span> <span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ä»˜é’±</span>    <span class="token keyword">double</span> after <span class="token operator">=</span> before <span class="token operator">-</span> balance<span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// æ›´æ–°</span>    <span class="token function">setBalance</span><span class="token punctuation">(</span>after<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ç„¶åæ‰§è¡Œçš„æ•ˆæœä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡Œå°±ä¸é‡å¤å±•ç¤ºç»“æœäº†ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><ol><li>èŠ‚çœä»£ç </li></ol><p>ç¼ºç‚¹ï¼š</p><ol><li>ä¸çµæ´»ï¼Œåªèƒ½é”å®šå½“å‰å¯¹è±¡ï¼ˆthisï¼‰</li><li>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šæ— æ•…æ‰©å¤§åŒæ­¥çš„èŒƒå›´ï¼Œå¯¼è‡´ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡é™ä½ã€‚</li></ol><h3 id="java-æœ‰å“ªäº›ç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„"><a href="#java-æœ‰å“ªäº›ç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„" class="headerlink" title="java æœ‰å“ªäº›ç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„"></a>java æœ‰å“ªäº›ç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„</h3><p>ä¸¾ä¾‹ï¼šStringBufferã€Vectorã€Hashtable</p><p>çº¿ç¨‹ä¸å®‰å…¨çš„ï¼šArrayListã€HashMapã€HashSetã€StringBuilder</p><h3 id="ä¸ºä»€ä¹ˆçº¿ç¨‹åŒæ­¥ä¹‹åæ•ˆç‡ä¼šé™ä½"><a href="#ä¸ºä»€ä¹ˆçº¿ç¨‹åŒæ­¥ä¹‹åæ•ˆç‡ä¼šé™ä½" class="headerlink" title="ä¸ºä»€ä¹ˆçº¿ç¨‹åŒæ­¥ä¹‹åæ•ˆç‡ä¼šé™ä½"></a>ä¸ºä»€ä¹ˆçº¿ç¨‹åŒæ­¥ä¹‹åæ•ˆç‡ä¼šé™ä½</h3><p>å½“æŸä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåˆ°åŒæ­¥ä»£ç å—æˆ–è€…è¿›å…¥åˆ°åŒæ­¥å‡½æ•°çš„æ—¶å€™ï¼Œå®ƒä¼šæ”¾å¼ƒå½“å‰çš„è¿è¡ŒçŠ¶æ€ï¼Œè¿›å…¥é”æ± å»å¯»æ‰¾é”ï¼Œä¸”é”æ± é‡Œé¢åªæœ‰ä¸€æŠŠã€‚å°±æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œå½“æˆ‘å»å–æ¬¾çš„æ—¶å€™ï¼Œæˆ‘ç›¸å½“äºåœ¨â€œé”æ± â€ä¸­æ‹¿åˆ°äº† â€œä¸€æŠŠé”â€ ã€‚</p><p>æ‹¿åˆ°â€œé”â€ä¹‹åï¼Œæ­¤æ—¶å¥³ç›†å‹å†å–æ¬¾ï¼Œå®ƒä¹Ÿè¦æ”¾å¼ƒå½“å‰çš„è¿è¡ŒçŠ¶æ€ï¼Œè¿›å…¥â€œé”æ± â€é‡Œé¢å»å¯»æ‰¾é”ã€‚æ­¤æ—¶ï¼Œå¥³ç›†å‹å°±åªèƒ½ä¸€ç›´åœ¨â€œé”æ± â€é‡Œæ‰¾é”ï¼Œè¦ç­‰åˆ°æˆ‘å–æ¬¾å®Œæˆä¹‹åï¼Œâ€œé”â€å°±è‡ªåŠ¨å›åˆ°é”æ± å½“ä¸­ã€‚ç„¶åå¥³ç›†å‹æ‰¾åˆ°é”äº†ï¼Œå°±å¯ä»¥ç»§ç»­å»å–æ¬¾äº†ã€‚</p><p>å…¶ä¸­ï¼Œç­‰å¾…çš„è¿‡ç¨‹å°±å¯ä»¥ç†è§£æˆæ˜¯ä¸€ç§é˜»å¡çŠ¶æ€ï¼Œæ‰€ä»¥æ•ˆç‡å°±ä½äº†ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œçº¿ç¨‹è¿›å…¥é”æ± æ‰¾å…±äº«å¯¹è±¡çš„å¯¹è±¡é”çš„æ—¶å€™ï¼Œä¼šé‡Šæ”¾ä¹‹å‰å æœ‰çš„CPUæ—¶é—´ç‰‡ï¼Œæœ‰å¯èƒ½æ‰¾åˆ°äº†ï¼Œæœ‰å¯èƒ½æ²¡æ‰¾åˆ°ï¼Œæ²¡æ‰¾åˆ°åˆ™åœ¨é”æ± ä¸­ç­‰å¾…ï¼Œå¦‚æœæ‰¾åˆ°äº†ä¼šè¿›å…¥å°±ç»ªçŠ¶æ€ç»§ç»­æŠ¢å¤º CPU æ—¶é—´ç‰‡ã€‚</p><p>å¦‚æœè¿›ç¨‹ä¸­åªæœ‰ä¸€ä¸ªçº¿ç¨‹ä¹Ÿæ˜¯å¦‚æ­¤ï¼ŒåŒæ ·ä¹Ÿè¦è¿›å…¥åŒæ­¥ä»£ç å—å»é”æ± ä¸­æ‹¿é”ã€‚</p><h3 id="åœ¨é™æ€æ–¹æ³•ä¸Šä½¿ç”¨åŒæ­¥å…³é”®å­—"><a href="#åœ¨é™æ€æ–¹æ³•ä¸Šä½¿ç”¨åŒæ­¥å…³é”®å­—" class="headerlink" title="åœ¨é™æ€æ–¹æ³•ä¸Šä½¿ç”¨åŒæ­¥å…³é”®å­—"></a>åœ¨é™æ€æ–¹æ³•ä¸Šä½¿ç”¨åŒæ­¥å…³é”®å­—</h3><p>åœ¨é™æ€æ–¹æ³•ä¸Šä½¿ç”¨åŒæ­¥å…³é”®å­—ï¼Œè¡¨ç¤ºæ‰¾ç±»é”ã€‚ç±»é”æ°¸è¿œåªæœ‰ 1 æŠŠã€‚å°±ç®—åˆ›å»ºäº† 100 ä¸ªå¯¹è±¡ï¼Œé‚£ç±»é”ä¹Ÿåªæœ‰ä¸€æŠŠã€‚</p><p>ä½¿ç”¨ç±»é”æ¥ä¿è¯é™æ€å˜é‡çš„å®‰å…¨ã€‚</p><p><strong>4 ä¸ªæœ‰å…³åŒæ­¥å…³é”®å­—çš„é¢è¯•é¢˜</strong></p><p>æœ‰å¦‚ä¸‹ä»£ç  ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"doSome begin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span> millis<span class="token operator">:</span> <span class="token number">1080</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"doSome over"</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doOther</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"doOther begin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"doOther over"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿™æ˜¯ä¸€ä¸ªçº¿ç¨‹ç±»ã€‚å¦‚æœæ˜¯ t1 çº¿ç¨‹ï¼Œé‚£ä¹ˆå°±æ‰§è¡Œ <code>doSome</code> æ–¹æ³•ï¼Œå¦åˆ™å°±æ‰§è¡Œ <code>doOther</code> æ–¹æ³•ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">MyThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">MyClass</span> mc<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token class-name">MyClass</span> mc<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>mc <span class="token operator">=</span> mc<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"t1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            mc<span class="token punctuation">.</span><span class="token function">doSome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"t2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            mc<span class="token punctuation">.</span><span class="token function">doOther</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ä¸»çº¿ç¨‹ä¸­åšçš„äº‹æƒ…</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">MyClass</span> mc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span>mc<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Thread</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span>mc<span class="token punctuation">)</span><span class="token punctuation">;</span>t1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"t1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>t2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"t2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿™ä¸ªç¡çœ çš„ä½œç”¨æ˜¯:ä¸ºäº†ä¿è¯t1çº¿ç¨‹å…ˆæ‰§è¡Œã€‚</span>t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>é—® 1ï¼šå¦‚æœåœ¨ <code>doSome</code> æ–¹æ³•æ·»åŠ äº†åŒæ­¥å…³é”®å­—ï¼Œ<code>doOther</code> æ–¹æ³•æ²¡æœ‰æ·»åŠ ï¼Œé‚£ä¹ˆ <code>doOther</code> æ–¹æ³•éœ€è¦ç­‰å¾… <code>doSome</code> æ–¹æ³•ç»“æŸå—ï¼Ÿ</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">doSome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// çœç•¥ä»£ç  ï¼Œå› ä¸ºä¸Šé¢æœ‰......</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doOther</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// çœç•¥ä»£ç  ï¼Œå› ä¸ºä¸Šé¢æœ‰......</span><span class="token punctuation">&#125;</span></code></pre><details>    <summary>æ€è€ƒ 30s ä¹‹åå†å±•å¼€ç­”æ¡ˆ</summary>    <p>ä¸éœ€è¦</p>    <p>å› ä¸ºè°ƒç”¨ t2 æ–¹æ³•ä¸æ˜¯åŒæ­¥å‡½æ•°ï¼Œä¸éœ€è¦æ‹¿é”</p></details><p>é—® 2ï¼šå¦‚æœåœ¨<code>doSome</code>ã€<code>doOther</code>æ–¹æ³•éƒ½æ·»åŠ äº†åŒæ­¥å…³é”®å­—ï¼Œé‚£ä¹ˆ <code>doOther</code> æ–¹æ³•éœ€è¦ç­‰å¾… <code>doSome</code> æ–¹æ³•ç»“æŸå—ï¼Ÿ</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">doSome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// çœç•¥ä»£ç  ï¼Œå› ä¸ºä¸Šé¢æœ‰......</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">doOther</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// çœç•¥ä»£ç  ï¼Œå› ä¸ºä¸Šé¢æœ‰......</span><span class="token punctuation">&#125;</span></code></pre><details>    <summary>æ€è€ƒ 30s ä¹‹åå†å±•å¼€ç­”æ¡ˆ</summary>    <p>éœ€è¦</p>    <p>å› ä¸º t2 æ–¹æ³•éœ€è¦è¿›å…¥åŒæ­¥ä»£ç å—ï¼Œä¸”å°† synchronized å…³é”®å­—å†™åœ¨å®ä¾‹æ–¹æ³•ä¸Šå°±æ˜¯æ‹¿åˆ°å½“å‰å¯¹è±¡çš„é”ï¼Œå½“å‰å¯¹è±¡çš„é”æ˜¯<b style="color: red;">åªæœ‰ä¸€æŠŠçš„ï¼</b>ï¼Œæ‰€ä»¥éœ€è¦ç­‰å¾… doSome æ–¹æ³•æ‰§è¡Œç»“æŸ</p></details><p>é—® 3ï¼šå°†ä¸»çº¿ç¨‹çš„ä»£ç æ”¹æˆå¦‚ä¸‹å½¢å¼ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">MyClass</span> mc1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">MyClass</span> mc2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span>mc1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Thread</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span>mc2<span class="token punctuation">)</span><span class="token punctuation">;</span>t1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"t1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>t2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"t2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿™ä¸ªç¡çœ çš„ä½œç”¨æ˜¯:ä¸ºäº†ä¿è¯t1çº¿ç¨‹å…ˆæ‰§è¡Œã€‚</span>t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><code>MyClass</code> ç±»ä¸­çš„æ–¹æ³•å’Œç¬¬äºŒé—®æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆ <code>doOther</code> æ–¹æ³•éœ€è¦ç­‰å¾… <code>doSome</code> æ–¹æ³•ç»“æŸå—ï¼Ÿ</p><details>    <summary>æ€è€ƒ 30s ä¹‹åå†å±•å¼€ç­”æ¡ˆ</summary>    <p>ä¸éœ€è¦</p>    <p>è™½ç„¶éƒ½è¿›å…¥äº† synchronized å…³é”®å­—ï¼Œä½†æ˜¯ï¼Œmc1 å’Œ mc2 æ˜¯ä¸¤ä¸ªå¯¹è±¡ï¼Œä¸å…±äº«çš„ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªçº¿ç¨‹æ‰€æ‹¿åˆ°çš„é”æ˜¯<b style="color: red;">ä¸¤æŠŠä¸ä¸€æ ·çš„ï¼</b>ï¼Œæ‰€ä»¥ä¸éœ€è¦ç­‰å¾… doSome æ–¹æ³•æ‰§è¡Œç»“æŸ</p></details><p>é—® 4ï¼šç»™<code>doSome</code>ã€<code>doOther</code>æ–¹æ³•éƒ½æ·»åŠ äº†é™æ€å…³é”®å­—ï¼Œä¸»çº¿ç¨‹ä¸­å’Œç¬¬ä¸‰é—®ä¸€æ ·</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">doSome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// çœç•¥ä»£ç  ï¼Œå› ä¸ºä¸Šé¢æœ‰......</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">doOther</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// çœç•¥ä»£ç  ï¼Œå› ä¸ºä¸Šé¢æœ‰......</span><span class="token punctuation">&#125;</span></code></pre><p>é‚£ä¹ˆ <code>doOther</code> æ–¹æ³•éœ€è¦ç­‰å¾… <code>doSome</code> æ–¹æ³•ç»“æŸå—ï¼Ÿ</p><details>    <summary>æ€è€ƒ 30s ä¹‹åå†å±•å¼€ç­”æ¡ˆ</summary>    <p>éœ€è¦</p>    <p>è™½ç„¶éƒ½è¿›å…¥äº† synchronized å…³é”®å­—ï¼Œä¸” mc1 å’Œ mc2 æ˜¯ä¸¤ä¸ªå¯¹è±¡ï¼Œä¸å…±äº«çš„ï¼Œä½†è¿™ä¸ªæ–¹æ³•æ˜¯é™æ€çš„ï¼Œè°ƒç”¨çš„æ˜¯é™æ€æ–¹æ³•ã€‚æ‰€ä»¥é”çš„æ€§è´¨å˜äº†ï¼Œå˜æˆäº†<b style="color: red;">ç±»é”</b>ï¼Œæ‰€ä»¥éœ€è¦ç­‰å¾… doSome æ–¹æ³•æ‰§è¡Œç»“æŸ</p></details><h2 id="çº¿ç¨‹æ­»é”"><a href="#çº¿ç¨‹æ­»é”" class="headerlink" title="çº¿ç¨‹æ­»é”"></a>çº¿ç¨‹æ­»é”</h2><p>çº¿ç¨‹æ­»é”åœ¨ä»¥ä¸‹æƒ…å†µä¼šå‘ç”Ÿï¼Œä¸»è¦æ˜¯åœ¨åŒæ­¥ä»£ç å—åµŒå¥—çš„æƒ…å†µæœ‰æå¤§çš„å¯èƒ½ä¼šæ­»é”ã€‚ä»£ç å¦‚ä¸‹ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyThreadLockTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Object</span> o1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> o2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThreadLock1</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span> o2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Thread</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThreadLock2</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span> o2<span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"t1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"t2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">MyThreadLock1</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Object</span> o1<span class="token punctuation">,</span> o2<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">MyThreadLock1</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o1<span class="token punctuation">,</span> <span class="token class-name">Object</span> o2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>o1 <span class="token operator">=</span> o1<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>o2 <span class="token operator">=</span> o2<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>o1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"çº¿ç¨‹ï¼š"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"ï¼Œè¿è¡Œä¸­"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>o2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"çº¿ç¨‹ï¼š"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"ï¼Œè¿è¡Œç»“æŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">MyThreadLock2</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Object</span> o1<span class="token punctuation">,</span> o2<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">MyThreadLock2</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o1<span class="token punctuation">,</span> <span class="token class-name">Object</span> o2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>o1 <span class="token operator">=</span> o1<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>o2 <span class="token operator">=</span> o2<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>o2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"çº¿ç¨‹ï¼š"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"ï¼Œè¿è¡Œä¸­"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>o1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"çº¿ç¨‹ï¼š"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"ï¼Œè¿è¡Œç»“æŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œç¨‹åºæ°¸è¿œä¸ä¼šåœæ­¢ã€‚</p><pre class="language-none"><code class="language-none">çº¿ç¨‹ï¼št2ï¼Œè¿è¡Œä¸­çº¿ç¨‹ï¼št1ï¼Œè¿è¡Œä¸­</code></pre><p>å› ä¸ºç¨‹åºå·²ç»å¤„äºæ­»é”çŠ¶æ€ï¼Œå¤„äºæ­»é”çš„åŸå› æ˜¯ o1 å’Œ o2 æ˜¯å…±äº«çš„ï¼Œä¸”çº¿ç¨‹ t1 æ‹¿åˆ° o1 é”ä¹‹åï¼Œt2 æ‹¿åˆ° o2 é” ã€‚è°ä¹Ÿä¸æ„¿æ„é‡Šæ”¾é” ï¼Œæ‰€ä»¥å°±é€ æˆäº†æ­»é”ã€‚</p><h2 id="å®ˆæŠ¤çº¿ç¨‹"><a href="#å®ˆæŠ¤çº¿ç¨‹" class="headerlink" title="å®ˆæŠ¤çº¿ç¨‹"></a>å®ˆæŠ¤çº¿ç¨‹</h2><p>å®ˆæŠ¤çº¿ç¨‹æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯ä¸»çº¿ç¨‹å·²ç»ç»“æŸï¼Œåˆ›å»ºçš„çº¿ç¨‹ä¸ç®¡æ˜¯å¦å®Œæˆå°±ä¹Ÿä¼šç»“æŸã€‚è¿™é‡Œå†™ä¸€ä¸ªæ­»å¾ªç¯ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DaemonThreadTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">DaemonThread</span> daemonThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DaemonThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        daemonThread<span class="token punctuation">.</span><span class="token function">setDaemon</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        daemonThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">DaemonThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å¾ªç¯äº† "</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">++</span>count<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" æ¬¡"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œç»“æœå°±ä¸å±•ç¤ºäº†ï¼Œæ— è®ºå¦‚ä½•éƒ½ä¼šç»“æŸçš„ã€‚</p><h2 id="ç¬¬ä¸‰ç§åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼"><a href="#ç¬¬ä¸‰ç§åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼" class="headerlink" title="ç¬¬ä¸‰ç§åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼"></a>ç¬¬ä¸‰ç§åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼</h2><p>åˆ›å»ºç¬¬ä¸‰ç§çº¿ç¨‹çš„æ–¹å¼ä½¿ç”¨çš„æ˜¯ FutureTask ç±»ï¼Œç„¶åéœ€è¦å®ç° Callable æ¥å£ã€‚è¿™ç§æ–¹å¼åˆ›å»ºçº¿ç¨‹åªæœ‰åœ¨ jdk 1.8 åŠå…¶ä»¥ä¸Šçš„ç‰ˆæœ¬æ‰èƒ½å¤Ÿå®ç°ã€‚</p><p>ä¸ä»…å¦‚æ­¤ï¼ŒCallable æ¥å£éœ€è¦å®ç°çš„ call æ–¹æ³•å¯æ˜¯æœ‰è¿”å›å€¼çš„ã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­çš„è¿”å›å€¼ã€‚</p><p>ä»£ç ç¤ºä¾‹å¦‚ä¸‹</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Callable</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutionException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">FutureTask</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FutureTaskTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> task <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"task å¼€å§‹æ‰§è¡Œï¼Œç­‰å¾…10ç§’"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"task ç»“æŸæ‰§è¡Œï¼Œè®¡ç®—1~100çš„å’Œ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    sum <span class="token operator">+=</span> i<span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token keyword">return</span> sum<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºä¸€ä¸ªçº¿ç¨‹</span>        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·å–çº¿ç¨‹ä¸­è¿è¡Œçš„ç»“æœï¼Œå½“çº¿ç¨‹ä¸­çš„ä»»åŠ¡æœªç»“æŸæ—¶ï¼Œå®ƒå°±ä¸€ç›´ç­‰å¾…ã€‚</span>        <span class="token class-name">Integer</span> integer <span class="token operator">=</span> task<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å¾—åˆ°çš„ç»“æœï¼š"</span> <span class="token operator">+</span> integer<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç¨‹åºè¿è¡Œåˆ°åº•äº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œçš„ç»“æœå’Œåœ¨çº¿ç¨‹ä¸­ä½¿ç”¨ <code>join</code>æ–¹æ³•ç±»ä¼¼ã€‚</p><h2 id="wait-å’Œ-notify"><a href="#wait-å’Œ-notify" class="headerlink" title="wait å’Œ notify"></a>wait å’Œ notify</h2><p>wait å’Œ notify æ–¹æ³•ä¸æ˜¯é€šè¿‡çº¿ç¨‹å¯¹è±¡çš„æ–¹æ³•ï¼Œæ˜¯ java ä¸­ä»»ä½•ä¸€ä¸ª java å¯¹è±¡éƒ½æœ‰çš„æ–¹æ³•ï¼Œå› ä¸º Object ç±»ä¸­å°±æœ‰ wait å’Œ notify æ–¹æ³•ã€‚é‚£ä¹ˆï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•çš„å«ä¹‰åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><h3 id="wait"><a href="#wait" class="headerlink" title="wait"></a>wait</h3><p>è¡¨ç¤º o å¯¹è±¡æ´»åŠ¨çš„çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œæ— é™æœŸç­‰å¾…ã€‚ç›´åˆ°è¢«å”¤é†’ä¸ºæ­¢ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªè¿›ç¨‹ä¸­æœ‰ä¸ªå¯¹è±¡ï¼Œè°ƒç”¨å…¶ wait æ–¹æ³•ã€‚ä»–å°±ä¸€ç›´ç­‰å¾…ç€ã€‚æ¯”å¦‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">User</span> u <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>u<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="notify"><a href="#notify" class="headerlink" title="notify"></a>notify</h3><p>å”¤é†’æ­£åœ¨ o å¯¹è±¡ä¸Šç­‰å¾…çš„çº¿ç¨‹ã€‚è¿˜æœ‰ä¸€ä¸ª <code>notifyAll</code> æ–¹æ³•ï¼Œè¡¨ç¤ºçš„æ˜¯å”¤é†’ o å¯¹è±¡ä¸Šå¤„äºç­‰å¾…çš„æ‰€æœ‰çº¿ç¨‹ã€‚</p><pre class="language-java" data-language="java"><code class="language-java">u<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="ä½¿ç”¨æƒ…å†µ"><a href="#ä½¿ç”¨æƒ…å†µ" class="headerlink" title="ä½¿ç”¨æƒ…å†µ"></a>ä½¿ç”¨æƒ…å†µ</h3><p>åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå¿…é¡»è¦ç»“åˆ synchronized åŒæ­¥ä»£ç å—æ¥ä½¿ç”¨æ‰èƒ½ç”Ÿæ•ˆï¼Œå¦åˆ™å°±ä¼šæŠ¥å‡ºä»¥ä¸‹å¼‚å¸¸ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Exception</span> in thread <span class="token string">"main"</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>IllegalMonitorStateException</span></code></pre><h2 id="ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…"><a href="#ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…" class="headerlink" title="ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…"></a>ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…</h2><p>ç”Ÿäº§è€…æ¶ˆè´¹è€…æ˜¯ä¸€ç§å¤šçº¿ç¨‹çš„æ¨¡å‹ï¼Œè™½ç„¶åœ¨å­¦ä¹ ç›®å‰è¿˜æ²¡é‡åˆ°è¿‡çœŸæ­£çš„ä½¿ç”¨åœºæ™¯ã€‚ä¸è¿‡ç®€å•çš„ä¾‹å­è¿˜æ˜¯çŸ¥é“çš„ã€‚</p><h3 id="ç”Ÿäº§è€…çº¿ç¨‹ç±»"><a href="#ç”Ÿäº§è€…çº¿ç¨‹ç±»" class="headerlink" title="ç”Ÿäº§è€…çº¿ç¨‹ç±»"></a>ç”Ÿäº§è€…çº¿ç¨‹ç±»</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * ç”Ÿäº§è€…ï¼Œç”Ÿäº§è€…åªç”Ÿäº§ä¸€ä¸ª */</span><span class="token keyword">class</span> <span class="token class-name">Producer2</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Producer2</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>arr <span class="token operator">=</span> arr<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                        arr<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                    arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"--->"</span> <span class="token operator">+</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    arr<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="æ¶ˆè´¹è€…çº¿ç¨‹ç±»"><a href="#æ¶ˆè´¹è€…çº¿ç¨‹ç±»" class="headerlink" title="æ¶ˆè´¹è€…çº¿ç¨‹ç±»"></a>æ¶ˆè´¹è€…çº¿ç¨‹ç±»</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * æ¶ˆè´¹è€… */</span><span class="token keyword">class</span> <span class="token class-name">Consumer2</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Consumer2</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>arr <span class="token operator">=</span> arr<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                        arr<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                    arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"--->"</span> <span class="token operator">+</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    arr<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="ä¸»çº¿ç¨‹æµ‹è¯•"><a href="#ä¸»çº¿ç¨‹æµ‹è¯•" class="headerlink" title="ä¸»çº¿ç¨‹æµ‹è¯•"></a>ä¸»çº¿ç¨‹æµ‹è¯•</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ChangeTestOut</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token class-name">Thread</span> thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Producer2</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Thread</span> thread2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Consumer2</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        thread1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"ç”Ÿäº§è€…"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        thread2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"æ¶ˆè´¹è€…"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        thread2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œçš„ç»“æœæ˜¯äº¤æ›¿è¿›è¡Œçš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>view width å’Œ view height</title>
      <link href="/journal/view-width-and-view-height/"/>
      <url>/journal/view-width-and-view-height/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="è¿™ä¿©æ˜¯å•¥"><a href="#è¿™ä¿©æ˜¯å•¥" class="headerlink" title="è¿™ä¿©æ˜¯å•¥"></a>è¿™ä¿©æ˜¯å•¥</h2><p>å®ƒä»¬ä¿©å«åšè§†å£å®½å’Œè§†å£é«˜ï¼Œæ˜¯åŸºäºè®¾å¤‡çš„å®½å’Œé«˜æ¥å®šä¹‰çš„ä¸€ç§é•¿åº¦å•ä½ï¼Œå«åšè§†å£å•ä½ã€‚å•ä½ç¬¦å·ä¸º vw ã€vh ã€‚</p><h2 id="è§†å£åˆæ˜¯å•¥"><a href="#è§†å£åˆæ˜¯å•¥" class="headerlink" title="è§†å£åˆæ˜¯å•¥"></a>è§†å£åˆæ˜¯å•¥</h2><p>åœ¨ PC ç«¯ï¼ŒæŒ‡çš„æ˜¯æµè§ˆå™¨çš„å¯è§†åŒºåŸŸï¼›ä¸è¿‡åœ¨ç§»åŠ¨ç«¯ï¼Œå®ƒæ¶‰åŠ 3 ä¸ªè§†å£ï¼šLayout Viewportï¼ˆå¸ƒå±€è§†å£ï¼‰ï¼ŒVisual Viewportï¼ˆè§†è§‰è§†å£ï¼‰ï¼ŒIdeal Viewportï¼ˆç†æƒ³è§†å£ï¼‰ã€‚</p><p>è§†å£å•ä½ä¸­çš„æ—¶å€™ï¼Œåœ¨ PC ç«¯æŒ‡çš„æ˜¯æµè§ˆå™¨çš„å¯è§†åŒºåŸŸï¼›ç§»åŠ¨ç«¯æŒ‡çš„æ˜¯ 3 ä¸ªè§†å£ä¸­çš„ç¬¬ä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯ Layout Viewportï¼ˆå¸ƒå±€è§†å£ï¼‰ã€‚</p><span id="more"></span><p><img src="/journal/view-width-and-view-height/1210235-20170918162531150-539160393.jpg" alt="å¯è§†åŒºåŸŸ" loading="lazy"></p><p>PC ç«¯å¯ä»¥ç†è§£æˆæ˜¯æµè§ˆå™¨é™¤äº†åœ°å€è¾“å…¥é‚£ä¸€æ å’Œæ”¶è—å¤¹é‚£ä¸€æ ã€‚è€Œæ‰‹æœºç«¯å¯ä»¥ç†è§£æˆæ•´ä¸ªå±å¹•åˆ†è¾¨ç‡çš„å®½å’Œé«˜</p><h2 id="ä¸¤è€…å’Œ-px-ä¹‹é—´çš„å…³ç³»"><a href="#ä¸¤è€…å’Œ-px-ä¹‹é—´çš„å…³ç³»" class="headerlink" title="ä¸¤è€…å’Œ px ä¹‹é—´çš„å…³ç³»"></a>ä¸¤è€…å’Œ px ä¹‹é—´çš„å…³ç³»</h2><p>ä»–ä»¬ä¿©ä¹‹é—´çš„å…³ç³»ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œ100 vw å°±æ˜¯è§†å£çš„å®½ï¼Œ100 vh å°±æ˜¯è§†å£çš„é«˜ã€‚</p><p><img src="/journal/view-width-and-view-height/1210235-20170918162831821-1344168854.jpg" loading="lazy"></p><p>å‡å¦‚æˆ‘æœ‰ä¸€å° iphone 6 çš„è®¾å¤‡ï¼Œåˆ†è¾¨ç‡æ˜¯ 375 Ã— 667 ï¼ˆå•ä½æ˜¯ pxï¼‰ã€‚åœ¨å½“å‰æ‰‹æœºåˆ†è¾¨ç‡ä¸‹å¦‚æœæ˜¯ 1vw çš„è¯ï¼Œä¹Ÿå°±æ˜¯è§†å£çš„ 1% ï¼Œå³å±å¹•åˆ†è¾¨ç‡çš„ 1% ã€‚æ‰€ä»¥ 1vw = 375 Ã— 1% = 3.75pxï¼Œ1vh = 6.67px ã€‚ä¸åŒæ‰‹æœºçš„å±å¹•åˆ†è¾¨ç‡çš„ 1vw å’Œ 1vh éƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚ä½†æ˜¯è¿™ä¸é‡è¦ï¼Œåªè¦å­¦ä¼šå¦‚ä½•æ­£ç¡®çš„è®¡ç®—å³å¯ã€‚</p><p>å¦‚æœæˆ‘æƒ³åœ¨ iphone 6 ä¸‹çš„å±å¹•åˆ†è¾¨ç‡ä¸‹è®¾ç½®ä¸€ä¸ª 6px çš„ margin-top æ‰€å¯¹åº”çš„ vw å’Œ vhï¼Œè¯¥å¦‚ä½•è®¡ç®—ï¼Ÿ</p><ol><li>é¦–å…ˆè®¡ç®—å‡ºå½“å‰çš„ 6px å è§†å£å®½çš„ç™¾åˆ†æ¯”ã€‚</li><li>100vw æ˜¯è§†å£çš„å®½åº¦ä¹˜ä»¥æ‰€å¾—åˆ°çš„ç™¾åˆ†æ¯”ï¼Œå¾—åˆ°çš„å°±æ˜¯å¯¹åº”çš„ vwã€‚</li></ol><p>è¿ç®—ç»“æœä¸ºï¼š</p><ul><li>100 vw Ã— (6 Ã· 375) = 100 vw Ã— 0.016 = 1.6 vw</li><li>100 vh Ã— (6 Ã· 667)  = 100 vh Ã— 0.0089955022 = 0.89955022 vh</li></ul><h2 id="å’Œ-æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#å’Œ-æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="å’Œ % æœ‰ä»€ä¹ˆåŒºåˆ«"></a>å’Œ % æœ‰ä»€ä¹ˆåŒºåˆ«</h2><p>æ—¢ç„¶è¯´åˆ° 1vw å°±æ˜¯è§†å£å®½çš„ 1% ï¼Œ1vh å°±æ˜¯è§†å£é«˜çš„ 1%ï¼Œé‚£æˆ‘å²‚ä¸æ˜¯ç”¨ç™¾åˆ†æ¯”å»ä»£æ›¿ä¸å°±å¥½äº†ï¼Œå¹²å˜›è¿˜è¦ vw å’Œ vh ï¼Œè¿™ä¼šä¸ä¼šå¾ˆå¤šä½™æˆ–è€…æ²¡å¿…è¦å‘€ã€‚</p><p>æ ¼å±€å°äº†ï¼Œæ ¼å±€å°äº†ã€‚</p><p>ä»–ä»¬ä¿©è¿˜æ˜¯æœ‰åŒºåˆ«çš„ï¼Œä½¿ç”¨ç™¾åˆ†æ¯”å»è°ƒæ•´å¯æ˜¯åŸºäºçˆ¶å…ƒç´ å·²æœ‰çš„å®½åº¦è¿›è¡Œé€‚é…çš„ã€‚è€Œ vw å’Œ vh é’ˆå¯¹çš„æ˜¯æµè§ˆå™¨è§†å£ï¼ˆç§»åŠ¨ç«¯å°±æ˜¯å±å¹•åˆ†è¾¨ç‡ï¼‰å°ºå¯¸æ¥çš„ã€‚</p><p>è¿™é‡Œä½¿ç”¨ bilibili çš„ç§»åŠ¨ç«¯è¿›è¡Œå¯¹æ¯”ï¼Œæˆ‘å¯¹è¿™ä¸¤ä¸ªæ ·å¼åšå‡ºäº†å¦‚ä¸‹ä¸´æ—¶ä¿®æ”¹ã€‚å°† width è®¾ç½®æˆ 46.004266666667vw å’Œå°† width è®¾ç½®æˆ 46.004266666667% çš„æ•ˆæœï¼Œå‘ç°æ•ˆæœæ˜¯æœ‰å·®è·çš„ã€‚</p><p><img src="/journal/view-width-and-view-height/image-20210728230950638.png" alt="image-20210728230950638" loading="lazy"></p><p>å·¦è¾¹çš„çº¢æ¡†æ˜¯ä½¿ç”¨è§†å£å•ä½ï¼Œå³è¾¹çš„çº¢æ¡†æ˜¯ä½¿ç”¨ç™¾åˆ†æ¯”å•ä½ã€‚é¦–å…ˆå¾ˆå®¹æ˜“çœ‹å‡ºæ¥ï¼Œå·¦è¾¹å¤§ï¼Œå³è¾¹å°ï¼Œä¸¤è€…è¿˜æ˜¯æœ‰åŒºåˆ«çš„ï¼Œç™¾åˆ†æ¯”æ˜¯åŸºäºçˆ¶å®¹å™¨çš„ï¼Œçˆ¶å®¹å™¨çš„å®½æ˜¯æ²¡æœ‰è§†å£é‚£ä¹ˆå¤§ã€‚æ‰€ä»¥æ‰ä¼šæ˜¾å¾—å°ï¼Œè€Œå·¦è¾¹æ˜¯ä»¥è§†å£ä¸ºå‚ç…§ï¼Œæ‰€ä»¥æ‰ä¼šå¤§ä¸€äº›ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> html </tag>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆè¯† WebSocket</title>
      <link href="/journal/websocket-tutoral/"/>
      <url>/journal/websocket-tutoral/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä»€ä¹ˆæ˜¯-WebSocket"><a href="#ä»€ä¹ˆæ˜¯-WebSocket" class="headerlink" title="ä»€ä¹ˆæ˜¯ WebSocket"></a>ä»€ä¹ˆæ˜¯ WebSocket</h2><p>WebSocket æ˜¯ HTML5 å¼€å§‹æä¾›çš„ä¸€ä¸ªåœ¨ TCP è¿æ¥ä¸Šè¿›è¡Œçš„ä¸€ä¸ªå…¨åŒå·¥é€šè®¯çš„åè®®ã€‚WebSocket é€šä¿¡åè®®äº 2011 å¹´è¢« IETF å®šä¸ºæ ‡å‡† RFC 6455ï¼Œå¹¶ç”± RFC7936 è¡¥å……è§„èŒƒã€‚WebSocket API ä¹Ÿè¢« W3C å®šä¸ºæ ‡å‡†ã€‚</p><p>WebSocket ä½¿å¾—å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®äº¤æ¢å˜å¾—æ›´åŠ ç®€å•ï¼Œå…è®¸æœåŠ¡ç«¯ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®ã€‚åœ¨ WebSocket API ä¸­ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨åªéœ€è¦å®Œæˆä¸€æ¬¡æ¡æ‰‹ï¼Œä¸¤è€…ä¹‹é—´å°±ç›´æ¥å¯ä»¥åˆ›å»ºæŒä¹…æ€§çš„è¿æ¥ï¼Œå¹¶è¿›è¡ŒåŒå‘æ•°æ®ä¼ è¾“ã€‚</p><p><img src="/journal/websocket-tutoral/eating.jpg" alt="eating.jpg" loading="lazy"></p><p>æ¯”èµ· ajax çš„è½®è¯¢ï¼Œæ›´åŠ èŠ‚çœäº†è®¸å¤šèµ„æºã€‚</p><span id="more"></span><h2 id="å¦‚ä½•é€šä¿¡"><a href="#å¦‚ä½•é€šä¿¡" class="headerlink" title="å¦‚ä½•é€šä¿¡"></a>å¦‚ä½•é€šä¿¡</h2><p>è¦ç›´æ¥å»ºç«‹ WebSocket è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼å®ƒé¦–å…ˆä½¿ç”¨ http åè®®æ¥è¿›è¡Œæ¡æ‰‹ï¼Œè¿æ¥æˆåŠŸä¹‹åå°±ç›´æ¥ä½¿ç”¨ WebSocket åè®®è¿›è¡Œè¿æ¥äº†ã€‚</p><p>è¿æ¥çš„è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤º</p><p><img src="/journal/websocket-tutoral/109cfd4c35de32462512724d306d04.jpg" alt="109cfd4c35de32462512724d306d04.jpg" loading="lazy"></p><p>ç”±ä¸Šå›¾ WebSocket åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œæ¡æ‰‹å’Œæ•°æ®ä¼ è¾“ã€‚</p><p>å®¢æˆ·ç«¯æ¡æ‰‹æ—¶æºå¸¦ç€ç±»ä¼¼çš„å¦‚ä¸‹ä¿¡æ¯</p><pre class="language-sh" data-language="sh"><code class="language-sh">GET ws:&#x2F;&#x2F;localhost&#x2F;chat HTTP&#x2F;1.1Host: localhostUpgrade: websocketConnection: UpgradeSec-WebSocket-Key: dGh1IHNhbXBSzSBub25jzQ&#x3D;&#x3D;Sec-WebSocket-Extensions: permessage-deflateSec-WebSocket-version: 13</code></pre><p>æœåŠ¡ç«¯æ¡æ‰‹æ—¶æºå¸¦ç€ç±»ä¼¼çš„å¦‚ä¸‹ä¿¡æ¯</p><pre class="language-bash" data-language="bash"><code class="language-bash">HTTP/1.1 <span class="token number">101</span> switching ProtocolsUpgrade: websocketConnection: UpgradeSec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo<span class="token operator">=</span>Sec-Websocket-Extensions <span class="token builtin class-name">:</span> permessage-def1ate</code></pre><p>å­—æ®µè¯´æ˜</p><table><thead><tr><th>å¤´åç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Connection: Upgrade</td><td>æ ‡è¯†è¯¥ HTTP è¯·æ±‚æ˜¯ä¸€ä¸ªåè®®å‡çº§è¯·æ±‚</td></tr><tr><td>Upgrade: websocket</td><td>åè®®å‡çº§ WebSocket åè®®</td></tr><tr><td>Sec-WebSocket-Key:</td><td>å®¢æˆ·ç«¯é‡‡ç”¨ base64 ç¼–ç çš„ 24 ä½éšæœºå­—ç¬¦åºåˆ—ï¼ŒæœåŠ¡å™¨æ¥å—å®¢æˆ·ç«¯ HTTP åè®®å‡çº§çš„è¯æ˜ã€‚è¦æ±‚æœåŠ¡ç«¯å“åº”ä¸€ä¸ªå¯¹åº”åŠ å¯†çš„ Sec-Websocket-Accept å¤´ä¿¡æ¯ä½œä¸ºåº”ç­”</td></tr><tr><td>Sec-WebSocket-Extensions:</td><td>åè®®æ‰©å¼ ç±»å‹</td></tr><tr><td>Sec-WebSocket-version: 13</td><td>å®¢æˆ·ç«¯æ”¯æŒ WebSocket çš„ç‰ˆæœ¬</td></tr></tbody></table><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><h3 id="å®¢æˆ·ç«¯ï¼ˆWebSocketï¼‰å®ç°"><a href="#å®¢æˆ·ç«¯ï¼ˆWebSocketï¼‰å®ç°" class="headerlink" title="å®¢æˆ·ç«¯ï¼ˆWebSocketï¼‰å®ç°"></a>å®¢æˆ·ç«¯ï¼ˆWebSocketï¼‰å®ç°</h3><p>å®ç° WebSockets çš„ web æµè§ˆå™¨å°†é€šè¿‡ WebSocket å¯¹è±¡å…¬å¼€æ‰€æœ‰å¿…éœ€çš„å®¢æˆ·ç«¯åŠŸèƒ½ï¼ˆä¸»è¦æŒ‡æ”¯æŒ Html5 çš„æµè§ˆå™¨)ã€‚</p><p>åˆ›å»ºå¯¹è±¡çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> ws <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="WebSocket-äº‹ä»¶è§¦å‘"><a href="#WebSocket-äº‹ä»¶è§¦å‘" class="headerlink" title="WebSocket äº‹ä»¶è§¦å‘"></a>WebSocket äº‹ä»¶è§¦å‘</h4><p>å®ƒçš„å¯¹è±¡ä¸­æœ‰å¦‚ä¸‹äº‹ä»¶ã€‚</p><table><thead><tr><th>äº‹ä»¶</th><th>äº‹ä»¶å¤„ç†ç¨‹åº</th><th>æè¿°</th></tr></thead><tbody><tr><td>open</td><td>ws.onopen</td><td>è¿æ¥æ—¶å»ºç«‹è§¦å‘</td></tr><tr><td>message</td><td>ws.onmessage</td><td>å®¢æˆ·ç«¯æ¥æ”¶æœåŠ¡ç«¯æ•°æ®æ—¶è§¦å‘</td></tr><tr><td>error</td><td>ws.onerror</td><td>é€šä¿¡å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘</td></tr><tr><td>close</td><td>ws.close</td><td>è¿æ¥å…³é—­æ—¶è§¦å‘</td></tr></tbody></table><h4 id="WebSocket-æ–¹æ³•"><a href="#WebSocket-æ–¹æ³•" class="headerlink" title="WebSocket æ–¹æ³•"></a>WebSocket æ–¹æ³•</h4><p>å®ƒçš„å¯¹è±¡ä¸­æœ‰å¦‚ä¸‹äº‹ä»¶ã€‚</p><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>send()</td><td>ä½¿ç”¨è¿æ¥å‘é€æ•°æ®</td></tr></tbody></table><h3 id="æœåŠ¡ç«¯å®ç°"><a href="#æœåŠ¡ç«¯å®ç°" class="headerlink" title="æœåŠ¡ç«¯å®ç°"></a>æœåŠ¡ç«¯å®ç°</h3><p>æœåŠ¡ç«¯å®ç°æœ‰å¾ˆå¤šç§ï¼Œæœ‰ Javaã€Pythonã€Go ç­‰ç­‰å¤šç§åç«¯å®ç°æ–¹å¼ã€‚è¿™é‡Œä½¿ç”¨çš„æ˜¯ Java çš„å®ç°æ–¹å¼ï¼ŒTomcat æ˜¯ç”¨ Java è¿›è¡Œç¼–å†™çš„ã€‚åœ¨ Tomcat 7.0.5 å¼€å§‹ï¼Œå°±å¼€å§‹æ”¯æŒ WebSocket ï¼Œå¹¶ä¸”å®ç°äº† Java  WebSocket çš„è§„èŒƒ(JSR356)ã€‚</p><p>Java WebSocket åº”ç”¨ç”±ä¸€ç³»åˆ—çš„ WebSocketEndpoint ç»„æˆã€‚Endpoint æ˜¯ä¸€ä¸ª java å¯¹è±¡ï¼Œä»£è¡¨ WebSocket é“¾æ¥çš„ä¸€ç«¯ï¼Œå¯¹äºæœåŠ¡ç«¯ï¼Œæˆ‘ä»¬å¯ä»¥è§†ä¸ºå¤„ç†å…·ä½“ WebSocket æ¶ˆæ¯çš„æ¥å£ï¼Œå°±åƒ Servlet ä¹‹ä¸ http è¯·æ±‚ä¸€æ ·ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼å®šä¹‰ Endpointï¼š</p><ul><li>ç¼–ç¨‹å¼ï¼šç»§æ‰¿è‡ª <code>javax.websocket.Endpoint</code> å¹¶å®ç°å…¶æ–¹æ³•ã€‚</li><li>æ³¨è§£å¼ï¼šå³å®šä¹‰ä¸€ä¸ª POJOï¼ˆPlain Ordinary Java Objectï¼Œæ™®é€š Java å¯¹è±¡ï¼‰ï¼Œå¹¶æ·»åŠ  @ServerEndpoint ç›¸å…³æ³¨è§£ã€‚</li></ul><p>EndPoint å¯¹è±¡æ˜¯åœ¨ WebSocket æ¡æ‰‹æ—¶åˆ›å»ºï¼Œå¹¶åœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„é“¾æ¥è¿‡ç¨‹ä¸­æœ‰æ•ˆï¼Œåœ¨ Endpoint æ¥å£ä¸­å®šä¹‰äº†ä¸å…¶ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„æ–¹æ³•ï¼Œç¡®ä¿åœ¨å„ä¸ªé˜¶æ®µè°ƒç”¨å®ä¾‹çš„ç›¸å…³æ–¹æ³•ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸçš„ç›¸å…³æ–¹æ³•å¦‚ä¸‹ã€‚</p><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th><th>æ³¨è§£</th></tr></thead><tbody><tr><td>onClose</td><td>å½“ä¼šè¯å…³é—­æ—¶è°ƒç”¨ã€‚</td><td>@OnClose</td></tr><tr><td>onOpen</td><td>å½“å¼€å¯ä¸€ä¸ªæ–°çš„ä¼šè¯æ—¶è°ƒç”¨ï¼Œè¯¥æ–¹æ³•æ˜¯å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯æ¡æ‰‹æˆåŠŸä¹‹åè°ƒç”¨çš„æ–¹æ³•ã€‚</td><td>@OnOpen</td></tr><tr><td>onError</td><td>å½“è¿æ¥çš„è¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸æ—¶è°ƒç”¨ã€‚</td><td>@OnError</td></tr></tbody></table><h4 id="å¦‚ä½•æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„æ•°æ®"><a href="#å¦‚ä½•æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„æ•°æ®" class="headerlink" title="å¦‚ä½•æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„æ•°æ®"></a>å¦‚ä½•æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„æ•°æ®</h4><p>é€šè¿‡ä¸º Session æ·»åŠ  MessageHandler æ¶ˆæ¯å¤„ç†å™¨æ¥æ¥æ”¶æ¶ˆæ¯ï¼Œå½“é‡‡ç”¨æ³¨è§£æ–¹å¼å®šä¹‰ Endpoint æ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ @OnMessage æ³¨è§£æŒ‡å®šæ¥æ”¶æ¶ˆæ¯çš„æ–¹æ³•ã€‚</p><h4 id="å¦‚ä½•ä¸»åŠ¨æ¨é€æ•°æ®ç»™å®¢æˆ·ç«¯"><a href="#å¦‚ä½•ä¸»åŠ¨æ¨é€æ•°æ®ç»™å®¢æˆ·ç«¯" class="headerlink" title="å¦‚ä½•ä¸»åŠ¨æ¨é€æ•°æ®ç»™å®¢æˆ·ç«¯"></a>å¦‚ä½•ä¸»åŠ¨æ¨é€æ•°æ®ç»™å®¢æˆ·ç«¯</h4><p>å‘é€æ¶ˆæ¯åˆ™ç”± RemoteEndpoint å®Œæˆï¼Œå…¶å®ä¾‹ç”± Session ç»´æŠ¤ã€‚</p><p>Session.getBasicRemote è·å–åŒæ­¥æ¶ˆæ¯å‘é€çš„å®ä¾‹ï¼Œç„¶åè°ƒç”¨å…¶ sendXxx() æ–¹æ³•å°±å¯ä»¥å‘é€æ¶ˆæ¯ã€‚</p><p>é€šè¿‡ Session.getAsyncRemote è·å–å¼‚æ­¥æ¶ˆæ¯å‘é€å®ä¾‹ã€‚</p><h2 id="å°è¯•ä¸€ä¸‹"><a href="#å°è¯•ä¸€ä¸‹" class="headerlink" title="å°è¯•ä¸€ä¸‹"></a>å°è¯•ä¸€ä¸‹</h2><p>æ¥ä¸‹æ¥ï¼Œåˆ©ç”¨ Spring Boot åšä¸€ä¸ªç®€å•çš„ WebSocket çš„ç¨‹åºã€‚å°±æ˜¯å®æ—¶å±•ç¤ºæœåŠ¡å™¨çš„æ—¶é—´ï¼Œæ¯éš” 500 æ¯«ç§’å‘é€æ—¶é—´ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ æ˜¯ Spring Boot çš„é¡¹ç›®ï¼Œå…ˆå¼•å…¥å¦‚ä¸‹ä¸‰ä¸ªä¾èµ–ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- è¿™ä¸ªæ˜¯ springboot çš„ websocket çš„ä¾èµ– --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-websocket<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- å¯¼å…¥æ¨¡æ¿å¼•æ“çš„ starter --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>å¯¼å…¥å®Œæˆä¹‹åï¼Œå…ˆç¼–å†™å‰ç«¯é¡µé¢çš„ä»£ç ã€‚</p><h3 id="å‰ç«¯éƒ¨åˆ†"><a href="#å‰ç«¯éƒ¨åˆ†" class="headerlink" title="å‰ç«¯éƒ¨åˆ†"></a>å‰ç«¯éƒ¨åˆ†</h3><p>å‰ç«¯ç•Œé¢çš„ html ä»£ç æ˜¯éå¸¸ç®€å•çš„ã€‚å…¶ä¸­ç»™ p æ ‡ç­¾å¯¹è®¾ç½®äº†ä¸€ä¸ª id ï¼Œè¿™ä¸ª id æ˜¯ç”¨äºæ˜¾ç¤ºæ¶ˆæ¯çš„ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>websocketä¾‹å­<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>ä½¿ç”¨websocketå®æ—¶å±•ç¤ºæœåŠ¡ç«¯çš„æ—¶é—´<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>realTime<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ws.close()<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ–­å¼€è¿æ¥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">    <span class="token comment">// websocket çš„ç›¸å…³ä»£ç </span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>ç„¶åé€šè¿‡ JavaScript åˆ›å»ºä¸€ä¸ª WebSocket å¯¹è±¡ï¼Œåˆ›å»ºå¯¹è±¡éå¸¸ç®€å•ã€‚ å…¶ä¸­éœ€è¦æºå¸¦ä¸€ä¸ªè¯·æ±‚è·¯å¾„ï¼Œæ­¤æ—¶çš„è¯·æ±‚çš„åè®®æ˜¯ <code>ws</code> è€Œä¸æ˜¯ <code>http</code> ã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> ws <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span><span class="token string">"ws://localhost:8080/showTime"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ç„¶åè¿™ä¸ªå¯¹è±¡ä¸­æœ‰ç›‘å¬äº‹ä»¶å˜›ï¼Œè°ƒç”¨ç›¸å…³çš„ç›‘å¬æ–¹æ³•å³å¯ã€‚æœ¬ç¤ºä¾‹ä¸­è®¾ç½®äº†å››ä¸ªç›‘å¬äº‹ä»¶ï¼Œåˆ†åˆ«ä¸º <code>onopen</code> ã€<code>onmessage</code> ã€<code>onerror</code> ã€<code>onclose</code> å››ä¸ªç›‘å¬äº‹ä»¶ï¼Œç›®å‰è¿™é‡Œä¹Ÿå°±ç”¨åˆ°äº† 3 ä¸ªã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// è¿™æ˜¯å»ºç«‹è¿æ¥ä¹‹åè§¦å‘çš„äº‹ä»¶</span>ws<span class="token punctuation">.</span><span class="token function-variable function">onopen</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"realTime"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"è¿æ¥æˆåŠŸï¼Œæ­£åœ¨è·å–æ—¶é—´......"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// æ”¶åˆ°æœåŠ¡ç«¯å‘é€è¿‡æ¥çš„æ¶ˆæ¯æ‰€è§¦å‘çš„äº‹ä»¶</span>ws<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// console.log(e.data);</span>    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"realTime"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"ç°åœ¨çš„æ—¶é—´æ˜¯ï¼š"</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>data<span class="token punctuation">;</span> <span class="token comment">// å°†æ—¶é—´å¡«å……åˆ° p æ ‡ç­¾å¯¹ä¸­</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// æœåŠ¡ç«¯å‡ºç°å¼‚å¸¸æ—¶å»ºç«‹çš„äº‹ä»¶</span>ws<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token comment">// å…³é—­è¿æ¥æ—¶æ‰€è§¦å‘çš„äº‹ä»¶</span>ws<span class="token punctuation">.</span><span class="token function-variable function">onclose</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"realTime"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">"å·²ç»å’ŒæœåŠ¡å™¨æ–­å¼€è¿æ¥"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>è‡³æ­¤ï¼Œå‰ç«¯éƒ¨åˆ†çš„ä»£ç å·²ç»å®Œæˆäº†ã€‚æ¥ä¸‹æ¥å†™åç«¯çš„ä»£ç ã€‚</p><h3 id="åç«¯éƒ¨åˆ†"><a href="#åç«¯éƒ¨åˆ†" class="headerlink" title="åç«¯éƒ¨åˆ†"></a>åç«¯éƒ¨åˆ†</h3><p>å…ˆæ–°å»ºä¸€ä¸ªæ§åˆ¶ç±»ï¼Œç”¨äºè®¿é—®æˆ‘ä»¬å†™çš„ index.html é¡µé¢ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Controller</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IndexController</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/index"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"index"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ç„¶åæ–°å»ºä¸€ä¸ª EndPoint ç±»ï¼Œç”¨äºæ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯å‘è¿‡æ¥çš„æ•°æ®ã€‚æˆ‘ä»¬é€šè¿‡ ServerEndpoint æ³¨è§£ç±»æ¥æ ‡è®°å®ƒï¼Œè¯¥è¯·æ±‚æ˜¯åŸºäº WebSocket åè®®ï¼Œå‘é€è¿‡æ¥çš„æ¶ˆæ¯éƒ½ç”±å®ƒæ¥æ¥æ”¶ã€‚ç”±äºè¿™æ˜¯ Spring Boot çš„é¡¹ç›®ï¼Œæ‰€ä»¥éœ€è¦æ ‡è®° Component æ³¨è§£å°†å®ƒæ³¨å†Œåˆ°å®¹å™¨ä¸­ã€‚</p><p>è¿™é‡Œè®¾ç½®äº†ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œä½¿ç”¨ Java è‡ªå¸¦çš„ Timer å®šæ—¶å™¨ç±»ï¼Œæ¯éš” 500ms å°†æ ¼å¼åŒ–çš„æ—¶é—´å‘é€ç»™æµè§ˆå™¨ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@ServerEndpoint</span><span class="token punctuation">(</span><span class="token string">"/showTime"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShowTimeEndPoint</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// åˆ›å»ºä¸€ä¸ªå®šæ—¶ä»»åŠ¡</span>    <span class="token keyword">private</span> <span class="token class-name">Timer</span> timer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// è¿æ¥å»ºç«‹æ—¶è¢«è°ƒç”¨</span>    <span class="token annotation punctuation">@OnOpen</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOpen</span><span class="token punctuation">(</span><span class="token class-name">Session</span> session<span class="token punctuation">,</span> <span class="token class-name">EndpointConfig</span> config<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">SimpleDateFormat</span> sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyyå¹´MMæœˆddæ—¥ HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        timer<span class="token punctuation">.</span><span class="token function">schedule</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TimerTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    <span class="token class-name">String</span> dateTime <span class="token operator">=</span> sdf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    session<span class="token punctuation">.</span><span class="token function">getBasicRemote</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendText</span><span class="token punctuation">(</span>dateTime<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„æ•°æ®æ—¶è¢«è°ƒç”¨</span>    <span class="token annotation punctuation">@OnMessage</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">,</span> <span class="token class-name">Session</span> session<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// è¿æ¥å…³é—­æ—¶è°ƒç”¨è¯¥æ–¹æ³•</span>    <span class="token annotation punctuation">@OnClose</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClose</span><span class="token punctuation">(</span><span class="token class-name">Session</span> session<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        timer<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å…³é—­è®¡æ—¶å™¨</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ä½†æ˜¯è¿™æ ·å­è¿˜æ˜¯ä¸å¤Ÿï¼Œéœ€è¦æ³¨å†Œä¸€ä¸ª <code>ServerEndpointExporter</code> ç±»åˆ°å®¹å™¨ä¸­ï¼Œè¿™æ ·åšçš„ç›®çš„å°±åœ¨äºï¼Œè®©å®ƒå»è‡ªåŠ¨è¯†åˆ«é‚£äº›å¸¦ ServerEndpoint æ³¨è§£çš„ç»„ä»¶ï¼Œä½¿å…¶çœŸæ­£çš„ç”Ÿæ•ˆèµ·æ¥ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebsocketConfig</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// æ³¨å†Œè¿™ä¸ªç»„ä»¶çš„ç›®çš„æ˜¯ï¼Œè®©å®ƒå»è‡ªåŠ¨è¯†åˆ«é‚£äº›å¸¦ ServerEndpoint æ³¨è§£çš„ç»„ä»¶</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">ServerEndpointExporter</span> <span class="token function">serverEndpointExporter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ServerEndpointExporter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿™æ ·ï¼Œåç«¯éƒ¨åˆ†å®Œæˆäº†ã€‚</p><h3 id="è¿è¡Œæµ‹è¯•"><a href="#è¿è¡Œæµ‹è¯•" class="headerlink" title="è¿è¡Œæµ‹è¯•"></a>è¿è¡Œæµ‹è¯•</h3><p>è¿è¡Œ Spring Boot ç¨‹åºï¼Œè®¿é—® <a href="http://localhost:8080/">http://localhost:8080/</a> é¡µé¢ï¼Œè¿è¡Œçš„ç»“æœå¦‚ä¸‹ã€‚</p><p><img src="/journal/websocket-tutoral/lj2dk-2ov9w.gif" alt="lj2dk-2ov9w.gif" loading="lazy"></p><p>ç”¨æˆ·åœ¨åˆ·æ–°é¡µé¢çš„æ—¶å€™ï¼Œåˆ›å»º WebSocket å¯¹è±¡çš„æ—¶å€™å°±å·²ç»è§¦å‘äº† onopen æ–¹æ³•ï¼Œè¡¨ç¤ºæˆ‘å·²ç»è¿æ¥äº†ã€‚ä¹‹åæœ‰ä¸€ä¸ªä¸‰ç§’çš„ç­‰å¾…ï¼Œä¹Ÿå°±æ˜¯åç«¯çš„å®šæ—¶å™¨éƒ¨åˆ†ã€‚ä¸‰ç§’ä¹‹åï¼Œåç«¯å°±å¼€å§‹å‘é€æ¶ˆæ¯åˆ°æµè§ˆå™¨ï¼Œæ¯éš” 500 ms å‘é€ä¸€æ¬¡æ¶ˆæ¯ã€‚</p><p>å°±æœ‰å®æ—¶æ˜¾ç¤ºçš„æ•ˆæœäº†ã€‚</p><p>æœ€åç‚¹å‡»æ–­å¼€è¿æ¥æ˜¯è°ƒç”¨äº† close æ–¹æ³•ï¼Œè¿™æ ·å°±å’ŒæœåŠ¡å™¨æ–­å¼€äº†è¿æ¥ï¼Œæ—¶é—´ä¹Ÿå°±ä¸å†æ˜¾ç¤ºå‡ºæ¥äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> WebSocket </tag>
            
        </tags>
      
    </entry>
    
    
    
    
    
    <entry>
      <title>SpringBoot é”™è¯¯å¤„ç†æœºåˆ¶</title>
      <link href="/journal/error-handing/"/>
      <url>/journal/error-handing/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="é»˜è®¤è§„åˆ™"><a href="#é»˜è®¤è§„åˆ™" class="headerlink" title="é»˜è®¤è§„åˆ™"></a>é»˜è®¤è§„åˆ™</h2><p>Spring Boot æä¾›äº†ä¸€ä¸ªé»˜è®¤çš„ <code>/error</code> è·¯å¾„æ¥å¤„ç†æ‰€æœ‰é”™è¯¯çš„æ˜ å°„ã€‚ä½†æ˜¯ï¼ŒåŒæ ·çš„é”™è¯¯åœ¨ä¸åŒçš„å®¢æˆ·ç«¯ä¸‹æ˜¾ç¤ºçš„æ•ˆæœæ˜¯å®Œå…¨ä¸ä¸€æ ·çš„ã€‚</p><p>æ¯”å¦‚ï¼Œåœ¨åšå‰åç«¯åˆ†ç¦»çš„åº”ç”¨ç¨‹åºæ—¶ï¼Œä½¿ç”¨ Postmanã€OkHttp ç­‰è¿™ç±»å·¥å…·ã€‚é€šè¿‡å®ƒæ¥å‘é€ä¸€ä¸ªä¸å­˜åœ¨çš„è·¯å¾„æ—¶ï¼Œå®ƒè¿”å›çš„é”™è¯¯ä¿¡æ¯æ˜¯ JSON æ ¼å¼çš„ã€‚</p><p><img src="/journal/error-handing/image-20210710104356541.png" alt="image-20210710104356541" loading="lazy"></p><span id="more"></span><p>å¦‚æœç”¨çš„æ˜¯æµè§ˆå™¨æ¥è®¿é—®ä¸€ä¸ªä¸æ­£ç¡®çš„é¡µé¢ï¼Œé‚£ä¹ˆå®ƒæ˜¯è¿™æ ·çš„ã€‚å®ƒå°†ä¼šè¿”å›ä¸€ä¸ª</p><p><img src="/journal/error-handing/image-20210710104540951.png" alt="image-20210710104540951" loading="lazy"></p><h2 id="è‡ªå®šä¹‰é”™è¯¯é¡µ"><a href="#è‡ªå®šä¹‰é”™è¯¯é¡µ" class="headerlink" title="è‡ªå®šä¹‰é”™è¯¯é¡µ"></a>è‡ªå®šä¹‰é”™è¯¯é¡µ</h2><p>è‡ªå®šä¹‰é”™è¯¯é¡µéå¸¸çš„ç®€å•ï¼Œå°†é”™è¯¯é¡µæ”¾åˆ°é¡¹ç›®è·¯å¾„ <code>/resources/templates/error</code> æˆ–è€…æ”¾åˆ° <code>/resources/public/error</code> è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹å³å¯ã€‚</p><p>å°±æ‹¿ä¹‹å‰çš„æ¨¡æ‹Ÿçš„åå°ç³»ç»Ÿæ¥è¯´å§ï¼Œæœ‰ä¸€ä¸ª 404 é”™è¯¯é¡µå’Œ 500 çš„é”™è¯¯é¡µï¼Œæˆ‘ä»¬å°†å…¶æ”¾è¿›æ¥ï¼Œæ”¾åˆ° <code>templates/error</code> è¿™ä¸ªç›®å½•ä¸‹å§ã€‚æ”¾å®Œä¹‹åï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ä¸”æ–‡ä»¶åå¿…é¡»æ˜¯ä¸é”™è¯¯ç å¯¹åº”çš„ html æ–‡ä»¶ï¼Œå¦‚æœæƒ³ç”¨è¿™ä¸ª html æ–‡ä»¶ä»£è¡¨ä¸€ç±»é”™è¯¯ç ï¼Œæ¯”å¦‚ 5xx.htmlï¼ˆ5 å¼€å¤´çš„ä»£è¡¨ç€æœåŠ¡å™¨ç«¯çš„é”™è¯¯ï¼‰</p><p><img src="/journal/error-handing/image-20210710204038982.png" alt="image-20210710204038982" loading="lazy"></p><blockquote><p>æ³¨æ„ï¼Œæ”¾åˆ° <code>templates/error</code> é”™è¯¯é¡µæ—¶ï¼Œç”±äº templates æ˜¯åŠ è½½æ¨¡æ¿å¼•æ“ï¼Œæ”¾å…¥ html æ–‡ä»¶æ—¶ï¼Œéœ€è¦åœ¨ html æ ‡ç­¾å¯¹ä¸­å£°æ˜ä¸€ä¸‹æ¨¡æ¿å¼•æ“ <code>xmlns:th=&quot;http://www.thymeleaf.org&quot;</code></p></blockquote><h3 id="æµ‹è¯•-404-é¡µé¢"><a href="#æµ‹è¯•-404-é¡µé¢" class="headerlink" title="æµ‹è¯• 404 é¡µé¢"></a>æµ‹è¯• 404 é¡µé¢</h3><p>æˆ‘ä»¬è®¿é—®ä¸€ä¸ªè·¯å¾„ä¸å­˜åœ¨çš„é¡µé¢ï¼Œè¿è¡Œæ•ˆæœå¦‚ä¸‹ã€‚</p><p><img src="/journal/error-handing/image-20210710204450972.png" alt="image-20210710204450972" loading="lazy"></p><h3 id="æµ‹è¯•-500-é¡µé¢"><a href="#æµ‹è¯•-500-é¡µé¢" class="headerlink" title="æµ‹è¯• 500 é¡µé¢"></a>æµ‹è¯• 500 é¡µé¢</h3><p>æˆ‘ä»¬åœ¨ç™»å½•é¡µé¢æ•…æ„å¼•å‘ä¸€ä¸ªç®—æ•°å¼‚å¸¸ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"/login"</span><span class="token punctuation">,</span> <span class="token string">"/"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"login"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ç„¶åæˆ‘åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œè¿è¡Œåœ¨ Tomcat ä¸­å‡ºç°çš„é”™è¯¯é¡µé¢ï¼Œå±…ç„¶æ˜¯åœ¨æ‰“æˆ war åŒ…æ—¶å‡ºç°çš„é”™è¯¯é¡µé¢ã€‚èƒ½å¤Ÿåœ¨ Spring Boot ä¸­åšå‡ºç°è¿™æ ·çš„é¡µé¢ä¹ŸçœŸçš„æ˜¯è›®å¹¸è¿çš„ã€‚</p><p><img src="/journal/error-handing/image-20210710205338581.png" alt="image-20210710205338581" loading="lazy"></p><p>è¿™æ€»è¦æ‰¾æ‰¾åŸå› å§ï¼Œè¿™ä¸ªé—®é¢˜åé¢çŒœæµ‹ä¼°è®¡æ˜¯æ‹¦æˆªå™¨å†™çš„æœ‰é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯æˆ‘åŸæ¥çš„æ‹¦æˆªå™¨ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginStatusConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LoginInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token string">"/css/**"</span><span class="token punctuation">,</span> <span class="token string">"/fonts/**"</span><span class="token punctuation">,</span> <span class="token string">"/images/**"</span><span class="token punctuation">,</span>                        <span class="token string">"/js/**"</span><span class="token punctuation">,</span> <span class="token string">"/login"</span><span class="token punctuation">,</span> <span class="token string">"/login_do"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æˆ‘æŠŠæ‹¦æˆªå™¨çš„å†™æ³•æ”¹æˆè¿™æ ·ï¼Œä¹Ÿå°±æ˜¯æ’é™¤äº†å°†æ ¹ç›®å½•ä¸‹è¯·æ±‚è·¯å¾„ï¼ˆä¸åŒ…æ‹¬å­è·¯å¾„ï¼‰ï¼Œä¹Ÿå°±æ˜¯ <code>/*</code> </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginStatusConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LoginInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span><span class="token string">"/*"</span><span class="token punctuation">,</span> <span class="token string">"/css/**"</span><span class="token punctuation">,</span> <span class="token string">"/fonts/**"</span><span class="token punctuation">,</span> <span class="token string">"/images/**"</span><span class="token punctuation">,</span>                        <span class="token string">"/js/**"</span><span class="token punctuation">,</span> <span class="token string">"/login"</span><span class="token punctuation">,</span> <span class="token string">"/login_do"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ç°åœ¨æˆ‘ä»¬é‡æ–°è¿è¡Œä¸€ä¸‹ï¼Œçœ‹åˆ°ä¸‹é¢çš„æ•ˆæœå°±çŸ¥é“äº†ã€‚</p><p><img src="/journal/error-handing/image-20210710210219440.png" alt="image-20210710210219440" loading="lazy"></p><h2 id="å¼‚å¸¸å¤„ç†çš„åŸç†"><a href="#å¼‚å¸¸å¤„ç†çš„åŸç†" class="headerlink" title="å¼‚å¸¸å¤„ç†çš„åŸç†"></a>å¼‚å¸¸å¤„ç†çš„åŸç†</h2><p>å¼‚å¸¸å¤„ç†ä¸­ï¼Œæœ‰ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»ï¼Œå«åš <code>ErrorMvcAutoConfiguration</code> ï¼Œå®ƒå¸®åŠ©æˆ‘ä»¬é…ç½®å¥½äº†å¼‚å¸¸å¤„ç†çš„è§„åˆ™ã€‚åŒæ—¶æœ‰ä¸€äº›å±æ€§æ˜¯ä» <code>ServerProperties</code> , <code>WebMvcProperties </code> å’Œ <code>ResourceProperties</code> ä¸­è·å–æ¥çš„ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token class-name">ServerProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">ResourceProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">WebMvcProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ErrorMvcAutoConfiguration</span> <span class="token punctuation">&#123;</span>   <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ServerProperties</span> serverProperties<span class="token punctuation">;</span>   <span class="token keyword">public</span> <span class="token class-name">ErrorMvcAutoConfiguration</span><span class="token punctuation">(</span><span class="token class-name">ServerProperties</span> serverProperties<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>serverProperties <span class="token operator">=</span> serverProperties<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="è‡ªåŠ¨é…ç½®åŸç†"><a href="#è‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="è‡ªåŠ¨é…ç½®åŸç†"></a>è‡ªåŠ¨é…ç½®åŸç†</h3><p>åœ¨è¯¥è‡ªåŠ¨é…ç½®ç±»ä¸­ï¼Œæ³¨å†Œäº†å¦‚ä¸‹ç»„ä»¶ï¼š</p><ul><li>DefaultErrorAttributes</li><li>BasicErrorController</li></ul><h4 id="BasicErrorController"><a href="#BasicErrorController" class="headerlink" title="BasicErrorController"></a>BasicErrorController</h4><p>å…ˆæ¥è°ˆè°ˆ <code>BasicErrorController</code> è¿™ä¸ªç±»ï¼ŒController ä½œä¸ºæ§åˆ¶å±‚çš„ç±»ï¼Œå½“ç„¶å°±æ˜¯ä½œä¸ºè¯·æ±‚å¤„ç†çš„ç±»äº†ã€‚ä»¥ä¸‹æ˜¯å®ƒçš„éƒ¨åˆ†æºç ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Controller</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"$&#123;server.error.path:$&#123;error.path:/error&#125;&#125;"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BasicErrorController</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractErrorController</span> <span class="token punctuation">&#123;</span><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ErrorProperties</span> errorProperties<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>å…¶ä¸­ï¼Œ<code>server.error.path</code> å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æ‰‹åŠ¨é…ç½®é”™è¯¯çš„æ˜ å°„è·¯å¾„ï¼Œå¦‚æœè¿™ä¸ªæ²¡æœ‰å»é…ç½®ï¼Œé‚£ä¹ˆå®ƒä¼šå»æ‰¾<code>error.path</code> è¿™ä¸ªé…ç½®é¡¹æ˜¯å¦å·²ç»é…ç½®ï¼Œå¦‚æœè¿˜æ˜¯æ²¡æœ‰ï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„é”™è¯¯å¤„ç†è¯·æ±‚è·¯å¾„ <code>/error</code>ï¼Œè¿™ä¸ªé”™è¯¯å¤„ç†è¯·æ±‚è·¯å¾„åœ¨é¡µé¢ä¸­çš„ whitelabel ä¸­å¯ä»¥çœ‹åˆ°ã€‚</p><pre class="language-text" data-language="text"><code class="language-text">This application has no explicit mapping for &#x2F;error, so you are seeing this as a fallback.</code></pre><p>ç„¶åï¼Œè¯¥ç±»ä¸­è¿˜æœ‰è¿™ä¸¤ä¸ªåœ°æ–¹æ ‡æ³¨äº† <code>RequestMapping</code> æ³¨è§£ï¼Œä¸€ä¸ªåˆ©ç”¨æ˜¯æµè§ˆå™¨æ˜¯è®¿é—®é”™è¯¯è·¯å¾„æ—¶æ‰€è¿”å›çš„å†…å®¹ï¼Œå¦å¤–ä¸€ä¸ªå°±æ˜¯ä½¿ç”¨ Postman ç­‰è¿™ç§å·¥å…·è®¿é—®é”™è¯¯é¡µæ—¶ï¼Œè¿”å›çš„æ˜¯ JSON æ ¼å¼çš„é”™è¯¯ä¿¡æ¯ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * è¿™ä¸ªæ–¹æ³•æ˜¯æµè§ˆå™¨è®¿é—®é”™è¯¯é¡µæ—¶ï¼Œè¿”å› html çš„ */</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>produces <span class="token operator">=</span> <span class="token class-name">MediaType</span><span class="token punctuation">.</span>TEXT_HTML_VALUE<span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">errorHtml</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">HttpStatus</span> status <span class="token operator">=</span> <span class="token function">getStatus</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> model <span class="token operator">=</span> <span class="token class-name">Collections</span>        <span class="token punctuation">.</span><span class="token function">unmodifiableMap</span><span class="token punctuation">(</span><span class="token function">getErrorAttributes</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token function">getErrorAttributeOptions</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">MediaType</span><span class="token punctuation">.</span>TEXT_HTML<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    response<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span>status<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">ModelAndView</span> modelAndView <span class="token operator">=</span> <span class="token function">resolveErrorView</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> status<span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>modelAndView <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> modelAndView <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * è¿™ä¸ªæ–¹æ³•æ˜¯ç”¨ Postman ç­‰è¯·æ±‚å·¥å…·è¯•ï¼Œé€šè¿‡ JSON çš„æ ¼å¼è¿”å›é”™è¯¯ä¿¡æ¯ */</span><span class="token annotation punctuation">@RequestMapping</span><span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">HttpStatus</span> status <span class="token operator">=</span> <span class="token function">getStatus</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">==</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>NO_CONTENT<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> body <span class="token operator">=</span> <span class="token function">getErrorAttributes</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token function">getErrorAttributeOptions</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">MediaType</span><span class="token punctuation">.</span>ALL<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>é»˜è®¤çš„é”™è¯¯é¡µæ˜¯åœ¨è‡ªåŠ¨é…ç½®ç±»ä¸­ï¼Œæœ‰ä¸€ä¸ª StaticView çš„å†…éƒ¨ç±»ï¼Œè¿™ä¸ªå†…éƒ¨ç±»ä¸­é‡Œé¢æœ‰é»˜è®¤çš„é”™è¯¯é¡µã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/**  * Simple &#123;@link View&#125; implementation that writes a default HTML error page.  */</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">StaticView</span> <span class="token keyword">implements</span> <span class="token class-name">View</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">MediaType</span> TEXT_HTML_UTF8 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MediaType</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token string">"html"</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Log</span> logger <span class="token operator">=</span> <span class="token class-name">LogFactory</span><span class="token punctuation">.</span><span class="token function">getLog</span><span class="token punctuation">(</span><span class="token class-name">StaticView</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token operator">?</span><span class="token punctuation">></span></span> model<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span>        <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">isCommitted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">String</span> message <span class="token operator">=</span> <span class="token function">getMessage</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">;</span>            logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span>TEXT_HTML_UTF8<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">StringBuilder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Object</span> timestamp <span class="token operator">=</span> model<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"timestamp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‹¿åˆ°æ—¶é—´æˆ³</span>        <span class="token class-name">Object</span> message <span class="token operator">=</span> model<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‹¿åˆ°é”™è¯¯ä¿¡æ¯</span>        <span class="token class-name">Object</span> trace <span class="token operator">=</span> model<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"trace"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‹¿åˆ°å †æ ˆä¿¡æ¯</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// é”™è¯¯é¡µçš„ html å­—ç¬¦ä¸²æ‹¼æ¥éƒ¨åˆ†</span>        builder<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"&lt;html>&lt;body>&lt;h1>Whitelabel Error Page&lt;/h1>"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>            <span class="token string">"&lt;p>This application has no explicit mapping for /error, so you are seeing this as a fallback.&lt;/p>"</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"&lt;div id='created'>"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"&lt;/div>"</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"&lt;div>There was an unexpected error (type="</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">htmlEscape</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">", status="</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">htmlEscape</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">").&lt;/div>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å¦‚æœæœ‰é”™è¯¯ä¿¡æ¯ï¼Œåˆ™å±•ç¤ºå‡ºæ¥</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            builder<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"&lt;div>"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">htmlEscape</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"&lt;/div>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// å¦‚æœé”™è¯¯ä¸­åŒ…å«ç€å †æ ˆçš„ä¿¡æ¯ï¼Œåˆ™å°†å †æ ˆä¿¡æ¯å±•ç¤ºå‡ºæ¥</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>trace <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            builder<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"&lt;div style='white-space:pre-wrap;'>"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">htmlEscape</span><span class="token punctuation">(</span>trace<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"&lt;/div>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        builder<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"&lt;/body>&lt;/html>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>builder<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">htmlEscape</span><span class="token punctuation">(</span><span class="token class-name">Object</span> input<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>input <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token class-name">HtmlUtils</span><span class="token punctuation">.</span><span class="token function">htmlEscape</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token operator">?</span><span class="token punctuation">></span></span> model<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Object</span> path <span class="token operator">=</span> model<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> message <span class="token operator">=</span> <span class="token string">"Cannot render error page for request ["</span> <span class="token operator">+</span> path <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>model<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            message <span class="token operator">+=</span> <span class="token string">" and exception ["</span> <span class="token operator">+</span> model<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        message <span class="token operator">+=</span> <span class="token string">" as the response has already been committed."</span><span class="token punctuation">;</span>        message <span class="token operator">+=</span> <span class="token string">" As a result, the response may have the wrong status code."</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> message<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"text/html"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="DefaultErrorAttributes"><a href="#DefaultErrorAttributes" class="headerlink" title="DefaultErrorAttributes"></a>DefaultErrorAttributes</h4><p>å°±æ˜¯ä½¿ç”¨ Postman è¿™ä¸ªå·¥å…·ç±»çš„æ—¶å€™ï¼Œè¿”å›çš„é”™è¯¯ä¿¡æ¯æ˜¯ JSON æ ¼å¼çš„ã€‚é”™è¯¯ä¿¡æ¯éƒ½æ”¾åœ¨ <code>DefaultErrorAttributes</code> è¿™ä¸ªç±»ä¸­ã€‚</p><p>è¿™é‡Œé¢æœ‰ä¸ª getErrorAttributes çš„å±æ€§ï¼Œé‡Œé¢å°±æ”¾ç€äº JSON ä¸­å¯¹åº”çš„ä¸€äº›å±æ€§ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> <span class="token function">getErrorAttributes</span><span class="token punctuation">(</span><span class="token class-name">WebRequest</span> webRequest<span class="token punctuation">,</span> <span class="token class-name">ErrorAttributeOptions</span> options<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> errorAttributes <span class="token operator">=</span> <span class="token function">getErrorAttributes</span><span class="token punctuation">(</span>webRequest<span class="token punctuation">,</span> options<span class="token punctuation">.</span><span class="token function">isIncluded</span><span class="token punctuation">(</span><span class="token class-name">Include</span><span class="token punctuation">.</span>STACK_TRACE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Boolean</span><span class="token punctuation">.</span>TRUE<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>includeException<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        options <span class="token operator">=</span> options<span class="token punctuation">.</span><span class="token function">including</span><span class="token punctuation">(</span><span class="token class-name">Include</span><span class="token punctuation">.</span>EXCEPTION<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>options<span class="token punctuation">.</span><span class="token function">isIncluded</span><span class="token punctuation">(</span><span class="token class-name">Include</span><span class="token punctuation">.</span>EXCEPTION<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        errorAttributes<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"exception"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>options<span class="token punctuation">.</span><span class="token function">isIncluded</span><span class="token punctuation">(</span><span class="token class-name">Include</span><span class="token punctuation">.</span>STACK_TRACE<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        errorAttributes<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"trace"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>options<span class="token punctuation">.</span><span class="token function">isIncluded</span><span class="token punctuation">(</span><span class="token class-name">Include</span><span class="token punctuation">.</span>MESSAGE<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> errorAttributes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        errorAttributes<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>options<span class="token punctuation">.</span><span class="token function">isIncluded</span><span class="token punctuation">(</span><span class="token class-name">Include</span><span class="token punctuation">.</span>BINDING_ERRORS<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        errorAttributes<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"errors"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> errorAttributes<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>å †æ ˆä¿¡æ¯</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">addStackTrace</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> errorAttributes<span class="token punctuation">,</span> <span class="token class-name">Throwable</span> error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">StringWriter</span> stackTrace <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    error<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span>stackTrace<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    stackTrace<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    errorAttributes<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"trace"</span><span class="token punctuation">,</span> stackTrace<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>å¦‚æœæ˜¯ç›´æ¥è®¿é—® <code>/error</code> è¿™ä¸ªé”™è¯¯é¡µï¼Œé‚£ä¹ˆå®ƒä¾¿ä¼šè¿”å› 999 çŠ¶æ€ç ã€‚å¯¹åº”çš„æºç å¦‚ä¸‹ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">addStatus</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> errorAttributes<span class="token punctuation">,</span> <span class="token class-name">RequestAttributes</span> requestAttributes<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Integer</span> status <span class="token operator">=</span> <span class="token function">getAttribute</span><span class="token punctuation">(</span>requestAttributes<span class="token punctuation">,</span> <span class="token class-name">RequestDispatcher</span><span class="token punctuation">.</span>ERROR_STATUS_CODE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        errorAttributes<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span> <span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 999 çŠ¶æ€ç </span>        errorAttributes<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">,</span> <span class="token string">"None"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    errorAttributes<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        errorAttributes<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getReasonPhrase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// Unable to obtain a reason</span>        errorAttributes<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">,</span> <span class="token string">"Http Status "</span> <span class="token operator">+</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> SpringBoot å¼€å‘å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> Thymeleaf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POST è¯·æ±‚ä¸æ”¯æŒçš„é—®é¢˜</title>
      <link href="/journal/request-method-POST-not-supported-resolved/"/>
      <url>/journal/request-method-POST-not-supported-resolved/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‡ºç°çš„é—®é¢˜"><a href="#å‡ºç°çš„é—®é¢˜" class="headerlink" title="å‡ºç°çš„é—®é¢˜"></a>å‡ºç°çš„é—®é¢˜</h2><p>æ˜¨å¤©ï¼Œåœ¨åˆæ¬¡ä½¿ç”¨ Thymeleaf è¿™ä¸ªæ¨¡ç‰ˆå¼•æ“ï¼Œåšç™»å½•çš„æ—¶å€™ã€‚å¦‚æœç™»å½•æˆåŠŸï¼Œå°±ä¸ä¼šæœ‰ä¸‹é¢è¿™ä¸ªé”™è¯¯ï¼Œå¦‚æœæ˜¯ç™»å½•å¤±è´¥æˆ–è€…å•¥éƒ½æ²¡è¾“å…¥éƒ½ä¼šæŠ¥é”™ã€‚</p><p>æ§åˆ¶å°ç»™å‡ºçš„è­¦å‘Šä¿¡æ¯ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token number">2021</span>-07-08 <span class="token number">19</span>:02:27.692  WARN <span class="token number">13800</span> --- <span class="token punctuation">[</span>p-nio-80-exec-1<span class="token punctuation">]</span> .w.s.m.s.DefaultHandlerExceptionResolver <span class="token builtin class-name">:</span> Resolved <span class="token punctuation">[</span>org.springframework.web.HttpRequestMethodNotSupportedException: Request method <span class="token string">'POST'</span> not supported<span class="token punctuation">]</span></code></pre><p>ç‚¹å‡»ç™»å½•çš„æ—¶å€™ï¼Œå‘é€è¯·æ±‚æ—¶çˆ†å‡ºäº†ä¸€å †ä¿¡æ¯ï¼Œé”™è¯¯ç ä¸º 405 ã€‚</p><p><img src="/journal/request-method-POST-not-supported-resolved/QQ%E6%88%AA%E5%9B%BE20210708190750.png" loading="lazy"></p><p>åˆšå¼€å§‹è‡ªä»¥ä¸ºæ˜¯çš„è®¤ä¸ºæ˜¯ Thymeleaf çš„é—®é¢˜ï¼Œç”šè‡³è¿˜å¤©çœŸçš„è®¤ä¸ºæ˜¯ SpringBoot æ•´åˆçš„ web æ¨¡å—æœ‰ bug ï¼Œè®¤ä¸ºè¿™ä¸ª bug æ˜¯æ²¡æœ‰å¤„ç† POST è¯·æ±‚ã€‚åé¢å‘ç°å…¶å®éƒ½ä¸æ˜¯ï¼Œæ˜¯æˆ‘çš„é—®é¢˜ğŸ˜‚ğŸ˜‚ã€‚ </p><span id="more"></span><h2 id="é€ æˆçš„åŸå› "><a href="#é€ æˆçš„åŸå› " class="headerlink" title="é€ æˆçš„åŸå› "></a>é€ æˆçš„åŸå› </h2><p>ç™»å½•å¤„ç†çš„é€»è¾‘å¦‚ä¸‹ï¼š</p><p>ç”¨æˆ·åœ¨æäº¤è¡¨å•ä¿¡æ¯ä¹‹åï¼Œå°±é€šè¿‡è¿™ä¸ªæ–¹æ³•æ¥å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚å¤„ç†çš„é€»è¾‘å¾ˆç®€å•ï¼Œå¦‚æœç”¨æˆ·åå’Œå¯†ç éƒ½å¯¹å•¦ï¼Œåˆ™è¿›å…¥ä¸»é¡µï¼Œå¦åˆ™å°±è¯·æ±‚è½¬å‘åˆ°ç™»å½•é¡µé¢ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/login_do"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">loginDo</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">,</span> <span class="token class-name">HttpSession</span> session<span class="token punctuation">,</span> <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"xiaohehe"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">"123456"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"redirect:/index.html"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"ç”¨æˆ·åæˆ–å¯†ç ä¸å¯¹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"forward:/login"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ç™»å½•ç•Œé¢çš„è¯·æ±‚å¦‚ä¸‹ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string">"/login"</span><span class="token punctuation">,</span> <span class="token string">"/"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token string">"login"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>æˆ‘çŠ¯äº†ä¸€ä¸ªéå¸¸ä½çº§çš„é”™è¯¯ã€‚å°±æ˜¯è¯·æ±‚è½¬å‘æ—¶ï¼Œè¯·æ±‚çš„ç±»å‹æ²¡æœ‰å¯¹åº”ä¸Šã€‚ç™»å½•éªŒè¯çš„æ—¶å€™å‘ç°ç™»å½•æ“ä½œç”¨çš„æ˜¯ POST è¯·æ±‚ï¼Œè€Œæˆ‘è½¬å‘çš„ç›®æ ‡è¯·æ±‚æ˜¯åªæ¥æ”¶ GET è¯·æ±‚ï¼Œç»“æœå¯¼è‡´è¯·æ±‚ç±»å‹ä¸ä¸€è‡´ï¼Œå¯¼è‡´äº† 405 é”™è¯¯ã€‚è¿™æ‰æ˜¯æœ€æ ¹æœ¬çš„åŸå› ã€‚</p><h2 id="è§£å†³çš„åŠæ³•"><a href="#è§£å†³çš„åŠæ³•" class="headerlink" title="è§£å†³çš„åŠæ³•"></a>è§£å†³çš„åŠæ³•</h2><p>ä½¿ç”¨é‡å®šå‘æ˜¯ä¸€ç§åŠæ³•ã€‚é‡å®šå‘å°±æ˜¯å‘é€äº†ä¸€ä¸ªæ–°çš„è¯·æ±‚ï¼ŒåŸæ¥çš„è¯·æ±‚ç»“æŸäº†ã€‚è™½ç„¶ä¸æŠ¥é”™ï¼Œä½†æ˜¯è¿™æ ·ç¡®æ²¡æœ‰æç¤ºæˆ‘è¯´â€œç”¨æˆ·åæˆ–å¯†ç ä¸å¯¹â€ã€‚æ‰€ä»¥ç™»å½•å¤±è´¥ä¹‹åï¼Œå°±ç›´æ¥å°†è¿™ä¸ªé¡µé¢è¿”å›ç»™æµè§ˆå™¨ç«¯å°±å¥½äº†ã€‚</p><p>æ­£ç¡®çš„å†™æ³•æ˜¯è¿™æ ·çš„</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/login_do"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">loginDo</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">,</span> <span class="token class-name">HttpSession</span> session<span class="token punctuation">,</span> <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"xiaohehe"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">"123456"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"redirect:/index.html"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"ç”¨æˆ·åæˆ–å¯†ç ä¸å¯¹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"login"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>çœ‹æ¥æ˜¯æˆ‘æƒ³å¤ªå¤šï¼Œæƒ³å½“ç„¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹å¸¸è§é—®é¢˜è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> Thymeleaf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yaml çš„ç”¨æ³•å’Œè‡ªå®šä¹‰ç»‘å®šé…ç½®ç±»çš„æç¤º</title>
      <link href="/journal/yaml-properties/"/>
      <url>/journal/yaml-properties/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä»€ä¹ˆæ˜¯-yaml"><a href="#ä»€ä¹ˆæ˜¯-yaml" class="headerlink" title="ä»€ä¹ˆæ˜¯ yaml"></a>ä»€ä¹ˆæ˜¯ yaml</h2><p>YAML æ˜¯ â€œYAML Ainâ€™t Markup Languageâ€ ï¼ˆYAMLä¸æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰çš„é€’å½’ç¼©å†™ã€‚åœ¨å¼€å‘çš„è¿™ç§è¯­è¨€æ—¶ï¼ŒYAMLçš„æ„æ€å…¶å®æ˜¯ â€œYet Another Markup Languageâ€ï¼ˆä»æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰ã€‚</p><h2 id="yaml-åŸºæœ¬è¯­æ³•"><a href="#yaml-åŸºæœ¬è¯­æ³•" class="headerlink" title="yaml åŸºæœ¬è¯­æ³•"></a>yaml åŸºæœ¬è¯­æ³•</h2><ul><li><p>key: value; kv ä¹‹é—´æœ‰ç©ºæ ¼å¤§å°å†™æ•æ„Ÿ</p></li><li><p>ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»</p></li><li><p>ç¼©è¿›ä¸å…è®¸ä½¿ç”¨ tabï¼Œåªå…è®¸ç©ºæ ¼</p></li><li><p>ç¼©è¿›çš„ç©ºæ ¼æ•°ä¸é‡è¦ï¼Œåªè¦ç›¸åŒå±‚çº§çš„å…ƒç´ å·¦å¯¹é½å³å¯</p></li><li><p>â€˜#â€˜ è¡¨ç¤ºæ³¨é‡Š</p></li><li><p>â€ä¸â€ è¡¨ç¤ºå­—ç¬¦ä¸²å†…å®¹ä¼šè¢«è½¬ä¹‰/ä¸è½¬ä¹‰</p></li></ul><span id="more"></span><h2 id="yaml-æ•°æ®ç±»å‹"><a href="#yaml-æ•°æ®ç±»å‹" class="headerlink" title="yaml æ•°æ®ç±»å‹"></a>yaml æ•°æ®ç±»å‹</h2><h3 id="å­—é¢é‡"><a href="#å­—é¢é‡" class="headerlink" title="å­—é¢é‡"></a>å­—é¢é‡</h3><p>å•ä¸ªçš„ï¼Œä¸å¯å†åˆ†çš„å€¼ã€‚dateã€booleanã€stringã€numberã€null ã€‚</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">k</span><span class="token punctuation">:</span> v</code></pre><h3 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h3><p>é”®å€¼å¯¹é›†åˆã€‚mapã€hashã€setã€object</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># è¡Œå†…å†™æ³•</span><span class="token key atrule">k</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span><span class="token key atrule">k1</span><span class="token punctuation">:</span> v1<span class="token punctuation">,</span> <span class="token key atrule">k2</span><span class="token punctuation">:</span> v2<span class="token punctuation">,</span> <span class="token key atrule">k3</span><span class="token punctuation">:</span> v3<span class="token punctuation">&#125;</span><span class="token comment"># æˆ–è€…è¿™æ ·å­</span><span class="token key atrule">k</span><span class="token punctuation">:</span>   <span class="token key atrule">k1</span><span class="token punctuation">:</span> v1  <span class="token key atrule">k2</span><span class="token punctuation">:</span> v2  <span class="token key atrule">k3</span><span class="token punctuation">:</span> v3</code></pre><h3 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h3><p>ä¸€ç»„æŒ‰æ¬¡åºæ’åˆ—çš„å€¼ã€‚arrayã€listã€queue</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># è¡Œå†…å†™æ³•</span><span class="token key atrule">k</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">,</span> v3<span class="token punctuation">]</span><span class="token comment"># æˆ–è€…è¿™æ ·å­</span><span class="token key atrule">k</span><span class="token punctuation">:</span>   <span class="token punctuation">-</span> v1  <span class="token punctuation">-</span> v2  <span class="token punctuation">-</span> v3</code></pre><h2 id="è¯»å–-yaml-çš„é…ç½®æ–‡ä»¶"><a href="#è¯»å–-yaml-çš„é…ç½®æ–‡ä»¶" class="headerlink" title="è¯»å– yaml çš„é…ç½®æ–‡ä»¶"></a>è¯»å– yaml çš„é…ç½®æ–‡ä»¶</h2><p>å’Œä¹‹å‰è¯»å– properties é…ç½®æ–‡ä»¶ä¸€æ ·ï¼Œé€šè¿‡ ConfigurationProperties æ³¨è§£æ¥å°†é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®é¡¹åŠ è½½åˆ°é…ç½®ç±»ä¸­ã€‚</p><h3 id="ä¸¤ä¸ªé…ç½®ç±»"><a href="#ä¸¤ä¸ªé…ç½®ç±»" class="headerlink" title="ä¸¤ä¸ªé…ç½®ç±»"></a>ä¸¤ä¸ªé…ç½®ç±»</h3><p>ä»¥ä¸‹æœ‰ä¸¤ä¸ª java ä»£ç ï¼Œåˆ†åˆ«æ˜¯ç”¨æˆ·ç±»å’Œå® ç‰©ç±»ã€‚è¿™æ˜¯ç”¨æˆ·ç±»</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"person"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Boolean</span> boss<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Date</span> birth<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Pet</span> pet<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> interests<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> animal<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> score<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">></span></span> salarys<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Pet</span><span class="token punctuation">></span><span class="token punctuation">></span></span> allPets<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿™æ˜¯å® ç‰©ç±»</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Pet</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Double</span> weight<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="å¯¹åº”çš„-yaml-å†™æ³•"><a href="#å¯¹åº”çš„-yaml-å†™æ³•" class="headerlink" title="å¯¹åº”çš„ yaml å†™æ³•"></a>å¯¹åº”çš„ yaml å†™æ³•</h3><p>å‚ç…§ä¸Šé¢çš„åŸºæœ¬è¯­æ³•å’Œæ•°æ®ç±»å‹ï¼Œå¤§è‡´å°±èƒ½å¤Ÿå†™å‡ºæ¥å¯¹åº”çš„ yaml é…ç½®ã€‚</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">person</span><span class="token punctuation">:</span>  <span class="token key atrule">userName</span><span class="token punctuation">:</span> å°èµ«èµ«  <span class="token key atrule">boss</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">birth</span><span class="token punctuation">:</span> 2019/01/01  <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">23</span>  <span class="token key atrule">pet</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> æŸ¯åŸº    <span class="token key atrule">weight</span><span class="token punctuation">:</span> <span class="token number">30.12</span>  <span class="token key atrule">interests</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> bilibili    <span class="token punctuation">-</span> acgn    <span class="token punctuation">-</span> running    <span class="token punctuation">-</span> coding  <span class="token key atrule">animal</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> pig    <span class="token punctuation">-</span> cat    <span class="token punctuation">-</span> dog    <span class="token punctuation">-</span> chicken    <span class="token punctuation">-</span> duck  <span class="token key atrule">score</span><span class="token punctuation">:</span>    <span class="token key atrule">java</span><span class="token punctuation">:</span> <span class="token number">100</span>    <span class="token key atrule">webui</span><span class="token punctuation">:</span> <span class="token number">99</span>    <span class="token key atrule">math</span><span class="token punctuation">:</span> <span class="token number">95</span>  <span class="token key atrule">salarys</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token number">1000.0</span>    <span class="token punctuation">-</span> <span class="token number">999.98</span>    <span class="token punctuation">-</span> <span class="token number">999.99</span>  <span class="token key atrule">allPets</span><span class="token punctuation">:</span>    <span class="token key atrule">cat</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat        <span class="token key atrule">weight</span><span class="token punctuation">:</span> <span class="token number">30</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> xixi        <span class="token key atrule">weight</span><span class="token punctuation">:</span> <span class="token number">10</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> heihei        <span class="token key atrule">weight</span><span class="token punctuation">:</span> <span class="token number">20</span>    <span class="token key atrule">dog</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> tomdog        <span class="token key atrule">weight</span><span class="token punctuation">:</span> <span class="token number">30</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> xiaoqiang        <span class="token key atrule">weight</span><span class="token punctuation">:</span> <span class="token number">40</span></code></pre><h3 id="é‡åˆ°çš„ç–‘é—®"><a href="#é‡åˆ°çš„ç–‘é—®" class="headerlink" title="é‡åˆ°çš„ç–‘é—®"></a>é‡åˆ°çš„ç–‘é—®</h3><p>Q1ï¼šä¸ºä»€ä¹ˆ interests ã€animal ã€salarys è¿™ä¸‰ä¸ªå†™æ³•éƒ½æ˜¯ä¸€æ ·çš„å‘¢ï¼Ÿ</p><p>interests å¯¹åº” java é…ç½®ç±»ä¸­çš„å±æ€§ interests ï¼Œå…¶ç±»å‹æ˜¯ String æ•°ç»„ç±»å‹ã€‚è€Œ animal ç±»å‹å¯¹åº”çš„æ˜¯ List é›†åˆç±»å‹ã€‚è¿™ä¸¤è€…å…¶å®æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œå› ä¸º List é›†åˆåº•å±‚å¾ˆæœ‰å¯èƒ½æ˜¯æ•°ç»„ï¼ˆä¹Ÿæœ‰å¯èƒ½æ˜¯ä»¥é“¾è¡¨çš„å½¢å¼ï¼‰ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºæ˜¯æ²¡ä»€ä¹ˆåŒºåˆ«çš„ã€‚</p><p>è€Œ salary å°±æœ‰åŒºåˆ«äº†ï¼Œå®ƒæ˜¯é›†åˆç±»å‹ï¼Œé›†åˆä¸­çš„å…ƒç´ æ˜¯ä¸èƒ½é‡å¤çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æµ‹è¯•æµ‹è¯•ã€‚</p><p>æˆ‘åœ¨ animal ä¸­å†æ·»åŠ ä¸€ä¸ª dog</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">animal</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> pig  <span class="token punctuation">-</span> cat  <span class="token punctuation">-</span> dog  <span class="token punctuation">-</span> chicken  <span class="token punctuation">-</span> duck  <span class="token punctuation">-</span> dog</code></pre><p>æˆ‘åœ¨ salarys ä¸­å†æ·»åŠ ä¸€ä¸ªç›¸åŒçš„è–ªèµ„</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">salarys</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token number">1000.0</span>  <span class="token punctuation">-</span> <span class="token number">999.98</span>  <span class="token punctuation">-</span> <span class="token number">999.99</span>  <span class="token punctuation">-</span> <span class="token number">999.99</span></code></pre><p>å¾—åˆ°çš„ç»“æœå¦‚ä¸‹ã€‚å¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶å†™æ³•ä¸€æ ·ï¼Œä½†æ˜¯å±•ç¤ºçš„æ•ˆæœè¿˜æ˜¯å–å†³äºé…ç½®ç±»ä¸­çš„æ•°æ®ç±»å‹æ˜¯æ€æ ·çš„ã€‚</p><p><img src="/journal/yaml-properties/image-20210706115100847.png" alt="image-20210706115100847" loading="lazy"></p><p>æ¯”å¦‚ Map é›†åˆæ˜¯ç”¨ kv æ¥è¡¨ç¤ºçš„ï¼Œå…¶å®å®ä½“ç±»ä¹Ÿæ˜¯å¯ä»¥ç”¨ kv æ¥è¡¨ç¤ºçš„ã€‚</p><p>Q2ï¼šä¸ºä»€ä¹ˆç”¨ 2019-01-01 ä¼šè½¬æ¢å¼‚å¸¸ï¼Ÿ</p><p>åœ¨æˆ‘æµ‹è¯•çš„æ—¶å€™ï¼Œéœ€è¦åœ¨å®ä½“ç±»ä¸Šé…ç½® @DateTimeFormat æ³¨è§£ï¼Œè¦æˆ‘ä»¬è‡ªå·±æ¥å°†æ—¥æœŸæ¥æ ¼å¼åŒ–ã€‚å®ƒé»˜è®¤çš„æ ¼å¼ä¸º <code>yyyy/MM/dd HH:mm:ss</code> ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@DateTimeFormat</span><span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span><span class="token keyword">private</span> <span class="token class-name">Date</span> birth<span class="token punctuation">;</span></code></pre><p>Q3ï¼šæˆ‘å¬è¯´ yaml ä¸­çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œå­—ç¬¦ä¸²ä¸¤ç«¯å¯ä»¥ä¸åŠ å•å¼•å·æˆ–è€…åŒå¼•å·ï¼Œä¹Ÿå¯ä»¥åŠ ï¼Œé‚£æˆ‘è§‰å¾—æ²¡å•¥åŒºåˆ«å‘€ã€‚æ˜¯ä¸æ˜¯æ²¡ä»€ä¹ˆç”¨å‘€ï¼Ÿ</p><p>æˆ‘è§‰å¾—æœ‰ç”¨ï¼Œè€Œä¸”æ˜¯éå¸¸æœ‰ç”¨ã€‚å•å¼•å·å’ŒåŒå¼•å·çš„åŒºåˆ«å¯ä»¥å†³å®šå°†è½¬ä¹‰å­—ç¬¦å°†å…¶è½¬ä¹‰ï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸€ä¸‹ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ª yaml çš„é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬å°†å­—ç¬¦ä¸²å°†å…¶ç”¨å•å¼•å·åŒ…è£¹èµ·æ¥ä¼šæ˜¯æ€ä¹ˆæ ·çš„ã€‚</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">person</span><span class="token punctuation">:</span>  <span class="token key atrule">userName</span><span class="token punctuation">:</span> <span class="token string">'å°èµ«èµ«\nå¤§æ½®å§'</span></code></pre><p>åœ¨æ§åˆ¶å°è¾“å‡ºçš„è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå¯çŸ¥ï¼Œä½¿ç”¨å•å¼•å·ä¹‹åï¼Œå­—ç¬¦ä¸²è½¬ä¹‰å­—ç¬¦çš„è½¬ä¹‰åŠŸèƒ½å¤±æ•ˆäº†ï¼Œç›´æ¥å°† <code>\n</code> å½“æˆå­—ç¬¦ä¸²æ‰“å°äº†ã€‚</p><pre class="language-none"><code class="language-none">å°èµ«èµ«\nå¤§æ½®å§</code></pre><p>å¦‚æœæˆ‘å°†å•å¼•å·æ¢æˆåŒå¼•å·ï¼Œé‚£ä¹ˆå®ƒå°†å‡ºç°ä»€ä¹ˆæ ·çš„æƒ…å†µå‘¢ï¼Ÿ</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">person</span><span class="token punctuation">:</span>  <span class="token key atrule">userName</span><span class="token punctuation">:</span> <span class="token string">"å°èµ«èµ«\nå¤§æ½®å§"</span></code></pre><p>åœ¨æ§åˆ¶å°è¾“å‡ºçš„è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå¯çŸ¥ï¼Œä½¿ç”¨åŒå¼•å·ä¹‹åï¼Œå­—ç¬¦ä¸²çš„è½¬ä¹‰å­—ç¬¦çš„åŠŸèƒ½æ˜¯æ­£å¸¸çš„äº†ï¼Œæ‰€ä»¥å°±æ¢è¡Œäº†ã€‚</p><pre class="language-none"><code class="language-none">å°èµ«èµ«å¤§æ½®å§</code></pre><p>é‚£æˆ‘ä¸åŠ å‘¢ï¼Ÿä¸åŠ å°±å’Œä½¿ç”¨å•å¼•å·ä¸€æ ·ã€‚</p><h2 id="è‡ªå®šä¹‰é…ç½®ç±»çš„æç¤º"><a href="#è‡ªå®šä¹‰é…ç½®ç±»çš„æç¤º" class="headerlink" title="è‡ªå®šä¹‰é…ç½®ç±»çš„æç¤º"></a>è‡ªå®šä¹‰é…ç½®ç±»çš„æç¤º</h2><p>å¦‚æœè¦è®©æˆ‘ä»¬çš„è‡ªå®šä¹‰çš„é…ç½®ç±»ç”Ÿæ•ˆï¼Œé‚£ä¹ˆéå¸¸ç®€å•ï¼Œåªéœ€è¦å¼•å…¥ä¸‹é¢çš„ä¾èµ–å°±å¥½äº†ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-configuration-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>ç„¶åï¼Œå°†é¡¹ç›®è¿›è¡Œé‡æ–°è¿è¡Œä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œæœ‰æˆ‘ä»¬è‡ªå®šä¹‰çš„é…ç½®ç±»çš„æç¤ºã€‚ä½†æ˜¯è¯·çœ‹ <code>person.user-name</code> è¿™ä¸ªå±æ€§ï¼Œä¹‹å‰æˆ‘ä»¬å†™çš„æ—¶å€™æ˜¯ <code>person.userName</code> æ˜¯è¿™æ ·çš„ã€‚å…¶å®æç¤ºä¸Šçš„å†™æ³•ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚å› ä¸º yaml ä¼šå°†å¤§å†™çš„å­—å­—æ¯ç»™å˜æˆä¸º <code>-å°å†™å­—æ¯</code> çš„å½¢å¼ã€‚</p><p><img src="/journal/yaml-properties/QQ%E6%88%AA%E5%9B%BE20210706150613.jpg" loading="lazy"></p><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿™ä¸ªé…ç½®ç±»çš„æç¤ºçš„ä¾èµ–ï¼Œä¼¼ä¹åœ¨è¿è¡Œçš„æ—¶å€™èµ·ä¸åˆ°ä»»ä½•æ‰€ç”¨ï¼Œåªåœ¨å¼€å‘çš„ä½¿ç”¨æ‰æœ‰ç”¨ã€‚æ‰€ä»¥å¯ä»¥è¿™æ ·å°†è¿™ä¸ªä¾èµ–åœ¨æ‰“åŒ…æ—¶æ’é™¤ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>maven-compiler-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.8.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>excludes</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>sprng-boot-configuration- processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>excludes</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>source</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoding</span><span class="token punctuation">></span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoding</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span></code></pre><p>å½“ç„¶ï¼Œä¸æ’é™¤ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚åªä¸è¿‡ä¼šå ç”¨å‡ ç™¾ k çš„ç©ºé—´å¤§å°è€Œå·²ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> SpringBoot å¼€å‘å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> yaml </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android ç½‘ç»œè¯·æ±‚é—®é¢˜</title>
      <link href="/journal/Android-network-problem/"/>
      <url>/journal/Android-network-problem/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>åœ¨ä½¿ç”¨ OkHttp çš„å°è£…å·¥å…·ç±» OkHttpUtils å‘ Tomcat å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œå‡ºç°äº†ä¸€ä¸ªé”™è¯¯ã€‚é”™è¯¯æè¿°å¦‚ä¸‹ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">CLEARTEXT communication not supported: <span class="token punctuation">[</span>ConnectionSpec<span class="token punctuation">(</span>cipherSuites<span class="token operator">=</span><span class="token punctuation">[</span>TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">]</span></code></pre><p>é€ æˆçš„åŸå› æ˜¯å› ä¸ºä» Android Pï¼ˆ9.xï¼‰ä¹‹åçš„ç‰ˆæœ¬ä¸èƒ½å¤Ÿå†è¿›è¡Œæ˜æ–‡çš„ä¼ è¾“æ•°æ®ã€‚http å°±æ˜¯ä¸€ç§æ˜æ–‡ä¼ è¾“çš„åè®®ï¼Œéœ€è¦å¯¹è¯·æ±‚è¿›è¡ŒåŠ å¯†ï¼Œæ¯”å¦‚ä½¿ç”¨ https è¿™ç§åè®®ã€‚è¯´ç™½äº†ä¸ºäº†å®‰å…¨èµ·è§</p><p>è€Œæˆ‘åœ¨å‘é€è¯·æ±‚çš„æ—¶å€™æ­£å¥½ä¹Ÿæ˜¯æ˜æ–‡ä¼ è¾“çš„ã€‚</p><span id="more"></span><h2 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h2><h3 id="ä¿®æ”¹é¡¹ç›®çš„é…ç½®"><a href="#ä¿®æ”¹é¡¹ç›®çš„é…ç½®" class="headerlink" title="ä¿®æ”¹é¡¹ç›®çš„é…ç½®"></a>ä¿®æ”¹é¡¹ç›®çš„é…ç½®</h3><p>æ–°å»ºä¸€ä¸ª xml æ–‡ä»¶ï¼Œåœ¨ resources æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªåå­—ä¸º xml çš„æ–‡ä»¶å¤¹ ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶åä¸º network_security_config.xml å†…å®¹å¦‚ä¸‹ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>network-security-config</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base-config</span> <span class="token attr-name">cleartextTrafficPermitted</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>network-security-config</span><span class="token punctuation">></span></span></code></pre><p>ç„¶åå† AndroidManifest.xml æ–‡ä»¶ä¸­ï¼Œåœ¨ application æ ‡ç­¾å¯¹ä¸­æ·»åŠ  android:networkSecurityConfig å’Œ android:usesCleartextTraffic ï¼Œå‚ç…§ä¸‹é¢çš„æ–¹å¼è¿›è¡Œé…ç½®ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>application</span>        <span class="token attr-name"><span class="token namespace">android:</span>allowBackup</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@mipmap/ic_launcher<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@string/app_name<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>roundIcon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@mipmap/ic_launcher_round<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>networkSecurityConfig</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@xml/network_security_config<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>usesCleartextTraffic</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>supportsRtl</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@style/Theme.CarRent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- çœç•¥çš„å†…å®¹ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>application</span><span class="token punctuation">></span></span></code></pre><p>æœ€åé‡æ–°ç¼–è¯‘ï¼ˆBuildï¼‰ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ï¼Œå°±å¯ä»¥äº†ã€‚</p><h3 id="è®¾ç½®å®‰å…¨é“¾æ¥"><a href="#è®¾ç½®å®‰å…¨é“¾æ¥" class="headerlink" title="è®¾ç½®å®‰å…¨é“¾æ¥"></a>è®¾ç½®å®‰å…¨é“¾æ¥</h3><p>ä¹Ÿå°±æ˜¯å°† Tomcat è®¾ç½®æˆ https çš„åè®®ã€‚è¿™ä¸ªè¦æ˜¯åœ¨æœ¬åœ°å¼€å‘çš„è¯æˆ‘è§‰å¾—å€’æ˜¯æ²¡å¿…è¦ï¼Œç”šè‡³ä¸ºäº†ä¸€ä¸ª https å»å¼„è¿˜éº»çƒ¦å¾ˆå¤šã€‚</p><p>å¦‚æœæ˜¯ Tomcat éœ€è¦éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œåˆ™ä¸ºäº†æ•°æ®ä¼ è¾“å®‰å…¨ï¼Œè¯·ä½¿ç”¨ https è¿™ç§å®‰å…¨åŠ å¯†çš„åè®®ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹å¸¸è§é—®é¢˜è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot ä¹‹ web åœºæ™¯</title>
      <link href="/journal/springboot-web-study/"/>
      <url>/journal/springboot-web-study/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>SpringBoot çš„ web åœºæ™¯ï¼Œå…¶å®å°±æ˜¯ Spring MVCï¼Œä½¿ç”¨æ–¹å¼å’Œ Spring MVC çš„ç”¨æ³•æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚ä½†æ˜¯è¢«æ•´åˆåˆ° SpringBoot ä¸­ï¼Œæœ‰äº›æ–°çš„ç”¨æ³•è¿˜æ˜¯éœ€è¦å»å­¦ä¹ å­¦ä¹ çš„ã€‚</p><h2 id="è·¯å¾„è®¿é—®"><a href="#è·¯å¾„è®¿é—®" class="headerlink" title="è·¯å¾„è®¿é—®"></a>è·¯å¾„è®¿é—®</h2><p>åœ¨å­¦ä¹ äº† SpringBoot ä¸­çš„é™æ€èµ„æºè®¿é—®ã€‚å…¶ä¸­ï¼Œé»˜è®¤å°±ç»™äº†æˆ‘ä»¬ 4 ä¸ªè®¾ç½®é™æ€èµ„æºçš„ç›®å½•ï¼Œä»–ä»¬åˆ†åˆ«æ˜¯ <code>static</code>ã€<code>public</code>ã€<code>resources</code>ã€<code>META-INF/resources</code>ã€‚ä¸è¿‡ï¼Œåœ¨ä½¿ç”¨ Spring Initializer æ¥æ„å»ºæˆ‘ä»¬çš„ Spring Boot é¡¹ç›®æ—¶ï¼Œé»˜è®¤å°±æœ‰ä¸€ä¸ª static ç›®å½•ç”¨æˆ·æ”¾ç½®é™æ€èµ„æºæ–‡ä»¶å¤¹ã€‚</p><span id="more"></span><blockquote><p>ä»€ä¹ˆæ—¶é™æ€èµ„æºï¼Œæ‰€è°“çš„é™æ€èµ„æºå°±æ˜¯å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ã€css æ–‡ä»¶ã€js æ–‡ä»¶ç­‰ç­‰ã€‚</p></blockquote><p>å½“æˆ‘ä»¬åœ¨è¿™ 4 ä¸ªæ–‡ä»¶ä¸­æ”¾ç½®å››å¼ ä¸åŒçš„å›¾ç‰‡ã€‚è®¿é—®è¿™äº›å›¾ç‰‡çœ‹çœ‹èƒ½ä¸èƒ½è®¿é—®å¾—åˆ°ã€‚</p><p><img src="/journal/springboot-web-study/QQ%E6%88%AA%E5%9B%BE20210629200856.png" loading="lazy"></p><blockquote><p>åœ¨è®¿é—®è·¯å¾„çš„æ—¶å€™ï¼Œä»¥ä¸‹ 4 è®¿é—®è·¯å¾„çš„æ–¹å¼æ˜¯é”™è¯¯çš„ï¼š</p><p><a href="http://localhost:8080/static/FIL767.png">http://localhost:8080/static/FIL767.png</a></p><p><a href="http://localhost:8080/public/FIL767.png">http://localhost:8080/public/FIL767.png</a></p><p><a href="http://localhost:8080/resources/FIL767.png">http://localhost:8080/resources/FIL767.png</a></p><p><a href="http://localhost:8080/META-INF/resources/FIL767.png">http://localhost:8080/META-INF/resources/FIL767.png</a></p><p>æ­£ç¡®çš„è®¿é—®æ–¹å¼ï¼š<a href="http://localhost:8080/FIL767.png">http://localhost:8080/FIL767.png</a></p><p>ä¸ºä»€ä¹ˆä¸è¦è®¿é—®å‰ç¼€å°±å¯è®¿é—®ï¼Ÿè¿™ä¸ªé—®é¢˜ï¼Œåé¢ä¼šæœ‰æåˆ°ã€‚</p></blockquote><p>è®¿é—®å›¾ç‰‡ FIL767.png</p><p><img src="/journal/springboot-web-study/QQ%E6%88%AA%E5%9B%BE20210629201020.png" loading="lazy"></p><p>è®¿é—®å›¾ç‰‡ FIL770.png</p><p><img src="/journal/springboot-web-study/QQ%E6%88%AA%E5%9B%BE20210629201113.png" loading="lazy"></p><p>è®¿é—®å›¾ç‰‡ FIL2893.png</p><p><img src="/journal/springboot-web-study/QQ%E6%88%AA%E5%9B%BE20210629201227.png" loading="lazy"></p><p>è®¿é—®å›¾ç‰‡ FIL2893.png</p><p><img src="/journal/springboot-web-study/QQ%E6%88%AA%E5%9B%BE20210629202137.png" loading="lazy"></p><p>è¿™å››å¼ å›¾ç‰‡éƒ½å¯ä»¥æ­£å¸¸è®¿é—®çš„åˆ°ã€‚</p><h3 id="è·¯å¾„è®¿é—®çš„å…ˆåé—®é¢˜"><a href="#è·¯å¾„è®¿é—®çš„å…ˆåé—®é¢˜" class="headerlink" title="è·¯å¾„è®¿é—®çš„å…ˆåé—®é¢˜"></a>è·¯å¾„è®¿é—®çš„å…ˆåé—®é¢˜</h3><p>å¦‚æœæˆ‘åœ¨ Controller ä¸­å†™ä¸€ä¸ªå’Œç¬¬ä¸€å¼ å›¾ç‰‡ï¼ˆFIL767.pngï¼‰ä¸€æ¨¡ä¸€æ ·çš„è·¯å¾„ï¼Œé‚£ä¹ˆå®ƒåˆè¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿæ˜¯ç›´æ¥æŠ¥é”™ï¼Œè¿˜æ˜¯ç›´æ¥è®¿é—®é™æ€èµ„æºæ–‡ä»¶æˆ–è€…æ˜¯ Controller ä¸­çš„è·¯å¾„ï¼Ÿ</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/FIL767.png"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"è¿™ä¸æ˜¯å›¾ç‰‡ï¼Œä½ è¢«éª—äº†ï¼"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è®¿é—®ä¹‹åï¼Œæ•ˆæœå¦‚ä¸‹ã€‚å‘ç°è®¿é—®çš„ä¸æ˜¯å›¾ç‰‡ï¼Œè€Œæ˜¯ä¸€ä¸ªé¡µé¢ã€‚</p><p><img src="/journal/springboot-web-study/QQ%E6%88%AA%E5%9B%BE20210629203228.png" loading="lazy"></p><p>ç”±æ­¤å¾—çŸ¥ï¼Œå½“ web æ¨¡å—ä¸­å‡ºç°ä¸¤ä¸ªåŒä¸€ä¸ªç›®å½•çš„æ—¶å€™ï¼Œå®ƒä¼šå…ˆå»å¯»æ‰¾ Controller ä¸­çš„æœ‰æ²¡æœ‰è¿™ä¸ªè·¯å¾„ã€‚å¦‚æœæœ‰è¿™ä¸ªè·¯å¾„ï¼Œweb æ¨¡å—æ”¶åˆ°å¹¶ä¸”è¿”å›ç»™ç”¨æˆ·çš„æµè§ˆå™¨ç«¯ï¼Œå¦‚æœ Controller ä¸­æ²¡æœ‰è¿™ä¸ªè·¯å¾„ï¼Œé‚£ä¹ˆä¾¿ä¼šå»é™æ€èµ„æºç®¡ç†å™¨ä¸­å¯»æ‰¾é™æ€èµ„æºä¸­æœ‰æ²¡æœ‰è¿™ä¸ªè·¯å¾„ã€‚å¦‚æœæœ‰ï¼Œå°†é™æ€èµ„æºä¸­çš„å†…å®¹è¿”å›åˆ°æµè§ˆå™¨ç•Œé¢ã€‚å¦‚æœé™æ€èµ„æºæ‰¾ä¸åˆ°ï¼Œé‚£ä¹ˆå°±è¿”å›ä¸€ä¸ª 404 é”™è¯¯é¡µé¢ã€‚æç¤ºèµ„æºä¸å­˜åœ¨ã€‚</p><h3 id="ä¿®æ”¹é™æ€èµ„æºè®¿é—®è·¯å¾„"><a href="#ä¿®æ”¹é™æ€èµ„æºè®¿é—®è·¯å¾„" class="headerlink" title="ä¿®æ”¹é™æ€èµ„æºè®¿é—®è·¯å¾„"></a>ä¿®æ”¹é™æ€èµ„æºè®¿é—®è·¯å¾„</h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥æ¢è®¨ã€‚ä¸ºä»€ä¹ˆè¿™ 4 ç§è®¿é—®æ–¹å¼æ˜¯æœ‰é—®é¢˜çš„ï¼Ÿ</p><blockquote><p><a href="http://localhost:8080/static/FIL767.png">http://localhost:8080/static/FIL767.png</a></p><p><a href="http://localhost:8080/public/FIL767.png">http://localhost:8080/public/FIL767.png</a></p><p><a href="http://localhost:8080/resources/FIL767.png">http://localhost:8080/resources/FIL767.png</a></p><p><a href="http://localhost:8080/META-INF/resources/FIL767.png">http://localhost:8080/META-INF/resources/FIL767.png</a></p></blockquote><p>å…¶å®åœ¨ SpringBoot ä¸­ï¼Œæœ‰ä¸€ä¸ªé…ç½®å‚æ•°ï¼Œå«åš <code>spring.mvc.static-path-pattern</code> ï¼Œå®ƒæ˜¯ç”¨äºè®¾ç½®é™æ€èµ„æºè®¿é—®è·¯å¾„çš„è®¿é—®å‰ç¼€ã€‚é»˜è®¤æ˜¯æ²¡æœ‰è®¿é—®å‰ç¼€ï¼Œå³è®¿é—®é™æ€èµ„æºæ–‡ä»¶æ—¶ï¼Œè®¿é—®çš„æ–¹å¼æ˜¯ç›´æ¥ä»æ ¹ç›®å½•ä¸‹è®¿é—®çš„ï¼Œä¸Šé¢çš„è®¿é—®ä¾‹å­å°±æ˜¯è¿™æ ·çš„ã€‚</p><p>æˆ‘ä»¬å°† <code>spring.mvc.static-path-pattern</code> çš„å€¼ä¸º <code>/res/**</code> ï¼Œå°†å…¶é…ç½®æˆä»¥ä¸‹æ–¹å¼ã€‚</p><pre class="language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">spring.mvc.static-path-pattern</span><span class="token punctuation">=</span><span class="token attr-value">/res/**</span></code></pre><p>å…¶ä¸­ <code>/*</code> çš„æ„æ€æ˜¯è®¿é—®å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰é™æ€èµ„æºæ–‡ä»¶ï¼Œä¸åŒ…å«å­æ–‡ä»¶å¤¹ã€‚<code>/**</code> é™¤äº†è®¿é—®å½“å‰é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œè¿˜ä¼šè®¿é—®å­æ–‡ä»¶å¤¹ï¼Œå­™æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„é™æ€èµ„æºæ–‡ä»¶ã€‚</p><p>ä¿®æ”¹å®Œæˆä¹‹åï¼Œæ­¤æ—¶è®¿é—®çš„æ—¶å€™è·¯å¾„å°±æ˜¯è¿™æ ·å­çš„ <a href="http://localhost:8080/res/demo.png">http://localhost:8080/res/demo.png</a> ã€‚æ¯”å¦‚æˆ‘ä»¬è®¿é—® FIL767.pngï¼Œå³è®¿é—®è·¯å¾„ä¸º <a href="http://localhost:8080/res/FIL767.png">http://localhost:8080/res/FIL767.png</a> ã€‚</p><p><img src="/journal/springboot-web-study/QQ%E6%88%AA%E5%9B%BE20210704154622.png" alt="QQæˆªå›¾20210704154622.png" loading="lazy"></p><p>çœ‹ï¼Œä¿®æ”¹æ–‡ä»¶å¤¹ä¹‹åå°±å¯ä»¥ä½¿ç”¨ res å‰ç¼€å»è®¿é—®é™æ€èµ„æºæ–‡ä»¶ã€‚</p><h4 id="è¿™æ ·åšçš„ç›®çš„"><a href="#è¿™æ ·åšçš„ç›®çš„" class="headerlink" title="è¿™æ ·åšçš„ç›®çš„"></a>è¿™æ ·åšçš„ç›®çš„</h4><p>æˆ‘è§‰çš„è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†å°†é™æ€èµ„æºå’Œå…¶å®ƒçš„è¯·æ±‚è¿›è¡ŒåŒºåˆ†å¼€æ¥ï¼Œè¿˜æœ‰å°±æ˜¯ Spring MVC æœ‰ä¸€ä¸ªæ‹¦æˆªå™¨å˜›ï¼Œåœ¨é…ç½®æ‹¦æˆªå™¨çš„æ—¶å€™ï¼Œä¸å»æ‹¦æˆªé™æ€èµ„æºçš„è®¿é—®è·¯å¾„å³å¯ã€‚</p><h3 id="ä¿®æ”¹é™æ€èµ„æºæ–‡ä»¶å¤¹"><a href="#ä¿®æ”¹é™æ€èµ„æºæ–‡ä»¶å¤¹" class="headerlink" title="ä¿®æ”¹é™æ€èµ„æºæ–‡ä»¶å¤¹"></a>ä¿®æ”¹é™æ€èµ„æºæ–‡ä»¶å¤¹</h3><p>åœ¨æœ€å…ˆï¼Œæˆ‘ä»¬æåˆ° SpringBoot é›†æˆçš„ Spring MVC æ˜¯é»˜è®¤æœ‰ 4 ä¸ªé™æ€èµ„æºæ–‡ä»¶å¤¹ã€‚åŒæ—¶ï¼Œåœ¨æºç ä¸­æˆ‘ä»¬ä¹Ÿèƒ½å¤Ÿå‘ç°ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResourceProperties</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> CLASSPATH_RESOURCE_LOCATIONS <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token string">"classpath:/META-INF/resources/"</span><span class="token punctuation">,</span> <span class="token string">"classpath:/resources/"</span><span class="token punctuation">,</span> <span class="token string">"classpath:/static/"</span><span class="token punctuation">,</span> <span class="token string">"classpath:/public/"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// å…¶ä»–éƒ¨åˆ†è¢«çœç•¥</span><span class="token punctuation">&#125;</span></code></pre><p>è¦ä¿®æ”¹é™æ€èµ„æºæ–‡ä»¶å¤¹ï¼Œé‚£ä¹ˆéœ€è¦æ·»åŠ è¿™ä¸ªé…ç½®é¡¹ <code>spring.resources.static-locations</code> ï¼Œä¹Ÿå°±æ˜¯ç”¨å®ƒæ¥é…ç½®é™æ€èµ„æºæ–‡ä»¶å¤¹é¡¹ã€‚</p><h4 id="å±é™©çš„éªšæ“ä½œ"><a href="#å±é™©çš„éªšæ“ä½œ" class="headerlink" title="å±é™©çš„éªšæ“ä½œ"></a>å±é™©çš„éªšæ“ä½œ</h4><p>è¿™ä¸€é¡¹å¯ä»¥é…ç½®å¤šä¸ªï¼Œæ¯”å¦‚æˆ‘ä»¬é…ç½®æˆä¸ºå½“å‰ç±»è·¯å¾„ä¸‹ï¼Œçœ‹çœ‹èƒ½å¦å°† application.properties é…ç½®æ–‡ä»¶ç»™ä¸‹è½½ä¸‹æ¥ã€‚</p><pre class="language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">spring.resources.static-locations</span><span class="token punctuation">=</span><span class="token attr-value">classpath:/</span></code></pre><p>æç¤ºè¦ä¸‹è½½ï¼Œçœ‹æ¥æ˜¯é…ç½®ç”Ÿæ•ˆäº†ã€‚</p><p><img src="/journal/springboot-web-study/QQ%E6%88%AA%E5%9B%BE20210704160527.png" alt="QQæˆªå›¾20210704160527.png" loading="lazy"></p><p>æ‰“å¼€ä¹‹åå¯ä»¥æŸ¥çœ‹åˆ° springboot çš„é…ç½®æ–‡ä»¶</p><p><img src="/journal/springboot-web-study/QQ%E6%88%AA%E5%9B%BE20210704160637.png" alt="QQæˆªå›¾20210704160637.png" loading="lazy"></p><p>é…ç½®æˆä¸ºç±»è·¯å¾„çš„æ ¹ç›®å½•è¿™æ˜¯ä¸€ä¸ªéå¸¸å±é™©çš„é…ç½®æ“ä½œï¼Œå› ä¸ºè¿™æ ·ä¼šéå¸¸å®¹æ˜“å°†é…ç½®æ–‡ä»¶å’Œç¼–è¯‘åçš„ class æ–‡ä»¶æš´éœ²åˆ° web ç¯å¢ƒä¸­ï¼Œè¿™æ ·æœ‰äº›åäºº<del>ï¼ˆæˆ‘ä¸æ˜¯åäººï¼‰</del>å°† class æ–‡ä»¶åç¼–è¯‘æˆ java æ–‡ä»¶ã€‚æœ€åå°†æºä»£ç é€ æˆæ³„æ¼å¯¼è‡´å¾—ä¸å¿å¤±ã€‚</p><p>éå¸¸ä¸å»ºè®®é…ç½®æˆ <code>classpath:/</code> ï¼Œ<del>å½“ç„¶ï¼Œé™¤éä½ å¾ˆå‹‡ã€‚</del></p><h4 id="ç¨³å¦¥çš„é…ç½®æ–¹å¼"><a href="#ç¨³å¦¥çš„é…ç½®æ–¹å¼" class="headerlink" title="ç¨³å¦¥çš„é…ç½®æ–¹å¼"></a>ç¨³å¦¥çš„é…ç½®æ–¹å¼</h4><p>æ¯”å¦‚æˆ‘ä»¬å°†é…ç½®æ–‡ä»¶é…ç½®åˆ°å½“å‰ç±»è·¯å¾„ä¸‹çš„ xiaohehe æ–‡ä»¶å¤¹ä¸‹ï¼Œé‚£ä¹ˆé…ç½®çš„æ–¹å¼å¦‚ä¸‹ã€‚</p><pre class="language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">spring.resources.static-locations</span><span class="token punctuation">=</span><span class="token attr-value">classpath:/xiaohehe/</span></code></pre><p>æ­¤æ—¶é…ç½®å®Œæˆï¼Œå…¶å®ƒçš„é™æ€èµ„æºæ–‡ä»¶å¤¹å°±æ— æ•ˆäº†ã€‚å› ä¸ºå®ƒåªè®¤ xiaohehe è¿™ä¸ªæ–‡ä»¶å¤¹ä½œä¸ºé™æ€èµ„æºï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥æµ‹è¯•æµ‹è¯•ã€‚</p><p>å°†è¿™ä¸¤å¼ å›¾ç‰‡æ”¾ç½®åˆ° xiaohehe è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ã€‚</p><p><img src="/journal/springboot-web-study/QQ%E6%88%AA%E5%9B%BE20210704163148.png" loading="lazy"></p><p>è®¿é—® FIL770.png</p><p><img src="/journal/springboot-web-study/QQ%E6%88%AA%E5%9B%BE20210704163451.png" loading="lazy"></p><p>è®¿é—® FIL2893.png</p><p><img src="/journal/springboot-web-study/QQ%E6%88%AA%E5%9B%BE20210704163522.png" loading="lazy"></p><p>å¦‚æœæˆ‘ä»¬è®¿é—® FIL2895.png é‚£ä¹ˆè‚¯å®šæ‰¾ä¸åˆ°ï¼Œå› ä¸ºå®ƒåªæ‰¾ xiaohehe è¿™ä¸ªé™æ€èµ„æºæ–‡ä»¶å¤¹ã€‚</p><p><img src="/journal/springboot-web-study/QQ%E6%88%AA%E5%9B%BE20210704163714.png" loading="lazy"></p><h4 id="å¤šä¸ªé™æ€æ–‡ä»¶å¤¹çš„ç›®çš„"><a href="#å¤šä¸ªé™æ€æ–‡ä»¶å¤¹çš„ç›®çš„" class="headerlink" title="å¤šä¸ªé™æ€æ–‡ä»¶å¤¹çš„ç›®çš„"></a>å¤šä¸ªé™æ€æ–‡ä»¶å¤¹çš„ç›®çš„</h4><p>æˆ‘æƒ³è¿™æ˜¯å› ä¸ºå¤šäººåä½œçš„æ—¶å€™å§ï¼Œè¿™æ ·å„æ”¾å„çš„æ–‡ä»¶å¤¹ï¼Œä¸ä¼šè¿‡åˆ†çš„ç¹çå§ã€‚</p><h2 id="favicon-å›¾æ ‡"><a href="#favicon-å›¾æ ‡" class="headerlink" title="favicon å›¾æ ‡"></a>favicon å›¾æ ‡</h2><p>favicon æ˜¯æ¯ä¸ªæµè§ˆå™¨çš„ä¸­çš„é€‰é¡¹å¡ï¼ˆæ ‡ç­¾ï¼‰éƒ½ä¼šæ˜¾ç¤ºä¸€å¼ å°å›¾æ ‡ã€‚è¿™ä¸ªå°å›¾æ ‡å°±æ˜¯ favicon ã€‚åœ¨ SpringBoot ä¸­ï¼Œåªè¦å°† favicon.ico æ”¾ç½®åˆ°é™æ€èµ„æºç›®å½•ä¸‹å°±ä¼šè‡ªåŠ¨æ˜¾ç¤ºäº†ã€‚</p><p>ä¸è¿‡æˆ‘åœ¨æµ‹è¯•çš„è¿‡ç¨‹ä¸­ï¼Œç”±äºé™æ€èµ„æºçš„è·¯å¾„æ˜¯æœ‰è®¿é—®å‰ç¼€çš„ï¼Œæ‰€ä»¥å¯¼è‡´æ”¾å…¥äº† favicon.ico è¿˜æ˜¯å‡ºä¸æ¥ã€‚å°† <code>spring.mvc.static-path-pattern</code> è¿™ä¸ªé™æ€èµ„æºé…ç½®é¡¹ç»™æ³¨é‡Šæ‰å³å¯ã€‚è¿˜æœ‰ä¸€ç§æƒ…å†µå°±æ˜¯ favicon.ico æ­»æ´»éƒ½æ˜¾ç¤ºä¸å‡ºæ¥ï¼Œæˆ‘æƒ³è¯´çš„æ˜¯ï¼Œæ²¡å¿…è¦å¤ªçº ç»“è¿™ä¸ªï¼Œå› ä¸ºè¿™ä¸ªä¸æ˜¯å¾ˆé‡è¦ã€‚</p><p>è®¿é—®ä¸€ä¸‹è¯•è¯•çœ‹ã€‚å·¦ä¸Šè§’æœ‰ä¸ªå°å›¾æ ‡å·²ç»å‡ºç°äº†ã€‚</p><p><img src="/journal/springboot-web-study/QQ%E6%88%AA%E5%9B%BE20210704170731.png" loading="lazy"></p><h2 id="å…¶å®ƒæœªä½¿ç”¨è¿‡çš„æ³¨è§£"><a href="#å…¶å®ƒæœªä½¿ç”¨è¿‡çš„æ³¨è§£" class="headerlink" title="å…¶å®ƒæœªä½¿ç”¨è¿‡çš„æ³¨è§£"></a>å…¶å®ƒæœªä½¿ç”¨è¿‡çš„æ³¨è§£</h2><p>ä»¥å‰æˆ‘åœ¨ä½¿ç”¨ Spring MVC å¼€å‘ web ç¨‹åºï¼Œæˆ‘ç”¨çš„æœ€é¢‘ç¹çš„ mvc æ³¨è§£æœ‰è¿™ä¹ˆ 5 ä¸ªã€‚</p><ul><li><p>@RequestMapping</p></li><li><p>@ResponseBody</p></li><li><p>@RequestParam</p><ul><li>è·å–è¯·æ±‚å‚æ•°</li><li>åŒæ ·ä¹Ÿå¯ä»¥é€šè¿‡ Map è·å–çš„å…¨éƒ¨çš„å‚æ•°</li></ul></li><li><p>@PathVariable</p><ul><li><p>åœ¨è·¯å¾„å˜é‡ä¸­ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªé”®å€¼å¯¹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†å…¶ä¿å­˜åˆ° Map ä¸­ï¼Œä½†æ˜¯ Map çš„é”®å€¼å¯¹æ³›å‹éƒ½å¿…é¡»ä¸º String ç±»å‹çš„ã€‚</p></li><li><p>ç¤ºä¾‹ï¼š</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/name/&#123;name&#125;/age/&#123;age&#125;"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">getCar</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> map<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"name:"</span> <span class="token operator">+</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">",age="</span> <span class="token operator">+</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> map<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre></li><li><p>è¿è¡Œç»“æœï¼š<code>name:xhaohehe,age=18</code></p></li><li><p>å¦‚æœä½¿ç”¨å®ä½“ç±»æ¥æ˜ å°„ä¹Ÿå¯ä»¥å—ï¼Ÿä¸èƒ½ï¼Œä¼šæœ‰ä¸€ä¸ªè­¦å‘Šï¼Œå¹¶ä¸”ä¼š 500 é”™è¯¯ï¼š</p><p><code>Resolved [org.springframework.web.bind.MissingPathVariableException: Missing URI template variable &#39;entity&#39; for method parameter of type Entity]</code></p></li></ul></li><li><p>@RestControllerï¼ˆè¿™ä¸ªæ³¨è§£åœ¨å­¦ä¹  SpringBoot çš„æ—¶æ‰å¼€å§‹ç”¨çš„ï¼‰</p></li></ul><h3 id="ä¸€çœ‹å°±çœ¼ç†Ÿçš„é‚£ç§"><a href="#ä¸€çœ‹å°±çœ¼ç†Ÿçš„é‚£ç§" class="headerlink" title="ä¸€çœ‹å°±çœ¼ç†Ÿçš„é‚£ç§"></a>ä¸€çœ‹å°±çœ¼ç†Ÿçš„é‚£ç§</h3><p>é™¤äº†è¿™äº›ï¼Œä»Šå¤©è¿˜æœ‰äº†è§£åˆ°ä¸€ä¸‹æ³¨è§£ã€‚å¹¶äº†è§£å…¶ä¸­çš„å«ä¹‰ï¼Œæµ‹è¯•äº†å®ƒä»¬çš„ç”¨æ³•ã€‚</p><ul><li><p>@RequestHeader</p><ul><li><p>è·å–è¯·æ±‚å¤´çš„ä¿¡æ¯</p></li><li><p>ä½¿ç”¨æ–¹æ³•ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³è·å–æµè§ˆå™¨æ ‡è¯†å’Œä¸»æœºåœ°å€</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/getHeaderTest"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span><span class="token string">"User-Agent"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> userAgent<span class="token punctuation">,</span>                         <span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span><span class="token string">"Host"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> host<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"user-agent:\n"</span> <span class="token operator">+</span> userAgent <span class="token operator">+</span> <span class="token string">"\nHost:"</span> <span class="token operator">+</span> host<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"ok"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre></li><li><p>è¿è¡Œç»“æœ</p><pre class="language-java" data-language="java"><code class="language-java">user<span class="token operator">-</span>agent<span class="token operator">:</span><span class="token class-name">Mozilla</span><span class="token operator">/</span><span class="token number">5.0</span> <span class="token punctuation">(</span><span class="token class-name">Windows</span> NT <span class="token number">10.0</span><span class="token punctuation">;</span> WOW64<span class="token punctuation">)</span> <span class="token class-name">AppleWebKit</span><span class="token operator">/</span><span class="token number">537.36</span> <span class="token punctuation">(</span>KHTML<span class="token punctuation">,</span> like <span class="token class-name">Gecko</span><span class="token punctuation">)</span> <span class="token class-name">Chrome</span><span class="token operator">/</span><span class="token number">80.0</span><span class="token number">.3987</span><span class="token number">.87</span> <span class="token class-name">Safari</span><span class="token operator">/</span><span class="token number">537.36</span> SE <span class="token number">2.</span>X <span class="token class-name">MetaSr</span> <span class="token number">1.0</span><span class="token class-name">Host</span><span class="token operator">:</span>localhost<span class="token operator">:</span><span class="token number">8087</span></code></pre></li><li><p>åŒæ ·çš„ï¼Œå¦‚æœè¦è·å–å…¨éƒ¨çš„è¯·æ±‚å¤´ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ Map æ¥æ¥æ”¶å…¨éƒ¨çš„è¯·æ±‚å¤´ã€‚</p></li></ul></li><li><p>@RequestAttribute</p><ul><li><p>è·å– request åŸŸä¸­çš„çš„å€¼</p></li><li><p>ä½¿ç”¨æ–¹æ³•</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Controller</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RequestAttrController</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/goto"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">goTo</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"æ—ºè´¢"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span> <span class="token string">"12"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"forward:/success"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/success"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ResponseBody</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span>                          <span class="token annotation punctuation">@RequestAttribute</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> age<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"name:"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">",age="</span> <span class="token operator">+</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"ok"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre></li><li><p>è¿è¡Œç»“æœï¼š<code>name:æ—ºè´¢,age=12</code></p></li><li><p>å®ƒä¸èƒ½å‘å…¶å®ƒçš„ä¸€æ ·ä½¿ç”¨ Map æ¥æ¥æ”¶å…¨éƒ¨çš„ request è¯·æ±‚åŸŸä¸­çš„å…¨éƒ¨å‚æ•°</p></li></ul></li><li><p>@RequestBody</p><ul><li><p>è·å–è¯·æ±‚ä½“ï¼Œåªæœ‰è¯·æ±‚ä½“å­˜åœ¨äº POST è¯·æ±‚ä¸­ï¼ŒGET è¯·æ±‚ä¸­æ²¡æœ‰è¯·æ±‚ä½“ã€‚</p></li><li><p>ä½¿ç”¨æ–¹æ³•</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/testBody"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getCookieTest</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"contentï¼š"</span> <span class="token operator">+</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"ok"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre></li><li><p>è¿è¡Œç»“æœ</p><p><code>contentï¼šname=xiaohehe&amp;age=18&amp;gender=%E7%94%B7</code></p></li></ul></li><li><p>@CookieValue</p><ul><li><p>ç”¨äºè·å–æµè§ˆå™¨ä¸­çš„ Cookie </p></li><li><p>ä½¿ç”¨æ–¹æ³•</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/getCookieTest"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getCookieTest</span><span class="token punctuation">(</span><span class="token annotation punctuation">@CookieValue</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span>                            <span class="token annotation punctuation">@CookieValue</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> age<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"name:"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">",age:"</span> <span class="token operator">+</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"ok"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre></li><li><p>è¿è¡Œç»“æœ</p><pre class="language-none"><code class="language-none">name:xiaoqiang,age:40</code></pre></li></ul></li></ul><h3 id="MatrixVariable-æ³¨è§£å’Œ-UrlPathHelper"><a href="#MatrixVariable-æ³¨è§£å’Œ-UrlPathHelper" class="headerlink" title="MatrixVariable æ³¨è§£å’Œ UrlPathHelper"></a>MatrixVariable æ³¨è§£å’Œ UrlPathHelper</h3><p>MatrixVariable ä¹Ÿå«çŸ©é˜µå˜é‡ï¼ŒçŸ©é˜µå˜é‡çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ã€‚</p><pre class="language-url" data-language="url"><code class="language-url">http:&#x2F;&#x2F;localhost&#x2F;user1;name&#x3D;xiaohehe;age&#x3D;20&#x2F;user2;name&#x3D;bestguo;age&#x3D;18</code></pre><p>çœ‹èµ·æ¥æœ‰ä¸€ç‚¹æ‡µé€¼çš„æ„Ÿè§‰ï¼Œä½†æ˜¯è¿™ä¸ªä¹Ÿä¸æ˜¯å¾ˆéš¾ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡â€œå˜é‡ä»£æ¢â€çš„æ–¹å¼æ¥å¸®åŠ©æˆ‘ä»¬æ¥ç†è§£è¿™ä¸ªè·¯å¾„ã€‚å‡è®¾ <code>user1;name=xiaohehe;age=20</code> ä¸º aï¼Œ<code>user2;name=bestguo;age=18</code> ä¸º bï¼Œæ‰€ä»¥ä¸Šé¢çš„è·¯å¾„å°±å˜æˆäº†è¿™å‰¯æ¨¡æ ·ã€‚</p><pre class="language-url" data-language="url"><code class="language-url">http:&#x2F;&#x2F;localhost&#x2F;a&#x2F;b</code></pre><p>çœ‹ï¼Œå…¶å®å®ƒçš„çœŸå®é¢ç›®è¿˜æ˜¯ä¸€ä¸ªè·¯å¾„ã€‚ç„¶è€Œï¼Œæœ‰æ²¡æœ‰å‘ç°ã€‚æˆ‘è§‰å¾—å…¶å®å®ƒçš„æœ¬è´¨è¿˜æ˜¯ PathVariable ï¼ˆè·¯å¾„å˜é‡ï¼‰ï¼ŒçŸ©é˜µå˜é‡æ˜¯è·¯å¾„å˜é‡çš„ä¸€ä¸ªå˜ç§ã€‚</p><p>é‚£ä¹ˆï¼ŒçŸ©é˜µå˜é‡å°±æ˜¯ a å’Œ b é‡Œé¢çš„ user1 å’Œ user2 äº†ï¼ˆæœ‰ç‚¹å¼ºè¡Œè§£é‡Šçš„æ„Ÿè§‰ï¼‰ï¼Œå› ä¸º user1 å’Œ user2 åé¢å…¶å®å¹¶æ²¡æœ‰ç­‰äºä¸€ä¸ªå€¼ã€‚å³ <code>user1;name=xiaohehe;age=20</code> å’Œ <code>user2;name=bestguo;age=18</code></p><h4 id="è·å–çŸ©é˜µå˜é‡ä¸­çš„å†…å®¹"><a href="#è·å–çŸ©é˜µå˜é‡ä¸­çš„å†…å®¹" class="headerlink" title="è·å–çŸ©é˜µå˜é‡ä¸­çš„å†…å®¹"></a>è·å–çŸ©é˜µå˜é‡ä¸­çš„å†…å®¹</h4><blockquote><p>æ³¨æ„ï¼Œç”±äº SpringBoot é»˜è®¤æ˜¯å°†çŸ©é˜µå˜é‡ç»™ç¦ç”¨æ‰äº†ï¼Œæ‰€ä»¥éœ€è¦å°†å…¶å¼€èµ·æ¥ã€‚é…ç½®çš„æ–¹å¼éœ€è¦é€šè¿‡é…ç½® Bean çš„æ–¹å¼æ¥è‡ªå®šä¹‰é…ç½®ã€‚ä¸ç®¡å®ƒï¼Œå…ˆå¤åˆ¶å®ƒå†è¯´ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyConfig</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token function">webMvcConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configurePathMatch</span><span class="token punctuation">(</span><span class="token class-name">PathMatchConfigurer</span> configurer1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">UrlPathHelper</span> helper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UrlPathHelper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// ç¦ç”¨åˆ†å·å–æ¶ˆ</span>                helper<span class="token punctuation">.</span><span class="token function">setRemoveSemicolonContent</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                configurer1<span class="token punctuation">.</span><span class="token function">setUrlPathHelper</span><span class="token punctuation">(</span>helper<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre></blockquote><p>å¦‚æœæˆ‘ä»¬è¦è·å–ä»¥ä¸‹è·¯å¾„ä¸­çš„å†…å®¹è¦æ€ä¹ˆè·å–å‘¢ï¼Ÿ</p><pre class="language-url" data-language="url"><code class="language-url">http:&#x2F;&#x2F;localhost:8087&#x2F;matrixVariableTest&#x2F;user1;name&#x3D;xiaohehe;age&#x3D;20&#x2F;user2;name&#x3D;bestguo;age&#x3D;18</code></pre><p>æˆ‘ä»¬è¯•è¯•è¿™ç§çœ‹çœ‹</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/matrixVariableTest/&#123;user1&#125;/&#123;user2&#125;"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@ResponseBody</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">matrixVariableTest</span><span class="token punctuation">(</span><span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span>                                 <span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> age<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">"---------"</span> <span class="token operator">+</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"ok"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œæµ‹è¯•äº†ä¸€ä¸‹ï¼Œå‘ç°æœ‰ä¸€ä¸ªè­¦å‘Šã€‚é¡µé¢æ˜¾ç¤ºçš„æ˜¯ 400 é”™è¯¯ã€‚</p><pre class="language-none"><code class="language-none">Resolved [org.springframework.web.bind.ServletRequestBindingException: Found more than one match for URI path parameter &#39;name&#39; for parameter type [java.lang.String]. Use &#39;pathVar&#39; attribute to disambiguate.]</code></pre><p>è¿™ä¸ªé”™è¯¯çš„åŸå› æ˜¯å› ä¸º user1 è¿™ä¸ªçŸ©é˜µå˜é‡ä¸­æœ‰ name å’Œ age ï¼Œuser2 è¿™ä¸ªçŸ©é˜µå˜é‡ä¸­ä¹Ÿæœ‰ name å’Œ age ï¼Œç”±äºå‡ºç°äº†é‡å¤çš„ï¼Œè€Œ MatrixVariable å»è¯†åˆ«çš„æ—¶å€™å‘ç°æœ‰ä¸¤ä¸ªç›¸åŒçš„ï¼Œæ‰€ä»¥å°±æœ‰é—®é¢˜äº†ã€‚</p><p>ä¸è¿‡åœ¨è¿™ä¸ªè­¦å‘Šä¸­æœ‰ä¸€ä¸ªå»ºè®®ï¼Œé‚£å°±æ˜¯åœ¨è¿™ä¸ªæ³¨è§£ä¸­åŠ å…¥ä¸€æ¡ pathVar å±æ€§ï¼Œç”¨æ¥åŒºåˆ†å®ƒä»¬ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†ä¸Šé¢çš„ä»£ç æ”¹å†™æˆå¦‚ä¸‹çš„æ–¹å¼ã€‚è¿™æ¬¡æˆ‘ä»¬ä» user1 è¿™ä¸ªçŸ©é˜µå˜é‡ä¸­æ‹¿å– name å’Œ age ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/matrixVariableTest/&#123;user1&#125;/&#123;user2&#125;"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@ResponseBody</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">matrixVariableTest</span><span class="token punctuation">(</span><span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"name"</span><span class="token punctuation">,</span> pathVar <span class="token operator">=</span> <span class="token string">"user1"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span>                                 <span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"age"</span><span class="token punctuation">,</span> pathVar <span class="token operator">=</span> <span class="token string">"user1"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> age<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">"---------"</span> <span class="token operator">+</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"ok"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œç»“æœæœ‰äº†ï¼Œé¡µé¢è¿”å›äº†ä¸€ä¸ª ok ç»™æˆ‘ä»¬</p><pre class="language-none"><code class="language-none">xiaohehe---------20</code></pre><p>é‚£æˆ‘æƒ³ä¸¤ä¸ªéƒ½æ‹¿å–è¯¥æ€ä¹ˆåŠï¼Ÿé‚£å°±éƒ½æ‹¿å‘—</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/matrixVariableTest/&#123;user1&#125;/&#123;user2&#125;"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@ResponseBody</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">matrixVariableTest</span><span class="token punctuation">(</span><span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"name"</span><span class="token punctuation">,</span> pathVar <span class="token operator">=</span> <span class="token string">"user1"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span>                                 <span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"age"</span><span class="token punctuation">,</span> pathVar <span class="token operator">=</span> <span class="token string">"user1"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> age<span class="token punctuation">,</span>                                 <span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"name"</span><span class="token punctuation">,</span> pathVar <span class="token operator">=</span> <span class="token string">"user2"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name2<span class="token punctuation">,</span>                                 <span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"age"</span><span class="token punctuation">,</span> pathVar <span class="token operator">=</span> <span class="token string">"user2"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> age2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">"---------"</span> <span class="token operator">+</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name2 <span class="token operator">+</span> <span class="token string">"---------"</span> <span class="token operator">+</span> age2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"ok"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹</p><pre class="language-none"><code class="language-none">xiaohehe---------20bestguo---------18</code></pre><h4 id="ä¸‡èƒ½çš„-Map"><a href="#ä¸‡èƒ½çš„-Map" class="headerlink" title="ä¸‡èƒ½çš„ Map"></a>ä¸‡èƒ½çš„ Map</h4><p>çŸ©é˜µå˜é‡ä¸­çš„å„ä¸ªå±æ€§å’Œå€¼éƒ½å¯ä»¥å°†å…¶ä¿å­˜è‡³ Map é›†åˆä¸­ï¼Œä½†æ˜¯å®ƒçš„æ³›å‹å¿…é¡»ä¸º String, String ç±»å‹çš„ã€‚</p><p>å¦‚æœæ˜¯è¿™ç§çš„æ–¹å¼è¯ï¼Œä¸æ·»åŠ  pathVar ï¼Œé‚£ä¹ˆå®ƒå¾—åˆ°çš„é»˜è®¤å°±æ˜¯ç¬¬ä¸€ä¸ª user1 é‡Œé¢çš„å†…å®¹ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/matrixVariableTest/&#123;user1&#125;/&#123;user2&#125;"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@ResponseBody</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">matrixVariableTest</span><span class="token punctuation">(</span><span class="token annotation punctuation">@MatrixVariable</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> user<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// æ‰“å°map</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"ok"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// è¿è¡Œç»“æœï¼š&#123;name=xiaohehe, age=20&#125;</span></code></pre><p>æ‰€ä»¥ï¼Œè¦è·å– user2 ä¸­çš„è¯ï¼Œå°±è¿˜éœ€è¦æ·»åŠ ä¸€ä¸ª pathVar å‚æ•°æ‰èƒ½è·å–åˆ°ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/matrixVariableTest/&#123;user1&#125;/&#123;user2&#125;"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@ResponseBody</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">matrixVariableTest</span><span class="token punctuation">(</span><span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span>pathVar <span class="token operator">=</span> <span class="token string">"user1"</span><span class="token punctuation">)</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> user1<span class="token punctuation">,</span>                                 <span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span>pathVar <span class="token operator">=</span> <span class="token string">"user2"</span><span class="token punctuation">)</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> user2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// æ‰“å°map</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"ok"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// è¿è¡Œç»“æœå¦‚ä¸‹ </span><span class="token comment">// &#123;name=xiaohehe, age=20&#125;</span><span class="token comment">// &#123;name=bestguo, age=18&#125;</span></code></pre><h4 id="UrlPathHelper-æ˜¯å•¥"><a href="#UrlPathHelper-æ˜¯å•¥" class="headerlink" title="UrlPathHelper æ˜¯å•¥"></a>UrlPathHelper æ˜¯å•¥</h4><p>è¿™ä¸ªç±»æ˜¯ç”¨äºè§£æè·¯å¾„ä¸­çš„ä¿¡æ¯ï¼Œæ¯”å¦‚å‘é€ get è¯·æ±‚ä¸­æ‰€å¸¦çš„ â€œ?â€ åé¢çš„å‚æ•°ï¼Œä»¥åŠè·¯å¾„å˜é‡å’ŒçŸ©é˜µå˜é‡è¿™ç§å†™æ³•ï¼Œå…¨éƒ½æ˜¯ç”±å®ƒæ¥è§£æçš„ã€‚</p><p>çŸ©é˜µå˜é‡é»˜è®¤ä¸ºç¦ç”¨çš„åŸå› ï¼Œæ˜¯å› ä¸º UrlPathHelper åœ¨è§£æè·¯å¾„çš„æ—¶å€™ï¼Œå¦‚æœé‡åˆ° â€œ;â€ é‚£ä¹ˆå°† â€œ;â€ åé¢çš„å†…å®¹å…¨éƒ¨ç»™å¿½ç•¥æ‰äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> SpringBoot å¼€å‘å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootå¼€å‘å°æŠ€å·§</title>
      <link href="/journal/springboot-best-coding/"/>
      <url>/journal/springboot-best-coding/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>SpringBoot è™½ç„¶å¾ˆå¤šé…ç½®é¡¹éƒ½æ˜¯è‡ªåŠ¨é…ç½®çš„ï¼Œä½†æ˜¯æœ‰æ—¶å€™æŸäº›é…ç½®é¡¹éœ€è¦æ‰‹åŠ¨é…ç½®ã€‚ä»¥åŠé€šè¿‡ä¸€äº›æ¨¡å—æ¥ç®€åŒ– SpringBoot çš„å¼€å‘ï¼Œæå‡å¼€å‘çš„æ•ˆç‡ã€‚</p><script src="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@latest/dist/APlayer.min.css"><span id="more"></span>        <div id="aplayer-bEjCYdIG" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;">            <pre class="aplayer-lrc-content"></pre>        </div>        <script>          var ap = new APlayer({            element: document.getElementById("aplayer-bEjCYdIG"),            narrow: false,            autoplay: true,            showlrc: false,            music: {              title: "è·‘è·‘å¡ä¸è½¦ç­‰å¾…éŸ³ä¹",              author: "è·‘è·‘å¡ä¸è½¦å®˜æ–¹BGM",              url: "wKgDZlXK1_LQ1kISAAKUa7tW3Rg221.mp3",              pic: "/journal/springboot-best-coding/109951163649852887.jpg",              lrc: ""            }          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap);        </script><h2 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h2><ul><li>å¼•å…¥åœºæ™¯ä¾èµ–<ul><li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-starter">https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-starter</a></li></ul></li><li>æŸ¥çœ‹è‡ªåŠ¨é…ç®¡äº†å“ªäº›(é€‰åš)<ul><li>è‡ªå·±åˆ†æï¼Œå¼•å…¥åœºæ™¯å¯¹åº”çš„è‡ªåŠ¨é…ç½®ä¸€èˆ¬éƒ½ç”Ÿæ•ˆäº†</li><li>é…ç½®æ–‡ä»¶ä¸­ debug = true å¼€å¯è‡ªåŠ¨é…ç½®æŠ¥å‘Šã€‚Negative (ä¸ç”Ÿæ•ˆ) / Positive (ç”Ÿæ•ˆ)</li></ul></li><li>æ˜¯å¦éœ€è¦ä¿®æ”¹<ul><li>å‚ç…§æ–‡æ¡£ä¿®æ”¹é…ç½®é¡¹<br><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#common-application-properties">https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#common-application-properties</a></li><li>è‡ªå·±åˆ†æã€‚xxxxPropertiesç»‘å®šäº†é…ç½®æ–‡ä»¶çš„å“ªäº›ã€‚è‡ªå®šä¹‰åŠ å…¥æˆ–è€…æ›¿æ¢ç»„ä»¶<br>@Beanã€@Componentâ€¦â€¦</li><li>è‡ªå®šä¹‰å™¨ XXXXXCustomizer; </li><li>â€¦..</li></ul></li></ul><h2 id="å¼€å‘å°å·¥å…·"><a href="#å¼€å‘å°å·¥å…·" class="headerlink" title="å¼€å‘å°å·¥å…·"></a>å¼€å‘å°å·¥å…·</h2><p>éå¸¸å®ç”¨çš„ä¸€äº›å¼€å‘å°å·¥å…·</p><h3 id="Lombok"><a href="#Lombok" class="headerlink" title="Lombok"></a>Lombok</h3><p>ç®€åŒ– JavaBean çš„å¼€å‘ï¼Œå¯ä»¥ä¸ç”¨å†™é‡å¤çš„æ„é€ æ–¹æ³•ï¼Œgetter å’Œ setter ä»¥åŠ toString æ–¹æ³•ã€‚èƒ½å†™å‡ºè¿™æ ·çš„ä»£ç çœŸçš„æ˜¯å¤©æ‰ğŸ‘ğŸ‘ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactid</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>å®‰è£… idea çš„ Lombok æ’ä»¶ã€‚ä¸è¿‡æˆ‘è¿™ä¸ªç‰ˆæœ¬å®ƒè‡ªå·±é¢„è£…äº†ï¼Œæ²¡æœ‰çš„è¯è¿˜æ˜¯è¦å»è£…ä¸€ä¸ªã€‚</p><p><img src="/journal/springboot-best-coding/QQ%E6%88%AA%E5%9B%BE20210628104113.png" alt="QQæˆªå›¾20210628104113" loading="lazy"></p><p>ç›¸å…³çš„æ³¨è§£</p><ul><li>Data æ³¨è§£ï¼šç”¨äºç”Ÿæˆ JavaBean ä¸­çš„ setter ã€getter å’Œ toString æ–¹æ³•ã€‚</li><li>AllArgsConstructor æ³¨è§£ï¼šç”¨äºç”Ÿæˆ JavaBean ä¸­çš„å¸¦å…¨éƒ¨å‚æ•°çš„æ„é€ æ–¹æ³•</li><li>NoArgsConstructor æ³¨è§£ï¼šç”¨äºç”Ÿæˆ JavaBean ä¸­çš„å¸¦æ— å‚æ•°çš„æ„é€ æ–¹æ³•</li><li>ToString æ³¨è§£ï¼šç”¨äºç”Ÿæˆ toString æ–¹æ³•ï¼Œåœ¨ Data æ³¨è§£ä¸­å·²ç»åŒ…å«è¿‡</li><li>Slf4j æ³¨è§£ï¼šç”¨äºè¾“å‡ºæ—¥å¿—ã€‚</li></ul><h4 id="ä½¿ç”¨ç¤ºä¾‹"><a href="#ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h4><p>ç»™ Car ç±»ï¼Œè‡ªåŠ¨ç”Ÿæˆ getter å’Œ setter æ–¹æ³•ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> brand<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> price<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ç»™ Pet ç±»ç”Ÿæˆä¸€ä¸ªä¸å¸¦å‚æ•°çš„æ„é€ æ–¹æ³•ã€å¸¦å…¨éƒ¨å‚æ•°çš„æ„é€ æ–¹æ³•å’Œ toString æ–¹æ³•ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@AllArgsConstructor</span> <span class="token comment">// æœ‰å‚æ•°çš„æ„é€ æ–¹æ³•</span><span class="token annotation punctuation">@NoArgsConstructor</span> <span class="token comment">// æ— å‚æ•°çš„æ„é€ æ–¹æ³•</span><span class="token annotation punctuation">@ToString</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Pet</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>åœ¨æ§åˆ¶å±‚ä¸­è¾“å‡ºæ—¥å¿—</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Controller</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">&#123;</span>        <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/springboot2"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ResponseBody</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"è¯·æ±‚è¿›æ¥äº†~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"Hello, SpringBoot2!"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span></code></pre><h3 id="dev-tools"><a href="#dev-tools" class="headerlink" title="dev tools"></a>dev tools</h3><p>dev tools å¯ä»¥åœ¨ä¸ç‚¹å‡» idea çš„é¡¹ç›®é‡å¯æŒ‰é’®çš„æƒ…å†µäº›ï¼Œé€šè¿‡é¡¹ç›®æ„å»ºï¼ˆctrl + f9ï¼‰çš„æ–¹å¼æ¥å¯¹é¡¹ç›®è¿›è¡Œæ›´æ–°ã€‚ä¸è¿‡è¿™ç§é¡¹ç›®æ›´æ–°å®è´¨ä¸Šæ˜¯é‡å¯ SpringBoot é¡¹ç›®ã€‚</p><p>ç›¸å…³çš„ä¾èµ–</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>å…¶å®è¿™ä¸ç®—æ˜¯çƒ­æ›´æ–°éƒ¨ç½²ï¼Œå®ƒä»…ä»…æ˜¯å¯¹é¡¹ç›®è¿›è¡Œé‡å¯è€Œå·²ã€‚ç”šè‡³åœ¨æœ‰äº›ç”µè„‘ï¼Œå³ä½¿åŠ è½½äº† dev tools é‡å¯ä¹Ÿæ— æµäºäº‹ã€‚</p><h3 id="Spring-Initializer"><a href="#Spring-Initializer" class="headerlink" title="Spring Initializer"></a>Spring Initializer</h3><p>å®ƒæ˜¯ä¸€ä¸ª SpringBoot çš„é¡¹ç›®åˆå§‹åŒ–å‘å¯¼ï¼Œé€šè¿‡å¯è§†åŒ–ç•Œé¢ï¼Œé€‰æ‹©éœ€è¦å¼•å…¥çš„åœºæ™¯å³å¯æˆåŠŸçš„æ„å»ºæˆä¸ºä¸€ä¸ª SpringBoot é¡¹ç›®</p><p><img src="/journal/springboot-best-coding/QQ%E6%88%AA%E5%9B%BE20210628133709.png" alt="QQæˆªå›¾20210628133709.png" loading="lazy"></p><p>è®¾ç½®é¡¹ç›®åå’ŒåŒ…å</p><p><img src="/journal/springboot-best-coding/QQ%E6%88%AA%E5%9B%BE20210628133648.png" alt="QQæˆªå›¾20210628133648.png" loading="lazy"></p><p>é€‰æ‹©éœ€è¦å¯¼å…¥çš„åœºæ™¯</p><p><img src="/journal/springboot-best-coding/QQ%E6%88%AA%E5%9B%BE20210628133837.png" alt="QQæˆªå›¾20210628133837.png" loading="lazy"></p><p>ç‚¹å‡» Finish ï¼Œå¼€å§‹æ„å»ºé¡¹ç›®ã€‚å³å¯æ„å»ºæˆä¸ºä¸€ä¸ª SpringBoot é¡¹ç›®ã€‚</p><p><img src="/journal/springboot-best-coding/QQ%E6%88%AA%E5%9B%BE20210628134128.png" alt="QQæˆªå›¾20210628134128.png" loading="lazy"></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> SpringBoot å¼€å‘å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ³¨è§£çš„å­¦ä¹ </title>
      <link href="/journal/springboot-annotations-ususally/"/>
      <url>/journal/springboot-annotations-ususally/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä»Šå¤©å­¦ä¹ äº† SpringBoot ä¸­çš„ä¸€äº›æ³¨è§£ï¼Œä¸è¿‡æœ‰äº›æ³¨è§£æ˜¯ Spring ä¸­çš„ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ @Configurationã€@Importã€@Beanã€@Conditionalã€@ImportResourceã€@ConfigurationPropertiesã€@EnableConfigurationProperties æ³¨è§£ã€‚</p><p>å­¦å®Œè¿™äº›æ³¨è§£ä¹‹åï¼Œçªç„¶æœ‰ä¸€ä¸ªæƒ³æ³•ã€‚å°±æ˜¯ä¹‹å‰åœ¨ SpringBoot çš„ Web æ¨¡å—çš„æ—¶å€™ï¼ŒSpringBoot å¥½åƒè¿˜æ˜¯éœ€è¦æˆ‘ä»¬æ¥è‡ªå·±ç¼–å†™æ‹¦æˆªå™¨ï¼Œè¿™å°±æ„Ÿåˆ°è´¹æ—¶é—´ï¼Œæœ‰ç‚¹ä¸ç¬¦åˆ SpringBoot çš„å°‘é‡é…ç½®çš„ç‰¹ç‚¹ã€‚æš‘å‡æƒ³è‡ªå·±å°è¯•å†™ä¸€ä¸ªåŸºäº Spring MVC çš„æ‹¦æˆªå™¨çš„ç¬¬ä¸‰æ–¹åº“ã€‚</p><p><img src="/journal/springboot-annotations-ususally/7af40ad162d9f2d314edf006abec8a136227cc5f.gif" alt="7af40ad162d9f2d314edf006abec8a136227cc5f" loading="lazy"></p><p>æˆ‘è§‰å¾—è¿™ä¸ªè¿˜æ˜¯ç­‰åˆ°æŠŠé›·ç¥çš„ SpringBoot ç»™å¼„å®Œï¼Œèƒ½åœ¨æš‘å‡ä¹‹å†…åšå‡ºæ¥æ˜¯æœ€å¥½çš„äº†ã€‚</p><span id="more"></span><h2 id="Configuration-æ³¨è§£"><a href="#Configuration-æ³¨è§£" class="headerlink" title="Configuration æ³¨è§£"></a>Configuration æ³¨è§£</h2><p>Configutation æ³¨è§£ï¼Œæ ‡è®°åœ¨æŸä¸€ä¸ªç±»ä¸Šï¼Œè¿™ä¸ªç±»å°±æˆä¸ºäº†ä¸€ä¸ªé…ç½®ç±»äº†ã€‚æ ‡è®°çš„æ•ˆæœç­‰åŒäºåœ¨ Spring çš„ xml é…ç½®æ–‡ä»¶ä¸€æ ·ã€‚</p><blockquote><p>æœ‰ä¸€ä¸ªåè¯å«â€æ³¨å†Œâ€œï¼Œæ³¨å†Œçš„æ„æ€å°±æ˜¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œåƒæ˜¯ new Random(); è¿™ç§å†™æ³•ã€‚</p></blockquote><p>æ—¢ç„¶å’Œ xml çš„é…ç½®æ–‡ä»¶ä¸€æ ·æ³¨å†Œå¯¹è±¡ï¼Œé‚£å®ƒå‘å®¹å™¨ä¸­æ³¨å†Œå¯¹è±¡çš„æ–¹å¼æ˜¯è¿™æ ·çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œéœ€è¦å…ˆå£°æ˜ä¸€ä¸ªæ–¹æ³•ï¼Œéœ€è¦åœ¨æ–¹æ³•ä¸Šé¢æ ‡è®°ä¸€ä¸ª Bean æ³¨è§£ï¼ŒBean æ³¨è§£å°±æ˜¯åœ¨ Spring çš„ ioc å®¹å™¨ï¼ˆåç»­ç®€ç§°å®¹å™¨ï¼‰ä¸­æ·»åŠ å¯¹è±¡ï¼Œé»˜è®¤æ˜¯ä»¥æ–¹æ³•åä½œä¸ºå¯¹è±¡idï¼Œè¿”å›ç±»å‹å°±æ˜¯å¯¹è±¡çš„ç±»å‹ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyConfig</span> <span class="token punctuation">&#123;</span>        <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">User</span> zhangsan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> zhangsan<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">User</span> lisi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"lisi"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> lisi<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Pet</span> <span class="token function">pet01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token string">"tomcat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Pet</span> <span class="token function">pet02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token string">"tomcat222"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span></code></pre><p>å…¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±åœ¨ Bean æ³¨è§£ä¸­æŒ‡å®šidï¼Œæ¯”å¦‚ <code>@Bean(&quot;zhangsan&quot;)</code>ï¼ŒæŒ‡å®šåå­—å®Œä¹‹åï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡çš„ id å°±ä¸å†æ˜¯ user01 ï¼Œè€Œæ˜¯ zhangsan ã€‚</p><h3 id="å¦‚ä½•å¾—åˆ°å®¹å™¨ä¸­çš„å¯¹è±¡"><a href="#å¦‚ä½•å¾—åˆ°å®¹å™¨ä¸­çš„å¯¹è±¡" class="headerlink" title="å¦‚ä½•å¾—åˆ°å®¹å™¨ä¸­çš„å¯¹è±¡"></a>å¦‚ä½•å¾—åˆ°å®¹å™¨ä¸­çš„å¯¹è±¡</h3><p>è·å–å®¹å™¨çš„å¯¹è±¡ä¹Ÿéå¸¸ç®€å•ï¼Œå’Œä»¥å‰ä½¿ç”¨ ApplicationContext å¯¹è±¡ä¸€æ ·ï¼Œä¹Ÿæ˜¯åˆ©ç”¨ getBean æ¥è·å–çš„ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// Spring IOCå®¹å™¨</span><span class="token class-name">ConfigurableApplicationContext</span> run <span class="token operator">=</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringBootApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å– user02</span><span class="token class-name">User</span> user02 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> run<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"user02"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user02<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å– zhangsan</span><span class="token class-name">User</span> zhangsan <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>zhangsan<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">User<span class="token punctuation">&#123;</span>brand<span class="token operator">=</span><span class="token string">'lisi'</span>, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">&#125;</span>User<span class="token punctuation">&#123;</span>brand<span class="token operator">=</span><span class="token string">'zhangsan'</span>, <span class="token assign-left variable">age</span><span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">&#125;</span></code></pre><h4 id="å•å®ä¾‹"><a href="#å•å®ä¾‹" class="headerlink" title="å•å®ä¾‹"></a>å•å®ä¾‹</h4><p>å¦‚æœæˆ‘ä»¬å¤šæ¬¡è·å–å®¹å™¨ä¸­çš„å¯¹è±¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬è·å–åˆ°çš„å¯¹è±¡æ˜¯å¦ä¸ºåŒä¸€ä¸ªå‘¢ï¼Ÿé€šè¿‡ä»¥ä¸‹ä»£ç è¿›è¡ŒéªŒè¯ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// ä¸¤ä¸ªå®ä¾‹æ˜¯ä¸æ˜¯ä¸€æ ·çš„ï¼Ÿ</span><span class="token class-name">Pet</span> pet1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Pet</span><span class="token punctuation">)</span> run<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"pet01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Pet</span> pet2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Pet</span><span class="token punctuation">)</span> run<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"pet01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"pet1==pet2 ? "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>pet1 <span class="token operator">==</span> pet2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><pre class="language-java" data-language="java"><code class="language-java">pet1<span class="token operator">==</span>pet2 <span class="token operator">?</span> <span class="token boolean">true</span></code></pre><p>è¿è¡Œç»“æœä¸º true ï¼Œæ„å‘³ç€æ‰€å¾—åˆ°çš„å¯¹è±¡å®ä¾‹æ˜¯å•å®ä¾‹çš„ã€‚</p><h4 id="é…ç½®ç±»æœ¬èº«ä¹Ÿæ˜¯å¯¹è±¡"><a href="#é…ç½®ç±»æœ¬èº«ä¹Ÿæ˜¯å¯¹è±¡" class="headerlink" title="é…ç½®ç±»æœ¬èº«ä¹Ÿæ˜¯å¯¹è±¡"></a>é…ç½®ç±»æœ¬èº«ä¹Ÿæ˜¯å¯¹è±¡</h4><p>æˆ‘ä»¬åˆ›å»ºçš„é…ç½®ç±»å…¶å®æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å®ƒç»™è°ƒç”¨å‡ºæ¥</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">MyConfig</span> bean <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">MyConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">top.bestguo.config.MyConfig<span class="token variable">$$</span>EnhancerBySpringCGLIB<span class="token variable">$$</span>137f765f@62315f22</code></pre><p>ä¸è¿‡ï¼Œæˆ‘ä»¬å¾—åˆ°çš„é…ç½®ç±»æ˜¯ä¸€ä¸ªåŠ å¼ºç‰ˆçš„ç±»ã€‚ä¸€çœ‹åˆ° CGLIB å°±çŸ¥é“ï¼Œè¿™æ˜¯ä¸€ä¸ªè¢«ä»£ç†è¿‡çš„å¯¹è±¡ï¼Œé‡Œé¢çš„å¯¹è±¡ä¹Ÿæ˜¯ç”± CGLIB è¿›è¡Œä»£ç†çš„ã€‚é‚£å®ƒä»£ç†äº†ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>å…¶å®ï¼Œåœ¨ SpringBoot 2.3 ä¹‹åçš„ç‰ˆæœ¬ï¼Œç”±äº SpringBoot 2.3 æ˜¯åŸºäº Spring 5.2+ çš„ï¼ŒConfiguration æ³¨è§£å¤šäº†ä¸€ä¸ªå«åš proxyBeanMethod çš„å±æ€§ï¼Œæ˜¯å› ä¸ºå®ƒå¯ä»¥è®¾ç½® true å’Œ false ï¼Œå¦‚æœè®¾ç½®æˆäº† true å°±æ˜¯è¿™ä¸ªå¯¹è±¡æ˜¯è¢«ä»£ç†çš„ï¼Œè®¾ç½®æˆ false å°±æ˜¯æœªè¢«ä»£ç†çš„ã€‚</p><p>é‚£ï¼Œä»£ç†çš„æ„ä¹‰ä½•åœ¨å‘¢ï¼ŸğŸ§ğŸ§</p><h3 id="proxyBeanMethod"><a href="#proxyBeanMethod" class="headerlink" title="proxyBeanMethod"></a>proxyBeanMethod</h3><p>è¯¥æ³¨è§£ä¸­çš„å±æ€§ï¼Œé»˜è®¤å€¼ä¸º true ã€‚</p><p>ä¸Šé¢éƒ¨åˆ†æåˆ°è¿‡è¿™ä¸ªå±æ€§è®¾ç½®æˆ true å’Œ false ï¼Œé…ç½®ç±»åˆ†åˆ«å°±æ˜¯è¢«ä»£ç†å’Œæœªè¢«ä»£ç†çš„ã€‚ä¸Šé¢ä¹Ÿæœ‰æåˆ°ï¼Œé…ç½®ç±»ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé…ç½®ç±»å¯¹è±¡é‡Œé¢ä¸æ˜¯æœ‰å¾ˆå¤šæ–¹æ³•å—ï¼Ÿé‚£æˆ‘ä»¬è°ƒç”¨ä¸€ä¸‹è¿™é‡Œé¢çš„æ–¹æ³•è¯•è¯•çœ‹ã€‚</p><p>å¦‚æœæˆ‘å¤šæ¬¡è°ƒç”¨è¿™ä¸ªé…ç½®ç±»å¯¹è±¡ä¸­çš„æ–¹æ³•ï¼Œç›´æ¥è·å– ioc å®¹å™¨ä¸­æ³¨å†Œçš„å¯¹è±¡ï¼Œè¿˜æ˜¯ä»…ä»…åªæ˜¯å•çº¯çš„æ–¹æ³•è°ƒç”¨ï¼Œæ¯æ¬¡çš„è°ƒç”¨è¿”å›çš„å¯¹è±¡éƒ½æ˜¯ä¸åŒçš„å‘¢ï¼Ÿ</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">MyConfig</span> bean <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">MyConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">User</span> user01 <span class="token operator">=</span> bean<span class="token punctuation">.</span><span class="token function">user01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">User</span> user011 <span class="token operator">=</span> bean<span class="token punctuation">.</span><span class="token function">user01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä»é…ç½®å®¹å™¨ä¸­è°ƒç”¨çš„æ–¹æ³•ï¼Œæ˜¯ä¸€æ ·çš„å—ï¼Ÿ"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>user01 <span class="token operator">==</span> user011<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå‘ç°å¾—åˆ°çš„æ–¹æ³•æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">ä»é…ç½®å®¹å™¨ä¸­è°ƒç”¨çš„æ–¹æ³•ï¼Œæ˜¯ä¸€æ ·çš„å—ï¼Ÿtrue</code></pre><p>é‚£æˆ‘ä»¬æŠŠ proxyBeanMethod å€¼æ”¹æˆ false ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿè¿è¡Œç»“æœå¦‚ä¸‹ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">top.bestguo.config.MyConfig@5bdaf2ceä»é…ç½®å®¹å™¨ä¸­è°ƒç”¨çš„æ–¹æ³•ï¼Œæ˜¯ä¸€æ ·çš„å—ï¼Ÿfalse</code></pre><p>å¾ˆæ˜¾ç„¶ï¼ŒMyConfig è¿™ä¸ªé…ç½®ç±»ä¸å†è¢«ä»£ç†äº†ï¼Œå¹¶ä¸”è¿™ä¸¤æ¬¡çš„è°ƒç”¨éƒ½æ˜¯ falseã€‚é‚£æˆ‘ä»¬ç›´æ¥é€šè¿‡ getBean çš„æ–¹å¼çœ‹çœ‹å¾—åˆ°çš„ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºåŒä¸€ä¸ªã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">User</span> zhangsan <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">User</span> zhangsan2 <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ˜¯ä¸æ˜¯åŒä¸€ä¸ªï¼Ÿ"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>zhangsan <span class="token operator">==</span> zhangsan2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå‘ç°è¿™æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</p><pre class="language-java" data-language="java"><code class="language-java">æ˜¯ä¸æ˜¯åŒä¸€ä¸ªï¼Ÿ<span class="token boolean">true</span></code></pre><p>æ‰€ä»¥ï¼ŒproxyBeanMethod å¯¹è±¡çš„ç”¨é€”ï¼Œå¦‚æœè®¾ç½®æˆ true ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨ MyConfig é…ç½®ç±»ä¸­çš„æ–¹æ³•æ—¶ï¼Œå°±ä¼šå…ˆå»æ‹¿åˆ°è¿™ä¸ª Bean çš„ idï¼Œæ¥ç¡®è®¤è¿™ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯å­˜åœ¨äºå®¹å™¨ä¸­ï¼Œå¦‚æœå­˜åœ¨ä¸å®¹å™¨ä¸­ï¼Œè°ƒç”¨é…ç½®ç±»ä¸­çš„æ–¹æ³•æ—¶å°±ç›´æ¥å»æ‹¿å®¹å™¨ä¸­çš„å¯¹è±¡ã€‚</p><p>å¦‚æœæ˜¯ false ï¼Œå®ƒå°±ä¸ä¼šé€šè¿‡ id å»ç¡®è®¤å®¹å™¨ä¸­æ˜¯å¦å­˜åœ¨è¯¥å¯¹è±¡ï¼Œç›¸å½“äºæ˜¯ç›´æ¥è°ƒç”¨ MyConfig ä¸­çš„æ–¹æ³•è€Œå·²ï¼Œå¹¶ä¸”è¿™ä¸ªæ–¹æ³•è¿”å›çš„å¯¹è±¡å¹¶ä¸æ˜¯ä»å®¹å™¨ä¸­ç›´æ¥è·å–çš„ï¼Œè€Œæ˜¯å•çº¯çš„åœ¨æ–¹æ³•ä¸­ new ä¸€ä¸ªå¯¹è±¡å‡ºæ¥ã€‚æ¯ä¸€æ¬¡ new å‡ºæ¥çš„å¯¹è±¡éƒ½æ˜¯ä¸åŒçš„ã€‚</p><h4 id="ä½¿ç”¨åœºæ™¯-â€“-ç»„ä»¶ä¾èµ–"><a href="#ä½¿ç”¨åœºæ™¯-â€“-ç»„ä»¶ä¾èµ–" class="headerlink" title="ä½¿ç”¨åœºæ™¯ â€“ ç»„ä»¶ä¾èµ–"></a>ä½¿ç”¨åœºæ™¯ â€“ ç»„ä»¶ä¾èµ–</h4><blockquote><p>ç»„ä»¶çš„æ„æ€å°±æ˜¯å®¹å™¨ä¸­æ‰€å®ä¾‹åŒ–çš„å¯¹è±¡ã€‚</p></blockquote><p>ä¸€ä½åå« zhangsan çš„ä¸»äººï¼Œå®ƒåˆšåˆšå…»äº†ä¸€åªç‹—ï¼Œè¿™åªç‹—ç‹—çš„åå­—å« â€tomcatâ€œã€‚åˆšæ²¡å…»å‡ å¤©ï¼Œä¸»äººå°±è¦å›è€å®¶ä¸‰ä¸ªæœˆæœ‰äº‹æƒ…ï¼Œå®ƒåªå¥½å°†è¿™åªç‹—ç‹—æ”¾åˆ°äº†å® ç‰©ä¸´æ—¶æ”¶å…»çš„æœºæ„è¿›è¡Œæ”¶å…»ã€‚ç­‰ä¸»äººå›åˆ°å®¶ï¼Œå›åˆ°å® ç‰©ä¸´æ—¶æ”¶å…»æœºæ„é¢†å–è‡ªå·±çš„å® ç‰©ç‹—ç‹—ã€‚</p><p><img src="/journal/springboot-annotations-ususally/dfjdifjdsi.jpg" alt="7af40ad162d9f2d314edf006abec8a136227cc5f" loading="lazy"></p><p>å›åˆ°å®¶ä¹‹åï¼Œå®ƒå»é¢†å…»ã€‚å® ç‰©ä¸´æ—¶æ”¶å…»æœºæ„ç®¡ç†äººå‘˜å¯èƒ½å°†è¯¥ä¸»äººçš„ç‹—ç‹—ä¿¡æ¯ä¸¢äº†ï¼Œåªè®°å¾—ç‹—ç‹—çš„åå­—ï¼›æˆ–è€…ä¹Ÿæœ‰å¯èƒ½ä»€ä¹ˆéƒ½è®°å¾—ï¼Œç®¡ç†äººå‘˜è¿™ç§è¡Œä¸ºå¯å°†å…¶ç±»æ¯”æˆ proxyBeanMethod å€¼ä¸º false å’ŒproxyBeanMethod å€¼ä¸º true çš„ä¸¤ç§æƒ…å†µã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸»äººæ¥é¢†å–å® ç‰©çš„ä»£ç ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyConfig</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">User</span> zhangsan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        zhangsan<span class="token punctuation">.</span><span class="token function">setPet</span><span class="token punctuation">(</span><span class="token function">pet01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> zhangsan<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Pet</span> <span class="token function">pet01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token string">"tomcat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>å¦‚æœ proxyBeanMethod å€¼ä¸º false æ—¶ï¼Œä¹Ÿå°±æ˜¯ç‹—ç‹—ä¿¡æ¯ä¸¢äº†ï¼Œåªè®°å¾—ç‹—ç‹—çš„åå­—ã€‚æˆ‘ä»¬æ¥éªŒè¯éªŒè¯å·¥ä½œäººå‘˜æ˜¯å¦æ‰¾å¯¹äº†ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// ç»„ä»¶ä¾èµ–ç¤ºä¾‹</span><span class="token class-name">User</span> zhangsan <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// åˆ¤æ–­ç”¨æˆ·çš„å® ç‰©æ˜¯å®¹å™¨ä¸­çš„å® ç‰©å—</span><span class="token class-name">Pet</span> pet1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Pet</span><span class="token punctuation">)</span> run<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"pet01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·zhangsançš„å® ç‰©æ˜¯å®ƒçš„å—ï¼Ÿ"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>zhangsan<span class="token punctuation">.</span><span class="token function">getPet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> pet1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>é‚£ä¹ˆæ‰§è¡Œçš„ç»“æœå¦‚ä¸‹ï¼Œå€¼ä¸º falseã€‚å¾ˆé—æ†¾ï¼Œå·¥ä½œäººå‘˜çš„å¤±èŒè¡Œä¸ºå·²ç»æ˜¯éå¸¸ä¸¥é‡çš„äº†ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">ç”¨æˆ·zhangsançš„å® ç‰©æ˜¯å®ƒçš„å—ï¼Ÿfalse</code></pre><p>å¦‚æœ proxyBeanMethod å€¼ä¸º true æ—¶ï¼Œä¹Ÿå°±æ˜¯ç‹—ç‹—ä¿¡æ¯è¿˜åœ¨ã€‚é‚£ä¹ˆæ‰§è¡Œçš„ç»“æœå¦‚ä¸‹ã€‚å¾ˆå¥½ï¼Œå·¥ä½œäººå‘˜åšçš„ä¸é”™ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">ç”¨æˆ·zhangsançš„å® ç‰©æ˜¯å®ƒçš„å—ï¼Ÿtrue</code></pre><h4 id="ä¾‹å­æ€»ç»“"><a href="#ä¾‹å­æ€»ç»“" class="headerlink" title="ä¾‹å­æ€»ç»“"></a>ä¾‹å­æ€»ç»“</h4><p>proxyBeanMethod ä¸º true æˆ–è€…ä¸º false æ—¶ï¼Œå¯¹åº”çš„æ¨¡å¼å¦‚ä¸‹ã€‚</p><ul><li>Full(proxyBeanMethods = true) â€“ å¦‚æœç»„ä»¶ä¹‹é—´æœ‰ä¾èµ–ï¼Œæœ‰ä¾èµ–çš„å°±è®¾ç½®ä¸º true</li><li>Lite(proxyBeanMethods = false) â€“ å¦‚æœåªæ˜¯å•çº¯çš„åˆ›å»ºç»„ä»¶åˆ°å®¹å™¨ä¸­ï¼Œä¸”ç»„ä»¶ä¹‹é—´å¹¶æ²¡æœ‰ä¾èµ–ã€‚é‚£ä¹ˆå°±è®¾ç½®æˆä¸º false</li></ul><h2 id="Import-æ³¨è§£"><a href="#Import-æ³¨è§£" class="headerlink" title="Import æ³¨è§£"></a>Import æ³¨è§£</h2><p>ç›´æ¥é€šè¿‡è¯¥æ³¨è§£ï¼Œå°†å¯¹è±¡å®ä¾‹åŒ–ä¹‹åä¿å­˜åˆ°å®¹å™¨ä¸­ã€‚èƒ½æ ‡è®°çš„åœ°æ–¹éå¸¸ä¹‹å¤šï¼Œæ¯”å¦‚ SpringBoot çš„ä¸»ç¨‹åºç±»ã€é…ç½®ç±»ã€è¢« Serviceã€Repositoryã€Controller æ ‡è®°çš„åœ°æ–¹éƒ½å¯ä»¥å°†å…¶æ ‡è®°ã€‚</p><p>å­˜åœ¨çš„æ„ä¹‰å°±æ˜¯ï¼Œæœ‰äº›å¯¹è±¡æ˜¯å°è£…åœ¨ä¸€ä¸ªå¤–éƒ¨çš„ jar åŒ…ä¸­çš„ã€‚å°è£…åœ¨ jar åŒ…ä¸­çš„æºä»£ç æ˜¯æ— æ³•ç›´æ¥æ›´æ”¹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ²¡åŠæ³•ç›´æ¥æ ‡è®°è¿™äº› Component ç­‰ç­‰ä¸Šé¢æåŠåˆ°çš„é‚£äº›æ³¨è§£ã€‚æ‰€ä»¥å¯ä»¥é€šè¿‡è¿™ä¸ªæ³¨è§£æ¥å°†å¯¹è±¡ä¿å­˜åˆ°å®¹å™¨ä¸­ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">DBHelper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyConfig</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// coding......</span><span class="token punctuation">&#125;</span></code></pre><p>æµ‹è¯•ä»£ç ï¼š</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// è·å– User ç±»å‹çš„ç»„ä»¶</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> strings <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">getBeanNamesForType</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> string <span class="token operator">:</span> strings<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>run<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">DBHelper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå…¶ä¸­ DBHelper æœ¬èº«å°±æ˜¯æ¥è‡ªäºå¤–éƒ¨çš„ jar åŒ…ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">top.bestguo.bean.Userzhangsanuser02ch.qos.logback.classic.db.DBHelper@6e4ea0bd</code></pre><h2 id="Conditional-æ³¨è§£"><a href="#Conditional-æ³¨è§£" class="headerlink" title="Conditional æ³¨è§£"></a>Conditional æ³¨è§£</h2><p>è¯¥æ³¨è§£ä¹Ÿç§°ä¹‹ä¸ºæ¡ä»¶æ³¨è§£ï¼Œè¯¥æ³¨è§£çš„æ„å›¾å°±æ˜¯åœ¨ç‰¹å®šçš„åœºåˆä¸‹ï¼Œå°†æŸä¸€äº›ç»„ä»¶ç»™ä¿å­˜åˆ°å®¹å™¨ä¸­ã€‚å…¶ä¸­ï¼Œå®ƒçš„è¡ç”Ÿæ³¨è§£æœ‰å¾ˆå¤šç§ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="/journal/springboot-annotations-ususally/QQ%E6%88%AA%E5%9B%BE20210626230931.png" alt="QQæˆªå›¾20210626230931" loading="lazy"></p><h3 id="ConditionalOnBean-æ³¨è§£"><a href="#ConditionalOnBean-æ³¨è§£" class="headerlink" title="ConditionalOnBean æ³¨è§£"></a>ConditionalOnBean æ³¨è§£</h3><p>åœ¨å­¦ä¹ çš„æ—¶å€™å­¦ä¹ åˆ°äº† ConditionalOnBean è¿™ä¸ªæ³¨è§£ï¼Œå®ƒçš„æ„æ€æ˜¯å½“å®¹å™¨ä¸­å­˜åœ¨æŸä¸ªç»„ä»¶æ—¶ï¼Œé‚£ä¹ˆå°±å°†è¿™ä¸ªå¯¹è±¡ç»™å®ä¾‹åŒ–ä¿å­˜åˆ°å®¹å™¨ä¸­ï¼Œå¦åˆ™å°±ä¸è¿›è¡Œä»»ä½•çš„æ“ä½œã€‚</p><p>å®ƒè¢«æ ‡è®°åˆ°é…ç½®ç±»ä¸­æ–¹æ³•ä¸Š</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyConfig</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@ConditionalOnBean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"pet01"</span><span class="token punctuation">)</span> <span class="token comment">// å½“å®¹å™¨ä¸­æœ‰ pet01 çš„æ—¶å€™ï¼Œé‚£ä¹ˆå°±æ³¨å†Œ zhangsan ç»„ä»¶ã€‚</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">User</span> zhangsan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        zhangsan<span class="token punctuation">.</span><span class="token function">setPet</span><span class="token punctuation">(</span><span class="token function">pet01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> zhangsan<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">User</span> lisi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"lisi"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> lisi<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Pet</span> <span class="token function">pet01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token string">"tomcat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Pet</span> <span class="token function">pet02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token string">"tomcat222"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œæµ‹è¯•ä»£ç </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">boolean</span> pet01 <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">containsBean</span><span class="token punctuation">(</span><span class="token string">"pet01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å®¹å™¨ä¸­æœ‰ pet01 ç»„ä»¶å—ï¼Ÿ"</span> <span class="token operator">+</span> pet01<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">boolean</span> pet02 <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">containsBean</span><span class="token punctuation">(</span><span class="token string">"pet02"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å®¹å™¨ä¸­æœ‰ pet02 ç»„ä»¶å—ï¼Ÿ"</span> <span class="token operator">+</span> pet02<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">boolean</span> zhangsan <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">containsBean</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å®¹å™¨ä¸­æœ‰ zhangsan ç»„ä»¶å—ï¼Ÿ"</span> <span class="token operator">+</span> zhangsan<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash">å®¹å™¨ä¸­æœ‰ pet01 ç»„ä»¶å—ï¼Ÿtrueå®¹å™¨ä¸­æœ‰ pet02 ç»„ä»¶å—ï¼Ÿtrueå®¹å™¨ä¸­æœ‰ zhangsan ç»„ä»¶å—ï¼Ÿfalse</code></pre><p>æµ‹è¯•ç»“æœå¾ˆå¥‡æ€ªï¼Œå¹¶æ²¡æœ‰æŒ‰ç…§æˆ‘æƒ³è±¡ä¸­çš„é‚£æ ·å­ï¼Œä¹Ÿå°±æ˜¯ pet01 ç»„ä»¶åˆ›å»ºå®ƒå°±ä¼šåˆ›å»ºã€‚åé¢ç»è¿‡ bilibili çš„å¼¹å¹•ä¸­æ‰çŸ¥é“ï¼Œç»„ä»¶åœ¨è¿›è¡Œæ³¨å†Œçš„è¿‡ç¨‹ä¸­ä¼¼ä¹å’Œé¡ºåºç›¸å…³ã€‚æ‰€ä»¥æ”¹æ”¹é¡ºåºçœ‹çœ‹ï¼Œå°† user01 æ”¾åˆ°æœ€åã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyConfig</span> <span class="token punctuation">&#123;</span>        <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">User</span> lisi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"lisi"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> lisi<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Pet</span> <span class="token function">pet01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token string">"tomcat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Pet</span> <span class="token function">pet02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token string">"tomcat222"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>        <span class="token annotation punctuation">@ConditionalOnBean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"pet01"</span><span class="token punctuation">)</span> <span class="token comment">// å½“å®¹å™¨ä¸­æœ‰ pet01 çš„æ—¶å€™ï¼Œé‚£ä¹ˆå°±æ³¨å†Œ zhangsan ç»„ä»¶ã€‚</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">User</span> zhangsan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        zhangsan<span class="token punctuation">.</span><span class="token function">setPet</span><span class="token punctuation">(</span><span class="token function">pet01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> zhangsan<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå‘ç°è¿™æ‰æ˜¯æˆ‘é¢„æƒ³çš„ç»“æœ</p><pre class="language-bash" data-language="bash"><code class="language-bash">å®¹å™¨ä¸­æœ‰ pet01 ç»„ä»¶å—ï¼Ÿtrueå®¹å™¨ä¸­æœ‰ pet02 ç»„ä»¶å—ï¼Ÿtrueå®¹å™¨ä¸­æœ‰ zhangsan ç»„ä»¶å—ï¼Ÿtrue</code></pre><p>ç›®å‰åªå­¦ä¹ åˆ°è¿™ä¸ªæ³¨è§£ï¼Œåé¢åœ¨å­¦ä¹ åˆ°å…¶å®ƒçš„æ¡ä»¶æ³¨è§£å†æ¥è¿™é‡Œè®°å½•è®°å½•ã€‚</p><h2 id="ImportResource-æ³¨è§£"><a href="#ImportResource-æ³¨è§£" class="headerlink" title="ImportResource æ³¨è§£"></a>ImportResource æ³¨è§£</h2><p>è¿™ä¸ªæ³¨è§£çš„ç”¨é€”æ˜¯åŠ è½½ä¸€ä¸ª Spring çš„ xml é…ç½®æ–‡ä»¶ï¼Œå°† xml æ–‡ä»¶ä¸­é…ç½®å¥½çš„å¯¹è±¡æ”¾å…¥åˆ°å®¹å™¨ä¸­ã€‚</p><p>ä¸»ç¨‹åºç±»</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootApplication</span><span class="token punctuation">(</span>scanBasePackages <span class="token operator">=</span> <span class="token string">"top.bestguo"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@ImportResource</span><span class="token punctuation">(</span><span class="token string">"classpath:bean.xml"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBootApplication</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// Spring IOCå®¹å™¨</span>        <span class="token class-name">ConfigurableApplicationContext</span> run <span class="token operator">=</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringBootApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">boolean</span> haha <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">containsBean</span><span class="token punctuation">(</span><span class="token string">"haha"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å®¹å™¨ä¸­æœ‰ haha ç»„ä»¶å—ï¼Ÿ"</span> <span class="token operator">+</span> haha<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">boolean</span> hehe <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">containsBean</span><span class="token punctuation">(</span><span class="token string">"hehe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å®¹å™¨ä¸­æœ‰ hehe ç»„ä»¶å—ï¼Ÿ"</span> <span class="token operator">+</span> hehe<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>xml é…ç½®æ–‡ä»¶</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.bean.Pet<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>haha<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>haha<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.bean.Pet<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hehe<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hehe<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå‘ç°å·²ç»å¯¼å…¥æˆåŠŸã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">å®¹å™¨ä¸­æœ‰ haha ç»„ä»¶å—ï¼Ÿtrueå®¹å™¨ä¸­æœ‰ hehe ç»„ä»¶å—ï¼Ÿtrue</code></pre><h2 id="ConfigurationProperties-æ³¨è§£"><a href="#ConfigurationProperties-æ³¨è§£" class="headerlink" title="ConfigurationProperties æ³¨è§£"></a>ConfigurationProperties æ³¨è§£</h2><p>åœ¨æŸä¸ªç±»ä¸Šæ ‡è®°ï¼Œä¸”è®¾ç½®å®Œ prefix å‰ç¼€ä¹‹åï¼Œå¯ä»¥åœ¨ application.properties é…ç½®æ–‡ä»¶çš„å±æ€§å€¼æ³¨å…¥åˆ°å®ä¾‹åŒ–ç»„ä»¶ä¸­ã€‚</p><p>æ±½è½¦ç±»</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">ConfigurationProperties</span><span class="token punctuation">;</span><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"mycar"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> brand<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> price<span class="token punctuation">;</span>        <span class="token comment">// coding......</span>    <span class="token punctuation">&#125;</span></code></pre><p>application.properties é…ç½®æ–‡ä»¶</p><pre class="language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">mycar.brand</span><span class="token punctuation">=</span><span class="token attr-value">BMW</span><span class="token attr-name">mycar.price</span><span class="token punctuation">=</span><span class="token attr-value">8000</span></code></pre><p>å½“ç„¶ï¼Œé…ç½®å®Œæˆä¹‹åéœ€è¦åœ¨ä¸»ç¨‹åºç±»ä¸Šæ ‡è®°ä¸€ä¸ª EnableConfigurationProperties æ³¨è§£ï¼Œç„¶åä¼ å…¥ â€ç±»å.classâ€œ å³å¯ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@ImportResource</span><span class="token punctuation">(</span><span class="token string">"classpath:bean.xml"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">Car</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">// ä¼ å…¥â€ç±»å.classâ€œ </span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token punctuation">(</span>scanBasePackages <span class="token operator">=</span> <span class="token string">"top.bestguo"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBootApplication</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// coding......</span><span class="token punctuation">&#125;</span></code></pre><p>é€šè¿‡ Web æ¨¡å—è®¿é—®ï¼Œçœ‹çœ‹èƒ½å¦æ­£å¸¸å¾—åˆ°ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/car"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@ResponseBody</span><span class="token keyword">public</span> <span class="token class-name">Car</span> <span class="token function">car</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> car<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œé…ç½®æ–‡ä»¶ä¸­çš„å€¼å·²ç»æˆåŠŸæ³¨å…¥è¿›æ¥äº†ã€‚</p><p><img src="/journal/springboot-annotations-ususally/QQ%E6%88%AA%E5%9B%BE20210626235311.png" alt="QQæˆªå›¾20210626235311" loading="lazy"></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> SpringBoot å¼€å‘å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç«™è¿ç§»å·¥ä½œå°è®°</title>
      <link href="/journal/website-migrate/"/>
      <url>/journal/website-migrate/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä»Šå¤©è‡ªå·±çš„é˜¿é‡Œäº‘çš„è½»é‡çº§äº‘æœåŠ¡å™¨å³å°†åˆ°æœŸï¼Œå‡†å¤‡å»ç»­è´¹ï¼Œå‘ç°ç»­è´¹çš„æ—¶å€™æ²¡æœ‰å­¦ç”Ÿä¼˜æƒ äº†ã€‚ä¸€ä¸ªæœˆçš„è¯å°±è¦ä¸ªå‡ ç™¾å…ƒï¼Œå¯¹äºæˆ‘æ¥è¯´è¿™æ¯«æ— ç–‘é—®æ˜¯ä¸€ç§éå¸¸å¤§çš„æ”¯å‡ºï¼Œéå¸¸å¾—ä¸å¿å¤±ã€‚æ‰€ä»¥ï¼Œä»Šå¤©åšäº†ä¸€ä¸ªéå¸¸é‡è¦çš„å†³å®šï¼Œå°±æ˜¯å°†è‡ªå·±çš„å°ç«™æ‰˜ç®¡åˆ°å›½å¤–çš„ç½‘ç«™æ‰˜ç®¡æœåŠ¡ä¸Šã€‚</p><p>GitHub Pages è™½ç„¶æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œä¸è¿‡ï¼Œå®ƒç»å¤§å¤šæ•°æ—¶å€™æ˜¯æŠ½é£çš„çŠ¶æ€ã€‚æ‰€ä»¥æˆ‘é€‰æ‹© Vercel æ¥å°†è‡ªå·±çš„ä¸ªäººç«™ç‚¹è¿›è¡Œæ‰˜ç®¡ï¼ŒåŠ ä¸Šè‡ªå·±çš„ç«™ç‚¹ç»è¿‡äº† CDN çš„åŠ é€Ÿï¼Œè®¿é—®é€Ÿåº¦åº”è¯¥ä¸ä¼šå—åˆ°å¤ªå¤§çš„å½±å“ã€‚</p><p>å…ˆèµ¶ç´§ç»™å®ƒåŠå®Œï¼ŒåæœŸçš„å°å­¦æœŸçš„äº‹æƒ…åˆä¼šå¤šèµ·æ¥ã€‚ğŸ˜‡ğŸ˜‡</p><p><img src="/journal/website-migrate/thumb-1920-913081.png" alt="website-migrate" loading="lazy"></p><span id="more"></span><p>ä¼šè®¡ä¸€å®šèƒ½è¿‡çš„ ğŸ¤—</p><p>ä¼šè®¡ä¸€å®šèƒ½è¿‡çš„ ğŸ¤—</p><p>ä¼šè®¡ä¸€å®šèƒ½è¿‡çš„ ğŸ¤—</p><p>ä¼šè®¡ä¸€å®šèƒ½è¿‡çš„ ğŸ¤—</p><h2 id="è¿ç§»åˆ°-Vercel"><a href="#è¿ç§»åˆ°-Vercel" class="headerlink" title="è¿ç§»åˆ° Vercel"></a>è¿ç§»åˆ° Vercel</h2><blockquote><p>Vercel éœ€è¦ç”¨ä½ çš„ GitHub è´¦å·ï¼ŒGitLab è´¦å·æ¥è¿›è¡Œç»‘å®šã€‚è¿™æ ·å°±å¯ä»¥æ­£å¸¸çš„å°†ä»“åº“ä¸­çš„ä»£ç ç›´æ¥è‡ªåŠ¨éƒ¨ç½²åˆ° Vercel ä¸Šé¢äº†</p></blockquote><h3 id="é€‰æ‹©æ¨¡æ¿"><a href="#é€‰æ‹©æ¨¡æ¿" class="headerlink" title="é€‰æ‹©æ¨¡æ¿"></a>é€‰æ‹©æ¨¡æ¿</h3><p>ç™»å½•åˆ° Vercel ï¼Œåˆ›å»ºä¸€ä¸ªé¡¹ç›®å¹¶ä¸”é€‰æ‹©ä¸€ä¸ªæ¨¡æ¿ã€‚æˆ‘çš„å°ç«™æ˜¯ç”± Hexo æ¥è¿›è¡Œæ„å»ºçš„ï¼Œæ‰€ä»¥å°±é€‰æ‹© Hexo å°±å¥½äº†ã€‚</p><p><img src="/journal/website-migrate/1243431.png" alt="website-migrate" loading="lazy"></p><p>é€‰æ‹©ä¸ªäººè´¦æˆ·ï¼Œä¸‹ä¸€æ­¥ã€‚</p><p><img src="/journal/website-migrate/12121344.png" alt="website-migrate" loading="lazy"></p><p>è¾“å…¥ GitHub çš„ä»“åº“åå¹¶è®¾ç½®ä¸ºç§æœ‰ã€‚æ¯•ç«Ÿé‚£äº›æºæ–‡ä»¶è¿˜æ˜¯ä¸æƒ³è®©åˆ«äººçœ‹åˆ°ã€‚å˜¿å˜¿ã€‚</p><p><img src="/journal/website-migrate/X%5BY%5D(%5D)8E%7B4LMLGG8~M5@8X.png" alt="website-migrate" loading="lazy"></p><p>ç„¶åç‚¹å‡»éƒ¨ç½²ï¼Œå¯¹å•¦ã€‚é¡¹ç›®åå¯ä»¥ä¿®æ”¹çš„</p><p><img src="/journal/website-migrate/QQ%E6%88%AA%E5%9B%BE20210625001851.png" alt="QQæˆªå›¾20210625001851" loading="lazy"></p><p>ç­‰å¾…éƒ¨ç½²å®Œã€‚</p><p><img src="/journal/website-migrate/QQ%E6%88%AA%E5%9B%BE20210625002221.png" alt="QQæˆªå›¾20210625001851" loading="lazy"></p><p>éƒ¨ç½²å®Œæˆä¹‹åï¼Œå°±å¯ä»¥è®¿é—®æˆ‘ä»¬çš„ Demo ç•Œé¢äº†ã€‚</p><p><img src="/journal/website-migrate/QQ%E6%88%AA%E5%9B%BE20210625002537.png" alt="QQæˆªå›¾20210625001851" loading="lazy"></p><h3 id="å…‹éš†ä»“åº“"><a href="#å…‹éš†ä»“åº“" class="headerlink" title="å…‹éš†ä»“åº“"></a>å…‹éš†ä»“åº“</h3><p>å…ˆå°† GitHub ä¸Šçš„è‡ªåŠ¨ç”Ÿæˆçš„ç»™å…‹éš†ä¸‹æ¥ï¼Œä½¿ç”¨ <code>git clone https://github.com/xxxxxxx</code> å°†ä»“åº“ä¸Šçš„ä»£ç ä¸‹è½½ä¸‹æ¥ã€‚</p><p>ç”±äºè‡ªå·±ä¹‹å‰æœ‰ä¸€ä¸ª gitee çš„å…¬é’¥ï¼Œæ‰€ä»¥è¿˜è¦å†æ·»åŠ ä¸€ä¸ªã€‚æ·»åŠ  SSH å…¬é’¥å¯ä»¥çœ‹çœ‹è¿™é‡Œ â€“ <a href="https://www.bestguo.top/2021/04/19/How-do-you-configure-ssh-in-your-pc/">å¦‚ä½•ç®¡ç†ä½ çš„å¤šä¸ª SSH key</a></p><p>æ·»åŠ å®Œæˆä¹‹åå°±å¯ä»¥æ­£å¸¸çš„å…‹éš†ä¸‹æ¥äº†ã€‚ç„¶åæˆ‘åˆé‡æ–°è¯•äº†æäº¤ï¼Œä¹Ÿæ˜¯èƒ½æ­£å¸¸çš„ä½¿ç”¨ï¼Œä¸è¿‡å¾ˆå¥‡æ€ªçš„æ˜¯æˆ‘åœ¨æ‰§è¡Œ <code>ssh -T BestGuo2020@github.com</code> è¯´è¿æ¥è¢«æ‹’ç»ï¼Œå¥½å¥‡æ€ª ğŸ¤”ğŸ¤”</p><pre class="language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">ssh</span> -T BestGuo2020@github.comBestGuo2020@github.com: Permission denied <span class="token punctuation">(</span>publickey<span class="token punctuation">)</span>.</code></pre><p>ä¸è¿‡è¿™æ²¡å…³ç³»ï¼Œèƒ½å¤Ÿæäº¤å°±å¥½äº†ã€‚</p><h3 id="ä¿®æ”¹ä¸€äº›ä¸œè¥¿"><a href="#ä¿®æ”¹ä¸€äº›ä¸œè¥¿" class="headerlink" title="ä¿®æ”¹ä¸€äº›ä¸œè¥¿"></a>ä¿®æ”¹ä¸€äº›ä¸œè¥¿</h3><p>ç”±äºå…‹éš†ä¸‹æ¥çš„ï¼Œå¦‚æœå°†æˆ‘åŸæœ‰çš„æ—¥å¿—å…¨éƒ¨å¤åˆ¶åˆ°é‚£ä¸ªæˆ‘ clone ä¸‹æ¥çš„é¡¹ç›®ä¸­ï¼Œæœ‰ç‚¹æµªè´¹æ—¶é—´ã€‚æ‰€ä»¥ç›´æ¥å°† clone ä¸‹æ¥çš„é¡¹ç›®ï¼Œå¤åˆ¶å‡ ä¸ªæ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹å³å¯ã€‚</p><p><img src="/journal/website-migrate/QQ%E6%88%AA%E5%9B%BE20210625094335.png" alt="QQæˆªå›¾20210625094335.png" loading="lazy"></p><p>å½“ç„¶ï¼Œ _config.yml è¿™ä¸ªé…ç½®æ–‡ä»¶éœ€è¦æ‰“å¼€ï¼Œå°†æˆ‘åŸæ¥é¡¹ç›®ä¸­çš„ _config.yml è¿™ä¸ªé…ç½®æ–‡ä»¶è¿›è¡Œä¸€ä¸ªå¯¹ç…§è¿˜æ˜¯éœ€è¦ä¿®æ”¹çš„ã€‚ä¸»è¦è¿˜æ˜¯åœ¨éƒ¨ç½²çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å°±æŒ‰ç…§ä»ä»“åº“ä¸­æ‹‰å–ä¸‹æ¥çš„éƒ¨ç½²å»é…ç½®å³å¯ã€‚</p><p>ä¸‹é¢æ˜¯æˆ‘åŸæ¥çš„é…ç½®</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># Deployment</span><span class="token comment">## Docs: https://hexo.io/docs/one-command-deployment</span><span class="token key atrule">deploy</span><span class="token punctuation">:</span>  <span class="token key atrule">type</span><span class="token punctuation">:</span> git  <span class="token key atrule">repo</span><span class="token punctuation">:</span> git@xxxxxxxxxx<span class="token punctuation">:</span>/home/git/xiaohehe_site  <span class="token key atrule">branch</span><span class="token punctuation">:</span> master</code></pre><p>ç°åœ¨è¦æ”¹æˆè¿™æ ·</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># Deployment</span><span class="token comment">## Docs: https://hexo.io/docs/one-command-deployment</span><span class="token key atrule">deploy</span><span class="token punctuation">:</span>  type<span class="token punctuation">:</span></code></pre><p>å—¯ğŸ¤”ï¼Œè¿˜è¦å°† .git çš„æ–‡ä»¶å¤¹ã€.gitignore å’Œ .vercelignore ç»™å¤åˆ¶åˆ°æˆ‘çš„åŸé¡¹ç›®ä¸­ã€‚</p><h3 id="éƒ¨ç½²é˜¶æ®µ"><a href="#éƒ¨ç½²é˜¶æ®µ" class="headerlink" title="éƒ¨ç½²é˜¶æ®µ"></a>éƒ¨ç½²é˜¶æ®µ</h3><p>æœ€åå¯ä»¥å¼€å§‹æäº¤ä»£ç åˆ°è¿œç¨‹ä»“åº“äº†ã€‚ä¸è¿‡æˆ‘åœ¨æäº¤åˆ°è¿œç¨‹ä»“åº“çš„æ—¶å€™ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ã€‚ä¸‹é¢æ˜¯æ§åˆ¶å°è¾“å‡ºçš„è­¦å‘Šã€‚è¿™ä¸ªè­¦å‘Šæ˜¯æˆ‘çš„ git é¡¹ç›®ä¸­è¿˜æœ‰ä¸€ä¸ª git é¡¹ç›®ï¼Œæ‰€ä»¥å°±å‡ºç°äº†è¿™ä¸ªè­¦å‘Šã€‚</p><p>å› ä¸º Hexo çš„ç¬¬ä¸‰æ–¹ä¸»é¢˜ä¹Ÿæ˜¯ä¸€ä¸ª git é¡¹ç›®ã€‚</p><pre class="language-none"><code class="language-none">hint: You&#39;ve added another git repository inside your current repository.hint: Clones of the outer repository will not contain the contents ofhint: the embedded repository and will not know how to obtain it.hint: If you meant to add a submodule, use:hint: hint:   git submodule add &lt;url&gt; themes&#x2F;yunhint: hint: If you added this path by mistake, you can remove it from thehint: index with:hint: hint:   git rm --cached themes&#x2F;yunhint: hint: See &quot;git help submodule&quot; for more information.</code></pre><p>æ‰€ä»¥éœ€è¦åšçš„æ˜¯ï¼Œå…ˆæ¸…ç©ºæš‚å­˜åŒºä¸­çš„ themes/yun ï¼Œç„¶åå°† yun è¿™ä¸ªæ–‡ä»¶å¤¹ç»™æ·»åŠ è¿›æ¥ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> <span class="token function">rm</span> --cached themes/yun<span class="token function">git</span> <span class="token function">add</span> themes/yun/</code></pre><p>è§£å†³åŠæ³•å‚ç…§äº <a href="https://cloud.tencent.com/developer/article/1583762">gitä»“åº“åŒ…å«å­ä»“åº“æ—¶ï¼ŒaddæŠ¥é”™çš„è§£å†³åŠæ³•</a></p><p>ç„¶åæˆ‘ä»¬æäº¤è¯•è¯•çœ‹ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½æ­£ç¡®çš„éƒ¨ç½²æˆåŠŸã€‚</p><p><img src="/journal/website-migrate/QQ%E6%88%AA%E5%9B%BE20210625102537.png" alt="QQæˆªå›¾20210625102537.png" loading="lazy"></p><p>çœ‹èµ·æ¥æ˜¯éƒ¨ç½²æˆåŠŸäº†ï¼Œä½†æ˜¯å¾ˆå¤šæ—¥å¿—ä¸­çš„å›¾ç‰‡éƒ½æ²¡æœ‰å…¨éƒ¨å±•ç¤ºå‡ºæ¥ã€‚ç„¶åå† Vercel çš„æ—¥å¿—ï¼ˆéƒ¨åˆ†å†…å®¹ï¼‰ä¸­å‘ç°è¿™äº›å›¾ç‰‡çš„é“¾æ¥è¢«æŒ‡å‘äº†ä¸€ä¸ªæœªçŸ¥çš„åœ°æ–¹ã€‚</p><pre class="language-log" data-language="log"><code class="language-log">11:15:23.350  update link as:--&gt;&#x2F;.top&#x2F;&#x2F;2007786.jpg11:15:23.352  update link as:--&gt;&#x2F;.top&#x2F;&#x2F;QQ%E6%88%AA%E5%9B%BE20210419200043.jpg11:15:23.352  update link as:--&gt;&#x2F;.top&#x2F;&#x2F;QQ%E6%88%AA%E5%9B%BE20210419201526.jpg11:15:23.353  update link as:--&gt;&#x2F;.top&#x2F;&#x2F;QQ%E6%88%AA%E5%9B%BE20210419201708.jpg11:15:23.353  update link as:--&gt;&#x2F;.top&#x2F;&#x2F;QQ%E6%88%AA%E5%9B%BE20210419203658.jpg11:15:23.353  update link as:--&gt;&#x2F;.top&#x2F;&#x2F;QQ%E6%88%AA%E5%9B%BE20210419203715.jpg11:15:23.353  update link as:--&gt;&#x2F;.top&#x2F;&#x2F;QQ%E6%88%AA%E5%9B%BE20210419205135.jpg11:15:23.353  update link as:--&gt;&#x2F;.top&#x2F;&#x2F;QQ%E6%88%AA%E5%9B%BE20210419205204.jpg</code></pre><p>åé¢è¿™ä¸ªé—®é¢˜è¢«æˆ‘å›°æ‰°äº†åŠå¤©ï¼Œå¤´éƒ½ç§ƒäº†ğŸ˜­ğŸ˜­ğŸ˜­ï¼Œç„¶ååé¢æ®æˆ‘æ‰€çŸ¥ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯ hexo-asset-tag è¿™ä¸ªæ’ä»¶æœ‰é—®é¢˜ï¼Œè¿™ä¸ªæ’ä»¶åœ¨ä¸¤å¹´å‰å°±å·²ç»æå‡ºã€‚å…·ä½“è¯·çœ‹è¿™ä¸ª GitHub ä¸Šçš„ <a href="https://github.com/xcodebuild/hexo-asset-image/issues/47">issue</a></p><p>ä½†æ˜¯ã€ä½†æ˜¯ï¼Œæˆ‘è¿˜å‘ç°åˆ«äººå·²ç»æŠŠä¿®æ”¹å¥½çš„ç‰ˆæœ¬ä¸Šä¼ åˆ° GitHub å¹¶ä¸”èƒ½å¤Ÿä½¿ç”¨ npm æ¥å®‰è£…ã€‚å¤ªå¯¹äº†å“¥ï¼Œå“¥å¤ªå¯¹ï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆï¼Œæˆ‘è¿˜ä»¥ä¸ºæ²¡æ•‘äº†ã€‚æ‰€ä»¥ï¼Œåœ¨ package.json ä¸­çš„ dependencies çš„ hexo-asset-image çš„ä¾èµ–æ”¹æˆå¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>    <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token property">"@bwqdxxg/hexo-asset-image"</span><span class="token operator">:</span> <span class="token string">"^0.1.1"</span><span class="token punctuation">,</span>        <span class="token property">"hexo"</span><span class="token operator">:</span> <span class="token string">"^5.0.0"</span><span class="token punctuation">,</span>        <span class="token property">"hexo-deployer-git"</span><span class="token operator">:</span> <span class="token string">"^3.0.0"</span><span class="token punctuation">,</span>        <span class="token property">"hexo-generator-archive"</span><span class="token operator">:</span> <span class="token string">"^1.0.0"</span><span class="token punctuation">,</span>        <span class="token property">"hexo-generator-category"</span><span class="token operator">:</span> <span class="token string">"^1.0.0"</span><span class="token punctuation">,</span>        <span class="token property">"hexo-generator-index"</span><span class="token operator">:</span> <span class="token string">"^2.0.0"</span><span class="token punctuation">,</span>        <span class="token property">"hexo-generator-tag"</span><span class="token operator">:</span> <span class="token string">"^1.0.0"</span><span class="token punctuation">,</span>        <span class="token property">"hexo-render-pug"</span><span class="token operator">:</span> <span class="token string">"^2.1.4"</span><span class="token punctuation">,</span>        <span class="token property">"hexo-renderer-ejs"</span><span class="token operator">:</span> <span class="token string">"^1.0.0"</span><span class="token punctuation">,</span>        <span class="token property">"hexo-renderer-marked"</span><span class="token operator">:</span> <span class="token string">"^4.0.0"</span><span class="token punctuation">,</span>        <span class="token property">"hexo-renderer-stylus"</span><span class="token operator">:</span> <span class="token string">"^2.0.0"</span><span class="token punctuation">,</span>        <span class="token property">"hexo-server"</span><span class="token operator">:</span> <span class="token string">"^2.0.0"</span><span class="token punctuation">,</span>        <span class="token property">"hexo-tag-aplayer"</span><span class="token operator">:</span> <span class="token string">"^3.0.4"</span><span class="token punctuation">,</span>        <span class="token property">"hexo-theme-landscape"</span><span class="token operator">:</span> <span class="token string">"^0.0.3"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æ”¹å®Œä¹‹åï¼Œç„¶åæˆ‘ä»¬é‡æ–°ä¸Šä¼ åˆ° GitHub ä¸Šè®©ä»–è‡ªåŠ¨éƒ¨ç½²çœ‹çœ‹å›¾ç‰‡èƒ½å¦æ­£å¸¸æ˜¾ç¤ºã€‚çœ‹ï¼Œå›¾ç‰‡å¯ä»¥æ­£å¸¸çš„æ˜¾ç¤ºäº†ã€‚</p><p><img src="/journal/website-migrate/QQ%E6%88%AA%E5%9B%BE20210625163004.png" loading="lazy"></p><p>ç„¶åæˆ‘ä»¬å†çœ‹çœ‹ Vercel çš„æ—¥å¿—è¾“å‡ºæƒ…å†µï¼ˆéƒ¨åˆ†å†…å®¹ï¼‰ï¼Œå‘ç°å›¾ç‰‡çš„æŒ‡å‘å·²ç»æ­£å¸¸äº†ã€‚</p><pre class="language-log" data-language="log"><code class="language-log">16:28:21.331  update link as:--&gt;&#x2F;2021&#x2F;04&#x2F;19&#x2F;How-do-you-configure-ssh-in-your-pc&#x2F;2007786.jpg16:28:21.334  update link as:--&gt;&#x2F;2021&#x2F;04&#x2F;19&#x2F;How-do-you-configure-ssh-in-your-pc&#x2F;QQ%E6%88%AA%E5%9B%BE20210419200043.jpg16:28:21.334  update link as:--&gt;&#x2F;2021&#x2F;04&#x2F;19&#x2F;How-do-you-configure-ssh-in-your-pc&#x2F;QQ%E6%88%AA%E5%9B%BE20210419201526.jpg16:28:21.334  update link as:--&gt;&#x2F;2021&#x2F;04&#x2F;19&#x2F;How-do-you-configure-ssh-in-your-pc&#x2F;QQ%E6%88%AA%E5%9B%BE20210419201708.jpg16:28:21.334  update link as:--&gt;&#x2F;2021&#x2F;04&#x2F;19&#x2F;How-do-you-configure-ssh-in-your-pc&#x2F;QQ%E6%88%AA%E5%9B%BE20210419203658.jpg16:28:21.334  update link as:--&gt;&#x2F;2021&#x2F;04&#x2F;19&#x2F;How-do-you-configure-ssh-in-your-pc&#x2F;QQ%E6%88%AA%E5%9B%BE20210419203715.jpg16:28:21.334  update link as:--&gt;&#x2F;2021&#x2F;04&#x2F;19&#x2F;How-do-you-configure-ssh-in-your-pc&#x2F;QQ%E6%88%AA%E5%9B%BE20210419205135.jpg16:28:21.335  update link as:--&gt;&#x2F;2021&#x2F;04&#x2F;19&#x2F;How-do-you-configure-ssh-in-your-pc&#x2F;QQ%E6%88%AA%E5%9B%BE20210419205204.jpg</code></pre><p>æ­¤æ—¶ï¼Œå°ç«™å·²ç»æˆåŠŸè¿ç§»åˆ°ä»£ç ä»“åº“ä¸­ã€‚</p><h2 id="æå‡è®¿é—®é€Ÿåº¦"><a href="#æå‡è®¿é—®é€Ÿåº¦" class="headerlink" title="æå‡è®¿é—®é€Ÿåº¦"></a>æå‡è®¿é—®é€Ÿåº¦</h2><p>è¯´åˆ°ç»™è‡ªå·±çš„ç½‘ç«™åŠ é€Ÿï¼Œå°±å¯ä»¥ä½¿ç”¨ CDN æ¥è¿›è¡ŒåŠ é€Ÿã€‚å¦‚æœä½¿ç”¨å›½å†…çš„ CDN çš„è¯ï¼Œé‚£ä¹ˆéœ€è¦å°†ä½ è¦åŠ é€Ÿçš„ç½‘ç«™è¿›è¡Œ ICP å¤‡æ¡ˆæ‰èƒ½ä½¿ç”¨å›½å†…çš„ CDN æœåŠ¡ã€‚</p><p>æˆ‘è‡ªå·±çš„å°ç«™æ˜¯æœ‰ç»è¿‡ ICP å¤‡æ¡ˆå¹¶ä¸”ä½¿ç”¨æŸæ‹äº‘è¿›è¡ŒåŠ é€Ÿã€‚è¿™ä¹Ÿå¯¹å¢ƒå†…çš„ç”¨æˆ·ä¹Ÿéå¸¸å¥½çš„ï¼Œè®¿é—®é€Ÿåº¦ä¹Ÿä¼šéå¸¸çš„å¿«ã€‚</p><h3 id="å›æºå‡ºç°é—®é¢˜"><a href="#å›æºå‡ºç°é—®é¢˜" class="headerlink" title="å›æºå‡ºç°é—®é¢˜"></a>å›æºå‡ºç°é—®é¢˜</h3><p>ä¸è¿‡æˆ‘ä»Šæ™šåˆè¯•äº†è¯•ï¼Œå‘ç°åˆæ‹äº‘åœ¨å›æºåˆ° Vercel çš„æ—¶å€™ï¼Œå›æºä¸äº†ã€‚ç»äº†å‘€ğŸ˜¢ğŸ˜¢</p><p>çœ‹æ¥åªå¥½å…ˆ Vercel ä½œä¸ºè‡ªå·±çš„å¤‡ç”¨ç«™ç‚¹ï¼Œåªå¥½ç”¨ GitHub Page é…åˆ CDN æ¥ä½œä¸ºä¸»ç«™ç‚¹äº†ã€‚</p><h3 id="éƒ¨ç½²åˆ°-GitHub-Page"><a href="#éƒ¨ç½²åˆ°-GitHub-Page" class="headerlink" title="éƒ¨ç½²åˆ° GitHub Page"></a>éƒ¨ç½²åˆ° GitHub Page</h3><p>ä»¥åï¼ŒGitHub Page å°±å°†æ˜¯æˆ‘çš„ä¸»ç«™äº†ã€‚</p><p>GitHub Pages éœ€è¦å°†ä»£ç ä»“åº“å…¬å¼€æ‰èƒ½å¤Ÿä½¿ç”¨ã€‚å…ˆåˆ›å»ºä¸€ä¸ªåå­—ä¸º BestGuo2020.github.io çš„ä»“åº“ï¼Œè¿™æ˜¯ä¸€ä¸ªå›ºå®šçš„è§„åˆ™ã€‚ç„¶ååˆéœ€è¦æ”¹ä¸€æ”¹ _config.yml çš„é…ç½®æ–‡ä»¶</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">deploy</span><span class="token punctuation">:</span>  <span class="token key atrule">type</span><span class="token punctuation">:</span> git  <span class="token key atrule">repo</span><span class="token punctuation">:</span> git@github.com<span class="token punctuation">:</span>BestGuo2020/BestGuo2020.github.io.git  <span class="token key atrule">branch</span><span class="token punctuation">:</span> master</code></pre><p>æœ€åä½¿ç”¨ hexo dï¼Œå°† .deploy_git ä¸­çš„ä»£ç ç»™ push åˆ°è¯¥ä»“åº“ä¸­ã€‚push å®Œæˆä¹‹åå°±èƒ½çœ‹åˆ°è¿™é‡Œé¢çš„å†…å®¹äº†ã€‚</p><p><img src="/journal/website-migrate/QQ%E6%88%AA%E5%9B%BE20210625214029.png" loading="lazy"></p><p>è®¾ç½®ä¸€ä¸‹ A è®°å½•ï¼Œæˆ‘çš„æ ¹åŸŸåè¿˜æ²¡æœ‰åˆ©ç”¨åˆ°ï¼Œå°±å°†æˆ‘çš„æ ¹åŸŸå bestguo.top æŒ‡å‘åˆ° GitHub page ä¸­çš„ä¸€ä¸ª ip åœ°å€ã€‚</p><p><img src="/journal/website-migrate/QQ%E6%88%AA%E5%9B%BE20210625215114.png" loading="lazy"></p><p>ç„¶ååœ¨ GitHub Page ä»“åº“ä¸­çš„è®¾ç½®é‡Œé¢ï¼Œè‡ªå®šä¹‰åŸŸåï¼Œè¿™é‡Œè®¾ç½®çš„åŸŸåç±»ä¼¼äºè·³è½¬åˆ° <a href="http://www.bestguo.top/">www.bestguo.top</a> è¿™ä¸ªç½‘é¡µè¿™ä¸ªæ„æ€å§ã€‚æ¯”å¦‚æˆ‘è¾“å…¥ bestguo.top å°±ä¼šè‡ªåŠ¨é‡å®šå‘åˆ° <a href="http://www.bestguo.top/">www.bestguo.top</a> ã€‚</p><p><img src="/journal/website-migrate/ffdfdf.png" loading="lazy"></p><p>å¾…ä»–è‡ªåŠ¨éƒ¨ç½²å®Œæˆä¹‹åï¼Œå†æ¬¡è®¿é—®ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨ <a href="https://www.bestguo.top/">https://www.bestguo.top</a> è®¿é—®äº†ï¼Œä½¿ç”¨è¿™äº› <a href="http://bestguo.topã€https//bestguo.top">http://bestguo.topã€https://bestguo.top</a> éƒ½å°†ä¼šè‡ªåŠ¨é‡å®šå‘åˆ°æœ€å‰é¢çš„åŸŸåã€‚</p><p><img src="/journal/website-migrate/QQ%E6%88%AA%E5%9B%BE20210625220159.png" loading="lazy"></p><h2 id="æœ€åçš„æ”¶å°¾å·¥ä½œ"><a href="#æœ€åçš„æ”¶å°¾å·¥ä½œ" class="headerlink" title="æœ€åçš„æ”¶å°¾å·¥ä½œ"></a>æœ€åçš„æ”¶å°¾å·¥ä½œ</h2><p>çªç„¶æƒ³åˆ°ä¸€ä¸ªæ›´ç®€åŒ–çš„æ“ä½œï¼Œåœ¨æäº¤æ•´ä¸ªæºé¡¹ç›®åˆ° GitHub çš„æ—¶å€™ä¼šè‡ªåŠ¨æ„å»ºå˜›ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™åœ¨ä»–è‡ªåŠ¨æ„å»ºçš„æ—¶å€™æ‰§è¡Œä¸€ä¸‹ hexo deploy å‘½ä»¤ï¼Œå°±å¯ä»¥å°† .deploy_git ä¸­çš„æ–‡ä»¶æ¨é€åˆ° GitHub Pages ä¸­ï¼Œè¿™æ ·åº”è¯¥æ˜¯èƒ½è¡Œçš„ã€‚è¯•è¯•çœ‹ã€‚</p><p>è¡Œå§ï¼Œä»–å±…ç„¶æŠ¥é”™äº†ã€‚å› ä¸º Vercel ä¸­æ²¡æœ‰ç§é’¥å‘€ï¼Œæ‰€ä»¥å†éƒ¨ç½²åˆ° GitHub Pages ä¸­æ—¶ï¼Œæ‰ä¼šçˆ†å‡ºä¸¥é‡çš„é”™è¯¯ã€‚</p><p><img src="/journal/website-migrate/QQ%E6%88%AA%E5%9B%BE20210625221716.png" alt="QQæˆªå›¾20210625221716" loading="lazy"></p><p>çœ‹æ¥ç›®å‰è¦æäº¤ä¸¤æ¬¡ï¼Œä¸€ä¸ªæ˜¯ GitHub Pagesï¼Œå¦å¤–ä¸€ä¸ªæ˜¯ Vercel äº†ã€‚</p><h3 id="å¥‡æ€ªçš„-404"><a href="#å¥‡æ€ªçš„-404" class="headerlink" title="å¥‡æ€ªçš„ 404"></a>å¥‡æ€ªçš„ 404</h3><p>å½“æˆ‘ç‚¹å¼€æˆ‘å†™çš„æ–‡ç« æ—¶ï¼Œçªç„¶å°± 404 äº†ã€‚</p><p><img src="/journal/website-migrate/QQ%E6%88%AA%E5%9B%BE20210625224356.png" alt="QQæˆªå›¾20210625224356" loading="lazy"></p><p>ç™¾åº¦äº†è§£äº†ä¸€ä¸‹ï¼Œéœ€è¦å°† CNAME æ–‡ä»¶æ”¾åˆ°æˆ‘ä»¬çš„ source ç›®å½•ä¸‹å°±å¥½äº†ã€‚</p><p><img src="/journal/website-migrate/QQ%E5%9B%BE%E7%89%8720210625230445.png" alt="QQå›¾ç‰‡20210625230445" loading="lazy"></p><p>æœ€åè®¿é—®ä¸€ä¸‹ï¼Œå¯ä»¥æ­£å¸¸çš„æ˜¾ç¤ºå‡ºæ¥äº†ã€‚</p><p><img src="/journal/website-migrate/QQ%E6%88%AA%E5%9B%BE20210625230650.png" alt="QQæˆªå›¾20210625230650" loading="lazy"></p><p>å¥½äº†ï¼Œå°ç«™è¿ç§»å®Œæˆï¼Œå°†é˜¿é‡Œäº‘çš„æºç«™è¿›è¡Œå…³é—­ï¼Œç«™ç‚¹è¿ç§»å·¥ä½œå·²ç»å…¨éƒ¨ç»“æŸäº†ã€‚</p><p>å¼„äº†ä¸€å¤©äº†ï¼Œæˆ‘ä¹Ÿè¯¥æ­‡ä¼šå„¿äº†ğŸ˜ªğŸ˜ªğŸ˜ªã€‚</p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>ä¸»ç«™ï¼š<a href="https://www.bestguo.top/">https://www.bestguo.top</a> | <a href="https://bestguo.top/">https://bestguo.top</a></p><p>å¤‡ç”¨ï¼š<a href="https://blog.bestguo.top/">https://blog.bestguo.top</a> | <a href="https://bestguo.vercel.app/">https://bestguo.vercel.app/</a></p><p>å‚è€ƒï¼š</p><ul><li><a href="https://www.yunyoujun.cn/note/use-cdn-speed-up-site/">ä½¿ç”¨ CDN åŠ é€Ÿä½ çš„ GitHub Pages ç½‘ç«™</a></li><li><a href="https://zhuanlan.zhihu.com/p/147723106">ä»€ä¹ˆæ˜¯CNAME</a></li><li><a href="https://blog.csdn.net/Belingda/article/details/100635572">github page+hexo ç»‘å®šåŸŸååé¡µé¢æ˜¾ç¤º404</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç«™çš„éƒ¨ç½²ä¸ç»´æŠ¤ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> ç½‘ç«™æ­å»º </tag>
            
            <tag> Vercel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WebSQL ä½¿ç”¨å°è®°</title>
      <link href="/journal/how-to-use-websql/"/>
      <url>/journal/how-to-use-websql/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Web SQL æ˜¯å­˜åœ¨äºæµè§ˆå™¨ç«¯çš„æ•°æ®åº“ï¼Œä½†æ˜¯å®ƒå¹¶æ²¡æœ‰æˆä¸ºæµè§ˆå™¨çš„ä¸€ç§æ ‡å‡†ï¼Œä¸è¿‡ Web SQL æœ‰å±äºè‡ªå·±ç‹¬ç«‹çš„æ ‡å‡†ã€‚å› æ­¤ï¼ŒWeb SQL å¹¶ä¸å­˜åœ¨äºæ‰€æœ‰çš„æµè§ˆå™¨ä¸­ã€‚å°±ç°åœ¨è€Œè¨€ï¼ŒWeb SQL ä»…ä»…å­˜åœ¨äº Google Chromeï¼ˆè°·æ­Œæµè§ˆå™¨ï¼‰ï¼Œä»¥åŠç»å¤§éƒ¨åˆ†åŸºäº Chromium å†…æ ¸çš„æµè§ˆå™¨ï¼Œæ–°ç‰ˆçš„ Microsoft Edgeã€‚Firefoxã€IEã€ä»¥åŠæ—§ç‰ˆçš„ Microsoft Edge éƒ½ä¸æ”¯æŒ Web SQLã€‚</p><p>æ®äº†è§£ï¼ŒWeb SQL æ•°æ®åº“æœ€æ™®éè€Œåˆå•ä¸€å®ç°çš„å±…ç„¶æ˜¯ SQLite ï¼</p><p>æ¯”è¾ƒè¯¦ç»†çš„è§£é‡Šå¯ä»¥çœ‹çœ‹çŸ¥ä¹çš„è¿™ä¸ªç–‘é—® â€œ<a href="https://www.zhihu.com/question/62336018/answer/214613608">sqliteä¸websqlçš„å…³ç³»?</a>â€ã€‚æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨ Web SQL çš„æ—¶å€™å²‚ä¸æ˜¯å°±å¯ä»¥å‚ç…§ SQLite çš„è¯­æ³•åˆ›å»ºæ•°æ®åº“ï¼Œåˆ›å»ºè¡¨ä¹‹ç±»çš„ï¼ŸğŸ§ğŸ§</p><p>æˆ–è€…ä½¿ç”¨æ ‡å‡†çš„ SQL è¯­å¥æ¥åˆ›å»ºï¼Ÿ</p><p>å¸¦ç€è¿™ä¸ªç–‘é—®ï¼Œé‚£å°±å¼€å§‹ Web SQL çš„æ—…ç¨‹å§ã€‚</p><p><img src="/journal/how-to-use-websql/00686t3Xly1fymaeszaqlj31hc0u042f.jpg" alt="ç‹å¦–å°çº¢å¨˜" loading="lazy"></p><span id="more"></span><h2 id="Web-SQL-åœ¨å“ªé‡Œå‘¢"><a href="#Web-SQL-åœ¨å“ªé‡Œå‘¢" class="headerlink" title="Web SQL åœ¨å“ªé‡Œå‘¢"></a>Web SQL åœ¨å“ªé‡Œå‘¢</h2><p>å¦‚æœç»å¸¸æ‰“å¼€ F12 å»æŸ¥çœ‹æ§åˆ¶å°çš„æ¶ˆæ¯æˆ–è€…è¿›è¡Œé¡µé¢è°ƒè¯•ï¼Œé‚£ä¹ˆä½ ä¼šç†Ÿæ‚‰çš„çœ‹åˆ°â€¦â€¦</p><p>å¯¹ï¼Œæ²¡é”™å•¦ï¼å°±æ˜¯æ‰“å¼€ F12ï¼Œæ‰¾åˆ° Applicationï¼Œç„¶åæœ‰ä¸€ä¸ª Web SQLã€‚è¿™é‡Œé¢å°±æœ‰ä¸€ä¸ª Web SQL çš„é€‰é¡¹ã€‚è¿™æ˜¯æœç‹—æµè§ˆå™¨çš„ Web SQL æ‰€åœ¨çš„ä½ç½®ã€‚è°·æ­Œæµè§ˆå™¨ä¹Ÿæ˜¯ä¸€æ ·çš„åœ¨è¿™ä¸ªä½ç½®ã€‚</p><p><img src="/journal/how-to-use-websql/QQ%E6%88%AA%E5%9B%BE20210612165909.png" alt="WebSQLAtSogou" loading="lazy"></p><p>æ–°ç‰ˆçš„ Microsoft Edge å®ƒä¹Ÿæ˜¯åŸºäº Chromium å†…æ ¸çš„ï¼Œæ‰€ä»¥å®ƒä¹Ÿæœ‰ä¸€ä¸ª Web SQLã€‚ä¸è¿‡å®ƒçš„å¼€å‘è°ƒè¯•ç•Œé¢ä¹Ÿå…¨æ˜¯ä¸­æ–‡çš„ã€‚</p><p><img src="/journal/how-to-use-websql/QQ%E6%88%AA%E5%9B%BE20210612170547.png" alt="WebSQLEdge" loading="lazy"></p><h2 id="å¼€å§‹ä½¿ç”¨-Web-SQL"><a href="#å¼€å§‹ä½¿ç”¨-Web-SQL" class="headerlink" title="å¼€å§‹ä½¿ç”¨ Web SQL"></a>å¼€å§‹ä½¿ç”¨ Web SQL</h2><p>Web SQL æœ‰ä¸‰ä¸ªæ ¸å¿ƒçš„æ–¹æ³•ï¼Œä½¿ç”¨èµ·æ¥ä¸ä¼šå¾ˆéš¾ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ã€‚</p><ul><li>openDatabaseï¼šè¯¥æ–¹æ³•æ‰“å¼€ç°æœ‰çš„æ•°æ®åº“ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå’±ä»¬å°±å»ºç«‹ä¸€ä¸ªğŸ˜„ã€‚å®ƒä¼šè¿”å›ä¸€ä¸ªæ•°æ®åº“å¯¹è±¡ã€‚</li><li>transactionï¼šè¯¥æ–¹æ³•å¯ä»¥æ§åˆ¶ä¸€ä¸ªäº‹åŠ¡ï¼Œä»¥åŠæ‰§è¡Œæäº¤æˆ–è€…å›æ»šã€‚</li><li>executeSqlï¼šè¯¥æ–¹æ³•æ˜¯ç”¨äºæ‰§è¡Œ SQL è¯­å¥çš„ã€‚</li></ul><p>æ¥ä¸‹æ¥å°±æ˜¯å¼€å§‹ä½¿ç”¨è¿™äº›æ–¹æ³•çš„æ—¶å€™äº†ã€‚</p><h3 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h3><p>åˆ›å»ºæ•°æ®åº“ä½¿ç”¨ openDatabase è¿›è¡Œåˆ›å»ºï¼Œä¸è¿‡å®ƒæœ‰å‡ ä¸ªå‚æ•°ã€‚</p><ul><li>nameï¼šæ•°æ®åº“åç§°</li><li>versionï¼šç‰ˆæœ¬</li><li>displayNameï¼šæ•°æ®åº“æè¿°</li><li>estimatedSizeï¼šæ•°æ®åº“çš„å¤§å°</li><li>creationCallbackï¼šåˆ›å»ºæ•°æ®åº“æ—¶çš„å›è°ƒå‡½æ•°ã€‚</li></ul><p><img src="/journal/how-to-use-websql/QQ%E5%9B%BE%E7%89%8720210612172412.png" alt="åˆ›å»ºæ•°æ®åº“" loading="lazy"></p><p>åˆ›å»ºæ•°æ®åº“çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> database <span class="token operator">=</span> <span class="token function">openDatabase</span><span class="token punctuation">(</span><span class="token string">"xiaohehe233"</span><span class="token punctuation">,</span> <span class="token string">"0.1"</span><span class="token punctuation">,</span> <span class="token string">"æµ‹è¯•ç”¨çš„æ•°æ®åº“"</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>åˆ›å»ºæˆåŠŸä¹‹åï¼Œåœ¨ Web SQL ä¸­å¯ä»¥çœ‹åˆ°æˆ‘åˆšåˆšåˆ›å»ºçš„æ•°æ®åº“äº†ã€‚</p><p><img src="/journal/how-to-use-websql/QQ%E6%88%AA%E5%9B%BE20210612204546.png" alt="xiaohehe233" loading="lazy"></p><p>ä¸è¿‡å¾ˆå¥‡æ€ªï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°ä¸­çš„å‚æ•°ï¼Œä»…ä»…åªè¿”å›ä¸€ä¸ªç‰ˆæœ¬ï¼Œä¸çŸ¥è¿™æ˜¯ä¸ºä½• ï¼Ÿï¼Ÿï¼Ÿæš‚æ—¶ä¸ç®¡å•¦ï¼Œèƒ½åˆ›å»ºå‡ºæ¥æ‰æ˜¯ç‹é“ã€‚</p><p><img src="/journal/how-to-use-websql/QQ%E6%88%AA%E5%9B%BE20210612204927.png" alt="åˆ›å»ºæ•°æ®åº“" loading="lazy"></p><h3 id="åˆ›å»ºè¡¨"><a href="#åˆ›å»ºè¡¨" class="headerlink" title="åˆ›å»ºè¡¨"></a>åˆ›å»ºè¡¨</h3><p>åœ¨ Web SQL ä¸­ï¼Œæˆ‘ä»¬ç›®å‰æ— æ³•é€šè¿‡å¯è§†åŒ–çš„å·¥å…·æ¥åˆ›å»ºè¡¨ï¼Œéœ€è¦é€šè¿‡ SQL è¯­å¥æ¥åˆ›å»ºè¡¨ã€‚åˆ›å»ºè¡¨çš„æ ‡å‡†ä¸€èˆ¬éƒ½æ˜¯ create tableã€‚</p><p>ä¸è¿‡åœ¨åˆ›å»ºä¹‹å‰ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œæ‰å¯ä»¥æ­£å¸¸çš„å¯¹ SQL è¯­å¥è¿›è¡Œæ“ä½œã€‚äº‹åŠ¡å®ƒæœ‰ä¸‰ä¸ªå‚æ•°ï¼Œè¿™ä¸‰ä¸ªå‚æ•°ä¼ é€’çš„éƒ½æ˜¯å‡½æ•°ã€‚ç¬¬ä¸€ä¸ªä¼ é€’çš„ callback æ˜¯éœ€è¦æ‰§è¡Œ SQL è¯­å¥çš„ï¼Œç¬¬äºŒä¸ªä¼ é€’çš„ callback æ˜¯å»ºè¡¨æ—¶å‡ºç°çš„é”™è¯¯æ˜¯ç”¨æ¥è¿›è¡Œå›è°ƒçš„ï¼Œç¬¬ä¸‰ä¸ªä¼ é€’çš„ callback æ˜¯éœ€è¦æ‰§è¡Œæ­£å¸¸å»ºè¡¨ä¼šè¿›è¡Œå›è°ƒçš„å‡½æ•°ã€‚</p><p><img src="/journal/how-to-use-websql/QQ%E5%9B%BE%E7%89%8720210612205643.png" alt="transaction" loading="lazy"></p><p>ç”±äºç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°æ˜¯ç”¨æ¥æ‰§è¡Œäº‹åŠ¡çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡Œé¢è°ƒç”¨ executeSql æ–¹æ³•æ¥æ‰§è¡Œ SQL è¯­å¥</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¹ æƒ¯çš„å†™æ³•æ¥çœ‹çœ‹ SQL è¯­å¥æ˜¯å¦çœŸæ­£çš„æœ‰æ•ˆã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tx</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    tx<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">            create table phone_book (            phone_number  int  primary key,            name  varchar(20)  not null,            age  int        )</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"åˆ›å»ºè¿‡ç¨‹å‡ºç°ä¸å¯é¢„çŸ¥çš„å¼‚å¸¸"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"åˆ›å»ºæˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œå®Œæˆä¹‹åï¼Œå‘ç°æ•°æ®åº“ä¸­çš„è¡¨ä¹Ÿå·²ç»æˆåŠŸåœ°å»ºç«‹äº†ã€‚ä¸è¿‡è¡¨å»ºç«‹å®Œæˆä¹‹åï¼Œé‡Œé¢è‚¯å®šæ˜¯æ²¡æœ‰æ•°æ®çš„</p><p><img src="/journal/how-to-use-websql/QQ%E6%88%AA%E5%9B%BE20210612212046.png" alt="phone_book" loading="lazy"></p><p>å¦‚æœæˆ‘ä»¬å†åˆ›å»ºä¸€æ¬¡ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿå½“ç„¶æ˜¯ä¼šæ‰§è¡Œé”™è¯¯çš„å›è°ƒã€‚é”™è¯¯çš„å›è°ƒä¸­è¾“å‡ºæ—¶å¸¦æœ‰é”™è¯¯ç å’Œé”™è¯¯çš„åŸå› ï¼Œè¿™ä¸ªåŸå› æç¤ºçš„æ˜¯å› ä¸ºè¿™å¼ è¡¨åœ¨è¯¥æ•°æ®åº“ä¸­å·²ç»å­˜åœ¨ã€‚</p><p><img src="/journal/how-to-use-websql/QQ%E6%88%AA%E5%9B%BE20210612214816.png" alt="err_callback" loading="lazy"></p><h3 id="ä¿®æ”¹è¡¨ç»“æ„"><a href="#ä¿®æ”¹è¡¨ç»“æ„" class="headerlink" title="ä¿®æ”¹è¡¨ç»“æ„"></a>ä¿®æ”¹è¡¨ç»“æ„</h3><p>æˆ‘æœ‰ä¸€ä¸ªæƒ³æ³•ï¼Œæˆ‘è¦æŠŠè¿™å¼  phone_book çš„è¡¨æ–°å¢ä¸€ä¸ªå­—æ®µï¼Œæˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿé‚£å°±åˆ©ç”¨ alter table æ¥å¯¹ Web SQL ä¸­çš„è¡¨æ¥è¿›è¡Œä¿®æ”¹å§ã€‚</p><p>å¯¹è¡¨ä¸­çš„å­—æ®µè¿›è¡Œæ›´æ–°å’Œåˆ é™¤ï¼Œå¯ä»¥å‚ç…§ â€œ<a href="https://www.w3school.com.cn/sql/sql_alter.asp">W3school çš„ SQL æ•™ç¨‹</a>â€ ã€‚</p><p>ä¿®æ”¹è¡¨ç»“æ„çš„ SQL è¯­å¥å¦‚ä¸‹</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tx</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    tx<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">alter table phone_book add birthday date</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"åˆ›å»ºè¿‡ç¨‹å‡ºç°ä¸å¯é¢„çŸ¥çš„å¼‚å¸¸"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"åˆ›å»ºæˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå¦‚æœæˆ‘åœ¨æ‰§è¡Œä¸€æ¬¡æ›´æ–°çš„æ“ä½œï¼Œé‚£ä¹ˆå®ƒä¾¿ä¼šæç¤º â€œé‡å¤åˆ—çš„é”™è¯¯â€ã€‚ï¼ˆæˆ‘è¿™é‡Œçš„æç¤ºä¿¡æ¯æ²¡æ”¹ï¼Œå¿˜è®°äº†ï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆå•Šå“ˆå“ˆå“ˆï¼‰</p><p><img src="/journal/how-to-use-websql/QQ%E6%88%AA%E5%9B%BE20210612221030.png" alt="ä¿®æ”¹è¡¨" loading="lazy"></p><h3 id="åˆ é™¤è¡¨"><a href="#åˆ é™¤è¡¨" class="headerlink" title="åˆ é™¤è¡¨"></a>åˆ é™¤è¡¨</h3><p>åˆ é™¤è¡¨ä¹Ÿæ˜¯éå¸¸ç®€å•çš„</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tx</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      tx<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">drop table phone_book</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"åˆ è¡¨è¿‡ç¨‹å‡ºç°ä¸å¯é¢„çŸ¥çš„å¼‚å¸¸"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"åˆ è¡¨æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬å†æ¬¡åˆ é™¤ï¼Œé‚£ä¹ˆå°±ä¼šç»§ç»­ç»™å‡ºæŠ¥é”™æç¤ºâ€œæ²¡æœ‰è¿™å¼ è¡¨â€ã€‚</p><p><img src="/journal/how-to-use-websql/QQ%E6%88%AA%E5%9B%BE20210612222836.png" alt="åˆ é™¤è¡¨" loading="lazy"></p><h3 id="æ“ä½œè¡¨ä¸­çš„æ•°æ®"><a href="#æ“ä½œè¡¨ä¸­çš„æ•°æ®" class="headerlink" title="æ“ä½œè¡¨ä¸­çš„æ•°æ®"></a>æ“ä½œè¡¨ä¸­çš„æ•°æ®</h3><p>æ“ä½œè¡¨ä¸­çš„æ•°æ®æ— ç–‘å°±æ˜¯å¯¹è¡¨è¿›è¡Œå¢åˆ æ”¹æŸ¥å‘—ï¼Œå¢åˆ æ”¹æŸ¥ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„ SQL è¯­å¥æ¥è¿›è¡Œçš„</p><h4 id="æ·»åŠ æ•°æ®"><a href="#æ·»åŠ æ•°æ®" class="headerlink" title="æ·»åŠ æ•°æ®"></a>æ·»åŠ æ•°æ®</h4><p>æ¥ä¸‹æ¥æˆ‘è¦æ’å…¥ä¸‰æ¡æ•°æ®åˆ°è¡¨ä¸­</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tx</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  tx<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">insert into phone_book values (13122223333, 'xiaohehe1')</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  tx<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">insert into phone_book values (13122223344, 'xiaohehe2')</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  tx<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">insert into phone_book values (13122223345, 'xiaohehe3')</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"æ’å…¥æ•°æ®çš„è¿‡ç¨‹å‡ºç°ä¸å¯é¢„çŸ¥çš„å¼‚å¸¸"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"æ’å…¥æ•°æ®æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä½†æ˜¯å¾ˆå¯æƒœï¼Œæˆ‘æ’å…¥ä¸è¿›å»ï¼Œç³»ç»Ÿç»™äº†æˆ‘è¿™æ ·çš„é”™è¯¯æç¤ºã€‚ä½†æ˜¯é”™è¯¯çš„ä¿¡æ¯ä¹Ÿéå¸¸çš„å®¹æ˜“çœ‹å‡ºæ¥ï¼Œæ˜¯å› ä¸ºä¸‰ä¸ªå€¼å¿…é¡»è¦å…¨éƒ¨æ’å…¥æ‰è¡Œã€‚</p><p><img src="/journal/how-to-use-websql/QQ%E6%88%AA%E5%9B%BE20210612223149.png" alt="æ·»åŠ æ•°æ®" loading="lazy"></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<del>æ‰€æœ‰çš„å­—æ®µéƒ½ä¸èƒ½å¤Ÿæœ‰ç©ºå€¼</del>ï¼ˆè¿™ä¸ªè¯´æ³•æ˜¯é”™è¯¯çš„ï¼Œæ­£ç¡®çš„è¯´æ³•æ˜¯ï¼Œè¦æ’å…¥çš„å†…å®¹å¿…é¡»æ˜¯ç¼ºä¸€ä¸å¯çš„ï¼Œå³ä½¿æ˜¯æ’å…¥ç©ºå€¼ä¹Ÿè¦å†™ nullï¼‰ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ä»¥ä¸Šçš„ SQL è¯­å¥è¿›è¡Œä¸€ä¸ªæ”¹è¿›ã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tx</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  tx<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">insert into phone_book values (13122223333, 'xiaohehe1', null)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  tx<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">insert into phone_book values (13122223344, 'xiaohehe2', null)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  tx<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">insert into phone_book values (13122223345, 'xiaohehe3', null)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"æ’å…¥æ•°æ®çš„è¿‡ç¨‹å‡ºç°ä¸å¯é¢„çŸ¥çš„å¼‚å¸¸"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"æ’å…¥æ•°æ®æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿™ä¸€æ¬¡ï¼Œæ’å…¥æ•°æ®æˆåŠŸå•¦ã€‚</p><p><img src="/journal/how-to-use-websql/QQ%E6%88%AA%E5%9B%BE20210612223727.png" alt="æ’å…¥æˆåŠŸ" loading="lazy"></p><p>ç‚¹å‡»åˆ·æ–°æŒ‰é’®å³å¯å±•ç¤ºå‡ºè¯¥è¡¨ä¸­æˆ‘ä»¬æ’å…¥çš„æ•°æ®å•¦ã€‚</p><p><img src="/journal/how-to-use-websql/QQ%E6%88%AA%E5%9B%BE20210612223852.png" alt="æ•°æ®å±•ç¤º" loading="lazy"></p><p>å¦‚æœæˆ‘ä»¬æƒ³è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼Œä¹Ÿå°±æ˜¯å¹´é¾„é‚£ä¸ªå­—æ®µæ˜¯ç©ºçš„ï¼Œé‚£æˆ‘ä»¬è¯¥æ€ä¹ˆè®¾ç½®å‘¢ã€‚è¯·çœ‹ä¸‹é¢çš„ä»£ç </p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tx</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  tx<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">insert into phone_book values (13122223333, 'xiaohehe1', null)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  tx<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">insert into phone_book values (13122223344, 'xiaohehe2', null)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  tx<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">insert into phone_book values (13122223345, 'xiaohehe3', null)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"æ’å…¥æ•°æ®çš„è¿‡ç¨‹å‡ºç°ä¸å¯é¢„çŸ¥çš„å¼‚å¸¸"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"æ’å…¥æ•°æ®æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œçš„æ•ˆæœå¦‚ä¸‹ã€‚çœ‹åˆ° age è¿™ä¸ªå­—æ®µå·²ç»æ˜¯æ²¡æœ‰ä»»ä½•çš„ä¸œè¥¿ï¼Œåªæ˜¯æˆ‘ä»¬è¾“å…¥çš„å€¼æ˜¯ nullã€‚</p><p><img src="/journal/how-to-use-websql/QQ%E6%88%AA%E5%9B%BE20210612225145.png" alt="æ•°æ®" loading="lazy"></p><h4 id="æŒ‡å®šå­—æ®µæ’å…¥æ•°æ®"><a href="#æŒ‡å®šå­—æ®µæ’å…¥æ•°æ®" class="headerlink" title="æŒ‡å®šå­—æ®µæ’å…¥æ•°æ®"></a>æŒ‡å®šå­—æ®µæ’å…¥æ•°æ®</h4><p>ä¾‹å­</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tx</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  tx<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">insert into phone_book(phone_number, name) values (13122223333, 'xiaohehe1')</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  tx<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">insert into phone_book(phone_number, name) values (13122223344, 'xiaohehe2')</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  tx<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">insert into phone_book(phone_number, name) values (13122223345, 'xiaohehe3')</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"æ’å…¥æ•°æ®çš„è¿‡ç¨‹å‡ºç°ä¸å¯é¢„çŸ¥çš„å¼‚å¸¸"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"æ’å…¥æ•°æ®æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æ‰§è¡Œç»“æœå’Œä¸Šå›¾æ˜¯ä¸€è‡´çš„ï¼Œæ’å…¥çš„æ•°æ®ä¹Ÿæ˜¯æˆåŠŸçš„ã€‚</p><p>å¦‚æœæˆ‘ä»¬åªæ’å…¥ phone_number ï¼Œæ˜¯ä¸æ˜¯ä¼šæŠ¥é”™å‘€ï¼Œæˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹ã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tx</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  tx<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">insert into phone_book(phone_number) values (13122223334)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  tx<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">insert into phone_book(phone_number) values (13122223336)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"æ’å…¥æ•°æ®çš„è¿‡ç¨‹å‡ºç°ä¸å¯é¢„çŸ¥çš„å¼‚å¸¸"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"æ’å…¥æ•°æ®æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œçš„ç»“æœå¦‚ä¸‹ï¼Œæœç„¶ä¼šæŠ¥é”™ï¼Œå› ä¸ºæˆ‘ä»¬å°†å§“åå­—æ®µè®¾ç½®æˆäº†éç©ºçš„å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªå€¼æ˜¯å¿…é¡»è¦å¡«å†™çš„ã€‚</p><p><img src="/journal/how-to-use-websql/QQ%E6%88%AA%E5%9B%BE20210612230213.png" alt="é”™è¯¯" loading="lazy"></p><p>å¦‚æœæˆ‘æ’å…¥é‡å¤çš„ç”µè¯å·ç ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿå½“ç„¶ä¼šæŠ¥é”™ï¼Œå› ä¸ºæˆ‘å°†ç”µè¯å·ç è®¾ç½®æˆä¸ºäº†ä¸»é”®ï¼Œç”±äºä¸»é”®ä¸èƒ½é‡å¤ï¼Œæ‰€ä»¥æ‰å¯¼è‡´çš„æŠ¥é”™ã€‚</p><p><img src="/journal/how-to-use-websql/QQ%E6%88%AA%E5%9B%BE20210612230529.png" alt="é”™è¯¯" loading="lazy"></p><h4 id="æ›´æ–°æ•°æ®"><a href="#æ›´æ–°æ•°æ®" class="headerlink" title="æ›´æ–°æ•°æ®"></a>æ›´æ–°æ•°æ®</h4><p>ç¤ºä¾‹ï¼šä¿®æ”¹ â€œxiaohehe1â€ çš„ç”µè¯å·ç </p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tx</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    tx<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">update phone_book set phone_number = 1111111 where name = 'xiaohehe1'</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"æ›´æ–°æ•°æ®çš„è¿‡ç¨‹å‡ºç°ä¸å¯é¢„çŸ¥çš„å¼‚å¸¸"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"æ›´æ–°æ•°æ®æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå‘ç° â€œxiaohehe1â€ çš„ç”µè¯å·ç å·²ç»å‘ç”Ÿäº†å˜åŒ–ã€‚æ•°æ®æ›´æ–°æˆåŠŸ</p><p><img src="/journal/how-to-use-websql/QQ%E6%88%AA%E5%9B%BE20210612231208.png" alt="QQæˆªå›¾20210612231208.png" loading="lazy"></p><h4 id="æŸ¥è¯¢æ•°æ®"><a href="#æŸ¥è¯¢æ•°æ®" class="headerlink" title="æŸ¥è¯¢æ•°æ®"></a>æŸ¥è¯¢æ•°æ®</h4><p>ç¤ºä¾‹ï¼šæŸ¥è¯¢ phone_book ä¸­å¹´é¾„å¤§äº 11 å²çš„ä¿¡æ¯ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹çœ‹è¿”å›çš„ç»“æœæ˜¯åœ¨å“ªé‡Œè¿›è¡Œå±•ç¤ºçš„ã€‚</p><p>ä¸è¿‡åœ¨æ­¤ä¹‹å‰ï¼Œè¿˜éœ€è¦å†æ¬¡ä»‹ç» executeQuery è¿™ä¸ªæ–¹æ³•çš„å¦å¤–ä¸¤ä¸ªå‚æ•°ã€‚ä¸€ä¸ªæ˜¯å¤–éƒ¨ä¼ å‚ï¼Œç”¨æ•°ç»„æ¥è¡¨ç¤ºçš„ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯å›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ã€‚ä¸€ä¸ªæ˜¯äº‹åŠ¡ï¼Œå¦ä¸€ä¸ªæ˜¯è¿”å›çš„ç»“æœã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tx</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>   tx<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">select * from phone_book where age > 11</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tx<span class="token punctuation">,</span> results</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"æ›´æ–°æ•°æ®çš„è¿‡ç¨‹å‡ºç°ä¸å¯é¢„çŸ¥çš„å¼‚å¸¸"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"æŸ¥è¯¢æ•°æ®æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œçš„ç»“æœå¦‚ä¸‹ï¼ŒæŸ¥è¯¢å‡ºçš„æ•°æ®æœ‰ä¸¤æ¡ï¼</p><p><img src="/journal/how-to-use-websql/QQ%E6%88%AA%E5%9B%BE20210612232709.png" loading="lazy"></p><h4 id="åˆ é™¤æ•°æ®"><a href="#åˆ é™¤æ•°æ®" class="headerlink" title="åˆ é™¤æ•°æ®"></a>åˆ é™¤æ•°æ®</h4><p>ç¤ºä¾‹ï¼šåˆ é™¤å¹´é¾„ä¸º 11 å²çš„ä¿¡æ¯</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tx</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  tx<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">select * from phone_book where age > 11</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tx<span class="token punctuation">,</span> results</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"æ›´æ–°æ•°æ®çš„è¿‡ç¨‹å‡ºç°ä¸å¯é¢„çŸ¥çš„å¼‚å¸¸"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"æŸ¥è¯¢æ•°æ®æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œçš„ç»“æœå¦‚ä¸‹ï¼Œå‘ç°ç­‰äº11å²çš„é‚£æ¡æ•°æ®è¢«åˆ é™¤äº†è€¶ã€‚</p><p><img src="/journal/how-to-use-websql/QQ%E6%88%AA%E5%9B%BE20210612233342.png" loading="lazy"></p><p>è‡³æ­¤ï¼ŒåŸºæœ¬çš„ SQL è¯­å¥çš„ä½¿ç”¨å°±åˆ°æ­¤ç»“æŸå•¦ã€‚</p><h2 id="ä¼ å€¼çš„é—®é¢˜"><a href="#ä¼ å€¼çš„é—®é¢˜" class="headerlink" title="ä¼ å€¼çš„é—®é¢˜"></a>ä¼ å€¼çš„é—®é¢˜</h2><p>åç»­æˆ‘ä»¬åœ¨æ’å…¥æ•°æ®ï¼Œä¿®æ”¹æ•°æ®æˆ–è€…æ›´æ”¹æŸ¥è¯¢æ¡ä»¶çš„å€¼æ—¶å¯èƒ½éœ€è¦ä½¿ç”¨åˆ°å¤–éƒ¨çš„å‚æ•°ã€‚æ¯”å¦‚æ‹¿ä¸Šé¢çš„æŸ¥è¯¢æ•°æ®æ¥ä¸¾ä¾‹ã€‚</p><p>å…¶ä¸­çš„é—®å·ï¼Œä»£è¡¨ç€å ä½ç¬¦ã€‚</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// å‡è®¾è¯¥æ•°å€¼å¯èƒ½æ˜¯ä»æ–‡æœ¬æ¡†è·å–åˆ°ã€‚</span><span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">;</span>db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tx</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  tx<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">select * from phone_book where age > ?</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">[</span>age<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tx<span class="token punctuation">,</span> results</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"æ›´æ–°æ•°æ®çš„è¿‡ç¨‹å‡ºç°ä¸å¯é¢„çŸ¥çš„å¼‚å¸¸"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"æŸ¥è¯¢æ•°æ®æˆåŠŸï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼Œå‘ç°é€šè¿‡å¤–éƒ¨ä¼ å€¼çš„æ–¹å¼ä¹Ÿæ˜¯å¯ä»¥æ‹¿åˆ°çš„ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸åœ°æŸ¥è¯¢å‡ºæ¥ã€‚</p><p><img src="/journal/how-to-use-websql/QQ%E6%88%AA%E5%9B%BE20210612234226.png" loading="lazy"></p><h2 id="åˆ é™¤æ•°æ®åº“"><a href="#åˆ é™¤æ•°æ®åº“" class="headerlink" title="åˆ é™¤æ•°æ®åº“"></a>åˆ é™¤æ•°æ®åº“</h2><p>å¾ˆé—æ†¾ï¼Œåœ¨ Web SQL ä¸­ï¼Œæˆ‘ä»¬æ— æ³•åšåˆ°ç›´æ¥åœ¨ F12 ä¸­å°†æ•°æ®åº“è¿›è¡Œåˆ é™¤ã€‚å³ä½¿åˆ·æ–°ï¼Œä½ æ„Ÿè§‰å®ƒæ¶ˆå¤±äº†ï¼Œå…¶å®å¹¶æ²¡æœ‰æ¶ˆå¤±ï¼Œå› ä¸ºåœ¨åˆ·æ–°çš„è¿‡ç¨‹ä¸­ï¼ŒWeb SQL ä¸­çš„æ•°æ®åº“å…¶å®æ˜¯åœ¨å…³é—­å“’ï¼Œå†æ¬¡è°ƒç”¨ openDatabase ä¼šå°†æ•°æ®åº“è¿›è¡Œæ‰“å¼€ï¼Œå¹¶ä¸”åŸæœ‰çš„è¡¨éƒ½å­˜åœ¨ã€‚</p><p>å®ƒå ç”¨çš„ç©ºé—´å…¶å®ä¸ä¼šå¤ªå¤§çš„ï¼Œåˆ ä¸åˆ é™¤å…¶å®éƒ½æ˜¯æ²¡æœ‰ä»€ä¹ˆå¤ªå¤§çš„åŒºåˆ«çš„ã€‚</p><p>æˆ‘æ‰¾äº†å¾ˆä¹…ï¼Œä¹Ÿæ²¡æœ‰æ‰¾åˆ°ç›´æ¥åˆ é™¤å®ƒçš„æ–¹æ³•ï¼Œä¸è¿‡è¿™æ— æ‰€è°“çš„å•¦ã€‚</p><h2 id="å®Œæ•´ç¤ºä¾‹"><a href="#å®Œæ•´ç¤ºä¾‹" class="headerlink" title="å®Œæ•´ç¤ºä¾‹"></a>å®Œæ•´ç¤ºä¾‹</h2><p>å®Œæ•´ç¤ºä¾‹è¯·æˆ³è¿™æŸ¥çœ‹ ğŸ‘‰ <a href="/images/demo/create2.html">ç‚¹æˆ‘ç‚¹æˆ‘</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQLite </tag>
            
            <tag> Web SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot è‡ªåŠ¨é…ç½®ç‰¹æ€§</title>
      <link href="/journal/auto-configuration/"/>
      <url>/journal/auto-configuration/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¼€ç¯‡å­¦ä¹ äº† SpringBoot Helloworld ç¨‹åºçš„ç¼–å†™ï¼Œä¸Šæ‰‹éå¸¸çš„å¿«ã€‚ç°åœ¨æ¥äº†è§£ SpringBoot çš„è‡ªåŠ¨é…ç½®ç‰¹æ€§ä»¥åŠ Configration æ³¨è§£ã€‚</p><h2 id="è‡ªåŠ¨é…ç½®ç‰¹æ€§"><a href="#è‡ªåŠ¨é…ç½®ç‰¹æ€§" class="headerlink" title="è‡ªåŠ¨é…ç½®ç‰¹æ€§"></a>è‡ªåŠ¨é…ç½®ç‰¹æ€§</h2><p><a href="/2021/05/17/spring-boot-tutorial">ä¸Šç¯‡æ—¥å¿—</a>é€šè¿‡å¯¼å…¥ spring-boot-web-starter ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨é…ç½®å¥½ SpringMVC ä»¥åŠç›¸å…³çš„å¸¸ç”¨çš„ç»„ä»¶ï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬æˆ‘ä»¬å¸¸è§çš„å­—ç¬¦ç¼–ç é—®é¢˜ä»¥åŠæ–‡ä»¶ä¸Šä¼ ç­‰ç­‰ï¼Œè¿™äº›éƒ½æ˜¯é»˜è®¤é…ç½®å¥½äº†çš„ã€‚ä½†æ˜¯åªæœ‰åœ¨å¯¼å…¥ç›¸å…³çš„ starter çš„æ—¶å€™æ‰ä¼šå»åŠ è½½ç›¸å…³çš„é…ç½®æ–‡ä»¶ã€‚</p><p>æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªæµ‹è¯•ï¼Œæ¥æŸ¥çœ‹ Spring MVC ç›¸å…³çš„æ˜¯å¦‚ä½•è‡ªåŠ¨é…ç½®çš„</p><span id="more"></span><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>helloworld</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ConfigurableApplicationContext</span><span class="token punctuation">;</span><span class="token annotation punctuation">@org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBootApplication</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// Spring IOCå®¹å™¨</span>        <span class="token class-name">ConfigurableApplicationContext</span> run <span class="token operator">=</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringBootApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·å–å…¨éƒ¨çš„ Bean åå­—</span>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> beanDefinitionNames <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> beanDefinitionName <span class="token operator">:</span> beanDefinitionNames<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>beanDefinitionName<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œç»“æœæ¯”è¾ƒé•¿ã€‚å› ä¸ºé…ç½®çš„åŠ è½½é¡¹è¿˜æ˜¯è›®å¤šçš„ã€‚å¯ä»¥åœ¨ä½ çš„æ§åˆ¶å°è¾“å‡ºæ—¶ã€‚æŒ‰ä¸‹ Ctrl + F æœç´¢ Spring æ•´åˆ SpringMVC ç›¸å…³çš„å…³é”®å­—ï¼Œè‚¯å®šèƒ½å¤Ÿæ‰¾åˆ°ç›¸å…³çš„å…³é”®å­—ã€‚ä¹Ÿå°±æ„å‘³ç€è¿™äº›éƒ½æ˜¯è‡ªåŠ¨é…ç½®äº†çš„ï¼š</p><ul><li>å‰ç«¯æ§åˆ¶å™¨ï¼šDispathchServlet</li><li>è§†å›¾è§£æå™¨ï¼šViewResolver</li><li>é™æ€èµ„æºç®¡ç†å™¨ï¼šservlethandler</li><li>æ–‡ä»¶ä¸Šä¼ æ¨¡å—ï¼šMultipart</li><li>ç¼–ç è¿‡æ»¤æ¨¡å—ï¼šcharacterEncodingFilter</li></ul><p>â€¦â€¦</p><h3 id="è‡ªåŠ¨åŒ…æ‰«æ"><a href="#è‡ªåŠ¨åŒ…æ‰«æ" class="headerlink" title="è‡ªåŠ¨åŒ…æ‰«æ"></a>è‡ªåŠ¨åŒ…æ‰«æ</h3><p>SpringBoot é»˜è®¤æœ‰ä¸€ä¸ªè‡ªåŠ¨åŒ…çš„æ‰«æï¼Œæ— éœ€è‡ªå·±é…ç½®ã€‚é‚£ä¸ç”¨é…ç½®å®ƒæ˜¯æ€ä¹ˆæ‰«æçš„å‘¢ï¼Ÿå®ƒæ˜¯è¿™ä¹ˆè§„å®šçš„ï¼Œå°±æ˜¯åªè¦ SpringBoot çš„å¯åŠ¨ç±»åœ¨å“ªä¸ªç›®å½•ä¸‹ï¼Œé‚£ä¹ˆå’Œè¿™ä¸ªå¯åŠ¨ç±»çš„åŒçº§ç›®å½•ä»¥åŠå®ƒçš„å­ç›®å½•ï¼Œå®ƒéƒ½ä¼šå»æ‰«æã€‚</p><p>è¯·çœ‹ä¸‹é¢çš„é¡¹ç›®ç»“æ„</p><pre class="language-bash" data-language="bash"><code class="language-bash">E:.â””â”€top    â””â”€bestguo        â””â”€helloworld            <span class="token operator">|</span> SpringBootApplication.java            â”‚            â””â”€controller                    <span class="token operator">|</span> HelloController.java                    <span class="token operator">|</span> DemoController.java</code></pre><p>SpringBoot ä¸‹æœ‰ä¸€ä¸ªåŒçº§çš„æ–‡ä»¶å¤¹ controllerï¼Œé‚£ä¹ˆè¿™ä¸ª controller ä¸‹çš„æ‰€æœ‰ç±»éƒ½ä¼šè¢«æ‰«æåˆ°ã€‚å‰ææ˜¯è¿™äº›ç±»ä¸­å¿…é¡»æœ‰æ ‡è®° @Controllerã€@Serviceã€@Repository ç­‰è¿™ç§å¯è¢« Spring è¯†åˆ«åˆ°çš„æ³¨è§£ã€‚</p><p>å¦‚æœæ˜¯è¿™ç§ç›®å½•ç»“æ„ï¼ŒSpringBoot ä¸»ç¨‹åºèƒ½å¤Ÿæ‰«æåˆ° WorldController å—ï¼Ÿæ˜¾ç„¶è¿™æ˜¯æ‰«æä¸åˆ°çš„ã€‚</p><pre class="language-none"><code class="language-none">E:.â””â”€top    â””â”€bestguo        â”‚ WorldController.java        â”‚        â””â”€helloworld            â”‚ SpringBootApplication.java            â”‚            â””â”€controller                   | HelloController.java                   | DemoController.java</code></pre><p>WorldController.java ä»£ç å¦‚ä¸‹</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ResponseBody</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Controller</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/world"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WorldController</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/springboot2"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ResponseBody</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"ä½ å¥½, SpringBoot2!"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æˆ‘ä»¬å¯ä»¥è®¿é—®ä¸€ä¸‹è¿™ä¸ªé¡µé¢ <a href="http://localhost:8080/world/springboot2">http://localhost:8080/world/springboot2</a> ï¼Œå‘ç°æŠ¥é”™äº†ã€‚</p><p><img src="/journal/auto-configuration/QQ%E6%88%AA%E5%9B%BE20210518160135.png" loading="lazy"></p><p>æŠ¥é”™äº†å°±æ„å‘³ç€ï¼ŒSpringBoot ä¸»ç¨‹åºæ˜¯æ‰«æä¸åˆ°å®ƒçš„çˆ¶æ–‡ä»¶å¤¹é‡Œçš„å†…å®¹çš„ã€‚å¦‚æœè¦æƒ³ç„¶ SpringBoot å»è®©ä»–ç›´æ¥è®¿é—®çˆ¶æ–‡ä»¶å¤¹æ˜¯è¡Œä¸é€šçš„ï¼Œåªèƒ½é€šè¿‡é‡æ–°é…ç½®åŒ…æ‰«æè·¯å¾„ã€‚</p><p>åŒ…æ‰«æè·¯å¾„å¯ä»¥è‡ªå·±æ‰‹åŠ¨çš„æ¥æŒ‡å®šï¼</p><p>åŒ…æ‰«æçš„è·¯å¾„è®¾ç½®æˆ â€œtop.bestguoâ€ å®ƒå°±ä»è¿™ä¸ªä½ç½®å¼€å§‹æ‰«æï¼Œæ‰«æå…¶å­ç›®å½•å’Œå­™ç›®å½•å³å¯ï¼Œåªéœ€è¦åœ¨ SpringBootApplication æ³¨è§£ä¸­ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¯åŒ…æ‰«æè·¯å¾„ï¼Œå³</p><p>@SpringBootApplication(scanBasePackages = â€œtop.bestguoâ€)</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>helloworld</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ConfigurableApplicationContext</span><span class="token punctuation">;</span><span class="token annotation punctuation">@org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="token punctuation">(</span>scanBasePackages <span class="token operator">=</span> <span class="token string">"top.bestguo"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBootApplication</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// Spring IOCå®¹å™¨</span>        <span class="token class-name">ConfigurableApplicationContext</span> run <span class="token operator">=</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringBootApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·å–å…¨éƒ¨çš„ Bean åå­—</span>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> beanDefinitionNames <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> beanDefinitionName <span class="token operator">:</span> beanDefinitionNames<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>beanDefinitionName<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ç„¶åæˆ‘ä»¬é‡æ–°è®¿é—®ä¸€ä¸‹çœ‹çœ‹ï¼Œå‘ç°é¡µé¢æ˜¯å¯ä»¥æ­£å¸¸è®¿é—®äº†ã€‚</p><p><img src="/journal/auto-configuration/QQ%E5%9B%BE%E7%89%8720210518161145.png" loading="lazy"></p><h3 id="é»˜è®¤å€¼"><a href="#é»˜è®¤å€¼" class="headerlink" title="é»˜è®¤å€¼"></a>é»˜è®¤å€¼</h3><p>SpringBoot ä¸­ï¼Œè¿™äº›é…ç½®æ–‡ä»¶ä¸­çš„ç»å¤§å¤šæ•°éƒ½æœ‰é»˜è®¤çš„è®¾ç½®ã€‚ä½ å¯ä»¥ä½¿ç”¨é»˜è®¤çš„è®¾ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ application.properties æ¥å¯¹é»˜è®¤é…ç½®çš„å€¼è¿›è¡Œä¿®æ”¹ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬ä¿®æ”¹å†…åµŒ Tomcat çš„ç«¯å£å·ï¼Œé€šè¿‡æç¤ºå¯ä»¥çœ‹åˆ°é»˜è®¤æ˜¯ 8080ã€‚æˆ‘ä»¬å¯ä»¥å°†å…¶è®¾ç½®æˆ 8081ã€‚</p><p><img src="/journal/auto-configuration/QQ%E6%88%AA%E5%9B%BE20210518162109.png" loading="lazy"></p><p>è¿˜æœ‰ä¸Šä¼ æ–‡ä»¶å¤§å°ï¼Œé»˜è®¤æ˜¯ 1MB ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®æˆ 100 MB</p><p><img src="/journal/auto-configuration/QQ%E6%88%AA%E5%9B%BE20210518162813.png" loading="lazy"></p><p>ä»¥ä¸Šçš„è¿™äº›é…ç½®éƒ½æ˜¯åœ¨ application.properties æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®çš„</p><pre class="language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">server.port</span><span class="token punctuation">=</span><span class="token attr-value">8081</span><span class="token attr-name">spring.servlet.multipart.max-file-size</span><span class="token punctuation">=</span><span class="token attr-value">100MB</span></code></pre><blockquote><p>é»˜è®¤é…ç½®æœ€ç»ˆéƒ½æ˜¯æ˜ å°„åˆ° MultipartPropertiesï¼Œé…ç½®æ–‡ä»¶çš„å€¼æœ€ç»ˆä¼šç»‘å®šåˆ°æ¯ä¸ªç±»ä¸Šï¼Œè¿™ä¸ªç±»ä¼šåœ¨ Spring å®¹å™¨ä¸­åˆ›å»ºå¯¹è±¡ã€‚</p></blockquote><h3 id="spring-boot-autoconfigure"><a href="#spring-boot-autoconfigure" class="headerlink" title="spring-boot-autoconfigure"></a>spring-boot-autoconfigure</h3><p>SpringBoot æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®åŠŸèƒ½éƒ½åœ¨ spring-boot-autoconfigure åŒ…é‡Œé¢ï¼Œåœ¨è¿™ä¸ªåŒ…ä¸‹é¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¾ˆå¤šã€‚æ¯”å¦‚ jdbcã€aopã€jacksonã€web ç­‰ç­‰è‡ªåŠ¨é…ç½®ç±»ã€‚</p><p><img src="/journal/auto-configuration/QQ%E6%88%AA%E5%9B%BE20210518164332.png" loading="lazy"></p><h2 id="è‡ªåŠ¨é…ç½®åŸç†"><a href="#è‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="è‡ªåŠ¨é…ç½®åŸç†"></a>è‡ªåŠ¨é…ç½®åŸç†</h2><p>åœ¨ SpringBoot çš„ä¸»ç¨‹åºä¸­ï¼Œæœ‰ä¸€ä¸ª SpringBootApplication æ³¨è§£ï¼Œè¿™ä¸ªæ³¨è§£ç”¨äºæ ‡è®° SpringBoot çš„ä¸»ç¨‹åºçš„å…¥å£ã€‚æœ‰å®ƒï¼Œæ‰èƒ½å¤Ÿæ­£å¸¸çš„å¯åŠ¨è¯¥ç¨‹åºã€‚</p><p>SpringBootApplication æ˜¯ä¸€ä¸ªåˆæˆçš„æ³¨è§£ï¼Œè¿™ä¸ªæ³¨è§£åŒ…å«ç€ä¸‰ä¸ªæ³¨è§£ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ <code>SpringBootConfiguration</code>ã€<code>EnableAutoConfiguration</code> å’Œ <code>ComponentScan</code> ä¸‰ä¸ªæ³¨è§£ã€‚</p><h3 id="SpringBootConfiguration-æ³¨è§£"><a href="#SpringBootConfiguration-æ³¨è§£" class="headerlink" title="SpringBootConfiguration æ³¨è§£"></a>SpringBootConfiguration æ³¨è§£</h3><p>å…¶ä¸­ SpringBootConfiguration è¿™ä¸ªæ³¨è§£ï¼Œå®ƒæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª Configuration æ³¨è§£ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒSpringBoot çš„ä¸»ç¨‹åºç±»å®ƒä¹Ÿæ˜¯ä¸€ä¸ªé…ç½®ç±»ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">)</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span><span class="token annotation punctuation">@Documented</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SpringBootConfiguration</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="ComponentScan-æ³¨è§£"><a href="#ComponentScan-æ³¨è§£" class="headerlink" title="ComponentScan æ³¨è§£"></a>ComponentScan æ³¨è§£</h3><p>å°±æ˜¯æ™®é€šçš„åŒ…æ‰«ææ³¨è§£ï¼ŒæŒ‡å®šå“ªä¸€ä¸ªæ‰«æçš„åŒ…è·¯å¾„ã€‚</p><h3 id="EnableAutoConfiguration-æ³¨è§£"><a href="#EnableAutoConfiguration-æ³¨è§£" class="headerlink" title="EnableAutoConfiguration æ³¨è§£"></a>EnableAutoConfiguration æ³¨è§£</h3><p>è¯¥æ³¨è§£æ˜¯ SpringBootConfiguration æ³¨è§£ä¸­éå¸¸é‡è¦çš„ä¸€ä¸ªæ³¨è§£ï¼Œé€šè¿‡å®ƒå°±å¯ä»¥æ‰¾åˆ° SpringBoot çš„ä¸»ç¨‹åºç±»æ˜¯åœ¨å“ªä¸ªåŒ…è·¯å¾„ä¸‹ï¼Œä»¥åŠâ€¦â€¦</p><p>è¯¥æ³¨è§£çš„ä»£ç å¦‚ä¸‹</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@AutoConfigurationPackage</span><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">AutoConfigurationImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">EnableAutoConfiguration</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//ä¸»ä½“çœç•¥......</span><span class="token punctuation">&#125;</span></code></pre><p>å…¶ä¸­ AutoConfigurationPackage æ³¨è§£å°±æ˜¯æ‰¾åˆ° SpringBoot çš„ä¸»ç¨‹åºç±»æ˜¯åœ¨å“ªä¸ªåŒ…è·¯å¾„ä¸‹ã€‚Import æ³¨è§£ä¹Ÿè¯´è¿‡ï¼Œå®ƒä¹Ÿæ˜¯å°†ç»„ä»¶æ³¨å†Œåˆ°å®¹å™¨ä¸­ã€‚</p><blockquote><p>Import æ³¨è§£çš„è¯¦ç»†ä½¿ç”¨å¯ä»¥çœ‹çœ‹ <a href="/2021/06/26/springboot-annotations-ususally/">â€œSpringBootæ³¨è§£çš„å­¦ä¹ â€</a> è¿™ç¯‡æ—¥å¿—</p></blockquote><p>å®ƒéœ€è¦å¯¼å…¥çš„ AutoConfigurationImportSelector è¿™ä¸ªç±»çš„ç›®çš„æ˜¯åŠ è½½é‚£äº›è‡ªåŠ¨é…ç½®ç±»ï¼Œä¹Ÿå°±æ˜¯é‚£äº› xxxxxAutoConfiguration.javaã€‚</p><h4 id="AutoConfigurationPackage-æ³¨è§£"><a href="#AutoConfigurationPackage-æ³¨è§£" class="headerlink" title="AutoConfigurationPackage æ³¨è§£"></a>AutoConfigurationPackage æ³¨è§£</h4><p>è¯¥æ³¨è§£çš„ä»£ç å¦‚ä¸‹</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">AutoConfigurationPackages<span class="token punctuation">.</span>Registrar</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">AutoConfigurationPackage</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//ä¸»ä½“çœç•¥......</span><span class="token punctuation">&#125;</span></code></pre><p>å…¶ä¸­ï¼ŒRegister ç±»å°±æ˜¯æŠŠåŒ…ä¸‹é¢çš„ä¸€ç³»åˆ—ç»„ä»¶ç»™å¯¼å…¥è¿›æ¥ï¼Œå®ƒå¹¶ä¸æ˜¯ä»…ä»…å¯¼å…¥ä¸€ä¸ª</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Registrar</span> <span class="token keyword">implements</span> <span class="token class-name">ImportBeanDefinitionRegistrar</span><span class="token punctuation">,</span> <span class="token class-name">DeterminableImports</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * ä¸€ç³»åˆ—ç»„ä»¶å¯¼å…¥çš„æ–¹æ³•     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span class="token punctuation">,</span> <span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">register</span><span class="token punctuation">(</span>registry<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">PackageImports</span><span class="token punctuation">(</span>metadata<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPackageNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> <span class="token function">determineImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singleton</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PackageImports</span><span class="token punctuation">(</span>metadata<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>é€šè¿‡è¯¥æ³¨è§£çš„å…ƒä¿¡æ¯è·å–åˆ°ä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…è·¯å¾„ï¼Œç„¶åå†è°ƒç”¨ register æ–¹æ³•ï¼Œå°†ä¸€ç³»åˆ—çš„åŒ…ç»™å¯¼å…¥è¿›æ¥ã€‚è¿™ä¹Ÿå°±èƒ½å¤Ÿè§£é‡Šã€‚å¯åŠ¨ç±»çš„åŒçº§ç›®å½•ä»¥åŠå®ƒçš„å­ç›®å½•ä¸‹çš„ç»„ä»¶ç»™å¯¼å…¥è¿›æ¥ã€‚</p><h4 id="AutoConfigurationImportSelector"><a href="#AutoConfigurationImportSelector" class="headerlink" title="AutoConfigurationImportSelector"></a>AutoConfigurationImportSelector</h4><p>æœªå®Œå¾…ç»­â€¦â€¦</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> SpringBoot å¼€å‘å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Helloï¼ŒSpringBoot2ï¼</title>
      <link href="/journal/spring-boot-tutorial/"/>
      <url>/journal/spring-boot-tutorial/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="åˆè¯†-SpringBoot"><a href="#åˆè¯†-SpringBoot" class="headerlink" title="åˆè¯† SpringBoot"></a>åˆè¯† SpringBoot</h2><p>Spring Bootå¯ä»¥è½»æ¾åˆ›å»ºç‹¬ç«‹çš„ã€åŸºäºSpringçš„ç”Ÿäº§çº§åº”ç”¨ç¨‹åºï¼Œå…¶è®¾è®¡ç›®çš„æ˜¯ç”¨æ¥ç®€åŒ–æ–°Springåº”ç”¨çš„åˆå§‹æ­å»ºä»¥åŠå¼€å‘è¿‡ç¨‹ã€‚è¯¥æ¡†æ¶ä½¿ç”¨äº†ç‰¹å®šçš„æ–¹å¼æ¥è¿›è¡Œé…ç½®ï¼Œä»è€Œä½¿å¼€å‘äººå‘˜ä¸å†éœ€è¦å®šä¹‰æ ·æ¿åŒ–çš„é…ç½®ã€‚</p><p>SpringBoot ä¸ä»…ç»§æ‰¿äº†Springæ¡†æ¶åŸæœ‰çš„ä¼˜ç§€ç‰¹æ€§ï¼Œè€Œä¸”è¿˜é€šè¿‡ç®€åŒ–é…ç½®æ¥è¿›ä¸€æ­¥ç®€åŒ–äº†Springåº”ç”¨çš„æ•´ä¸ªæ­å»ºå’Œå¼€å‘è¿‡ç¨‹ã€‚å¦å¤–SpringBooté€šè¿‡é›†æˆå¤§é‡çš„æ¡†æ¶ä½¿å¾—ä¾èµ–åŒ…çš„ç‰ˆæœ¬å†²çªï¼Œä»¥åŠå¼•ç”¨çš„ä¸ç¨³å®šæ€§ç­‰é—®é¢˜å¾—åˆ°äº†å¾ˆå¥½çš„è§£å†³ã€‚</p><span id="more"></span><h3 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><ol><li>å¯ä»¥åˆ›å»ºç‹¬ç«‹çš„ Spring åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”åŸºäºå…¶ Maven æˆ– Gradle æ’ä»¶ï¼Œå¯ä»¥åˆ›å»ºå¯æ‰§è¡Œçš„ JARs å’Œ WARs</li><li>å†…åµŒ Tomcat æˆ– Jetty ç­‰ Servlet å®¹å™¨</li><li>æä¾›è‡ªåŠ¨é…ç½®çš„â€œstarterâ€é¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼ˆPOMSï¼‰ä»¥ç®€åŒ– Maven é…ç½®</li><li>å°½å¯èƒ½è‡ªåŠ¨é…ç½® Spring å®¹å™¨</li><li>æä¾›å‡†å¤‡å¥½çš„ç‰¹æ€§ï¼Œå¦‚æŒ‡æ ‡ã€å¥åº·æ£€æŸ¥å’Œå¤–éƒ¨åŒ–é…ç½®</li><li>ç»å¯¹æ²¡æœ‰ä»£ç ç”Ÿæˆï¼Œä¸éœ€è¦XMLé…ç½®</li></ol><blockquote><p>ä»¥ä¸Šå†…å®¹æ‘˜è‡ªç™¾åº¦ç™¾ç§‘</p></blockquote><h3 id="æˆ‘çš„è§‚ç‚¹"><a href="#æˆ‘çš„è§‚ç‚¹" class="headerlink" title="æˆ‘çš„è§‚ç‚¹"></a>æˆ‘çš„è§‚ç‚¹</h3><p>SpringBoot ä½œä¸ºé«˜å±‚æ¡†æ¶ï¼Œå®ƒçš„åº•å±‚è¿˜æ˜¯ Spring ï¼Œåªæ˜¯å®ƒçš„ç»å¤§å¤šæ•°çš„é…ç½®é¡¹ä»¥åŠç»å¤§éƒ¨åˆ†ç¬¬ä¸‰æ–¹åº“çš„é…ç½®é¡¹éƒ½åœ¨å…¶ä¸­ï¼Œä¹Ÿå°±æ˜¯è‡ªåŠ¨é…ç½®ã€‚</p><p>åŒæ—¶ï¼Œæˆ‘è§‰å¾— SpringBoot ä¹Ÿæ˜¯åç»­æ„é€ åˆ†å¸ƒå¼ã€å¾®æœåŠ¡çš„åŸºç¡€éƒ¨åˆ†å§ã€‚å…¶å® Spring åº•å±‚ä¹Ÿå¯ä»¥åšå¾®æœåŠ¡è¿™äº›ä¸œè¥¿ï¼Œä½†æ˜¯å…¶ä¸­çš„é…ç½®è¿‡äºç¹çï¼Œæ‰€ä»¥æ²¡å¿…è¦èŠ±å¤ªå¤šçš„æ—¶é—´åœ¨é‚£äº›é‡å¤çš„é…ç½®ä¸Šå§ã€‚</p><p>è¯ä¸å¤šè¯´ï¼Œè¿›å…¥ç¬¬ä¸€ä¸ªå…¥é—¨ç¨‹åº</p><h2 id="å…¥é—¨ç¨‹åº"><a href="#å…¥é—¨ç¨‹åº" class="headerlink" title="å…¥é—¨ç¨‹åº"></a>å…¥é—¨ç¨‹åº</h2><p>SpringBoot2.X é™¤äº†ä¸‹è¿°çš„è½¯ä»¶è¦æ±‚ï¼Œè‡³å°‘å¯¹ Spring Framework æœ‰ä¸€å®šçš„åŸºç¡€ï¼ŒJava åŸºç¡€å°±æ›´ä¸è¦è¯´äº†ã€‚</p><h3 id="è¦æ±‚"><a href="#è¦æ±‚" class="headerlink" title="è¦æ±‚"></a>è¦æ±‚</h3><ul><li>JDK 1.8 åŠä»¥ä¸Šç‰ˆæœ¬</li><li>Maven 3.3 åŠä»¥ä¸Šç‰ˆæœ¬</li></ul><h3 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><p>1ã€SpringBoot æ˜¯åŸºäº Maven æ„å»ºçš„ï¼Œå…ˆåˆ›å»º Maven å·¥ç¨‹</p><p><img src="/journal/spring-boot-tutorial/QQ%E6%88%AA%E5%9B%BE20210517212415.png" loading="lazy"></p><p>2ã€æ‰¾åˆ° pom.xml æ–‡ä»¶ï¼Œå¼•å…¥çˆ¶å·¥ç¨‹</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- å¼•å…¥çˆ¶å·¥ç¨‹ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.3.4.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">></span></span></code></pre><p>3ã€åœ¨ pom.xml é…ç½®æ–‡ä»¶ï¼Œå¯¼å…¥ä¸€ä¸ª web çš„ä¾èµ–</p><blockquote><p>è¿™é‡Œä½œä¸ºå…¥é—¨ç¤ºä¾‹ï¼Œå°† web ä¾èµ–å¯¼å…¥è¿›æ¥ï¼ŒåŒæ—¶è¿™ä¹Ÿæ˜¯å®˜æ–¹æ¨èçš„å…¥é—¨ç¤ºä¾‹</p></blockquote><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span></code></pre><p>ä¾èµ–å¯¼å…¥å®Œæˆä¹‹åï¼Œå¯ä»¥çœ‹åˆ°å·¦è¾¹å’Œ spring-web ç›¸å…³çš„ä¾èµ–å°±å‡ºç°äº†</p><p><img src="/journal/spring-boot-tutorial/QQ%E6%88%AA%E5%9B%BE20210517213455.png" loading="lazy"></p><p>4ã€ç¼–å†™æ§åˆ¶å±‚ä»£ç </p><blockquote><p>æ§åˆ¶å±‚å°±æ˜¯å’Œç”¨æˆ·çš„æµè§ˆå™¨è¿›è¡Œäº¤äº’çš„åœ°æ–¹ï¼Œç”¨æˆ·å‘é€è¯·æ±‚ï¼ŒæœåŠ¡ç«¯å°±ä¼šå“åº”ã€‚</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>helloworld<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ResponseBody</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Controller</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/springboot2"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ResponseBody</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"Hello, SpringBoot2!"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>5ã€ç¼–å†™å¯åŠ¨ç±»</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>helloworld</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span><span class="token punctuation">;</span><span class="token annotation punctuation">@org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBootApplication</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringBootApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>6ã€è¿è¡Œæµ‹è¯•ï¼Œè®¿é—® <a href="http://localhost:8080/hello/springboot2">http://localhost:8080/hello/springboot2</a> æŸ¥çœ‹æ•ˆæœï¼Œçœ‹åˆ°ä¸‹å›¾ç•Œé¢å‡ºç°ï¼Œå°±è¯´æ˜ä½ çš„ç¬¬ä¸€ä¸ª SpringBoot HelloWorld å¯åŠ¨æˆåŠŸï¼ğŸŠ </p><p><img src="/journal/spring-boot-tutorial/QQ%E6%88%AA%E5%9B%BE20210517224656.png" loading="lazy"></p><p>7ã€è¿™æ ·ï¼Œä¸€ä¸ª SpringBoot å…¥é—¨ç¨‹åºå°±å®Œæˆäº†ğŸ‰</p><h2 id="è¿è¡Œ-jar-æ–‡ä»¶"><a href="#è¿è¡Œ-jar-æ–‡ä»¶" class="headerlink" title="è¿è¡Œ jar æ–‡ä»¶"></a>è¿è¡Œ jar æ–‡ä»¶</h2><p>æœ‰æ²¡æœ‰å‘ç°ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªç¨‹åºæ˜¯åŸºäº web çš„ï¼Œå¯æ˜¯æˆ‘ä»¬å¹¶æ²¡æœ‰å°†é¡¹ç›®è¿è¡Œåœ¨ Tomcat ä¸­ã€‚å¯¹å•¦ï¼ŒSpringBoot ä¸­æˆ‘ä»¬å¼•å…¥çš„ web ä¾èµ–æ˜¯å†…ç½®çš„ä¸€ä¸ªåµŒå…¥å¼çš„ Tomcatï¼Œä¸éœ€è¦ç‹¬ç«‹çš„å³å¯è¿è¡Œã€‚</p><p>è€Œä¸” SpringBoot å¯¼å‡ºçš„é¡¹ç›®ï¼Œé»˜è®¤å°±æ˜¯ jar æ ¼å¼çš„æ–‡ä»¶ã€‚æˆ‘ä»¬å¯¼å‡ºä¹‹åè¿è¡Œä¸€ä¸‹è¯•è¯•çœ‹ ã€‚</p><h3 id="æ­¥éª¤-1"><a href="#æ­¥éª¤-1" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><p>1ã€éœ€è¦åœ¨æ„å»ºé¡¹ç›®çš„æ—¶å€™è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå¯ä»¥è¿è¡Œ SpringBoot çš„ jar åŒ…ï¼Œæˆ‘ä»¬éœ€è¦å°†ä»¥ä¸‹é…ç½®æ–‡ä»¶å¤åˆ¶ç²˜è´´åˆ° pom.xml æ–‡ä»¶ä¸­</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">></span></span></code></pre><p>2ã€è¿è¡Œå³è¾¹çš„ clean å’Œ package é€‰é¡¹ï¼ˆæŒ‰ä½ ctrl è¿›è¡Œé€‰æ‹©ï¼Œç‚¹å‡»ç»¿è‰²çš„â€œæ’­æ”¾â€æŒ‰é’®ï¼‰ï¼Œè¿è¡Œå®Œæˆä¹‹åï¼Œåœ¨ target æ–‡ä»¶å¤¹ä¸­ï¼Œå‡ºç°ä¸€ä¸ª jar åŒ…ã€‚</p><p><img src="/journal/spring-boot-tutorial/QQ%E6%88%AA%E5%9B%BE20210517230132.png" loading="lazy"></p><p>æ„å»ºå®Œæˆåå‡ºç°çš„ jar åŒ…ï¼š</p><p><img src="/journal/spring-boot-tutorial/QQ%E6%88%AA%E5%9B%BE20210517230524.png" loading="lazy"></p><p>3ã€æ­¤æ—¶æˆ‘ä»¬è¿›å…¥åˆ°å½“å‰é¡µé¢ï¼Œè¿›å…¥ cmd è¿è¡Œ</p><p><img src="/journal/spring-boot-tutorial/QQ%E5%9B%BE%E7%89%8720210517230744.png" loading="lazy"></p><p>4ã€è¿è¡Œè¿™ä¸ª jar æ–‡ä»¶ï¼Œçœ‹åˆ°å¦‚ä¸‹çš„æ•ˆæœï¼Œè¯´æ˜è¿è¡ŒæˆåŠŸå•¦</p><p><img src="/journal/spring-boot-tutorial/QQ%E6%88%AA%E5%9B%BE20210517231446.png" loading="lazy"></p><p>5ã€æ­¤æ—¶å†æ¬¡è®¿é—® <a href="http://localhost:8080/hello/springboot2">http://localhost:8080/hello/springboot2</a> ï¼Œæ•ˆæœå¦‚ä¸‹ã€‚</p><p><img src="/journal/spring-boot-tutorial/QQ%E6%88%AA%E5%9B%BE20210517231701.png" loading="lazy"></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>åœ¨ä»¥å‰ï¼Œå¦‚æœæ˜¯åŸºäº Spring Framework æ¥æ­å»ºä¸€ä¸ª web ç¨‹åºï¼Œå‘ç°æ­¥éª¤è¿˜æ˜¯è›®å¤šçš„ã€‚é¦–å…ˆè¦åœ¨é…ç½® web.xml å‰ç«¯æ§åˆ¶å™¨å’Œç¼–ç è¿‡æ»¤å™¨ï¼Œé…ç½®å®Œæˆä¹‹åå°±é…ç½® springmvc.xml é…ç½®æ–‡ä»¶äº†ï¼Œç„¶ååˆè¦åœ¨è¯¥æ–‡ä»¶ä¸­é…ç½®è§†å›¾è§£æå™¨ï¼Œé™æ€èµ„æºæ‹¦æˆªå™¨ï¼Œé…ç½®æ³¨è§£é©±åŠ¨ã€‚è¿™äº›åŸºç¡€çš„é…ç½®é‡å¤å»é…ç½®è¿˜æ˜¯æŒºéº»çƒ¦çš„ã€‚</p><p>ç°åœ¨ SpringBoot çœå»äº†è¿™äº›åŸºç¡€çš„ç¹ççš„é…ç½®ï¼Œæœªæ¥å¯ä»¥æ›´å¤šçš„å»ä¸“æ³¨äºä»£ç ï¼Œè€Œä¸æ˜¯ä¸“æ³¨äºé…ç½®æ–‡ä»¶ä¸­ã€‚</p><h2 id="éŸ³ä¹"><a href="#éŸ³ä¹" class="headerlink" title="éŸ³ä¹"></a>éŸ³ä¹</h2><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="500" height="86" src="//music.163.com/outchain/player?type=2&id=409941357&auto=1&height=66"></iframe>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> SpringBoot å¼€å‘å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¬å¼€çš„ä»£ç ä»“åº“çœŸçš„å¯ä»¥éšæ„æäº¤å—ï¼Ÿ</title>
      <link href="/journal/git-push-access-denied/"/>
      <url>/journal/git-push-access-denied/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ç›´æ¥ç»™å‡ºç»“æœï¼Œä¸è¡Œï¼ï¼ï¼</p><pre class="language-bash" data-language="bash"><code class="language-bash">Access deined: You <span class="token keyword">do</span> not have permission push to this repositoryfatal: Cou1d not <span class="token builtin class-name">read</span> from remote repository.Please <span class="token function">make</span> sure you have the correct access rightsand the repository exists.</code></pre><h2 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h2><p>ä»Šå¤©ä¸Šåˆå’Œèˆå‹è¿›è¡Œ git çš„å¤šäººåˆä½œæµ‹è¯•çš„æ—¶å€™ï¼ŒåŸºæœ¬çš„é¡¹ç›®é…ç½®ä»¥åŠç”¨æˆ·åå’Œé‚®ç®±éƒ½å·²ç»é…ç½®å¥½ï¼Œæœ€åå†æ¬¡è¿›è¡Œä»£ç æäº¤æµ‹è¯•çš„æ—¶å€™æç¤ºæƒé™ä¸è¶³çš„é—®é¢˜ã€‚</p><p><img src="/journal/git-push-access-denied/705793b8gy1g4t694ftawj20u00u1gmm.jpg" loading="lazy"></p><p>å—¯ï¼Ÿ</p><p>å°è¯•äº†å¾ˆå¤šæ¬¡ä¾ç„¶ä¸è¡Œï¼</p><span id="more"></span><p><img src="/journal/git-push-access-denied/20210429194029.png" loading="lazy"></p><h3 id="æˆ‘çš„ç–‘é—®"><a href="#æˆ‘çš„ç–‘é—®" class="headerlink" title="æˆ‘çš„ç–‘é—®"></a>æˆ‘çš„ç–‘é—®</h3><p>ä¸æ˜¯å…¬å¼€ä»“åº“å°±å¯ä»¥éšä¾¿æäº¤çš„å—ï¼Ÿä¹‹å‰å¬è¯´é‚£äº›å¼€æºçš„é¡¹ç›®ä¸å°±æ˜¯æ‰€æœ‰äººéƒ½å¯ä»¥ä¿®æ”¹çš„å—ï¼Ÿæ‰€æœ‰äººéƒ½å¯ä»¥è¿›è¡Œæäº¤ä»£ç åˆ°è¿œç¨‹ä»“åº“çš„å—ï¼Ÿ</p><p>å½“ç„¶ä¸æ˜¯ï¼Œå› ä¸ºè¿™æ˜¯é”™è§‰ã€‚ğŸ˜ŠğŸ˜Š</p><h2 id="ç»è¿‡"><a href="#ç»è¿‡" class="headerlink" title="ç»è¿‡"></a>ç»è¿‡</h2><p>å…¶å®ä¹‹å‰åœ¨åˆšåˆšåˆ›å»ºå®Œæˆ gitee è´¦å·ï¼Œå°†ä»£ç æäº¤çš„è¿œç¨‹ä»“åº“çš„æ—¶å€™ã€‚çœ‹åˆ°æˆ‘è‡ªå·±å»ºçš„ä»£ç ä»“åº“æœ‰è¿™ä¸€é¡¹ã€‚ä¹Ÿå°±æ˜¯æˆå‘˜ç®¡ç†çš„é‚£ä¸€å—ã€‚</p><p><img src="/journal/git-push-access-denied/QQ%E5%9B%BE%E7%89%8720210429195053.png" loading="lazy"></p><p>å¼€å§‹å¹¶æ²¡æœ‰å¤ªåœ¨æ„è¿™ä¸ªæˆå‘˜ç®¡ç†ã€‚ç°åœ¨å‘ç°æˆå‘˜ç®¡ç†çœŸçš„æ˜¯éå¸¸ä¹‹é‡è¦ï¼Œåªæœ‰è¿œç¨‹ä»£ç ä»“åº“ä¸­æœ‰è¿™ä¸ªæˆå‘˜æ‰å¯ä»¥æäº¤ã€‚è¿™æ ·å°±å¯ä»¥ä¿è¯ä»£ç ä¸ä¼šè¢«æˆå‘˜ä»¥å¤–çš„æ— å…³äººå‘˜è¿›è¡Œæ¶æ„æäº¤ã€‚</p><p>ä¸ä»…ä»…æ˜¯ gitee æ‰æœ‰ï¼Œgithub ä¸Šé¢ä¹Ÿæœ‰é‚€è¯·æˆå‘˜çš„åŠŸèƒ½ã€‚çœ‹åˆ°é‚£ä¸ªç»¿è‰²çš„æŒ‰é’®äº†å—ï¼Ÿ</p><p><img src="/journal/git-push-access-denied/QQ%E6%88%AA%E5%9B%BE20210429201438.jpg" loading="lazy"></p><p>ç§æœ‰ä»“åº“å°±ä¸ç”¨è¯´äº†ï¼Œå…±æœ‰ä»“åº“ä¹Ÿæ˜¯ä¸èƒ½éšä¾¿æäº¤ï¼Œè¦æƒ³æäº¤ï¼Œé™¤éä½ æ˜¯è¯¥ä»“åº“çš„ä¸€å‘˜ã€‚</p><h2 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h2><p>æœ€åçš„ç»“æœï¼Œå½“ç„¶å°±æ˜¯å°†ç”¨æˆ·æ·»åŠ åˆ°ä»“åº“æˆå‘˜å°±å¯ä»¥è¿›è¡Œæ„‰å¿«çš„æäº¤å’¯ã€‚</p><p><img src="/journal/git-push-access-denied/xiong.jpg" loading="lazy"></p><p>å˜¿å˜¿(Âºï¹ƒÂº )</p>]]></content>
      
      
      <categories>
          
          <category> å°èµ«èµ«çš„é¡¹ç›®æ—¥å¿— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo éƒ¨ç½²æŠ¥é”™ä¹‹ EMFILE</title>
      <link href="/journal/hexo-enfile-resolve/"/>
      <url>/journal/hexo-enfile-resolve/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h2><p>ä»Šå¤©ç»™â€œå…³äºæˆ‘â€æ ç›®æ·»åŠ  Aplayer éŸ³ä¹æ’­æ”¾å™¨æ—¶ï¼Œåœ¨åšå¥½åŸºæœ¬çš„é…ç½®ä¹‹åï¼Œå¼€å§‹åšå¥½è¯•è¿è¡Œæ—¶ã€‚çˆ†å‡ºäº†ä»¥ä¸‹çš„é”™è¯¯ã€‚</p><p><img src="/journal/hexo-enfile-resolve/QQ%E6%88%AA%E5%9B%BE20210426224037.png" loading="lazy"></p><p>ä¼°è®¡æ˜¯åœ¨å®‰è£… APlayer å®‰è£…é”™äº†ï¼Œå› ä¸ºæˆ‘ç”¨çš„æ˜¯ cnpm è¿›è¡Œå®‰è£…çš„ã€‚ä¹Ÿæœ‰å¯èƒ½æ˜¯ Hexo ç”Ÿæˆçš„çš„è¿‡ç¨‹ä¸­æŠ½é£äº†ã€‚</p><p>è¿™ä¸ªé”™è¯¯ä¸€ç›´åœ¨æ§åˆ¶å°ç–¯ç‹‚çš„è¾“å‡ºã€‚çœ‹ä¼¼å¯æ€•ï¼Œå…¶å®çˆ†å‡ºçš„é”™è¯¯ä¹Ÿå°±è¿™ä¸€å¥ã€‚</p><pre class="language-none"><code class="language-none">Error: EMFILE, too many open files</code></pre><p>å®˜ç½‘çš„è§£é‡Šå¦‚æ˜¯è¯´ï¼š</p><blockquote><p>è™½ç„¶ Node.js æœ‰éé˜»å¡ I/Oï¼ŒåŒæ­¥ I/O çš„æ•°é‡ä»è¢«ç³»ç»Ÿæ‰€é™åˆ¶ï¼Œåœ¨äº§ç”Ÿå¤§é‡é™æ€æ¡£æ¡ˆçš„æ—¶å€™ï¼Œæ‚¨å¯èƒ½ä¼šç¢°åˆ°EMFILE é”™è¯¯ï¼Œæ‚¨å¯è¯•ç€æé«˜åŒæ­¥ I/O çš„é™åˆ¶æ¥è§£å†³æ­¤é—®é¢˜ </p></blockquote><p>ç„¶åå®˜ç½‘ç»™å‡ºäº†ä¸€ä¸ªå‘½ä»¤</p><blockquote><pre class="language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">ulimit</span> -n <span class="token number">10000</span></code></pre></blockquote><p>åŸæœ¬ä»¥ä¸ºè¿™å°±å¯ä»¥è½»è½»æ¾æ¾çš„è§£å†³ï¼Œç„¶è€Œå¹¶æ²¡æœ‰ã€‚ğŸ˜±ğŸ˜±</p><span id="more"></span><pre class="language-batch" data-language="batch"><code class="language-batch"><span class="token command"><span class="token keyword">D</span><span class="token label property">:\MyWeb\mywebsite2>ulimit</span> <span class="token parameter attr-name">-n</span> <span class="token number">10000</span></span><span class="token punctuation">'</span>ulimit<span class="token punctuation">'</span> ä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤ï¼Œä¹Ÿä¸æ˜¯å¯è¿è¡Œçš„ç¨‹åºæˆ–æ‰¹å¤„ç†æ–‡ä»¶ã€‚</code></pre><p>å› ä¸ºè¿™ä¸ªå‘½ä»¤åªæœ‰åœ¨ Linux ä¸Šçš„æ“ä½œç³»ç»Ÿæœ‰ï¼ŒWindows ä¸Šå¹¶æ²¡æœ‰ã€‚</p><p>ä¸‹é¢å°±æ˜¯æˆ‘è‹¦è‹¦å¯»æ‰¾çš„è§£å†³æ–¹æ³•çš„è¿‡ç¨‹ï¼Œè§£å†³çš„ç»ˆæåŠæ³•ç›´æ¥æŠŠæˆ‘ç¬‘å“­äº† ğŸ˜‚</p><h2 id="ç»è¿‡"><a href="#ç»è¿‡" class="headerlink" title="ç»è¿‡"></a>ç»è¿‡</h2><p>åœ¨ç™¾åº¦ä¸Šæœç´¢ï¼Œæœ‰å…³äºè¿™ä¸ªé—®é¢˜çš„æœç´¢ç»“æœå°‘çš„å¯æ€œã€‚</p><p>åœ¨è°·æ­Œä¸Šæœç´¢ï¼Œæœ‰å¾ˆå¤šç›¸å…³çš„æœç´¢ç»“æœï¼Œå¯æ˜¯ç»å¤§å¤šæ•°çš„è§£å†³æ–¹æ¡ˆè¿˜æ˜¯æŒ‰ç…§å®˜æ–¹çš„è§£å†³æ–¹å¼æ¥è§£å†³çš„ã€‚</p><p>åé¢åœ¨è°·æ­Œä¸Šæ‰¾åˆ°äº†ç»ˆæè§£å†³åŠæ³•ï¼Œè¿™ä¸ªè§£å†³åŠæ³•æ˜¯åœ¨ GitHub issue ä¸Šï¼š</p><p><a href="https://github.com/hexojs/hexo/issues/4485">https://github.com/hexojs/hexo/issues/4485</a></p><p>è¯´ç™½äº†ï¼Œå°±æ˜¯é‡æ–°ç”Ÿæˆä¸€ä¸ª Hexo ä¸ªäººåšå®¢ï¼Œç„¶åå°†åŸæ¥çš„è¿›è¡Œè¿ç§»å°± OK äº†ã€‚é¡ºä¾¿æŠŠèƒŒæ™¯ç»™æ¢äº†ã€‚</p><p><img src="/journal/hexo-enfile-resolve/QQ%E6%88%AA%E5%9B%BE20210426231001.png" loading="lazy"></p><h3 id="æ›´å¥½çš„è§£å†³åŠæ³•"><a href="#æ›´å¥½çš„è§£å†³åŠæ³•" class="headerlink" title="æ›´å¥½çš„è§£å†³åŠæ³•"></a>æ›´å¥½çš„è§£å†³åŠæ³•</h3><p>å¦‚æœè‡ªå·±çš„ Hexo åšå®¢æ˜¯éƒ¨ç½²åœ¨ GitHub Page ä¸Šï¼Œé‚£å°±æœ€å¥½äº†ï¼Œç›´æ¥å…‹éš†ä¸‹æ¥å°±å¯ä»¥äº†ã€‚</p><h2 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h2><p>æ—¢ç„¶è‡ªå·±çš„åšå®¢å¯ä»¥æ­£å¸¸çš„éƒ¨ç½²äº†ï¼Œåé¢æˆ‘è¿˜è¯•äº†è¯• APlayer éŸ³é¢‘æ’­æ”¾å™¨æ˜¯å¦èƒ½ç”¨ã€‚</p><p>éŸ³é¢‘æ’­æ”¾å™¨ä¹Ÿèƒ½æ­£å¸¸çš„è¿ä½œäº†ã€‚</p><p><img src="/journal/hexo-enfile-resolve/QQ%E6%88%AA%E5%9B%BE20210426232127.png" loading="lazy"></p><p>ä»Šæ™šåˆæ˜¯å•¥éƒ½æ²¡å¹²çš„ä¸€å¤©ï¼Œè¿˜æ²¡æœ‰å»è·‘æ­¥ã€‚æ˜å¤©ä¸€å®šå¥½å¥½å‘æ³„è‡ªå·±ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç«™çš„éƒ¨ç½²ä¸ç»´æŠ¤ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> EMFILE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ Apache POI æ“ä½œ excel è¡¨æ ¼</title>
      <link href="/journal/How-to-use-poi-excel/"/>
      <url>/journal/How-to-use-poi-excel/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å¼€å¹•é›·å‡»ï¼Œä½ è‚¯å®šè§è¿‡è¿™ä¸ªæˆ–è€…ç±»ä¼¼å¡«è¡¨æ ¼çš„åœºæ™¯ã€‚</p><p><img src="/journal/How-to-use-poi-excel/QQ%E6%88%AA%E5%9B%BE20210424185301.jpg" loading="lazy"></p><p>æ²¡é”™ï¼Œå­¦æ ¡æˆ–è€…å…¬å¸å†…éƒ¨æœ‰æ—¶å€™éœ€è¦å®‰æ’å¡«å†™ä¸€äº›ä¿¡æ¯ï¼Œç„¶åè¿™äº›ä¿¡æ¯é€šè¿‡ä¸Šä¼  excel çš„æ–¹å¼å°†å…¶å¯¼å…¥åˆ°ç³»ç»Ÿä¸­ã€‚åœ¨æ­¤ä¹‹å‰åªçŸ¥é“é€šè¿‡ csv æ–‡ä»¶æ¥å¯¼å…¥ç›¸å…³çš„ä¿¡æ¯ã€‚é‚£ java æ˜¯å¦‚ä½•è¯»å–æˆ–å†™å…¥ excel çš„å‘¢ï¼Ÿç›´æ¥é€šè¿‡æ–‡ä»¶æµå»ç¡¬è¯»è‚¯å®šè¯»åˆ°çš„æ˜¯ä¸€å †ä¹±ç ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨è¿™ä¸ª â€œApache POIâ€ æ¥è¯»å’Œå†™æˆ‘ä»¬çš„ excelã€‚</p><p>åŒæ—¶ Apache POI çš„ä½¿ç”¨ä¹Ÿéå¸¸ç®€å•ã€‚</p><blockquote><p>ç‰¹åˆ«æƒ³åæ§½æŠŠ python å¹ä¸Šå¤©çš„é‚£äº›å¹¿å‘Šå’ŒåŸ¹è®­æœºæ„ï¼Œæˆ‘ä¾ç„¶è¿˜è®°å¾—åœ¨ python åˆšåˆšè¢«å¹ä¸Šå¤©çš„é‚£ä¸ªæ—¶æœŸï¼Œè¯´ python ä»€ä¹ˆéƒ½èƒ½å¹²ï¼Œå…¶ä¸­ä¸ä¹æœ‰ python æ“ä½œ excelã€‚</p><p>ä»¥å‰ä¸€ç›´è®¤ä¸ºåªæœ‰ python æ‰å¯ä»¥æ“ä½œè¡¨æ ¼ï¼Œä»Šå¤©å­¦å®Œä¹‹åï¼Œjava ä¹Ÿæ˜¯å¯ä»¥æ“ä½œ excel è¡¨æ ¼çš„ã€‚</p></blockquote><p>å…¶å®åœºæ™¯è¿˜æ˜¯éå¸¸ä¹‹å¤šçš„ï¼Œæ¯”å¦‚å°†æœŸæœ«è€ƒè¯•çš„æˆç»©è¿›è¡Œå¯¼å‡ºåˆ° excel ï¼Œè¿™ä¸ªæ“ä½œå…¶å®ä¹Ÿæ˜¯éå¸¸ä¹‹å¸¸è§çš„å’¯ã€‚</p><p><img src="/journal/How-to-use-poi-excel/Screenshot_20210423_135155.jpg" loading="lazy"></p><p>æ€ä¹ˆæ ·ï¼Œé˜¿å°”æ•ç¾ä¸ç¾ğŸ˜‰ğŸ˜‰</p><span id="more"></span><h2 id="ä»‹ç»å’Œå¯¼å…¥"><a href="#ä»‹ç»å’Œå¯¼å…¥" class="headerlink" title="ä»‹ç»å’Œå¯¼å…¥"></a>ä»‹ç»å’Œå¯¼å…¥</h2><p>å¥½çš„ï¼Œ<del>ç°åœ¨ç”±æˆ‘æ¥ä»‹ç»è¿›å‡»çš„å·¨äººä¹‹é˜¿å°”æ•</del>ï¼Œä¸å¯¹ï¼Œèµ°é”™ç‰‡åœºäº†ã€‚</p><p>ç”±æˆ‘æ¥ä»‹ç» Apache POI æ˜¯å•¥ï¼ŒApache POI æ˜¯ç”¨ Java ç¼–å†™çš„å…è´¹å¼€æºçš„è·¨å¹³å°çš„ Java APIï¼ŒApache POI æä¾› API è®© Java æ“ä½œ Microsoft Officeï¼ˆExcelã€WORDã€PowerPointã€Visioç­‰ï¼‰æ–‡æ¡£çš„è¯»å’Œå†™çš„åŠŸèƒ½ã€‚</p><p>è¯´èµ·è¿™ä¸ªä¸œè¥¿å¯ä»¥æ“ä½œ wordï¼Œè¿™å°±æ„å‘³ç€å¯ä»¥å®ç°ä»æ•°æ®åº“å¯¼å‡ºæ•°æ®åˆ° word çš„åŠŸèƒ½ã€‚ç¾¡æ…•</p><h3 id="å¸¸ç”¨çš„ç±»"><a href="#å¸¸ç”¨çš„ç±»" class="headerlink" title="å¸¸ç”¨çš„ç±»"></a>å¸¸ç”¨çš„ç±»</h3><p>Apache POI æä¾›äº† 8 ä¸ªå¸¸ç”¨çš„ç±»ï¼ŒåŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªã€‚</p><ul><li>HSSF ï¼ æä¾›è¯»å†™ Microsoft Excel XLS æ ¼å¼æ¡£æ¡ˆçš„åŠŸèƒ½ã€‚</li><li>XSSF ï¼ æä¾›è¯»å†™ Microsoft Excel OOXML XLSX æ ¼å¼æ¡£æ¡ˆçš„åŠŸèƒ½ã€‚</li><li>HWPF ï¼ æä¾›è¯»å†™ Microsoft Word DOC97 æ ¼å¼æ¡£æ¡ˆçš„åŠŸèƒ½ã€‚</li><li>XWPF ï¼ æä¾›è¯»å†™ Microsoft Word DOC2003 æ ¼å¼æ¡£æ¡ˆçš„åŠŸèƒ½ã€‚</li><li>HSLF ï¼ æä¾›è¯»å†™ Microsoft PowerPoint æ ¼å¼æ¡£æ¡ˆçš„åŠŸèƒ½ã€‚</li><li>HDGF ï¼ æä¾›è¯» Microsoft Visio æ ¼å¼æ¡£æ¡ˆçš„åŠŸèƒ½ã€‚</li><li>HPBF ï¼ æä¾›è¯» Microsoft Publisher æ ¼å¼æ¡£æ¡ˆçš„åŠŸèƒ½ã€‚</li><li>HSMF ï¼ æä¾›è¯» Microsoft Outlook æ ¼å¼æ¡£æ¡ˆçš„åŠŸèƒ½ã€‚</li></ul><h3 id="éœ€è¦å¯¼å…¥çš„-jar-åŒ…"><a href="#éœ€è¦å¯¼å…¥çš„-jar-åŒ…" class="headerlink" title="éœ€è¦å¯¼å…¥çš„ jar åŒ…"></a>éœ€è¦å¯¼å…¥çš„ jar åŒ…</h3><p>å¯ä»¥ä½¿ç”¨ maven çš„æ–¹å¼è‡ªåŠ¨å¼•å…¥ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å°† jar åŒ…ä¸‹è½½ä¸‹æ¥ã€‚</p><ul><li>Apache POIï¼Œ<a href="https://mvnrepository.com/artifact/org.apache.poi/poi/5.0.0">https://mvnrepository.com/artifact/org.apache.poi/poi/5.0.0</a></li><li>Joda Timeï¼Œ<a href="https://mvnrepository.com/artifact/joda-time/joda-time/2.10.10">https://mvnrepository.com/artifact/joda-time/joda-time/2.10.10</a></li></ul><h2 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h2><p>æœ¬æ¬¡ç¤ºä¾‹æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯åŸºæœ¬ä½¿ç”¨ï¼Œå¦ä¸€ä¸ªæ˜¯ 99 ä¹˜æ³•è¡¨çš„åº”ç”¨ã€‚ä½¿ç”¨çš„æ–¹æ³•ä¹Ÿæ˜¯éå¸¸çš„ç®€å•ï¼Œå’Œæ“ä½œäºŒç»´æ•°ç»„ä¸€æ ·å¾ˆç›¸ä¼¼ã€‚</p><h3 id="ç®€å•ç¤ºä¾‹"><a href="#ç®€å•ç¤ºä¾‹" class="headerlink" title="ç®€å•ç¤ºä¾‹"></a>ç®€å•ç¤ºä¾‹</h3><h4 id="å†™å…¥åˆ°ç£ç›˜"><a href="#å†™å…¥åˆ°ç£ç›˜" class="headerlink" title="å†™å…¥åˆ°ç£ç›˜"></a>å†™å…¥åˆ°ç£ç›˜</h4><p>1ã€å¯¼å…¥å®Œæˆä¹‹åï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ª Workbook å¯¹è±¡ã€‚æ¯ä¸€ä¸ª Workbook å¯¹è±¡å¯¹åº”çš„æ˜¯ä¸€ä¸ª excel çš„å·¥ä½œç°¿</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Workbook</span> workbook <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HSSFWorkbook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>2ã€ç„¶ååˆ›å»ºä¸€ä¸ªå·¥ä½œè¡¨ï¼Œä¹Ÿå°±æ˜¯ sheetã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Sheet</span> sheet <span class="token operator">=</span> workbook<span class="token punctuation">.</span><span class="token function">createSheet</span><span class="token punctuation">(</span><span class="token string">"å·¥ä½œè¡¨1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p>æˆ‘ä»¬ç›´æ¥æ‰“å¼€ excel ç¨‹åºçš„æ—¶å€™ï¼Œé»˜è®¤æ˜¯å¦‚ä¸‹å›¾çš„æ ·å­ï¼Œæœ‰ä¸€ä¸ª sheetã€‚è€Œé€šè¿‡ Java åˆ›å»ºå°±ä¸ä¸€æ ·ï¼Œéœ€è¦è°ƒç”¨ <code>createSheet</code> æ–¹æ³•å³å¯ã€‚</p><p><img src="/journal/How-to-use-poi-excel/QQ%E6%88%AA%E5%9B%BE20210424194218.jpg" loading="lazy"></p></blockquote><p>3ã€åˆ›å»ºå®Œå·¥ä½œè¡¨ä¹‹åï¼Œå°±å¯ä»¥å¯¹å•å…ƒæ ¼è¿›è¡Œæ“ä½œäº†ï¼Œå…ˆåˆ›å»ºä¸€è¡Œ</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// åˆ›å»ºä¸€ä¸ªè¡Œ</span><span class="token class-name">Row</span> row <span class="token operator">=</span> sheet<span class="token punctuation">.</span><span class="token function">createRow</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>4ã€ç„¶åå†åˆ›å»ºå•å…ƒæ ¼ï¼Œå¹¶åœ¨å•å…ƒæ ¼ä¸­å¡«å†™ä¿¡æ¯ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// åˆ›å»ºå•å…ƒæ ¼</span><span class="token class-name">Cell</span> cell1 <span class="token operator">=</span> row<span class="token punctuation">.</span><span class="token function">createCell</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cell1<span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span><span class="token string">"ä»Šæ—¥æ–°å¢è§‚ä¼—"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Cell</span> cell2 <span class="token operator">=</span> row<span class="token punctuation">.</span><span class="token function">createCell</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cell2<span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span><span class="token number">666</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>5ã€æˆ‘ä»¬å†æ¬¡åˆ›å»ºä¸€è¡Œ</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// åˆ›å»ºä¸€ä¸ªè¡Œ</span><span class="token class-name">Row</span> row2 <span class="token operator">=</span> sheet<span class="token punctuation">.</span><span class="token function">createRow</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// åˆ›å»ºä¸€ä¸ªå•å…ƒæ ¼</span><span class="token class-name">Cell</span> cell21 <span class="token operator">=</span> row2<span class="token punctuation">.</span><span class="token function">createCell</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cell21<span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span><span class="token string">"ç»Ÿè®¡æ—¶é—´"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Cell</span> cell22 <span class="token operator">=</span> row2<span class="token punctuation">.</span><span class="token function">createCell</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cell22<span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>6ã€åˆ›å»ºæ–‡ä»¶è¾“å‡ºæµï¼Œå°† excel ä¿å­˜åˆ°ç£ç›˜ï¼ˆéœ€è¦æŠ›å‡ºå¼‚å¸¸ï¼‰</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">FileOutputStream</span> fileOutputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"d:\\excel_demo\\demo.xls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>workbook<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>fileOutputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>fileOutputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>7ã€è¿è¡Œç»“æœ</p><p><img src="/journal/How-to-use-poi-excel/QQ%E6%88%AA%E5%9B%BE20210424195558.jpg" loading="lazy"></p><blockquote><p>æ³¨æ„ï¼šè¡Œå’Œåˆ—éƒ½æ˜¯ä» 0 å¼€å§‹çš„</p></blockquote><h4 id="ä»ç£ç›˜è¯»å–"><a href="#ä»ç£ç›˜è¯»å–" class="headerlink" title="ä»ç£ç›˜è¯»å–"></a>ä»ç£ç›˜è¯»å–</h4><p>è¯»å–æ–‡ä»¶ä¹Ÿæ˜¯éå¸¸çš„ç®€å•ï¼Œå†™å…¥çš„æ—¶å€™æ˜¯ createXXX ï¼Œé‚£ä¹ˆè¯»å–çš„æ—¶å€™å°±æ˜¯ getXXX ã€‚è¯»å– excel çš„ä»£ç å¦‚ä¸‹ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// è·å–æ–‡ä»¶æµ</span><span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"d:\\excel_demo\\demo.xls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// åˆ›å»ºå·¥ä½œç°¿</span><span class="token class-name">HSSFWorkbook</span> workbook <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HSSFWorkbook</span><span class="token punctuation">(</span>fis<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// åˆ›å»ºå·¥ä½œè¡¨</span><span class="token class-name">HSSFSheet</span> sheet0 <span class="token operator">=</span> workbook<span class="token punctuation">.</span><span class="token function">getSheet</span><span class="token punctuation">(</span><span class="token string">"å·¥ä½œè¡¨1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–ç¬¬ 0 è¡Œ</span><span class="token class-name">HSSFRow</span> row <span class="token operator">=</span> sheet0<span class="token punctuation">.</span><span class="token function">getRow</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–ç¬¬ 0,1 ä¸ªå•å…ƒæ ¼</span><span class="token class-name">HSSFCell</span> cell0 <span class="token operator">=</span> row<span class="token punctuation">.</span><span class="token function">getCell</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">HSSFCell</span> cell1 <span class="token operator">=</span> row<span class="token punctuation">.</span><span class="token function">getCell</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–å•å…ƒæ ¼ä¸­çš„å€¼</span><span class="token class-name">String</span> stringCellValue <span class="token operator">=</span> cell0<span class="token punctuation">.</span><span class="token function">getStringCellValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">double</span> numericCellValue <span class="token operator">=</span> cell1<span class="token punctuation">.</span><span class="token function">getNumericCellValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringCellValue <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> numericCellValue<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œç»“æœï¼š</p><p><img src="/journal/How-to-use-poi-excel/QQ%E6%88%AA%E5%9B%BE20210424200422.jpg" loading="lazy"></p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>Excelä¸­çš„å·¥ä½œç°¿ã€å·¥ä½œè¡¨ã€è¡Œã€å•å…ƒæ ¼ä¸­æœ‰å¦‚ä¸‹å…³ç³»</p><ol><li>ä¸€ä¸ª Excel æ–‡ä»¶å¯¹åº”äºä¸€ä¸ª Workbook</li><li>ä¸€ä¸ª Workbook å¯ä»¥æœ‰å¤šä¸ª Sheet ç»„æˆ</li><li> ä¸€ä¸ª Sheet æ˜¯ç”±å¤šä¸ª Row ç»„æˆ</li><li>ä¸€ä¸ª Row æ˜¯ç”±å¤šä¸ª Cell ç»„æˆ</li></ol><h3 id="99-ä¹˜æ³•è¡¨"><a href="#99-ä¹˜æ³•è¡¨" class="headerlink" title="99 ä¹˜æ³•è¡¨"></a>99 ä¹˜æ³•è¡¨</h3><p>æ•¢ä¸æ•¢è¯•ä¸€è¯•å°† 99 ä¹˜æ³•è¡¨å†™åˆ° excel è¡¨æ ¼ä¸­</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// åˆ›å»ºå·¥ä½œç°¿</span><span class="token class-name">HSSFWorkbook</span> workbook <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HSSFWorkbook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// åˆ›å»ºå·¥ä½œè¡¨</span><span class="token class-name">Sheet</span> sheet <span class="token operator">=</span> workbook<span class="token punctuation">.</span><span class="token function">createSheet</span><span class="token punctuation">(</span><span class="token string">"99ä¹˜æ³•è¡¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">9</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// åˆ›å»ºè¡Œ</span>    <span class="token class-name">Row</span> row <span class="token operator">=</span> sheet<span class="token punctuation">.</span><span class="token function">createRow</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// åˆ›å»ºåˆ—ï¼ˆåˆ›å»ºå•å…ƒæ ¼ï¼‰</span>        <span class="token class-name">Cell</span> cell <span class="token operator">=</span> row<span class="token punctuation">.</span><span class="token function">createCell</span><span class="token punctuation">(</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        cell<span class="token punctuation">.</span><span class="token function">setCellValue</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token string">" Ã— "</span> <span class="token operator">+</span> j <span class="token operator">+</span> <span class="token string">" = "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i <span class="token operator">*</span> j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// æ‰“å¼€è¾“å‡ºæµ</span><span class="token class-name">FileOutputStream</span> fileOutputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"d:\\excel_demo\\demo2.xls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>workbook<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>fileOutputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>fileOutputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œç»“æœå¦‚ä¸‹</p><p><img src="/journal/How-to-use-poi-excel/QQ%E6%88%AA%E5%9B%BE20210424201141.jpg" loading="lazy"></p><p>å°† 99 ä¹˜æ³•è¡¨è¯»å–å‡ºæ¥</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// è·å–æ–‡ä»¶æµ</span><span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"d:\\excel_demo\\demo2.xls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// åˆ›å»ºå·¥ä½œç°¿å¯¹è±¡</span><span class="token class-name">HSSFWorkbook</span> workbook <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HSSFWorkbook</span><span class="token punctuation">(</span>fis<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å¾—åˆ°å·¥ä½œè¡¨</span><span class="token class-name">HSSFSheet</span> sheet <span class="token operator">=</span> workbook<span class="token punctuation">.</span><span class="token function">getSheet</span><span class="token punctuation">(</span><span class="token string">"99ä¹˜æ³•è¡¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// å¾—åˆ°è¡Œ</span>    <span class="token class-name">HSSFRow</span> row <span class="token operator">=</span> sheet<span class="token punctuation">.</span><span class="token function">getRow</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">HSSFCell</span> cell <span class="token operator">=</span> row<span class="token punctuation">.</span><span class="token function">getCell</span><span class="token punctuation">(</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>cell<span class="token punctuation">.</span><span class="token function">getStringCellValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>fis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>workbook<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œç»“æœ</p><p><img src="/journal/How-to-use-poi-excel/QQ%E6%88%AA%E5%9B%BE20210424201319.jpg" loading="lazy"></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>ä½¿ç”¨ Apache POI æ“ä½œ excel å…¶å®è¿˜æ˜¯ä¸éš¾çš„ã€‚åç»­çš„æœŸæœ«é¡¹ç›®è‚¯å®šæ˜¯éœ€è¦åˆ©ç”¨åˆ°çš„ï¼Œæœªæ¥åœ¨åˆ©ç”¨ excel è¿›è¡Œæ•°æ®çš„å¯¼å…¥å’Œå¯¼å‡ºï¼Œä¼šç»§ç»­å†™ä¸€ç¯‡æ—¥å¿—å‡ºæ¥è®°å½•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å°èµ«èµ«çš„é¡¹ç›®æ—¥å¿— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> excel </tag>
            
            <tag> POI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆè¯†ä¸­é—´ä»¶ä¸åˆ†å¸ƒå¼æ¶æ„</title>
      <link href="/journal/what-s-middleware/"/>
      <url>/journal/what-s-middleware/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å¯¹äºä¸­é—´ä»¶è¿˜æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ï¼Œä¸¤è€…ä¹‹é—´æ— æ³•â€œæ²Ÿé€šâ€ï¼Œéœ€è¦ä»‹å…¥ç¬¬ä¸‰è€…ï¼Œé—´æ¥çš„ä½¿å…¶æ²Ÿé€šã€‚ä¸è¿‡åœ¨ç”Ÿæ´»ä¸­æœ‰çš„æ—¶å€™è¿˜æ˜¯ä¸è¦ä»‹å…¥å¥‡å¥‡æ€ªæ€ªçš„ç¬¬ä¸‰è€…æ¯”è¾ƒå¥½ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶"><a href="#ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶"></a>ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶</h2><p>ä¸¾ä¸ªå¾ˆå¸¸è§çš„ä¾‹å­ï¼Œå¤–äº¤éƒ¨å‘è¨€äººï¼ˆç®€ç§°å‘è¨€äººï¼‰è¦å’Œå¤–å›½çš„è®°è€…è¿›è¡Œäº¤æµã€‚å¤–å›½è®°è€…éœ€è¦æé—®ï¼Œå‘è¨€äººéœ€è¦å›ç­”ä»–çš„é—®é¢˜ã€‚å¯æ˜¯ç›´æ¥å¬å–å¤–å›½è®°è€…çš„é—®é¢˜ä¼¼ä¹æœ‰äº›éº»çƒ¦ï¼Œé‚£ä½ çŸ¥é“æ˜¯å¦‚ä½•è§£å†³çš„å‘¢ï¼Ÿ</p><p>æ²¡é”™ï¼Œå°±æ˜¯åŒå£°ä¼ è¯‘äº†ã€‚ä¹Ÿå°±æ˜¯è¯´æœ‰ä¸€ä¸ªç¿»è¯‘ï¼Œé‚£äº›å¤–å›½äººå¬åˆ°çš„éƒ½æ˜¯é‚£ä¸ªç¿»è¯‘è¯´çš„è¯ï¼Œè€Œä¸æ˜¯ç›´æ¥å¬å‘è¨€äººè¯´çš„è¯ã€‚</p><p>æ‰€ä»¥ï¼Œä¸Šé¢çš„ä¾‹å­æ‰€æåˆ°çš„â€œåŒå£°ä¼ è¯‘â€å°±å«åšä¸­é—´ä»¶ã€‚</p><p>åœ¨è®¡ç®—æœºé¢†åŸŸä¸­ï¼Œä¸­é—´ä»¶æœ‰ä»¥ä¸‹çš„è¯´æ³•</p><blockquote><p>ä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰æ˜¯å¤„äºæ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºä¹‹é—´çš„è½¯ä»¶ï¼Œä¹Ÿæœ‰äººè®¤ä¸ºå®ƒåº”è¯¥å±äºæ“ä½œç³»ç»Ÿä¸­çš„ä¸€éƒ¨åˆ†ã€‚</p><p>äººä»¬åœ¨ä½¿ç”¨ä¸­é—´ä»¶æ—¶ï¼Œå¾€å¾€æ˜¯ä¸€ç»„ä¸­é—´ä»¶é›†æˆåœ¨ä¸€èµ·ï¼Œæ„æˆä¸€ä¸ªå¹³å°ï¼ˆåŒ…æ‹¬å¼€å‘å¹³å°å’Œè¿è¡Œå¹³å°ï¼‰ï¼Œä½†åœ¨è¿™ç»„ä¸­é—´ä»¶ä¸­å¿…é¡»è¦æœ‰ä¸€ä¸ªé€šä¿¡ä¸­é—´ä»¶ï¼Œå³ä¸­é—´ä»¶ = å¹³å° + é€šä¿¡ï¼Œè¿™ä¸ªå®šä¹‰ä¹Ÿé™å®šäº†åªæœ‰ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ‰èƒ½ç§°ä¸ºä¸­é—´ä»¶ï¼ŒåŒæ—¶è¿˜å¯ä»¥æŠŠå®ƒä¸æ”¯æ’‘è½¯ä»¶å’Œå®ç”¨è½¯ä»¶åŒºåˆ†å¼€æ¥ã€‚</p></blockquote><p>ä¸­é—´ä»¶çš„æ¦‚å¿µä¼¼ä¹å¾ˆéš¾è¯´æ¸…æ¥šï¼Œç¡®é€šè¿‡ç®€å•çš„ä¾‹å­å°±èƒ½å¤Ÿè¾ƒå¥½çš„ç†è§£ã€‚æŒ‰ç…§ä¸Šé¢ä¾‹å­ï¼Œ<del>å¥½åƒ</del>èƒ½å¤Ÿå¯¹åº”çš„ä¸Šçš„æ ·å­è€¶ã€‚</p><span id="more"></span><p>ä¸è¿‡ä¸­é—´ä»¶å…·æœ‰ä»¥ä¸‹çš„ç‰¹ç‚¹ã€‚</p><ol start="4"><li>æ ‡å‡†çš„åè®®</li><li>æ ‡å‡†çš„æ¥å£</li><li>æŒä¹…æ€§</li><li>é«˜å¯ç”¨ï¼Œé«˜å¯æ‰©</li></ol><blockquote><p>åœ¨é¡¹ç›®çš„æ¶æ„å’Œé‡æ„ä¸­ï¼Œä½¿ç”¨ä»»ä½•æŠ€æœ¯å’Œæ¶æ„çš„æ”¹å˜æˆ‘ä»¬éƒ½éœ€è¦è°¨æ…æ–Ÿé…Œå’Œæ€è€ƒï¼Œå› ä¸ºä»»ä½•æŠ€æœ¯çš„èå…¥å’Œå˜åŒ–éƒ½å¯èƒ½äººå‘˜ï¼ŒæŠ€æœ¯ï¼Œå’Œæˆæœ¬çš„å¢åŠ ï¼Œä¸­é—´ä»¶çš„æŠ€æœ¯ä¸€èˆ¬ç°åœ¨ä¸€äº›äº’è”ç½‘å…¬å¸æˆ–è€…é¡¹ç›®ä¸­ä½¿ç”¨æ¯”è¾ƒå¤šï¼Œå¦‚æœä½ ä»…ä»…è¿˜åªæ˜¯ä¸€ä¸ªåˆåˆ›å…¬å¸å»ºè®®è¿˜æ˜¯ä½¿ç”¨å•ä½“æ¶æ„ï¼Œæœ€å¤šåŠ ä¸ªç¼“å­˜ä¸­é—´ä»¶å³å¯ï¼Œä¸è¦ç›²ç›®è¿½æ±‚æ–°æˆ–è€…æ‰€è°“çš„é«˜æ€§èƒ½ï¼Œè€Œè¿½æ±‚çš„èƒŒåä¸€å®šæ˜¯ä¸šåŠ¡çš„é©±åŠ¨å’Œé¡¹ç›®çš„é©±åŠ¨ï¼Œå› ä¸ºä¸€æ—¦è¿½æ±‚å°±æ„å‘³ç€ä½ çš„å­¦ä¹ æˆæœ¬ï¼Œå…¬å¸çš„äººå‘˜ç»“æ„ä»¥åŠæœåŠ¡å™¨æˆæœ¬ï¼Œç»´æŠ¤å’Œè¿ç»´çš„æˆæœ¬éƒ½ä¼šå¢åŠ ï¼Œæ‰€ä»¥éœ€è¦è°¨æ…é€‰æ‹©å’Œè€ƒè™‘ã€‚</p></blockquote><h2 id="æœ‰å“ªäº›ä¸­é—´ä»¶æŠ€æœ¯"><a href="#æœ‰å“ªäº›ä¸­é—´ä»¶æŠ€æœ¯" class="headerlink" title="æœ‰å“ªäº›ä¸­é—´ä»¶æŠ€æœ¯"></a>æœ‰å“ªäº›ä¸­é—´ä»¶æŠ€æœ¯</h2><p>ä¸­é—´ä»¶æŠ€æœ¯åˆ†ä¸º 4 ç±»ï¼šæ¶ˆæ¯ä¸­é—´ä»¶ã€è´Ÿè½½å‡å¾ˆä¸­é—´ä»¶ã€ç¼“å­˜ä¸­é—´ä»¶å’Œé«˜å¯ç”¨ä¸­é—´ä»¶ã€‚å…ˆè®°å½•è¿™äº›ï¼Œå¯¹è¿™å››ç±»çš„ä¸­é—´ä»¶è¿›è¡Œä¸€ä¸ªäº†è§£ã€‚</p><h3 id="æ¶ˆæ¯ä¸­é—´ä»¶"><a href="#æ¶ˆæ¯ä¸­é—´ä»¶" class="headerlink" title="æ¶ˆæ¯ä¸­é—´ä»¶"></a>æ¶ˆæ¯ä¸­é—´ä»¶</h3><p>æ¶ˆæ¯ä¸­é—´ä»¶åˆ†åˆ«æœ‰ï¼š</p><ul><li>ActiveMQ</li><li>RabbitMQ</li><li>Kafka</li><li>RocketMQ</li></ul><p>ä½¿ç”¨åœºæ™¯ï¼š</p><ul><li>æ¶ˆæ¯ä¸­é—´ä»¶ç›‘æ§æ•°æ®</li><li>å¼‚æ­¥æ•°æ®ä¼ è¾“åœºæ™¯</li><li>å‰Šå³°å¡«è°·åœºæ™¯</li><li>ä»»åŠ¡è°ƒåº¦åœºæ™¯</li><li>æµ·é‡æ•°æ®åŒæ­¥åœºæ™¯</li><li>åˆ†å¸ƒå¼äº‹åŠ¡åœºæ™¯</li><li>æ—¥è®°ç®¡ç†åœºæ™¯</li><li>å¤§æ•°æ®åˆ†æåœºæ™¯</li></ul><p>ç›¸å…³çš„è§„èŒƒï¼š</p><ul><li>AMQP</li><li>MQTT</li><li>æŒä¹…åŒ–è®¾è®¡</li><li>Kafkaåè®®æ¶ˆæ¯</li><li>åˆ†å‘è®¾è®¡</li><li>é«˜å¯ç”¨è®¾è®¡</li><li>å¯é æ€§è®¾è®¡</li><li>å®¹é”™è®¾è®¡</li></ul><h3 id="è´Ÿè½½å‡è¡¡ä¸­é—´ä»¶"><a href="#è´Ÿè½½å‡è¡¡ä¸­é—´ä»¶" class="headerlink" title="è´Ÿè½½å‡è¡¡ä¸­é—´ä»¶"></a>è´Ÿè½½å‡è¡¡ä¸­é—´ä»¶</h3><ul><li>Nginx</li><li>LVSè´Ÿè½½å‡è¡¡è½¯ä»¶</li><li>KeepAlive</li><li>CDN</li></ul><h3 id="ç¼“å­˜ä¸­é—´ä»¶"><a href="#ç¼“å­˜ä¸­é—´ä»¶" class="headerlink" title="ç¼“å­˜ä¸­é—´ä»¶"></a>ç¼“å­˜ä¸­é—´ä»¶</h3><ul><li>MenCache</li><li>Redis</li></ul><h3 id="æ•°æ®åº“ä¸­é—´ä»¶"><a href="#æ•°æ®åº“ä¸­é—´ä»¶" class="headerlink" title="æ•°æ®åº“ä¸­é—´ä»¶"></a>æ•°æ®åº“ä¸­é—´ä»¶</h3><ul><li>Mycat</li><li>ShardingJDBC</li></ul><h3 id="ç›¸å…³æ¡ˆä¾‹"><a href="#ç›¸å…³æ¡ˆä¾‹" class="headerlink" title="ç›¸å…³æ¡ˆä¾‹"></a>ç›¸å…³æ¡ˆä¾‹</h3><ul><li>å¼‚æ­¥æ•°æ®ä¿å­˜</li><li>è®¢å•æ•°æ®çš„æ¶ˆæ¯åˆ†å‘</li><li>åˆ†å¸ƒå¼äº‹åŠ¡</li><li>æ¶ˆæ¯çš„å®¹é”™</li><li>åˆ†å¸ƒå¼é”</li><li>åˆ†å¸ƒå¼ä¼šè¯</li><li>åˆ†åº“åˆ†è¡¨</li></ul><h2 id="è°ˆè°ˆåˆ†å¸ƒå¼æ¶æ„"><a href="#è°ˆè°ˆåˆ†å¸ƒå¼æ¶æ„" class="headerlink" title="è°ˆè°ˆåˆ†å¸ƒå¼æ¶æ„"></a>è°ˆè°ˆåˆ†å¸ƒå¼æ¶æ„</h2><p>åœ¨æèµ·åˆ†å¸ƒå¼æ¶æ„ä¹‹å‰ï¼Œå…ˆè¯´è¯´å•ä½“æ¶æ„ã€‚</p><p>å•ä½“æ¶æ„å…¶å®å°±æ˜¯æ‰€æœ‰çš„ä»£ç ï¼Œé™æ€èµ„æºæ–‡ä»¶éƒ½åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ã€‚ä½†æ˜¯è¿™ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼Œé¡¹ç›®è§„æ¨¡å˜å¤§ä¹‹åå¦‚æœä»…ä»…æ˜¯ä¸€ä¸ªå°åŠŸèƒ½éœ€è¦å‡çº§çš„è¯ï¼Œé‚£ä¹ˆå°±å¿…é¡»å¾—é‡æ–°å»éƒ¨ç½²æ•´ä¸ªé¡¹ç›®ã€‚</p><p>ä¸æ˜¯è¯´å•ä½“æ¶æ„åƒåœ¾ï¼Œæ²¡ç”¨ã€‚å› ä¸ºæ¯•ç«Ÿäº‹ç‰©å…·æœ‰ä¸¤é¢æ€§ï¼Œå®ƒæœ‰å®ƒå­˜åœ¨çš„æ„ä¹‰ï¼Œå¦‚æœæ˜¯ä¸ºäº†ç›²ç›®è·Ÿé£è€Œå»é€‰ç”¨åˆ†å¸ƒå¼æŠ€æœ¯ï¼Œé‚£æˆ‘è§‰å¾—å¾ˆæ²¡å¿…è¦ã€‚</p><p><img src="/journal/what-s-middleware/aaadf.jpg" alt="å•ä½“æ¶æ„" loading="lazy"></p><p>ï¼ˆå›¾ç‰‡æ¥æºäºç½‘ç»œï¼‰</p><p>è€Œä¸”è¿™æ ·çš„æ¶æ„æ‰€å­˜åœ¨çš„é—®é¢˜ä¾¿æ˜¯ï¼š</p><ul><li>è€¦åˆåº¦å¤ªé«˜</li><li>è¿ç»´çš„æˆæœ¬è¿‡é«˜</li><li>ä¸æ˜“ç»´æŠ¤</li><li>æœåŠ¡å™¨çš„æˆæœ¬é«˜</li><li>å‡çº§æ¶æ„çš„éš¾åº¦åŠ å¤§</li></ul><p>åˆ†å¸ƒå¼æ¶æ„ï¼Œå°±æ˜¯æŠŠç³»ç»Ÿæ‹†æˆè‹¥å¹²ä¸ªéƒ¨åˆ†ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªè¯·æ±‚ç”±æœåŠ¡å™¨ç«¯çš„å¤šä¸ªç³»ç»Ÿæ¥å®Œæˆçš„ã€‚</p><blockquote><p>å•ä½“æ¶æ„å°±æƒ³å»ºè®¾ä¸€ä¸ªå°æˆ¿å­å¾ˆå¿«å°±èƒ½å¤Ÿæå®šï¼Œå¦‚æœä½ è¦å»ºè®¾ä¸€ä¸ªé¸Ÿå·¢æˆ–è€…å¤§å‹çš„å»ºç­‘ï¼Œä½ å°±å¿…é¡»æ˜¯å„ä¸ªç¯èŠ‚çš„ååŒå’Œåˆ†å¸ƒï¼Œè¿™æ ·ç›®çš„ä¹Ÿæ˜¯é¡¹ç›®å‘å±•éƒ½åæœŸçš„æ—¶å€™è¦å»éƒ¨ç½²å’Œæ€è€ƒçš„é—®é¢˜ã€‚</p></blockquote><p><img src="/journal/what-s-middleware/ebpnwjqsiaq.png" alt="åˆ†å¸ƒå¼ç»“æ„" loading="lazy"></p><p>ï¼ˆå›¾ç‰‡æ¥æºäºç½‘ç»œï¼‰</p><p>ä½†æ˜¯ï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„ä¹Ÿå­˜åœ¨ä¸€äº›ä¼˜ç‚¹ï¼Œä¹Ÿæœ‰ä»–çš„é—®é¢˜</p><h4 id="å¥½å¤„"><a href="#å¥½å¤„" class="headerlink" title="å¥½å¤„"></a>å¥½å¤„</h4><ul><li>å¯ä»¥åˆç†çš„åˆ†é…æœåŠ¡èµ„æºï¼Œä¸é€ æˆæœåŠ¡å™¨èµ„æºçš„æµªè´¹</li><li>ç³»ç»Ÿçš„ç‹¬ç«‹ç»´æŠ¤å’Œéƒ¨ç½²ï¼Œè€¦åˆåº¦é™ä½ã€‚å¯æ’æ‹”æ€§ã€‚</li><li>ç³»ç»Ÿçš„æ¶æ„å’ŒæŠ€æœ¯æ ˆçš„é€‰æ‹©å¯ä»¥å˜çš„çµæ´»ï¼ˆè€Œä¸æ˜¯å•çº¯çš„é€‰æ‹© javaï¼‰</li><li>å¼¹æ€§éƒ¨ç½²ï¼Œä¸ä¼šé€ æˆå¹³å°å› éƒ¨ç½²é€ æˆçš„ç˜«ç—ªå’Œåœæœçš„çŠ¶æ€ã€‚</li></ul><h4 id="å­˜åœ¨é—®é¢˜"><a href="#å­˜åœ¨é—®é¢˜" class="headerlink" title="å­˜åœ¨é—®é¢˜"></a>å­˜åœ¨é—®é¢˜</h4><ul><li>å­¦ä¹ æˆæœ¬é«˜ï¼ŒæŠ€æœ¯æ ˆè¿‡å¤š</li><li>è¿ç»´æˆæœ¬å’ŒæœåŠ¡å™¨æˆæœ¬å¢é«˜</li><li>äººå‘˜çš„æˆæœ¬ä¹Ÿä¼šå¢é«˜</li><li>é¡¹ç›®çš„è´Ÿè½½åº¦ä¹Ÿä¼šä¸Šå‡</li><li>é¢ä¸´çš„é”™è¯¯å’Œå®¹é”™æ€§ä¹Ÿä¼šæˆå€å¢åŠ </li><li>å ç”¨çš„æœåŠ¡å™¨ç«¯å£å’Œé€šè®¯çš„é€‰æ‹©çš„æˆæœ¬é«˜</li><li>å®‰å…¨æ€§çš„è€ƒè™‘å’Œå› ç´ é€¼è¿«å¯èƒ½é€‰æ‹© RMI / MQ ç›¸å…³çš„æœåŠ¡å™¨ç«¯é€šè®¯.</li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> RabbitMQ çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
            <tag> ä¸­é—´ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•ç®¡ç†ä½ çš„å¤šä¸ª SSH key</title>
      <link href="/journal/How-do-you-configure-ssh-in-your-pc/"/>
      <url>/journal/How-do-you-configure-ssh-in-your-pc/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h2><p>ç”±äºè‡ªå·±çš„ç”µè„‘ä¸Šæœ‰å¤šä¸ª SSH çš„å…¬é’¥å’Œç§é’¥ï¼Œgithub æœ‰ä¸€ä¸ª SSH keyï¼Œè‡ªå·±çš„å°ç«™æäº¤æ—¶ä¹Ÿæœ‰ä¸€ä¸ª SSH keyï¼Œç„¶åä»Šå¤©æƒ³å¼„ä¸€ä¸ª gitee çš„ SSH keyï¼Œæ‰€ä»¥ä»Šå¤©ä¸Šåˆå’Œä¸‹åˆæ”¾å­¦ä¹‹åä¸€ç›´éƒ½åœ¨æŠ˜è…¾è¿™ä»¶äº‹æƒ…ã€‚ä»Šå¤©åœ¨æ‰‹æœºä¸Šæ“ä½œè‡ªå·±çš„ç”µè„‘ï¼Œå¼„äº†ä¸€ä¸Šåˆæ“ä½œå¤±è´¥ã€‚</p><p>åœ¨å­¦ä¹ å¦‚ä½•ç®¡ç†è‡ªå·±çš„ key æ—¶ï¼ŒåŒæ—¶ä¹Ÿå­¦åˆ°äº† git çš„ç›¸å…³å‘½ä»¤ï¼Œgit ç”¨èµ·æ¥çœŸçš„æŒºå¥½ã€‚</p><p>æœ¬æ¥ä»¥ä¸ºä»Šå¤©ä¸Šåˆå°±èƒ½æå®šï¼Œç»“æœæ˜¯ä¸‹åˆæ”¾å­¦ä¹‹åæ‰æå®šçš„ã€‚æŒºæƒ³åˆ†äº«è¿™æ®µç»è¿‡ã€‚</p><p><img src="/journal/How-do-you-configure-ssh-in-your-pc/2007786.jpg" loading="lazy"></p><span id="more"></span><h2 id="ç»è¿‡"><a href="#ç»è¿‡" class="headerlink" title="ç»è¿‡"></a>ç»è¿‡</h2><blockquote><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œå¦‚æœä½ çš„ç”µè„‘æ²¡æœ‰ gitï¼Œè¯·å…ˆåœ¨ç”µè„‘ä¸Šå®‰è£…ä¸€ä¸ª <a href="https://git-scm.com/downloads">git</a></p></blockquote><h3 id="SSH-é…ç½®"><a href="#SSH-é…ç½®" class="headerlink" title="SSH é…ç½®"></a>SSH é…ç½®</h3><p>é¦–å…ˆï¼Œè¾“å…¥ <code>ssh-keygen</code> å‘½ä»¤ï¼Œ-C å‚æ•°æ˜¯å¡«å†™ä½ çš„é‚®ç®±ï¼Œ-f å‚æ•°æ˜¯æŒ‡å®šå…¬ç§é’¥ç”Ÿæˆçš„ä½ç½®åå­—ï¼Œå…¶ä¸­ï¼Œ<code>~/.ssh/</code> æ˜¯ä½ç½®ï¼Œ<code>id_rsa_me_gitee</code> åå­—ç„¶åæŒ‰å›è½¦</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$ssh</span>-keygen -t rsa -C <span class="token string">"bestguo2020@foxmail.com"</span> -f ~/.ssh/id_rsa_me_gitee</code></pre><p>ç„¶åä¸€ç›´å›è½¦ï¼Œç›´åˆ°ç”Ÿæˆå­—ç¬¦ç”»ï¼Œå°±è¯´æ˜ç”ŸæˆæˆåŠŸäº†ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">Generating public/private rsa key pair.Enter passphrase <span class="token punctuation">(</span>empty <span class="token keyword">for</span> no passphrase<span class="token punctuation">)</span>:Enter same passphrase again:Your identification has been saved <span class="token keyword">in</span> /c/Users/xxxxxx/.ssh/id_rsa_me_gitee.Your public key has been saved <span class="token keyword">in</span> /c/Users/xxxxxx/.ssh/id_rsa_me_gitee.pub.The key fingerprint is:SHA256:oezVJIt23bVCmgMnwQD+7orlTRxeLSMaMk+M3SLLslQ bestguo2020@foxmail.comThe key's randomart image is:+---<span class="token punctuation">[</span>RSA <span class="token number">3072</span><span class="token punctuation">]</span>----+<span class="token operator">|</span>    <span class="token punctuation">..</span>.o.        <span class="token operator">|</span><span class="token operator">|</span>   <span class="token builtin class-name">.</span>    <span class="token punctuation">..</span>       <span class="token operator">|</span><span class="token operator">|</span>    <span class="token builtin class-name">.</span>   <span class="token operator">=</span> o <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span>  <span class="token operator">|</span><span class="token operator">|</span>   + + o % <span class="token operator">=</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token operator">=</span>E* X S B o <span class="token builtin class-name">.</span>  <span class="token operator">|</span><span class="token operator">|</span> <span class="token punctuation">..</span>B X * o <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span>   <span class="token operator">|</span><span class="token operator">|</span><span class="token punctuation">..</span>o + *          <span class="token operator">|</span><span class="token operator">|</span>.o + +           <span class="token operator">|</span><span class="token operator">|</span><span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> o.o          <span class="token operator">|</span>+----<span class="token punctuation">[</span>SHA256<span class="token punctuation">]</span>-----+</code></pre><p>è¾“å…¥ <code>ssh-agent bash</code> å‘½ä»¤ï¼Œç„¶åæ¸…ç©ºä»£ç†çš„å…¬é’¥</p><pre class="language-bash" data-language="bash"><code class="language-bash">$ ssh-agent <span class="token function">bash</span>$ ssh-add -DAll identities removed.</code></pre><p>æ·»åŠ æˆ‘ä»¬åˆšåˆšç”Ÿæˆçš„å…¬é’¥</p><pre class="language-bash" data-language="bash"><code class="language-bash">$ ssh-add ~/.ssh/id_rsa_me_giteeIdentity added: /c/Users/xxxxxx/.ssh/id_rsa_me_gitee <span class="token punctuation">(</span>bestguo2020@foxmail.com<span class="token punctuation">)</span></code></pre><p>æœ€ååœ¨è¿™ä¸ªä½ç½®ä¸Šæ·»åŠ ä¸€ä¸ª config æ–‡ä»¶</p><p><img src="/journal/How-do-you-configure-ssh-in-your-pc/QQ%E6%88%AA%E5%9B%BE20210419200043.jpg" loading="lazy"></p><p>config è¦ç¼–å†™æ–‡ä»¶ä¸­çš„å†…å®¹å¦‚ä¸‹ï¼Œé‡Œé¢çš„å†…å®¹éœ€è¦è‡ªå·±æ¥ä¿®æ”¹ï¼Œä¿®æ”¹å®Œæˆä¹‹åä¿å­˜ã€‚</p><pre class="language-none"><code class="language-none"># giteeHost gitee.me    HostName gitee.com    User bestguo2020    PreferredAuthentications publickey    IdentityFile ~&#x2F;.ssh&#x2F;id_rsa_me_gitee</code></pre><p>è§£é‡Šï¼š</p><ul><li>ç¬¬ä¸€ä¸ª Host æ˜¯èµ·åˆ«åçš„ä½œç”¨ï¼Œæ¯”å¦‚ä½ èµ· miaomiaoï¼Œgiaogiao éƒ½è¡Œ</li><li>HostName æŒ‡çš„å°±æ˜¯éœ€è¦å¡«å†™ä¸»æœºåï¼Œåœ¨ gitee ä¸­å°±æ˜¯ gitee.comï¼Œåœ¨ github ä¸­å°±æ˜¯ github.comï¼Œå¦‚æœæ˜¯è‡ªå·±æˆ–è€…å…¬å¸æ­å»ºçš„ git æœåŠ¡å™¨ï¼Œå°±ä½¿ç”¨ä¸»æœºçš„ä¸»æœºåæˆ–è€… ip åœ°å€ã€‚</li><li>User ä¸€èˆ¬æ˜¯æŒ‡ç™»å½•çš„ç”¨æˆ·åï¼Œå°±æ˜¯åˆ›å»º gitee æˆ–è€… github è´¦å·æ—¶é‚£ä¸ªç”¨æˆ·åå°±æ˜¯ä½ éœ€è¦å¡«çš„</li><li>PreferredAuthentications å°±ç”¨é»˜è®¤çš„ publickey å€¼å°±è¡Œ</li><li>IdentityFile å°±æ˜¯ç”Ÿæˆçš„ç§é’¥æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸Šå›¾ä¸­æ²¡æœ‰å¸¦ <code>.pub</code> çš„</li></ul><p>ç”±äºä»Šå¤©å¼„çš„æ˜¯ gitee çš„ SSH keyï¼Œæ‰€ä»¥å°±åœ¨ gitee ä¸­æ·»åŠ  SSH keyã€‚å…ˆç™»å½•åˆ° giteeï¼Œç‚¹å‡»è®¾ç½®ï¼Œæ‰¾åˆ° SSH å…¬é’¥</p><p><img src="/journal/How-do-you-configure-ssh-in-your-pc/QQ%E6%88%AA%E5%9B%BE20210419201526.jpg" loading="lazy"></p><p>ç„¶åç”¨ç¼–è¾‘å™¨æˆ–è€…è®°äº‹æœ¬æ‰“å¼€ <code>id_rsa_me_gitee.pub</code> æ–‡ä»¶ï¼Œå°†å…¶å¤åˆ¶åˆ°æ­¤å¤„ï¼Œç‚¹å‡»ç¡®å®šã€‚è¾“å…¥å¯†ç éªŒè¯å³å¯</p><p><img src="/journal/How-do-you-configure-ssh-in-your-pc/QQ%E6%88%AA%E5%9B%BE20210419201708.jpg" loading="lazy"></p><p>æœ€åæ‰§è¡Œä¸€ä¸‹ <code>ssh -T </code> å‘½ä»¤ï¼Œå‰é¢å¡«å†™çš„æ˜¯ä½ æ³¨å†Œç”¨æˆ·åï¼Œå›è½¦ã€‚å¦‚æœçœ‹åˆ°ä»¥ä¸‹ç±»ä¼¼ç•Œé¢å°±è¯´æ˜é…ç½®æˆåŠŸäº†</p><pre class="language-none"><code class="language-none">$ ssh -T bestguo2020@gitee.comHi bestguo2020! You&#39;ve successfully authenticated, but GITEE.COM does not provide shell access.</code></pre><h4 id="å…³é”®ä¸€æ­¥"><a href="#å…³é”®ä¸€æ­¥" class="headerlink" title="å…³é”®ä¸€æ­¥"></a>å…³é”®ä¸€æ­¥</h4><p>å¦‚æœæˆ‘ä»¬å…³é—­äº† shell ä¹‹åï¼Œå‘ç°ä¸‹é¢çš„é—®é¢˜ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">$ ssh-agent <span class="token function">bash</span>$ ssh-add -lThe agent has no identities.</code></pre><p>æ²¡é”™ï¼Œå°±æ˜¯æˆ‘ä»¬æ·»åŠ çš„ç§é’¥è®°å½•æ²¡æœ‰å­˜ä¸‹æ¥ï¼Œéœ€è¦è‡ªå·±æ¥ä¿å­˜ï¼Œè¿™è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>æœ‰åŠæ³•ï¼Œåœ¨ git çš„å®‰è£…ç›®å½•ä¸­ã€‚æ‰¾åˆ° etc ä¸‹çš„ bash.bashrc æ–‡ä»¶ï¼Œä½¿ç”¨è®°äº‹æœ¬æˆ–è€…å…¶å®ƒæ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ã€‚</p><p><img src="/journal/How-do-you-configure-ssh-in-your-pc/QQ%E6%88%AA%E5%9B%BE20210419203658.jpg" loading="lazy"></p><p>åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼ˆå…¶ä¸­é‡Œé¢çš„ ssh-add æ·»åŠ çš„ç§é’¥æ˜¯å‰é¢è‡ªå·±çš„ç”Ÿæˆçš„ï¼‰ï¼Œè¿™æ ·çš„ç›®çš„å°±æ˜¯æ¯æ¬¡å¯åŠ¨ shell çš„æ—¶å€™ä¼šè‡ªåŠ¨æ‰§è¡Œè¿™äº›å‘½ä»¤</p><p><img src="/journal/How-do-you-configure-ssh-in-your-pc/QQ%E6%88%AA%E5%9B%BE20210419203715.jpg" loading="lazy"></p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">eval</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span>ssh-agent -s<span class="token variable">)</span></span>"</span>ssh-add ~/.ssh/id_rsa_me_gitee</code></pre><p>æœ€åæµ‹è¯•ä¸€ä¸‹ï¼Œå·²ç»è‡ªåŠ¨æ·»åŠ è¿›æ¥å¹¶å°†ç§é’¥æˆåŠŸå¯¼å…¥</p><pre class="language-bash" data-language="bash"><code class="language-bash">E:<span class="token punctuation">\</span>IdeaProjects<span class="token punctuation">\</span>ssm_online_exam<span class="token operator">></span>shAgent pid <span class="token number">1472</span>Identity added: /c/Users/xxxxxx/.ssh/id_rsa_me_gitee <span class="token punctuation">(</span>bestguo2020@foxmail.com<span class="token punctuation">)</span>$ <span class="token function">ssh</span> -T bestguo2020@gitee.comHi bestguo2020<span class="token operator">!</span> You've successfully authenticated, but GITEE.COM does not provide shell access.</code></pre><h3 id="é¡¹ç›®é…ç½®"><a href="#é¡¹ç›®é…ç½®" class="headerlink" title="é¡¹ç›®é…ç½®"></a>é¡¹ç›®é…ç½®</h3><p>åœ¨ä½¿ç”¨ git clone ä¸‹æ¥çš„é¡¹ç›®æ—¶ï¼Œæœ€å…ˆè¦åšå¥½çš„æ˜¯é…ç½®ç”¨æˆ·åå’Œé‚®ç®±ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config user.name bestguo2020<span class="token function">git</span> config user.email bestguo2020@foxmail.com</code></pre><p>ç„¶åè¿›å…¥å…‹éš†ä¸‹æ¥çš„ .git æ–‡ä»¶å¤¹ä¸­ï¼Œç”±äºæ˜¯åœ¨ gitee ä¸‹ï¼Œè‹¥è¦ä½¿ç”¨ ssh è¿›è¡Œè¿œç¨‹æäº¤çš„è¯ï¼Œéœ€è¦ä¿®æ”¹è¿œç¨‹ä»“åº“çš„åœ°å€</p><p><img src="/journal/How-do-you-configure-ssh-in-your-pc/QQ%E6%88%AA%E5%9B%BE20210419205135.jpg" loading="lazy"></p><p>æ‰“å¼€ä¹‹åï¼Œä¿®æ”¹æˆä»¥ä¸‹æ ¼å¼ï¼Œç„¶åä¿å­˜ã€‚</p><p><img src="/journal/How-do-you-configure-ssh-in-your-pc/QQ%E6%88%AA%E5%9B%BE20210419205204.jpg" loading="lazy"></p><p>é…ç½®å®Œæˆä¹‹åï¼Œå°±å¯ä»¥æ‰§è¡Œç›¸å…³çš„ git æ“ä½œäº†ã€‚</p><h2 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h2><p>æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹å‘½ä»¤ï¼Œçœ‹çœ‹æ˜¯å¦èƒ½å¤ŸæˆåŠŸã€‚åªè¦æ²¡æœ‰æç¤º Permission è¯´æ˜å·²ç»æˆåŠŸäº†</p><pre class="language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> pullAlready up to date.</code></pre><p>åœ¨å­¦ä¹ ç®¡ç†å¤šä¸ª SSH key æ—¶ï¼Œå‚è€ƒäº†ä»¥ä¸‹èµ„æ–™</p><ul><li><a href="https://www.cnblogs.com/heyongzhen/p/9159370.html">åœ¨ä¸€å°ç”µè„‘ä¸Šï¼Œæ·»åŠ å¤šä¸ªGitçš„ssh key</a></li><li><a href="https://www.freesion.com/article/86161338858/">é—®é¢˜è§£å†³ - GIT/GITEE å…‹éš†(CLONE)è¿œç¨‹ä»“åº“åï¼Œå·²å¢åŠ SSHå…¬é’¥è¿˜æ˜¯æ¯æ¬¡éƒ½éœ€è¦è¾“å…¥ç”¨æˆ·åå¯†ç </a></li><li><a href="https://blog.csdn.net/esonjohn/article/details/79134665">è§£å†³Windowsä¸‹ä½¿ç”¨githubéœ€è¦æ¯æ¬¡éƒ½è¦ssh-addçš„é—®é¢˜</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å°èµ«èµ«çš„é¡¹ç›®æ—¥å¿— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Secure Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AOP å’Œæ±‰å ¡åŒ…ä¹‹é—´çš„ py å…³ç³»</title>
      <link href="/journal/spring-aop-notion/"/>
      <url>/journal/spring-aop-notion/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote style="border-left-color: #ffd36d">âš ï¸âš ï¸æœ¬æ—¥å¿—å·²è¢«ä½œè€…ç”¨äºâ€œå¦é—¨ç†å·¥å­¦é™¢è½¯ä»¶å·¥ç¨‹å­¦é™¢â€ã€ŠJ2EEæ¶æ„ä¸ç¨‹åºè®¾è®¡ã€‹è¯¾ç¨‹æ¿€åŠ±è®¡åˆ’ï¼Œå…¶ä»–åŒå­¦è¯·å‹¿åœ¨ä»»ä½•çš„æ–¹å¼è¿›è¡Œåˆ©ç”¨æœ¬ç¯‡æ—¥å¿—ã€‚</blockquote><h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>è¿™äº›å¤©åœ¨å­¦ä¹  AOPï¼Œä¹Ÿå°±æ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹ã€‚åœ¨ç†è§£ä¹‹å‰ï¼Œå¯¹äº AOP çš„ç›¸å…³æ¦‚å¿µæœ‰ç‚¹æ„Ÿè§‰ï¼Œä½†æ˜¯ä½¿ç”¨æ–¹å¼ä¸æ˜¯å¾ˆäº†è§£ã€‚åœ¨å‚è€ƒé‚£å‡ ç¯‡åšå®¢ï¼Œä¹Ÿä»…ä»…åªæ˜¯å¯¹ AOP çš„å„é¡¹é€šçŸ¥è¿›è¡Œäº†æ‰“å°è¾“å‡ºï¼Œå¹¶æ²¡æœ‰å†™å‡ºçœŸæ­£çš„åœºæ™¯ã€‚ä¹Ÿè®¸æ˜¯å†™ä¸å‡ºä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­å§ã€‚ä¹‹å‰åœ¨å­¦ä¹  spring çš„æ—¶å€™å¾ˆç—›æ¨ AOP ã€‚</p><p>æ˜¨å¤©ä¸‹åˆå†å¯¹ AOP è¿›è¡Œäº†ä¸€ä¸ªå¤ä¹ ï¼Œç„¶åè‡ªå·±ç¼–å†™äº†ä¸€ä¸ªåˆ‡é¢æ¥å¯¹ä¸­åˆå­¦ä¹ çš„çŸ¥è¯†è¿›è¡Œäº†ä¸€ä¸ªå·©å›ºã€‚åœ¨å†™å®Œä¹‹åï¼Œå¯¹é¢å‘åˆ‡é¢ç¼–ç¨‹æœ‰ä¸€ä¸ªæ–°çš„è®¤è¯†ï¼Œä»¿ä½›è‡ªå·±æ¥åˆ°äº†ä¸€ä¸ªæ–°çš„ä¸–ç•Œä¸€æ ·ã€‚å¸Œæœ›éšç€åé¢çš„å­¦ä¹ ï¼Œå¯¹ AOP ä¹Ÿè¶Šæ¥è¶Šæ·±å…¥ã€‚ä»Šå¤©æ€»ç®—æ˜¯å†™å®Œäº†ã€‚</p><p>è¯ä¸å¤šè¯´ï¼Œå…ˆå¯¹ AOP çš„ç›¸å…³æ¦‚å¿µè¿›è¡Œä¸€ä¸ªå›é¡¾å§ã€‚</p><p>å¯¹å•¦ï¼Œè¯è¯´ä»€ä¹ˆæ ·çš„æ±‰å ¡æ¯”è¾ƒå¥½åƒå‘¢ï¼Ÿï¼ŸğŸ¥°ğŸ¥°ğŸ¥°</p><p><img src="https://ns-strategy.cdn.bcebos.com/ns-strategy/upload/fc_big_pic/part-00652-817.jpg" alt="img" loading="lazy"></p><p>å›¾ç‰‡æ¥æºäºç½‘ç»œ</p><span id="more"></span><h2 id="ä»€ä¹ˆæ˜¯-AOP"><a href="#ä»€ä¹ˆæ˜¯-AOP" class="headerlink" title="ä»€ä¹ˆæ˜¯ AOP"></a>ä»€ä¹ˆæ˜¯ AOP</h2><p>è¦ç†è§£åˆ‡é¢ç¼–ç¨‹ï¼Œå°±éœ€è¦å…ˆç†è§£ä»€ä¹ˆæ˜¯åˆ‡é¢ï¼Œå¯ä»¥ç”¨æ±‰å ¡æ¥åšç±»æ¯”ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªåªæœ‰è‚‰çš„æ±‰å ¡ï¼ˆå›¾ç‰‡æ¥æºäºç½‘ç»œï¼‰ï¼š</p><p><img src="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=25419359,3472372314&fm=26&gp=0.jpg" loading="lazy"></p><p>åªæœ‰è‚‰å’Œä¸€ç‚¹ç‚¹èœçš„æ±‰å ¡ä¹Ÿè®¸è¿˜æ²¡é‚£ä¹ˆå¥½åƒã€‚å¦‚æœæˆ‘ä»¬è¦å°†æ±‰å ¡åŒ…å˜å¾—æ›´å¥½åƒï¼Œé‚£ä¹ˆè¿™æ±‰å ¡é‡Œé¢è‚¯å®šæœ‰ç”Ÿèœï¼Œæœ‰æ²™æ‹‰ï¼Œæœ‰ç…è›‹ï¼Œæœ‰èŠå£«ç­‰ç­‰ã€‚<del>å“å‘€ï¼Œè¯´ç€è¯´ç€å£æ°´éƒ½æµå‡ºæ¥äº†ğŸ˜‚ğŸ˜‚</del>ï¼Œæ”¾å…¥è¿™äº›è‚¯å®šè¦æ¯”åªæœ‰å•çº¯çš„è‚‰å’Œèœå¥½åƒå§ã€‚</p><p>æœ‰é¦…çš„æ±‰å ¡ï¼ˆå›¾ç‰‡æ¥æºäºç½‘ç»œï¼‰</p><p><img src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=3847601259,258655019&fm=26&gp=0.jpg" loading="lazy"></p><p>é‚£ä¹ˆï¼Œåˆ‡é¢æ¥å’¯ğŸ¤©</p><p>åˆ‡é¢å…¶å®å°±æ˜¯ä¸¤ä¸ªé¢åŒ…ä¹‹é—´è¦æ”¾å…¥çš„ä¸œè¥¿ï¼Œä¸¤ä¸ªé¢åŒ…ä¹‹é—´çš„é—´éš™å°±å«åšåˆ‡é¢ã€‚</p><h2 id="AOP-ç›¸å…³æœ¯è¯­"><a href="#AOP-ç›¸å…³æœ¯è¯­" class="headerlink" title="AOP ç›¸å…³æœ¯è¯­"></a>AOP ç›¸å…³æœ¯è¯­</h2><p>å…¶å®ï¼ŒAOP çš„é‚£äº›ç›¸å…³æœ¯è¯­å®åœ¨æ˜¯éš¾ä»¥ç†è§£ï¼Œå³ä½¿æ˜¯å¯¹äº Spring çš„ä½œè€…ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¯¹ä¸‹é¢çš„ä¸“ä¸šæœ¯è¯­ä¹Ÿæ˜¯éå¸¸æ— è¯­çš„ã€‚è¿™ä¹Ÿå¾ˆæ­£å¸¸çš„å•¦ï¼Œä»–ä»¬ä¹Ÿæ²¡åŠæ³•ã€‚å®˜æ–¹å¯¹äº <a href="https://docs.spring.io/spring-framework/docs/2.0.x/reference/aop.html">aop</a> å¦‚æ˜¯è¯´ï¼š</p><blockquote><p>These terms are not Spring-specific. Unfortunately, AOP terminology is not particularly intuitive; however, it would be even more confusing if Spring used its own terminology.</p><p>è¿™äº›æœ¯è¯­ä¸æ˜¯ç‰¹å®šäº Spring çš„ã€‚å¯æƒœ AOP æœ¯è¯­ä¸æ˜¯ç‰¹åˆ«ç›´è§‚ï¼›ç„¶è€Œï¼Œå¦‚æœ Spring ä½¿ç”¨è‡ªå·±çš„æœ¯è¯­ï¼Œé‚£å°±æ›´ä»¤äººå›°æƒ‘äº†ã€‚</p></blockquote><p><del>æˆ‘å†™ä¸å‡ºæ¥å‘€ï¼Œæˆ‘å¯ä»¥ä¸ä»‹ç»å— ğŸ˜‚ğŸ˜‚</del></p><p>å®åœ¨æ˜¯å†™ä¸å‡ºæ¥ï¼Œåœ¨å‚è€ƒçš„åšå®¢ä¸­å¤åˆ¶äº†ä¸€ä»½å‡ºæ¥ï¼Œç„¶åçº¢è‰²éƒ¨åˆ†å°±æ˜¯å¯¹æ¦‚å¿µè¿›è¡Œç†è§£ã€‚</p><ul><li><p>Aspectï¼šå³åˆ‡é¢ï¼Œ Aspect å£°æ˜ç±»ä¼¼äº Java ä¸­çš„ç±»å£°æ˜ï¼Œåœ¨ Aspect ä¸­ä¼šåŒ…å«ç€ä¸€äº› Pointcut ä»¥åŠç›¸åº”çš„ Adviceã€‚<font color="red">ç±»æ¯”æ±‰å ¡ï¼šä¹Ÿå°±æ˜¯åªæœ‰ä¸¤å—é¢åŒ…ä¹‹é—´çš„é—´éš™</font></p></li><li><p>Join pointï¼šå³è¿æ¥ç‚¹ï¼Œè¡¨ç¤ºåœ¨ç¨‹åºä¸­æ˜ç¡®å®šä¹‰çš„ç‚¹ï¼Œå…¸å‹çš„åŒ…æ‹¬æ–¹æ³•è°ƒç”¨ï¼Œå¯¹ç±»æˆå‘˜çš„è®¿é—®ä»¥åŠå¼‚å¸¸å¤„ç†ç¨‹åºå—çš„æ‰§è¡Œç­‰ç­‰ï¼Œå®ƒè‡ªèº«è¿˜å¯ä»¥åµŒå¥—å…¶å®ƒ join pointã€‚<font color="red">ç±»æ¯”æ±‰å ¡ï¼šè¿™ä¸ªæœ‰ç‚¹ä¸æ€ä¹ˆå¥½ç±»æ¯”ã€‚å¦‚æœè¦å°†æ±‰å ¡åšçš„å¥½çœ‹ï¼Œé‚£è‚¯å®šä¸èƒ½åƒä¸‹å›¾è¿™æ ·å­æ”¾ã€‚è¿™é‡Œçš„è¿æ¥ç‚¹å°±æ˜¯æ±‰å ¡çš„ä¸­å¿ƒç‚¹ï¼Œå¦‚æœå°†è¿™ç”Ÿèœï¼ŒèŠå£«è¿™äº›é¢åŒ…çš„ä¸­å¿ƒç‚¹å¯¹é½ï¼Œè¿™æ ·å°±å²‚ä¸æ˜¯æ›´å¥½çœ‹äº†ã€‚ä¸Šé¢è¯´äº†ä¸€å¤§é€šè¯´çš„è¿æ¥ç‚¹å°±ç›¸å½“äºæ˜¯é¢åŒ…çš„ä¸­å¿ƒã€ç”Ÿèœçš„ä¸­å¿ƒã€èŠå£«çš„ä¸­å¿ƒç‚¹</font></p><p>éš¾çœ‹çš„æ±‰å ¡ï¼ˆå›¾ç‰‡æ¥è‡ªäºç½‘ç»œï¼‰</p><p><img src="/journal/spring-aop-notion/bad.jpg" alt="img" loading="lazy"></p><p>æ•´é½çš„æ±‰å ¡ï¼ˆå›¾ç‰‡æ¥è‡ªäºç½‘ç»œï¼‰ï¼š</p><p><img src="https://ss0.baidu.com/-Po3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/42a98226cffc1e171940d4f84b90f603728de978.jpg" alt="img" loading="lazy"></p></li><li><p>Pointcutï¼šå³åˆ‡ç‚¹ï¼Œè¡¨ç¤ºä¸€ç»„ join pointï¼Œè¿™äº› join point æˆ–æ˜¯é€šè¿‡é€»è¾‘å…³ç³»ç»„åˆèµ·æ¥ï¼Œæˆ–æ˜¯é€šè¿‡é€šé…ã€æ­£åˆ™è¡¨è¾¾å¼ç­‰æ–¹å¼é›†ä¸­èµ·æ¥ï¼Œå®ƒå®šä¹‰äº†ç›¸åº”çš„ Advice å°†è¦å‘ç”Ÿçš„åœ°æ–¹ã€‚<font color="red">ç±»æ¯”æ±‰å ¡ï¼šè¿™ä¸ªä¹Ÿæœ‰ç‚¹ä¸æ€ä¹ˆå¥½ç±»æ¯”ã€‚æŒ‰ç…§ä¸Šé¢çš„è¿æ¥ç‚¹çš„å®šä¹‰ï¼ŒæŠŠä»–æƒ³è±¡æˆå°†è¿™è‚‰é¥¼ï¼Œç”Ÿèœå’ŒèŠå£«è¿™äº›é¢åŒ…çš„ä¸­å¿ƒç‚¹å¯¹é½ã€‚</font></p></li><li><p>Adviceï¼šå³é€šçŸ¥ï¼Œå®šä¹‰äº†åœ¨ Pointcut é‡Œé¢å®šä¹‰çš„ç¨‹åºç‚¹å…·ä½“è¦åšçš„æ“ä½œï¼Œå®ƒé€šè¿‡ beforeã€after å’Œ around æ¥åŒºåˆ«æ˜¯åœ¨æ¯ä¸ª joint point ä¹‹å‰ã€ä¹‹åè¿˜æ˜¯ä»£æ›¿æ‰§è¡Œçš„ä»£ç ã€‚<font color="red">ç±»æ¯”æ±‰å ¡ï¼šæŠŠä»–æƒ³è±¡æˆæŠŠæ±‰å ¡çš„è‚‰ï¼Œç”Ÿèœï¼Œæ²™æ‹‰ï¼Œç…è›‹</font>ã€‚</p></li><li><p>Targetï¼šç»‡å…¥ Advice çš„ç›®æ ‡å¯¹è±¡ã€‚<font color="red">ç±»æ¯”æ±‰å ¡ï¼šæŠŠå®ƒæƒ³è±¡æˆæŠŠæ±‰å ¡åˆèµ·æ¥</font></p></li><li><p>Weavingï¼šå°† Aspect å’Œå…¶ä»–å¯¹è±¡è¿æ¥èµ·æ¥, å¹¶åˆ›å»ºå¢å¼ºå¯¹è±¡çš„è¿‡ç¨‹ã€‚<font color="red">ç±»æ¯”æ±‰å ¡ï¼šæŠŠå®ƒæƒ³è±¡æˆå·²ç»å®Œæˆçš„æ±‰å ¡</font></p></li></ul><p>é€šè¿‡ä¸Šé¢çš„ç±»æ¯”ï¼Œæ„Ÿè§‰è‡ªå·±å¯¹ä¸Šé¢çš„ç›¸å…³æœ¯è¯­æœ‰ä¸€å®šçš„æ›´å¥½çš„è®¤è¯†ï¼Œæ¥ä¸‹æ¥å†è°ˆè°ˆé€šçŸ¥ã€‚é€šçŸ¥ä¹Ÿåˆ†ä¸ºå¾ˆå¤šç§ç±»å‹ã€‚</p><h2 id="AOP-çš„ä½¿ç”¨åœºæ™¯"><a href="#AOP-çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="AOP çš„ä½¿ç”¨åœºæ™¯"></a>AOP çš„ä½¿ç”¨åœºæ™¯</h2><p>ç›¸å…³çš„ä½¿ç”¨åœºæ™¯å¦‚ä¸‹ï¼Œè¯ä¸å¤šè¯´ï¼Œç›´æ¥è´´ä¸Šå»ï¼š</p><ul><li>Authentication æƒé™ </li><li>Caching ç¼“å­˜ </li><li>Context passing å†…å®¹ä¼ é€’ </li><li>Error handling é”™è¯¯å¤„ç† </li><li>Lazy loadingã€€æ‡’åŠ è½½ </li><li>Debuggingã€€ã€€è°ƒè¯• </li><li>logging, tracing, profiling and monitoringã€€è®°å½•è·Ÿè¸ªã€€ä¼˜åŒ–ã€€æ ¡å‡† </li><li>Performance optimizationã€€æ€§èƒ½ä¼˜åŒ– </li><li>Persistenceã€€ã€€æŒä¹…åŒ– </li><li>Resource poolingã€€èµ„æºæ±  </li><li>Synchronizationã€€åŒæ­¥ </li><li>Transactions äº‹åŠ¡</li></ul><h2 id="é€šçŸ¥"><a href="#é€šçŸ¥" class="headerlink" title="é€šçŸ¥"></a>é€šçŸ¥</h2><p>æˆ‘è§‰å¾—é€šçŸ¥å« Advice æ€ªæ€ªçš„ï¼Œä¸ºä½•ä¸å« Notification å‘¢ï¼Ÿåœ¨ä»‹ç»é€šçŸ¥ä¹‹å‰ï¼Œå…ˆæ¥ç†è§£ä¸€ä¸‹ç›®æ ‡æ–¹æ³•ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯ç›®æ ‡æ–¹æ³•"><a href="#ä»€ä¹ˆæ˜¯ç›®æ ‡æ–¹æ³•" class="headerlink" title="ä»€ä¹ˆæ˜¯ç›®æ ‡æ–¹æ³•"></a>ä»€ä¹ˆæ˜¯ç›®æ ‡æ–¹æ³•</h3><p>è¿˜è®°å¾—ç¬¬äºŒå¼ çš„æ±‰å ¡å—ï¼Ÿç¬¬äºŒå¼ æ±‰å ¡åªæœ‰è‚‰ï¼Œæ²¡æœ‰é‚£ä¹ˆå¥½åƒã€‚åœ¨æ±‰å ¡ä¸­ï¼Œè‚‰é¥¼å°±æ˜¯ç›®æ ‡æ–¹æ³•ã€‚</p><h3 id="äº”ç§é€šçŸ¥ç±»å‹"><a href="#äº”ç§é€šçŸ¥ç±»å‹" class="headerlink" title="äº”ç§é€šçŸ¥ç±»å‹"></a>äº”ç§é€šçŸ¥ç±»å‹</h3><p>äº”ç§é€šçŸ¥ç±»å‹å¯ä»¥ç†è§£ä¸ºå°†æ±‰å ¡çš„ç”Ÿèœå’ŒèŠå£«æ‰€æ”¾ç½®çš„ä½ç½®ã€‚</p><ul><li>beforeï¼šå³å‰ç½®é€šçŸ¥ï¼Œåœ¨ç›®æ ‡æ–¹æ³•è¢«è°ƒç”¨ä¹‹å‰è°ƒç”¨é€šçŸ¥åŠŸèƒ½</li><li>after returningï¼šå³åç½®é€šçŸ¥ï¼Œåœ¨ç›®æ ‡æ–¹æ³•æˆåŠŸæ‰§è¡Œä¹‹åè°ƒç”¨é€šçŸ¥</li><li>after throwingï¼šå³å¼‚å¸¸é€šçŸ¥ï¼Œåœ¨ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åè°ƒç”¨é€šçŸ¥</li><li>after(final)ï¼šå³æœ€ç»ˆé€šçŸ¥ï¼Œåœ¨ç›®æ ‡æ–¹æ³•å®Œæˆä¹‹åè°ƒç”¨é€šçŸ¥ï¼Œæ­¤æ—¶ä¸ä¼šå…³å¿ƒæ–¹æ³•çš„è¾“å‡ºæ˜¯ä»€ä¹ˆ</li><li>around adviceï¼šå³ç¯ç»•é€šçŸ¥ï¼Œä½†æ˜¯å®ƒåŒ…å«äº†ä»¥ä¸Šå››ç§çš„å…¨éƒ¨é€šçŸ¥ã€‚</li></ul><h3 id="é€šçŸ¥ç›¸å…³ä»‹ç»"><a href="#é€šçŸ¥ç›¸å…³ä»‹ç»" class="headerlink" title="é€šçŸ¥ç›¸å…³ä»‹ç»"></a>é€šçŸ¥ç›¸å…³ä»‹ç»</h3><p>å…ˆä»‹ç»ç¯ç»•é€šçŸ¥ï¼Œç„¶åé€šè¿‡ç¯ç»•é€šçŸ¥æ¥ä»‹ç»å…¶å®ƒå››ç§é€šçŸ¥ç±»å‹ã€‚æ¯•ç«Ÿç¯ç»•é€šçŸ¥åŒ…å«è¿™å››ç§é€šçŸ¥ç±»å‹ï¼Œè¯·çœ‹ä»£ç ç¤ºä¾‹ã€‚ä»¥ä¸‹çš„ä»£ç æ˜¯ä»‹ç»åŸºäº aspectj æ³¨è§£çš„é…ç½®æ–¹å¼ï¼Œåç»­å†è¿›è¡Œå›é¡¾ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"pointCut()"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">aroundAsdf</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> pjp<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Object</span> object <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æˆ‘æ˜¯ç”Ÿèœ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æˆ‘æ˜¯èŠå£«"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æˆ‘æ˜¯æ²™æ‹‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        object <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è‚‰é¥¼</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æˆ‘æ˜¯èŠå£«"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        throwable<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æˆ‘æ˜¯æ´‹è‘±"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æˆ‘æ˜¯ç”Ÿèœ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> object<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ <code>pjp.proceed() </code> å°±æ˜¯ç›®æ ‡å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ±‰å ¡ä¸­çš„è‚‰é¥¼ï¼Œçœ‹èµ·æ¥çš„ç¡®æ˜¯ä¸ªæ±‰å ¡ã€‚</p><p>è‚‰é¥¼ä¹‹ä¸Šç”Ÿèœï¼ŒèŠå£«å°±æ˜¯å‰ç½®é€šçŸ¥ï¼Œå³è¿™äº›æ“ä½œåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰ï¼›è‚‰é¥¼ä¸‹å±‚çš„èŠå£«å°±æ˜¯åç½®é€šçŸ¥ï¼Œå³è¿™äº›æ“ä½œåœ¨ç›®æ ‡å¯¹è±¡ä¹‹åã€‚</p><p>catch ä»£ç å—ä¸­çš„æ´‹è‘±å°±æ˜¯å¼‚å¸¸é€šçŸ¥ã€‚</p><p>finally ä»£ç å—ä¸­çš„ç”Ÿèœå°±æ˜¯æœ€ç»ˆé€šçŸ¥ã€‚</p><p>ä»¥ä¸‹çš„ä»£ç ç¤ºä¾‹å±•ç¤ºäº†å•ç‹¬åˆ†å¼€çš„å››ç§é€šçŸ¥ç±»å‹ã€‚</p><blockquote><p>å…¶å®æˆ‘åœ¨ç†è§£ aop ä¹‹å‰ï¼Œä¸€ç›´éƒ½è®¤ä¸º aop çš„ä½¿ç”¨åœºæ™¯å°±ä»…ä»…æ˜¯åšæ—¥å¿—è®°å½•çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ä¹‹å‰å°±è®¤ä¸º aop çš„ç”¨å¤„å¹¶ä¸æ˜¯å¾ˆå¤§ã€‚å…¶å®ç°åœ¨å¾ˆæœ‰å¿…è¦å»äº†è§£ aopï¼Œè€Œä¸”ä½œä¸º aop ä¹Ÿä¸ä»…ä»…åªæ˜¯åˆ©ç”¨åˆ°è¿™ä¹ˆ low é€¼çš„åŠŸèƒ½ä¸Šå§ã€‚</p><p>è¯¾ä¸Šè€å¸ˆæ‰€æ•™çš„ aop è¿˜æ˜¯å„ç§åšå®¢ä¸Šä¸¾å‡º aop çš„ä½¿ç”¨ä¾‹å­ï¼Œç»å¤§å¤šæ•°éƒ½åªæ˜¯è®²æ—¥å¿—è®°å½•ç›¸å…³çš„ä¾‹å­ã€‚å³ä½¿æ˜¯çŸ¥é“äº†ä½¿ç”¨åœºæ™¯ä¹Ÿä¸ä¼šè¯´å‡ºæ¥ã€‚</p></blockquote><h4 id="å‰ç½®é€šçŸ¥"><a href="#å‰ç½®é€šçŸ¥" class="headerlink" title="å‰ç½®é€šçŸ¥"></a>å‰ç½®é€šçŸ¥</h4><blockquote><p>åœ¨ç»™è¿™ 4 ä¸ªé€šçŸ¥ç±»å‹å®šä¹‰çš„æ—¶å€™ï¼Œä½ å¯ä»¥é»˜è®¤ç»™åˆ‡é¢ç±»ä¸­æ–¹æ³•ç»™ä¸€ä¸ª JoinPoint å‚æ•°ï¼Œé€šè¿‡è¿™ä¸ªå‚æ•°å¯ä»¥è·å–ç›®æ ‡æ–¹æ³•ä¸­çš„å‚æ•°ä»¥åŠå½“å‰ç›®æ ‡æ–¹æ³•æ‰€åœ¨çš„å¯¹è±¡ã€‚</p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"pointCut()"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">checkPermission</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> pointcut<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> objects <span class="token operator">=</span> pointcut<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> objects<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä½ æ²¡æœ‰æ“ä½œå­¦ç”Ÿçš„æƒé™"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="åç½®é€šçŸ¥"><a href="#åç½®é€šçŸ¥" class="headerlink" title="åç½®é€šçŸ¥"></a>åç½®é€šçŸ¥</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span><span class="token string">"pointCut()"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterReturn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ“ä½œå®Œæˆ23333---------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="å¼‚å¸¸é€šçŸ¥"><a href="#å¼‚å¸¸é€šçŸ¥" class="headerlink" title="å¼‚å¸¸é€šçŸ¥"></a>å¼‚å¸¸é€šçŸ¥</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"pointCut()"</span><span class="token punctuation">,</span> throwing <span class="token operator">=</span> <span class="token string">"throwable"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterThrowing</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ“ä½œå®Œæˆï¼Œä½†æ˜¯å‡ºç°å¼‚å¸¸-----------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="æœ€ç»ˆé€šçŸ¥"><a href="#æœ€ç»ˆé€šçŸ¥" class="headerlink" title="æœ€ç»ˆé€šçŸ¥"></a>æœ€ç»ˆé€šçŸ¥</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">"pointCut()"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ— è®ºæ˜¯å¦å¼‚å¸¸ï¼Œéƒ½æ‰§è¡Œ-----------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="å°æ€»ç»“"><a href="#å°æ€»ç»“" class="headerlink" title="å°æ€»ç»“"></a>å°æ€»ç»“</h3><p>ä¸Šé¢çš„ä»£ç ç¤ºä¾‹ä¸æƒ³å†™è¿‡å¤šçš„æ–‡å­—æè¿°ï¼Œçœ‹çœ‹å°±è¡Œã€‚</p><p>ä»¥ä¸Šçš„ä¾‹å­å’Œç»å¤§å¤šæ•°çš„åšå®¢ç®€ç›´å°±æ˜¯å¤§åŒå°å¼‚ï¼Œçœ‹èµ·æ¥å°±éƒ½æ˜¯æ¨¡æ‹Ÿæ—¥å¿—è®°å½•ã€‚ä¹Ÿå°±è®©æˆ‘ä»¬äº§ç”Ÿäº†é”™è§‰ï¼Œaop çœŸçš„ä»…ä»…åªæœ‰è¿™ç§åŠŸèƒ½ï¼Ÿç„¶è€Œæˆ‘è§‰å¾—å¦‚æœè¦æ“çºµç›®æ ‡å¯¹è±¡ä¸­çš„æ–¹æ³•çš„è¯ï¼Œè¿˜æ˜¯ä½¿ç”¨ç¯ç»•é€šçŸ¥çš„å¥½ã€‚</p><p>ä»¥ä¸Šå››ç§çš„é€šçŸ¥ç±»å‹ï¼Œä¹Ÿä¸æ˜¯è¯´æ²¡æœ‰ç”¨ï¼Œæ¯•ç«Ÿå­˜åœ¨å³åˆç†ã€‚</p><h2 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h2><h3 id="å¼€å§‹ä¹‹å‰"><a href="#å¼€å§‹ä¹‹å‰" class="headerlink" title="å¼€å§‹ä¹‹å‰"></a>å¼€å§‹ä¹‹å‰</h3><p>ä»¥ä¸‹ç¤ºä¾‹ä»£ç æ˜¯åŸºäºæ³¨è§£çš„ AOP ç¼–ç¨‹ï¼Œåœ¨æ­¤ä¹‹å‰éœ€è¦ä»‹ç»ä¸€ä¸‹å‡ ä¸ªæ³¨è§£ã€‚</p><ul><li>@Aspectï¼šåˆ‡é¢ç±»ï¼Œè¿™ä¸ªç›´æ¥æ ‡åœ¨åˆ‡é¢ç±»ä¸Š</li><li>@PointCutï¼šåˆ‡å…¥ç‚¹è¡¨è¾¾å¼</li><li>@Beforeï¼šå‰ç½®é€šçŸ¥çš„æ³¨è§£ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªåˆ‡å…¥ç‚¹ï¼Œä¹Ÿå°±æ˜¯ PointCut</li><li>@AfterReturningï¼šåç½®é€šçŸ¥æ³¨è§£ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªåˆ‡å…¥ç‚¹ï¼Œä¹Ÿå°±æ˜¯ PointCut</li><li>@AfterThrowingï¼šå¼‚å¸¸é€šçŸ¥æ³¨è§£ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªåˆ‡å…¥ç‚¹ï¼Œä¹Ÿå°±æ˜¯ PointCut</li><li>@Afterï¼šæœ€ç»ˆé€šçŸ¥æ³¨è§£ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªåˆ‡å…¥ç‚¹ï¼Œä¹Ÿå°±æ˜¯ PointCut</li><li>@Aroundï¼šç¯ç»•é€šçŸ¥æ³¨è§£ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªåˆ‡å…¥ç‚¹ï¼Œä¹Ÿå°±æ˜¯ PointCut</li></ul><h3 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h3><p>æˆ‘ç°åœ¨è¦åšä¸€ä¸ªç®€å•çš„å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿï¼Œè¿™ä¸ªåŠŸèƒ½ä¸æ˜¯å¾ˆå…¨é¢ï¼Œä½†æ˜¯æœ‰åˆ©ç”¨åˆ° AOP åœ¨é‡Œé¢ã€‚</p><p>å¥½çš„ï¼Œç°åœ¨æ˜¯è¿™æ ·çš„ä¸€ä¸ªæƒ…å†µï¼Œç®¡ç†å‘˜æœ‰ä¸¤ç±»ï¼Œä¸€ä¸ªæ˜¯ç®¡ç†å‘˜ï¼Œç®¡ç†å‘˜å¯ä»¥æ·»åŠ å­¦ç”Ÿä¿¡æ¯å’ŒæŸ¥è¯¢ä¿¡æ¯ï¼Œå¦ä¸€ä¸ªæ˜¯æ™®é€šç”¨æˆ·ï¼Œæ™®é€šç”¨æˆ·ä¸èƒ½æ·»åŠ å­¦ç”Ÿä¿¡æ¯ï¼Œä½†æ˜¯å´å¯ä»¥æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯ã€‚</p><h3 id="å­¦ç”Ÿå®ä½“ç±»"><a href="#å­¦ç”Ÿå®ä½“ç±»" class="headerlink" title="å­¦ç”Ÿå®ä½“ç±»"></a>å­¦ç”Ÿå®ä½“ç±»</h3><p>é¦–å…ˆå»ºç«‹ä¸€ä¸ªå­¦ç”Ÿå®ä½“ç±»ï¼ˆsetter å’Œ getter çœç•¥ï¼‰</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="ç”¨æˆ·ç±»"><a href="#ç”¨æˆ·ç±»" class="headerlink" title="ç”¨æˆ·ç±»"></a>ç”¨æˆ·ç±»</h4><p>å»ºç«‹äº†ä¸€ä¸ªç”¨æˆ·ç±»ï¼ˆsetter å’Œ getter çœç•¥ï¼‰</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">&#123;</span>   <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span><span class="token comment">//ç”¨æˆ·å</span>   <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span><span class="token comment">//å¯†ç </span>   <span class="token keyword">private</span> <span class="token keyword">int</span> role<span class="token punctuation">;</span> <span class="token comment">//ç”¨æˆ·è§’è‰² 0è¡¨ç¤ºç”¨æˆ·ï¼Œ1è¡¨ç¤ºç³»ç»Ÿç®¡ç†å‘˜</span><span class="token punctuation">&#125;</span></code></pre><h4 id="ç”¨æˆ·æœåŠ¡ç±»"><a href="#ç”¨æˆ·æœåŠ¡ç±»" class="headerlink" title="ç”¨æˆ·æœåŠ¡ç±»"></a>ç”¨æˆ·æœåŠ¡ç±»</h4><p>å»ºç«‹äº†ä¸€ä¸ª UserService ç±»ï¼ŒUserService ç±»ä¸­çš„æˆå‘˜å˜é‡å®šä¹‰äº†ä¸€ä¸ª <code>List</code> ç”¨äºä¿å­˜å­¦ç”Ÿä¿¡æ¯ã€‚æ–¹æ³•ç”¨äºæ·»åŠ ç”¨æˆ·ï¼Œåˆ é™¤ç”¨æˆ·å’ŒæŸ¥è¯¢ç”¨æˆ·ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// å­˜å‚¨å­¦ç”Ÿ</span>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span> students <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#123;</span>        students<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"xiaoqiang"</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        students<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"xiaoqiang"</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        students<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"xiaoqiang"</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        students<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">"xiaoqiang"</span> <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        students<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">"xiaoqiang"</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// æ·»åŠ å­¦ç”Ÿ</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">,</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> students<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// åˆ é™¤å­¦ç”Ÿ</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">delStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">,</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> students<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// æ‰“å°å­¦ç”Ÿä¿¡æ¯</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">printStudents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token operator">:</span> students<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="åˆ‡é¢ç±»"><a href="#åˆ‡é¢ç±»" class="headerlink" title="åˆ‡é¢ç±»"></a>åˆ‡é¢ç±»</h4><p>åœ¨åˆ‡é¢ç±»ä¸­æˆ‘åªå®šä¹‰äº†ï¼Œç¯ç»•é€šçŸ¥ï¼Œå› ä¸ºæˆ‘è§‰å¾—å§ç¯ç»•é€šçŸ¥é€šè¿‡æ§åˆ¶æ–¹æ³•è¿”å›å€¼æ¥ç¡®å®šæƒé™ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>itbaizhan<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">User</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">JoinPoint</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">ProceedingJoinPoint</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Aspect</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAspect</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// é…ç½®åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œåˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„åŒ¹é…äº† UserService ç›®æ ‡å¯¹è±¡ä¸­çš„å¸¦ Student çš„ç›¸å…³æ–¹æ³•ã€‚</span>    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itbaizhan.aop.UserService.*Student(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pointCut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"pointCut()"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">aroundAsdf</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> pjp<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Object</span> object <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// å¾—åˆ°æ–¹æ³•ä¸­çš„å‚æ•°</span>            <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> objects <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> objects<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>o <span class="token keyword">instanceof</span> <span class="token class-name">User</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> o<span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token comment">// åˆ¤æ–­æ˜¯å¦ä¸ºç®¡ç†å‘˜</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                object <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å­¦ç”Ÿä¿¡æ¯è¢«æ›´æ”¹ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                object <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å­¦ç”Ÿä¿¡æ¯è¢«æ›´æ”¹å¤±è´¥ï¼Œä½ æ²¡æœ‰æƒé™ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ“ä½œå®Œæˆï¼Œä½†æ˜¯å‡ºç°å¼‚å¸¸-----------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            throwable<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> object<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ä¸Šè¿°ä»£ç ä¸­ <code>pjp.proceed();</code> çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª Object ç±»å‹ï¼Œè¿™ä¸ª <code>proceed()</code> å…¶å®å°±æ˜¯ç›®æ ‡å¯¹è±¡çš„è°ƒç”¨ï¼Œå®ƒçš„è¿”å›å‡ºæ¥çš„å€¼å°±æ˜¯ç›®æ ‡å¯¹è±¡çš„è¿”å›å€¼ï¼Œä¹‹å‰ä¸€ç›´å¯¹è¿™ä¸ªä¸æ‡‚ï¼Œç°åœ¨æ‡‚äº†ã€‚</p><h4 id="bean-çš„ç›¸å…³é…ç½®"><a href="#bean-çš„ç›¸å…³é…ç½®" class="headerlink" title="bean çš„ç›¸å…³é…ç½®"></a>bean çš„ç›¸å…³é…ç½®</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>aop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/aop<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- é…ç½® UserService --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itbaizhan.aop.UserService<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userService<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- é…ç½®åˆ‡é¢ç±» --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itbaizhan.aop.MyAspect<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myAspect<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- å¼€å¯åŸºäºæ³¨è§£çš„é…ç½® --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspectj-autoproxy</span> <span class="token attr-name">proxy-target-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></code></pre><h4 id="ä¸»ç¨‹åº"><a href="#ä¸»ç¨‹åº" class="headerlink" title="ä¸»ç¨‹åº"></a>ä¸»ç¨‹åº</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>itbaizhan<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">User</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ApplicationContext</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Entrance</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">static</span> <span class="token class-name">ApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans2.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token class-name">UserService</span> userService <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">UserService</span><span class="token punctuation">)</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userService"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Scanner</span> sc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ç™»å½•éªŒè¯</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">// æ¨¡æ‹Ÿç™»å½•</span>            <span class="token class-name">String</span> username <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> password <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"xiaohehe"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">"123456"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç™»å½•æˆåŠŸï¼Œç®¡ç†å‘˜"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                user<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"xiaohehe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                user<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                user<span class="token punctuation">.</span><span class="token function">setRole</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// è¿›å…¥ä¸šåŠ¡</span>                <span class="token function">go</span><span class="token punctuation">(</span>sc<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"hehe"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">"123"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç™»å½•æˆåŠŸï¼Œæ™®é€šç”¨æˆ·"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                user<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"xiaohehe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                user<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                user<span class="token punctuation">.</span><span class="token function">setRole</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">go</span><span class="token punctuation">(</span>sc<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç™»å½•å¤±è´¥ï¼Œç”¨æˆ·åæˆ–å¯†ç è¾“é”™äº†ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// ä¸»ç¨‹åºçš„ä¸šåŠ¡</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">go</span><span class="token punctuation">(</span><span class="token class-name">Scanner</span> sc<span class="token punctuation">,</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\nè¯·é€‰æ‹©ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> select <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"add"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>select<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>userService<span class="token punctuation">.</span><span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token string">"xiaoqiang"</span> <span class="token operator">+</span> index<span class="token punctuation">,</span> <span class="token number">20</span> <span class="token operator">+</span> index<span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ·»åŠ æˆåŠŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ·»åŠ å¤±è´¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"del"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>select<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>userService<span class="token punctuation">.</span><span class="token function">delStudent</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åˆ é™¤æˆåŠŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åˆ é™¤å¤±è´¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"print"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>select<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                userService<span class="token punctuation">.</span><span class="token function">printStudents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"quit"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>select<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç¨‹åºé€€å‡ºäº†ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"logout"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>select<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·é€€å‡ºç™»å½•äº†ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é€‰é¡¹æœ‰è¯¯ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            index<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="æ‰§è¡Œè¿‡ç¨‹"><a href="#æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="æ‰§è¡Œè¿‡ç¨‹"></a>æ‰§è¡Œè¿‡ç¨‹</h4><p>ç¨‹åºæ‰§è¡Œåï¼Œå…ˆè¾“å…¥ç”¨æˆ·åå’Œå¯†ç è¿›å…¥ç¨‹åºï¼Œæ‰“å°ç»“æœå¦‚ä¸‹</p><pre class="language-none"><code class="language-none">xiaohehe123456ç™»å½•æˆåŠŸï¼Œç®¡ç†å‘˜è¯·é€‰æ‹©ï¼š</code></pre><p>ç„¶åæˆ‘ä»¬å…ˆæ‰“å°å­¦ç”Ÿä¿¡æ¯ã€‚</p><pre class="language-none"><code class="language-none">è¯·é€‰æ‹©ï¼šprintStudent&#123;id&#x3D;1, name&#x3D;&#39;xiaoqiang1&#39;, age&#x3D;21&#125;Student&#123;id&#x3D;2, name&#x3D;&#39;xiaoqiang2&#39;, age&#x3D;22&#125;Student&#123;id&#x3D;3, name&#x3D;&#39;xiaoqiang3&#39;, age&#x3D;23&#125;Student&#123;id&#x3D;4, name&#x3D;&#39;xiaoqiang4&#39;, age&#x3D;24&#125;Student&#123;id&#x3D;5, name&#x3D;&#39;xiaoqiang5&#39;, age&#x3D;25&#125;</code></pre><p>æ‰§è¡Œæ·»åŠ æ“ä½œï¼Œçœ‹ï¼Œç®¡ç†å‘˜å¯ä»¥è¿›è¡Œæ·»åŠ å­¦ç”Ÿã€‚</p><pre class="language-none"><code class="language-none">è¯·é€‰æ‹©ï¼šaddå­¦ç”Ÿä¿¡æ¯è¢«æ›´æ”¹ï¼æ·»åŠ æˆåŠŸè¯·é€‰æ‹©ï¼šprintStudent&#123;id&#x3D;1, name&#x3D;&#39;xiaoqiang1&#39;, age&#x3D;21&#125;Student&#123;id&#x3D;2, name&#x3D;&#39;xiaoqiang2&#39;, age&#x3D;22&#125;Student&#123;id&#x3D;3, name&#x3D;&#39;xiaoqiang3&#39;, age&#x3D;23&#125;Student&#123;id&#x3D;4, name&#x3D;&#39;xiaoqiang4&#39;, age&#x3D;24&#125;Student&#123;id&#x3D;5, name&#x3D;&#39;xiaoqiang5&#39;, age&#x3D;25&#125;Student&#123;id&#x3D;8, name&#x3D;&#39;xiaoqiang8&#39;, age&#x3D;28&#125;è¯·é€‰æ‹©ï¼š</code></pre><p>å¦‚æœæˆ‘ä»¬åˆ‡æ¢æˆæ™®é€šç®¡ç†å‘˜ï¼Œå†æ¬¡æ·»åŠ è¯•è¯•ã€‚</p><pre class="language-none"><code class="language-none">è¯·é€‰æ‹©ï¼šlogoutç”¨æˆ·é€€å‡ºç™»å½•äº†ï¼hehe123ç™»å½•æˆåŠŸï¼Œæ™®é€šç”¨æˆ·è¯·é€‰æ‹©ï¼š</code></pre><p>è¾“å…¥ add çš„æ—¶å€™ï¼Œå‘ç°æ·»åŠ å¤±è´¥äº†ã€‚è¾“å…¥ del çš„æ—¶å€™ä¹Ÿæ˜¯å¦‚æ­¤ï¼</p><p>ç„¶åçœ‹ä¸Šé¢çš„ UserService ç±»ä¸­æ²¡æœ‰æŒ¨ä¸ªåˆ¤æ–­æƒé™çš„ä»£ç ï¼Œå´èƒ½çŸ¥é“ä½ æ²¡æœ‰æƒé™ã€‚è¿™å°±æ˜¯ aop ä¸­å®šä¹‰çš„ç¯ç»•é€šçŸ¥çš„ä»£ç çš„åŠŸåŠ³ã€‚</p><pre class="language-none"><code class="language-none">è¯·é€‰æ‹©ï¼šaddå­¦ç”Ÿä¿¡æ¯è¢«æ›´æ”¹å¤±è´¥ï¼Œä½ æ²¡æœ‰æƒé™ï¼æ·»åŠ å¤±è´¥è¯·é€‰æ‹©ï¼šdelå­¦ç”Ÿä¿¡æ¯è¢«æ›´æ”¹å¤±è´¥ï¼Œä½ æ²¡æœ‰æƒé™ï¼åˆ é™¤å¤±è´¥è¯·é€‰æ‹©ï¼šprintStudent&#123;id&#x3D;1, name&#x3D;&#39;xiaoqiang1&#39;, age&#x3D;21&#125;Student&#123;id&#x3D;2, name&#x3D;&#39;xiaoqiang2&#39;, age&#x3D;22&#125;Student&#123;id&#x3D;3, name&#x3D;&#39;xiaoqiang3&#39;, age&#x3D;23&#125;Student&#123;id&#x3D;4, name&#x3D;&#39;xiaoqiang4&#39;, age&#x3D;24&#125;Student&#123;id&#x3D;5, name&#x3D;&#39;xiaoqiang5&#39;, age&#x3D;25&#125;Student&#123;id&#x3D;8, name&#x3D;&#39;xiaoqiang8&#39;, age&#x3D;28&#125;è¯·é€‰æ‹©ï¼š</code></pre><h4 id="ç¤ºä¾‹æ€»ç»“"><a href="#ç¤ºä¾‹æ€»ç»“" class="headerlink" title="ç¤ºä¾‹æ€»ç»“"></a>ç¤ºä¾‹æ€»ç»“</h4><p>ä¸Šé¢çš„æƒé™éªŒè¯çš„åœºæ™¯ä¹Ÿæ˜¯è‡ªå·±æƒ³å‡ºæ¥çš„ï¼Œæˆ‘è‡ªå·±èƒ½å¤ŸçœŸçœŸæ­£æ­£çš„ä½“ä¼šåˆ° AOP çš„ç¼–å†™æ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿå¯¹ä¸Šé¢çš„æ¦‚å¿µè¿›è¡Œäº†ä¸€ä¸ªç±»æ¯”ï¼Œæˆ‘è§‰å¾—è¿™é‡Œé¢çš„ç¤ºä¾‹ä»£ç æ‹¿è¿‡æ¥å¤åˆ¶è¿è¡Œä¸€ä¸‹ï¼Œä½“ä¼šä½“ä¼šå¹¶ç†è§£ aop çš„é“ç†ï¼Œå…¶å®è¿˜æ˜¯å¾ˆé‡è¦çš„ã€‚</p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>è‡ªå·±åœ¨æ€è€ƒçš„è¿‡ç¨‹ä¸­ä¹Ÿæƒ³åˆ°è¿‡å¾ˆå¤šçš„ç±»æ¯”æ–¹å¼ï¼Œæ¯”å¦‚ç”¨ç‰™ç­¾ä¸²èµ·æ¥çš„æ±‰å ¡ï¼Œç¾Šè‚‰ä¸²ï¼Œè¥¿ç“œï¼Œè±†æ²™åŒ…ï¼Œé¥ºå­ç­‰ç­‰ã€‚åªè¦èƒ½çœŸæ­£çš„å¼„æ‡‚ï¼Œé‚£æ‰æ˜¯ç‹é“ã€‚</p><p>åœ¨ç†è§£ AOP ä»¥åŠä½¿ç”¨åœºæ™¯ï¼Œå‚è€ƒäº†ä»¥ä¸‹èµ„æ–™</p><ul><li><a href="https://blog.csdn.net/q982151756/article/details/80513340">ç»†è¯´Springâ€”â€”AOPè¯¦è§£ï¼ˆAOPæ¦‚è§ˆï¼‰</a></li><li><a href="https://blog.csdn.net/happy_coding_life/article/details/80353009">13-SpringAOPæœ€å¼ºå¤§çš„é€šçŸ¥-ç¯ç»•é€šçŸ¥</a></li><li><a href="https://www.cnblogs.com/chuijingjing/p/9806651.html">Spring AOP äº”å¤§é€šçŸ¥ç±»å‹</a></li><li><a href="https://www.cnblogs.com/sandea/p/11175834.html">Spring AOPï¼ˆé€šçŸ¥ã€è¿æ¥ç‚¹ã€åˆ‡ç‚¹ã€åˆ‡é¢ï¼‰</a></li><li><a href="https://www.jianshu.com/p/5b9a0d77f95f">spring aop åŠå®ç°æ–¹å¼</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯å¼€å‘ </category>
          
          <category> Spring å¼€å‘æ¡†æ¶å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> spring </tag>
            
            <tag> AOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webui ç™»å½•ç•Œé¢åˆ¶ä½œ</title>
      <link href="/journal/webui-login/"/>
      <url>/journal/webui-login/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä»Šå¤©ä¸‹åˆæ‰“ç®—æŠŠ webui é‚£èŠ‚è¯¾è€å¸ˆç»™çš„ç™»å½•ç•Œé¢ç»™åšå‡ºæ¥ï¼Œåç»­åœ¨ j2ee æœŸæœ«é¡¹ç›®æ—¶å€™å°±ç›´æ¥ç”¨è¿™ä¸ªä½œä¸ºç™»å½•å’Œæ³¨å†Œçš„ç•Œé¢ã€‚çœçš„å†å»æ‰¾ç™»å½•å’Œæ³¨å†Œçš„ç´ æã€‚</p><h2 id="æä¾›çš„ä¸œè¥¿"><a href="#æä¾›çš„ä¸œè¥¿" class="headerlink" title="æä¾›çš„ä¸œè¥¿"></a>æä¾›çš„ä¸œè¥¿</h2><p>æœ€ç»ˆå®ç°çš„æ•ˆæœé¢„è§ˆå›¾å¦‚ä¸‹</p><p><img src="/images/webui-login/z20h4-xk369.gif" loading="lazy"></p><p>ä¸€ä¸ª html æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹</p><span id="more"></span><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>css/style.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Login<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>left-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>ç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>input-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç”¨æˆ·å<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å¯†ç <span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>message-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>å¿˜è®°å¯†ç <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>right-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>regist-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>regist<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æ³¨å†Œ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>actoin-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>æäº¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p>è¯ä¸å¤šè¯´ï¼Œä¸­åˆä¸ç¡è§‰äº†ï¼Œç›´æ¥å¼€å¹²ï¼</p><h2 id="ç•Œé¢å®ç°"><a href="#ç•Œé¢å®ç°" class="headerlink" title="ç•Œé¢å®ç°"></a>ç•Œé¢å®ç°</h2><p>çœ‹äº†ä¸€ä¸‹è§†é¢‘æ•ˆæœå’Œæˆªå›¾æ•ˆæœï¼Œç•Œé¢çš„å¸ƒå±€å¤§è‡´èƒ½å¤ŸæŠŠæ¡æ¸…æ¥šäº†ã€‚</p><h3 id="è·å–ç™»å½•ç•Œé¢çš„å®½é«˜"><a href="#è·å–ç™»å½•ç•Œé¢çš„å®½é«˜" class="headerlink" title="è·å–ç™»å½•ç•Œé¢çš„å®½é«˜"></a>è·å–ç™»å½•ç•Œé¢çš„å®½é«˜</h3><p>åˆ©ç”¨ QQ æˆªå›¾ï¼Œå¾—åˆ°äº†å®½ä¸º 600px ï¼Œé«˜ä¸º 375pxã€‚è®¾ç½®ç™»å½•çš„å®½å’Œé«˜ã€‚</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.login-container</span> <span class="token punctuation">&#123;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 375px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="æ¸å˜èƒŒæ™¯"><a href="#æ¸å˜èƒŒæ™¯" class="headerlink" title="æ¸å˜èƒŒæ™¯"></a>æ¸å˜èƒŒæ™¯</h3><p>ç”±äºè¿™æ˜¯æ¸å˜èƒŒæ™¯ï¼Œå·¦ä¸Šè§’æµ…ï¼Œå³ä¸‹è§’æ·±ã€‚é€šè¿‡ QQ æˆªå›¾è·å–åˆ°å·¦ä¸Šè§’å’Œå³ä¸‹è§’çš„ rgb çš„ä¸‰ç§å€¼å³å¯ã€‚è¿™ä¸¤ç§é¢œè‰²çš„ä»£ç åˆ†åˆ«ä¸º <code>218,148,255</code> å’Œ <code>133,99,191</code>ï¼Œç„¶åæ¸…ç©ºé»˜è®¤ body è‡ªå¸¦çš„å¤–è¾¹è·ã€‚å¦‚æœç»™èƒŒæ™¯è®¾ç½®æ¸å˜æ ·å¼ï¼Œä½¿ç”¨ linear-gradient å³å¯ã€‚</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">&#123;</span>  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span><span class="token function">rgb</span><span class="token punctuation">(</span>218<span class="token punctuation">,</span>148<span class="token punctuation">,</span>255<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">rgb</span><span class="token punctuation">(</span>133<span class="token punctuation">,</span>99<span class="token punctuation">,</span>191<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ä¸è¿‡ä¿å­˜ä¹‹åï¼Œæ•ˆæœæ„Ÿè§‰æ€ªæ€ªçš„ã€‚</p><p><img src="/images/webui-login/QQ%E6%88%AA%E5%9B%BE20210410143120.jpg" loading="lazy"></p><p>å› ä¸ºèƒŒæ™¯æœ‰é‡å¤ï¼Œåœ¨ backgroud å±æ€§ä¸­è®¾ç½®ä¸€ä¸ª no-repeat å³å¯</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span><span class="token function">rgb</span><span class="token punctuation">(</span>218<span class="token punctuation">,</span>148<span class="token punctuation">,</span>255<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">rgb</span><span class="token punctuation">(</span>133<span class="token punctuation">,</span>99<span class="token punctuation">,</span>191<span class="token punctuation">)</span><span class="token punctuation">)</span> no-repeat<span class="token punctuation">;</span></code></pre><p><img src="/images/webui-login/QQ%E6%88%AA%E5%9B%BE20210410143800.jpg" loading="lazy"></p><p>ä¸è¿‡é—®é¢˜åˆæ¥äº†ï¼Œå‘ç°ä¸‹é¢çš„èƒŒæ™¯éƒ½æ˜¯ç™½çš„ã€‚è€Œä¸” body çš„é«˜åº¦éƒ½æ˜¯ç”±å‰é¢å¯¹ç±»é€‰æ‹©å™¨ <code>login-container</code> è®¾ç½®çš„é«˜åº¦æ‰€æ’‘èµ·çš„ã€‚å³ä½¿ç»™ body è®¾ç½®æ ·å¼ä¸º <code>height: 100%</code> ä¹Ÿæ˜¯ä¸è¡Œã€‚åé¢å‘ç°ï¼Œæ•´ä¸ªé¡µé¢çš„å®½å’Œé«˜æ˜¯å—åˆ° html æ ‡ç­¾å¯¹çš„æ§åˆ¶ï¼Œè€Œä¸æ˜¯ body æ ‡ç­¾å¯¹ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦é€šè¿‡è®¾ç½®ä»¥ä¸‹æ ·å¼å³å¯å®½é«˜è‡ªé€‚åº”ã€‚</p><p>å¹¶ä¸”ï¼Œå¯¹äº html æ ‡ç­¾å¯¹æ¥è¯´ï¼Œè®¾ç½®ç™¾åˆ†æ¯”å°±æ˜¯ç»™ç»™æ•´ä¸ªç½‘é¡µâ€œç¡®å®šçš„â€å®½å’Œé«˜ã€‚</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token comment">/* ç»™ html è®¾ç½®ä¸€ä¸ª 100% çš„é«˜åº¦ï¼Œè®¾ç½®æˆäº† 100% æ•´ä¸ªé¡µé¢çš„é«˜åº¦å°±æ˜¯æµè§ˆå™¨çš„é«˜åº¦è¿™æ ·ï¼Œhtml ä¸­çš„ body æ ‡ç­¾ä¹Ÿå°±å¯ä»¥ä½¿ç”¨ç™¾åˆ†æ¯”æ¥æ§åˆ¶å®½é«˜*/</span><span class="token selector">html</span> <span class="token punctuation">&#123;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">body</span> <span class="token punctuation">&#123;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>æ•ˆæœï¼š</p><p><img src="/images/webui-login/QQ%E6%88%AA%E5%9B%BE20210410145620.jpg" loading="lazy"></p><p>å‘ç°èƒŒæ™¯çš„æ¸å˜æ–¹å‘è¿˜æ˜¯è¦ä¿®æ”¹ä¿®æ”¹ï¼ŒæŸ¥é˜…ä½¿ç”¨æ–¹æ³•ä¹‹åè®¾ç½®æ¸å˜æ–¹å‘ï¼Œåªè¦åœ¨ç¬¬ä¸€ä¸ªå‚æ•°æ·»åŠ å€¾æ–œè§’å³å¯ï¼Œç›®æµ‹åº”è¯¥æ˜¯ 160Â° å·¦å³å§</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>160deg<span class="token punctuation">,</span> <span class="token function">rgb</span><span class="token punctuation">(</span>218<span class="token punctuation">,</span>148<span class="token punctuation">,</span>255<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">rgb</span><span class="token punctuation">(</span>133<span class="token punctuation">,</span>99<span class="token punctuation">,</span>191<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è®¾ç½®å®Œæˆä¹‹åï¼Œæ•ˆæœå¦‚ä¸‹</p><p><img src="/images/webui-login/QQ%E6%88%AA%E5%9B%BE20210410150240.jpg" loading="lazy"></p><p>è¿™æ ·ä¸€æ¥ï¼ŒèƒŒæ™¯å°±è®¾ç½®å®Œæˆäº†ã€‚</p><h3 id="ç™»å½•ç•Œé¢æ•´ä½“"><a href="#ç™»å½•ç•Œé¢æ•´ä½“" class="headerlink" title="ç™»å½•ç•Œé¢æ•´ä½“"></a>ç™»å½•ç•Œé¢æ•´ä½“</h3><p>é€šè¿‡æ•ˆæœå›¾å‘ç°ï¼Œç™»å½•ç•Œé¢æ˜¯ç”±å·¦è¾¹çš„å¡«å†™ç™»å½•éƒ¨åˆ†å’Œå³è¾¹çš„æ³¨å†Œéƒ¨åˆ†ã€‚å…ˆè®¾ç½®æ•´ä½“ï¼Œå†è®¾ç½®å·¦è¾¹éƒ¨åˆ†å’Œå³è¾¹éƒ¨åˆ†ã€‚</p><h3 id="æ•´ä½“å±…ä¸­"><a href="#æ•´ä½“å±…ä¸­" class="headerlink" title="æ•´ä½“å±…ä¸­"></a>æ•´ä½“å±…ä¸­</h3><p>å°†ç™»å½•æ¡†è®¾ç½®ä¸ºç»å¯¹å®šä½ï¼Œå°½åŠ›è®¾ç½®ä¸ºæ°´å¹³å±…ä¸­å’Œå‚ç›´å±…ä¸­ã€‚å†…éƒ¨çš„å¸ƒå±€è®¾ç½®æˆå¼¹æ€§å¸ƒå±€ï¼Œé‡Œé¢çš„ div å°±æ˜¯æ°´å¹³æ–¹å‘çš„ã€‚</p><blockquote><p>calc å‡½æ•°é€šè¿‡è®¡ç®—çš„æ–¹å¼ç®—å‡ºå±æ€§å€¼ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ä½ éœ€è¦ç”¨åˆ°å®ƒï¼Œæ¯”å¦‚ä¸‹é¢çš„å±…ä¸­æ–¹å¼ã€‚æ”¯æŒâ€œ+â€ã€â€œ-â€ã€â€œ*â€ã€â€œ/â€ï¼Œè¿ç®—æ–¹å¼å’Œå°å­¦é‡Œçš„å››åˆ™è¿ç®—æ–¹å¼ä¸€æ¨¡ä¸€æ ·ã€‚</p><p>è¿ç®—çš„å•ä½å¯ä»¥ä¸ç»Ÿä¸€ã€‚æ¯”å¦‚ calc(10em - 100px) è¿™æ²¡æœ‰é—®é¢˜ã€‚</p></blockquote><p>è¿˜æœ‰ä¸€ä¸ªåœ†è§’åŠå¾„</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.login-container</span> <span class="token punctuation">&#123;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 375px<span class="token punctuation">;</span>  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>  <span class="token property">left</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>50% - 300px<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">top</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>50% - 100px<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 10px 10px 62px <span class="token function">rgb</span><span class="token punctuation">(</span>98<span class="token punctuation">,</span>79<span class="token punctuation">,</span>182<span class="token punctuation">)</span><span class="token punctuation">,</span> -10px 0 62px <span class="token function">rgb</span><span class="token punctuation">(</span>98<span class="token punctuation">,</span>79<span class="token punctuation">,</span>182<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ç„¶åå·¦è¾¹éƒ¨åˆ†å’Œå³è¾¹éƒ¨åˆ†å…ˆè®¾ç½®ä¸€ä¸‹å®ƒçš„å®½åº¦</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.left-container</span> <span class="token punctuation">&#123;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 450px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.right-container</span> <span class="token punctuation">&#123;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>å¾—åˆ°çš„æ•ˆæœ</p><p><img src="/images/webui-login/QQ%E6%88%AA%E5%9B%BE20210410153414.jpg" loading="lazy"></p><h3 id="å·¦è¾¹éƒ¨åˆ†"><a href="#å·¦è¾¹éƒ¨åˆ†" class="headerlink" title="å·¦è¾¹éƒ¨åˆ†"></a>å·¦è¾¹éƒ¨åˆ†</h3><p>æ„Ÿè§‰å·¦è¾¹éƒ¨åˆ†æœ‰ä¸€ä¸ª 52px çš„ padding ï¼Œè®¾ç½®çœ‹çœ‹ã€‚</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.left-container</span> <span class="token punctuation">&#123;</span>  <span class="token property">padding</span><span class="token punctuation">:</span> 52px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="ç™»å½•æ–‡å­—æ ·å¼"><a href="#ç™»å½•æ–‡å­—æ ·å¼" class="headerlink" title="ç™»å½•æ–‡å­—æ ·å¼"></a>ç™»å½•æ–‡å­—æ ·å¼</h4><p>å…ˆå¼„ç™»å½•æ–‡å­—çš„æ ·å¼å§ï¼Œç™»å½•ä¸‹é¢æœ‰ä¸€ä¸ª<del>è“è‰²</del>çš„ä¸‹åˆ’çº¿ã€‚å­—ä½“é¢œè‰²æ˜¯ç™½çš„ </p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.title</span> <span class="token punctuation">&#123;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>  <span class="token property">border-bottom</span><span class="token punctuation">:</span> 3px solid <span class="token function">rgb</span><span class="token punctuation">(</span>33<span class="token punctuation">,</span>158<span class="token punctuation">,</span>208<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ç„¶åè®¾ç½®è¾“å…¥æ¡†çš„æ ·å¼ï¼Œç»™è¿™ä¸ª <code>.input-container</code> é€‰æ‹©å™¨ç›´æ¥ä¸Šä¸€ä¸ªé¡¶éƒ¨å¤–è¾¹è·ä¸º 40pxã€‚</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.input-container</span> <span class="token punctuation">&#123;</span>  <span class="token property">margin-top</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="è¾“å…¥æ¡†æ ·å¼"><a href="#è¾“å…¥æ¡†æ ·å¼" class="headerlink" title="è¾“å…¥æ¡†æ ·å¼"></a>è¾“å…¥æ¡†æ ·å¼</h4><p>ç„¶åç»™æ¯ä¸€ä¸ªè¾“å…¥æ¡†è®¾ç½®ä¸€ä¸ªå®½åº¦ä¸º 100%ï¼Œä¸ºä»€ä¹ˆå¯ä»¥è®¾ç½®ç™¾åˆ†æ¯”ï¼Œå› ä¸º input çš„çˆ¶å…ƒç´ çš„å®½çš„å€¼æ˜¯ç¡®å®šçš„ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ç™¾åˆ†æ¯”ã€‚è¿™å’Œå‰é¢æåˆ°çš„ body ä¸èƒ½ç›´æ¥è®¾ç½®ç™¾åˆ†æ¯”æ˜¯ä¸€æ ·çš„ã€‚</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.input-container input</span> <span class="token punctuation">&#123;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ç„¶åè¿™ä¸¤ä¸ªè¾“å…¥æ¡†ä¹‹é—´æœ‰ä¸€ä¸ªåº•éƒ¨å¤–è¾¹è·ï¼Œç»™å®ƒè®¾ç½®ä¸º 20pxï¼Œè¿™æ ·çœ‹èµ·æ¥ä»–ä»¬æœ‰ä¸€ä¸ªè·ç¦»ã€‚</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.input-container input</span> <span class="token punctuation">&#123;</span>  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ç”±äºè¿™ä¸¤ä¸ªè¾“å…¥æ¡†éƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„æ ·å¼ï¼ŒèƒŒæ™¯æ˜¯ç™½è‰²çš„ï¼Œæ¯ä¸€æ¡è¾¹éƒ½æœ‰è¾¹æ¡†ï¼Œé»˜è®¤æ˜¯ç°è‰²çš„ï¼Œè¿˜æœ‰æç¤ºæ–‡å­—çš„é¢œè‰²ï¼Œé»˜è®¤ä¹Ÿæ˜¯æ·±ç°è‰²çš„ã€‚è¿™äº›æ ·å¼éƒ½æ˜¯éœ€è¦è¿›è¡Œæ›´æ”¹çš„ã€‚</p><p>æˆ‘ç›´æ¥ç»™å®ƒä¿®æ”¹è¾¹æ¡†æ ·å¼ï¼ŒèƒŒæ™¯é¢œè‰²ä¸ºé€æ˜ï¼Œå»æ‰å·¦ã€ä¸Šã€å³çš„è¾¹æ¡†æ ·å¼ï¼Œè®¾ç½®åº•éƒ¨è¾¹æ¡†ã€‚</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.input-container input</span> <span class="token punctuation">&#123;</span>  <span class="token property">background</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>  <span class="token property">border-top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">border-left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">border-right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid <span class="token function">rgb</span><span class="token punctuation">(</span>88<span class="token punctuation">,</span>142<span class="token punctuation">,</span>214<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>è®¾ç½®å®Œä¹‹åï¼Œçœ‹åˆ°å¤§ä½“ä¸Šçš„æ•ˆæœå·²ç»å‡ºæ¥äº†ã€‚</p><p><img src="/images/webui-login/QQ%E6%88%AA%E5%9B%BE20210410162122.jpg" loading="lazy"></p><p>ç„¶åå°±æ˜¯è®¾ç½®æç¤ºæ€§æ–‡æœ¬çš„æ ·å¼ï¼Œç›´æ¥åœ¨ Input æ ‡ç­¾å¯¹ä¸­è¿›è¡Œè®¾ç½®è‚¯å®šæ˜¯æ— æ•ˆçš„ã€‚æ‰€ä»¥ï¼Œé€šè¿‡ä¼ªç±»æ¥è®¾ç½®ï¼Œinput è¾“å…¥æ¡†æœ‰ä¸€ä¸ªæç¤ºæ€§çš„ä¼ªç±»ï¼Œå«åš placeholder ï¼Œé€šè¿‡è¿™ä¸ªæ¥è®¾ç½®ï¼Œæç¤ºæ€§å­—ä½“çš„æ ·å¼å°±å¯ä»¥è®¾ç½®äº†ã€‚</p><p>çœ‹æ•ˆæœçš„æç¤ºæ€§å­—ä½“å¹¶ä¸æ˜¯ç‰¹åˆ«çš„ç™½ï¼Œç›®æµ‹ä¸€ä¸‹åº”è¯¥è¿˜è¦ç°ä¸€ç‚¹ç‚¹ã€‚</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.input-container input::placeholder</span> <span class="token punctuation">&#123;</span>  <span class="token property">color</span><span class="token punctuation">:</span> #eee<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p><img src="/images/webui-login/QQ%E6%88%AA%E5%9B%BE20210410162636.jpg" loading="lazy"></p><p>æ„Ÿè§‰æç¤ºæ€§è¾“å…¥æ¡†å’Œåº•éƒ¨è¾¹è·ï¼Œæœ‰ä¸€å®šçš„è·ç¦»ï¼Œè®¾ç½®ä¸€ä¸‹å†…è¾¹è·å°± OK äº†ã€‚</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.input-container input</span> <span class="token punctuation">&#123;</span>  <span class="token property">padding</span><span class="token punctuation">:</span> 6px 0<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p><img src="/images/webui-login/QQ%E6%88%AA%E5%9B%BE20210410162906.jpg" loading="lazy"></p><h4 id="å¿˜è®°å¯†ç æ ·å¼"><a href="#å¿˜è®°å¯†ç æ ·å¼" class="headerlink" title="å¿˜è®°å¯†ç æ ·å¼"></a>å¿˜è®°å¯†ç æ ·å¼</h4><p>å¿˜è®°å¯†ç æ ·å¼ä¹Ÿä¸éš¾</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.message-container</span> <span class="token punctuation">&#123;</span>  <span class="token property">color</span><span class="token punctuation">:</span> #eee<span class="token punctuation">;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>  <span class="token property">margin-top</span><span class="token punctuation">:</span> 90px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="å·¦è¾¹éƒ¨åˆ†çš„æ”¶å·¥ä¹‹ä½œ"><a href="#å·¦è¾¹éƒ¨åˆ†çš„æ”¶å·¥ä¹‹ä½œ" class="headerlink" title="å·¦è¾¹éƒ¨åˆ†çš„æ”¶å·¥ä¹‹ä½œ"></a>å·¦è¾¹éƒ¨åˆ†çš„æ”¶å·¥ä¹‹ä½œ</h4><p>ç¼ºäº†ä¸€ä¸ªèƒŒæ™¯é¢œè‰²ï¼Œå·¦ä¾§çš„èƒŒæ™¯é¢œè‰²æ˜¯æ¸è¿›çš„ï¼Œæ‰€ä»¥è¿˜æ˜¯è¦ç”¨åˆ° linear-gradient ï¼Œè®¾ç½®å¥½æ¸è¿›çš„è§’åº¦ã€‚å·¦ä¸Šè§’éƒ¨åˆ†çš„é¢œè‰²æ˜¯ <code>119,83,171</code>ï¼Œå³ä¸‹è§’éƒ¨åˆ†çš„é¢œè‰²æ˜¯ <code>89,109,213</code> ã€‚è®¾ç½®å®ŒèƒŒæ™¯é¢œè‰²è¿˜ä¸è¡Œï¼Œè¿˜è¦å†è®¾ç½®å·¦ä¸Šè§’å’Œå·¦ä¸‹è§’çš„ä¸ºåœ†è§’ï¼Œä¸”åœ†è§’åŠå¾„ä¸º 20px ï¼Œå’Œçˆ¶å…ƒç´ çš„åœ†è§’ä¸€æ ·ã€‚</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.left-container</span> <span class="token punctuation">&#123;</span>  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>160deg<span class="token punctuation">,</span> <span class="token function">rgb</span><span class="token punctuation">(</span>119<span class="token punctuation">,</span>83<span class="token punctuation">,</span>171<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">rgb</span><span class="token punctuation">(</span>89<span class="token punctuation">,</span>109<span class="token punctuation">,</span>213<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">border-top-left-radius</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>  <span class="token property">border-bottom-left-radius</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>å·¦è¾¹éƒ¨åˆ†çš„æ•ˆæœå¦‚ä¸‹</p><p><img src="/images/webui-login/QQ%E6%88%AA%E5%9B%BE20210410163926.jpg" loading="lazy"></p><h3 id="å³è¾¹éƒ¨åˆ†"><a href="#å³è¾¹éƒ¨åˆ†" class="headerlink" title="å³è¾¹éƒ¨åˆ†"></a>å³è¾¹éƒ¨åˆ†</h3><p>å³è¾¹éƒ¨åˆ†æœ‰ä¸€ä¸ªæ³¨å†Œï¼Œæäº¤çš„æŒ‰é’®ã€‚é€šè¿‡æµ‹é‡ï¼Œåº”è¯¥æœ‰ä¸€ä¸ªå†…è¾¹è·ï¼Œä¸Šä¸‹å†…è¾¹è·å‡ä¸º 47pxï¼Œå·¦å³è¾¹è·å‡ä¸º 50pxã€‚</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.right-container</span> <span class="token punctuation">&#123;</span>  <span class="token property">padding</span><span class="token punctuation">:</span> 47px 50px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="æ³¨å†Œæ–‡å­—æ ·å¼"><a href="#æ³¨å†Œæ–‡å­—æ ·å¼" class="headerlink" title="æ³¨å†Œæ–‡å­—æ ·å¼"></a>æ³¨å†Œæ–‡å­—æ ·å¼</h4><p>è®¾ç½®æ³¨å†Œæ–‡å­—çš„æ ·å¼ï¼Œç™½è‰²æ–‡å­—ï¼Œé»„è‰²ä¸‹åˆ’çº¿ï¼Œå­—ä½“å¤§å°å’Œç™»å½•ä¸€æ ·ã€‚ç„¶åå°½é‡å°†å…¶å±…ä¸­ï¼Œç›®æµ‹è®¾ç½®å¤–è¾¹è·ä¸º 30pxã€‚</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.regist-container</span> <span class="token punctuation">&#123;</span>  <span class="token property">margin-left</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.regist</span> <span class="token punctuation">&#123;</span>  <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>  <span class="token property">border-bottom</span><span class="token punctuation">:</span> 3px solid <span class="token function">rgb</span><span class="token punctuation">(</span>224<span class="token punctuation">,</span>207<span class="token punctuation">,</span>117<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="æäº¤æŒ‰é’®æ ·å¼"><a href="#æäº¤æŒ‰é’®æ ·å¼" class="headerlink" title="æäº¤æŒ‰é’®æ ·å¼"></a>æäº¤æŒ‰é’®æ ·å¼</h4><p>æäº¤æŒ‰é’®æ ·å¼ï¼Œæœ‰ä¸€ä¸ªé»„è‰²è¾¹æ¡†ï¼Œæäº¤çš„æ–‡å­—æ˜¯ç™½è‰²çš„ï¼ŒæŒ‰é’®çš„å®½é«˜å’Œåœ†è§’åŠå¾„å‡ä¸º 48px ã€‚æäº¤æŒ‰é’®åº”è¯¥å°½é‡å’Œæ³¨å†Œæ–‡å­—æ‹‰å¼€è·ç¦»ï¼Œä»¥åŠå°½é‡å°†æ³¨å†ŒæŒ‰é’®å°†å…¶å±…ä¸­ã€‚è®¾ç½®æ–‡å­—å¤§å°ä¸º 14px</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.actoin-container</span> <span class="token punctuation">&#123;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 48px<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> 48px<span class="token punctuation">;</span>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 48px<span class="token punctuation">;</span>  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid yellow<span class="token punctuation">;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>  <span class="token property">margin-left</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span>  <span class="token property">margin-top</span><span class="token punctuation">:</span> 135px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ä¸ºäº†è®©æ–‡å­—å½»åº•çš„æ°´å¹³å’Œå‚ç›´å±…ä¸­ï¼Œè®¾ç½®æ°´å¹³å±…ä¸­ï¼Œè¡Œé«˜å’Œé«˜åº¦ä¸€æ ·é«˜å³å¯ã€‚</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.actoin-container</span> <span class="token punctuation">&#123;</span>   <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>  <span class="token property">line-height</span><span class="token punctuation">:</span> 48px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>æˆ‘ç°åœ¨æ‰å‘ç°ï¼Œæ•´ä¸ªç™»å½•æ¡†çš„é«˜åº¦ä¸å¯¹åŠ²ï¼Œå¥½åƒå¹¶æ²¡æœ‰é‚£ä¹ˆé«˜ï¼Œé‡æ–°è°ƒæ•´è¿‡æ¥ã€‚ğŸ˜‚ğŸ˜‚ğŸ˜‚</p><pre class="language-none"><code class="language-none">.login-container &#123;  height: 315px;&#125;.message-container &#123;  margin-top: 30px;&#125;</code></pre><p>è°ƒæ•´å¥½ä¹‹åï¼Œå³è¾¹è¿˜ç¼ºä¸€ä¸ªèƒŒæ™¯é¢œè‰²ï¼Œå†åŠ ä¸€ä¸ªä¸Šå»ã€‚è¿™ä¸ªèƒŒæ™¯å¹¶æ²¡æœ‰æ¸å˜æ•ˆæœï¼Œæ˜¯å•è‰²çš„ï¼Œæˆ‘ç»™å®ƒç›´æ¥å–è¿‡æ¥è®¾ç½®é¢œè‰²å°±è¡Œäº†ã€‚èƒŒæ™¯é¢œè‰²ä»£ç æ˜¯ <code>95,85,198</code> ï¼Œå†åŠ ä¸€ä¸ªå³ä¸Šå’Œå³ä¸‹çš„åœ†è§’ï¼ŒåŠå¾„ä¸º 20pxã€‚</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.right-container</span> <span class="token punctuation">&#123;</span>  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>95<span class="token punctuation">,</span>85<span class="token punctuation">,</span>198<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">border-top-right-radius</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>  <span class="token property">border-bottom-right-radius</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>æœ€ç»ˆæ•ˆæœå¦‚ä¸‹</p><p><img src="/images/webui-login/QQ%E6%88%AA%E5%9B%BE20210410172352.jpg" loading="lazy"></p><h2 id="å…¶å®ƒåŠ¨ç”»æ•ˆæœ"><a href="#å…¶å®ƒåŠ¨ç”»æ•ˆæœ" class="headerlink" title="å…¶å®ƒåŠ¨ç”»æ•ˆæœ"></a>å…¶å®ƒåŠ¨ç”»æ•ˆæœ</h2><p>é€šè¿‡è§‚å¯Ÿæä¾›çš„æ•ˆæœè§†é¢‘ï¼Œå‘ç°æœ‰ä¸€äº›ç‰¹æ•ˆã€‚é¼ æ ‡æ‚¬åœåœ¨è¾“å…¥æ¡†ä¸Šï¼Œè¾“å…¥æ¡†çš„ä¸‹åˆ’çº¿å˜ç™½ã€‚å¿˜è®°å¯†ç é‚£éƒ¨åˆ†ï¼Œå­—ä½“ä¹Ÿä¼šå˜ç™½ã€‚è¿˜æœ‰ç‚¹å‡»æäº¤æŒ‰é’®çš„æ—¶å€™ï¼ŒæŒ‰é’®çš„èƒŒæ™¯é¢œè‰²ä¼šå˜æˆç´«è‰²ï¼Œè€Œä¸”è¿˜æœ‰ä¸€ç‚¹æ¸å˜çš„æ•ˆæœã€‚</p><p>å…ˆè®¾ç½®é¼ æ ‡æ‚¬åœæ—¶ cursor çš„æ ·å¼ï¼Œä»¥åŠè¿‡æ¸¡å±æ€§ transitionã€‚</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.message-container, .regist, .actoin-container</span> <span class="token punctuation">&#123;</span>  <span class="token property">transition</span><span class="token punctuation">:</span> all 200ms<span class="token punctuation">;</span>  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>è®¾ç½®è¾“å…¥æ¡†é¼ æ ‡æ‚¬åœçš„åœ¨è¿™äº›ç»„ä»¶ä¸Šçš„æ ·å¼</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.input-container input:hover</span> <span class="token punctuation">&#123;</span>  <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid white<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>è¾“å…¥æ¡†è¢«ç‚¹å‡»æ—¶ï¼Œä¼šæœ‰ä¸€ä¸ªè¾¹æ¡†çš„æ•ˆæœï¼Œè€Œè§†é¢‘ä¸­å¹¶æ²¡æœ‰è¾¹æ¡†ã€‚æ‰€ä»¥ä½¿ç”¨ focus ä¼ªç±»ï¼Œå°†è¾¹æ¡†ç»™å»é™¤æ‰ï¼Œå»é™¤è¾¹æ¡†ä½¿ç”¨ outlineï¼ˆè½®å»“ï¼‰å±æ€§ã€‚å°†å®½åº¦ç½®ä¸º 0 å³å¯</p><blockquote><p>outlineï¼ˆè½®å»“ï¼‰æ˜¯ç»˜åˆ¶äºå…ƒç´ å‘¨å›´çš„ä¸€æ¡çº¿ï¼Œä½äºè¾¹æ¡†è¾¹ç¼˜çš„å¤–å›´ï¼Œå¯èµ·åˆ°çªå‡ºå…ƒç´ çš„ä½œç”¨ã€‚å®ƒçš„ç”¨æ³•å’Œ border å±æ€§çš„ä½¿ç”¨ä¸€æ ·ã€‚ä¸è¿‡åŒºåˆ«å°±åœ¨äºï¼Œè¿™ç§è½®å»“å¹¶ä¸ä¼šå ç”¨é¡µé¢çš„ç©ºé—´ã€‚</p></blockquote><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.input-container input:focus</span> <span class="token punctuation">&#123;</span>  <span class="token property">outline</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>è®¾ç½®å¿˜è®°å¯†ç æ‚¬åœ</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.message-container:hover</span> <span class="token punctuation">&#123;</span>  <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>è®¾ç½®æ³¨å†Œæ‚¬åœï¼Œæ‚¬åœéƒ¨åˆ†æ˜¯ä¸‹åˆ’çº¿</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.regist:hover</span><span class="token punctuation">&#123;</span>  <span class="token property">border-bottom</span><span class="token punctuation">:</span> 3px solid white<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>è®¾ç½®æŒ‰é’®æ‚¬åœ</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.actoin-container:hover</span> <span class="token punctuation">&#123;</span>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span>125<span class="token punctuation">,</span>255<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>æœ€ç»ˆçš„åŠ¨å›¾æ•ˆæœå¦‚ä¸‹</p><p><img src="/images/webui-login/y3f53-c2lij.gif" loading="lazy"></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>ç»ˆäºå®Œæˆäº†ï¼Œè¾¹å†™ä»£ç è¾¹è®°å½•çš„è¿‡ç¨‹çœŸçš„æ˜¯åˆå¼€å¿ƒåˆç´¯ã€‚å¥½å›°ï¼Œå…ˆèººä¸€ä¼šå„¿ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å°èµ«èµ«çš„é¡¹ç›®æ—¥å¿— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
            <tag> CSS </tag>
            
            <tag> webui </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœŸæœ«é¡¹ç›®ä¹‹åœ¨çº¿è€ƒè¯•ç³»ç»Ÿ</title>
      <link href="/journal/ssm-online-exam/"/>
      <url>/journal/ssm-online-exam/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>è¿™å­¦æœŸçš„æœŸæœ«é¡¹ç›®å°†ä½¿ç”¨æœ¬å­¦æœŸæ‰€å­¦æŠ€æœ¯ï¼Œå³ä½¿ç”¨ Spring + SpringMVC + MyBatis çš„åœ¨çº¿è€ƒè¯•ç³»ç»Ÿã€‚</p><h2 id="æ‰€éœ€æŠ€æœ¯"><a href="#æ‰€éœ€æŠ€æœ¯" class="headerlink" title="æ‰€éœ€æŠ€æœ¯"></a>æ‰€éœ€æŠ€æœ¯</h2><p>æœ¬æ¬¡æœŸæœ«é¡¹ç›®é‡‡ç”¨ä»¥ä¸‹æŠ€æœ¯ï¼Œå…¶ä¸­åˆåˆ†ä¸ºå‰ç«¯éƒ¨åˆ†å’Œåç«¯éƒ¨åˆ†</p><h3 id="åç«¯éƒ¨åˆ†"><a href="#åç«¯éƒ¨åˆ†" class="headerlink" title="åç«¯éƒ¨åˆ†"></a>åç«¯éƒ¨åˆ†</h3><ol><li>Spring + SpringMVC + MyBatis</li><li>Apache POIï¼ˆå¤„ç†wordï¼Œexcelï¼‰</li><li>pageHelperï¼ˆå¤„ç†åˆ†é¡µï¼‰</li><li>JUnitï¼ˆç”¨äºå•å…ƒæµ‹è¯•ï¼‰</li></ol><span id="more"></span><h3 id="å‰ç«¯éƒ¨åˆ†"><a href="#å‰ç«¯éƒ¨åˆ†" class="headerlink" title="å‰ç«¯éƒ¨åˆ†"></a>å‰ç«¯éƒ¨åˆ†</h3><ol><li>MiniLayUI</li><li>JQuery</li></ol><h2 id="é¡¹ç›®åä½œ"><a href="#é¡¹ç›®åä½œ" class="headerlink" title="é¡¹ç›®åä½œ"></a>é¡¹ç›®åä½œ</h2><p>é¡¹ç›®åä½œçš„éƒ¨åˆ†ä½¿ç”¨ gitï¼Œä½¿ç”¨ gitee ä½œä¸ºä»£ç ä»“åº“ã€‚åœ¨ä½¿ç”¨ git ä½œä¸ºå¤šäººåä½œä¼šå¯èƒ½å‡ºç°ä»¥ä¸‹çš„é—®é¢˜ï¼Œä¸€ä¸ªæ˜¯ä¸ä¼šç”¨ï¼Œå¦ä¸€ä¸ªæ˜¯ä¼šç”¨ä¹‹åï¼Œä¸çŸ¥è¯¥å¦‚ä½•å»åˆå¹¶ã€‚</p><p>è¿˜æœ‰ä¸€äº›åˆä½œä¸Šçš„é—®é¢˜ï¼Œç­‰ç­‰å„ç§ç–‘éš¾æ‚é¡¹ã€‚</p><h3 id="å¦‚ä½•æ“ä½œ"><a href="#å¦‚ä½•æ“ä½œ" class="headerlink" title="å¦‚ä½•æ“ä½œ"></a>å¦‚ä½•æ“ä½œ</h3><p>åœ¨æ­¤ä¹‹å‰ï¼Œéœ€è¦æ³¨å†Œä¸€ä¸ª gitee çš„è´¦å·ï¼Œåç»­çš„ä»£ç åä½œæ‰èƒ½ç»§ç»­æ“ä½œã€‚</p><p>gitee è´¦å·åˆ›å»ºå®Œæˆä¹‹åï¼Œéœ€è¦é…ç½® SSHï¼ŒSSH çš„é…ç½®å¯ä»¥å‚è€ƒä¸‹é¢çš„é“¾æ¥ã€‚</p><p><a href="/2021/04/19/How-do-you-configure-ssh-in-your-pc/">å¦‚ä½•ç®¡ç†ä½ çš„å¤šä¸ª SSH key</a></p><h4 id="å¦‚æœä½ æ˜¯æ–°åŠ å…¥çš„ç»„å‘˜"><a href="#å¦‚æœä½ æ˜¯æ–°åŠ å…¥çš„ç»„å‘˜" class="headerlink" title="å¦‚æœä½ æ˜¯æ–°åŠ å…¥çš„ç»„å‘˜"></a>å¦‚æœä½ æ˜¯æ–°åŠ å…¥çš„ç»„å‘˜</h4><p>1ã€é¦–å…ˆè·å–é¡¹ç›®ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone https://gitee.com/bestguo2020/ssm_online_exam.git</code></pre><p>2ã€è·å–é¡¹ç›®å®Œæˆåˆ‡æ¢åˆ° dev01 åˆ†æ”¯è¿›è¡Œæ“ä½œäº†</p><blockquote><p>åˆ†æ”¯çš„å¯ä»¥ç†è§£æˆå·¥ä½œåŒºï¼Œä½†æ˜¯ä¸“ä¸šçš„å«æ³•è¿˜æ˜¯å«â€œåˆ†æ”¯â€</p></blockquote><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> checkout dev01</code></pre><p>æ¥ä¸‹æ¥å°±æ˜¯é…ç½®å¼€å‘è€…çš„é‚®ç®±å’Œç”¨æˆ·åï¼Œé…ç½®ç”¨æˆ·åå’Œé‚®ç®±å¯ä»¥å‚è€ƒä»¥ä¸‹é“¾æ¥</p><p><a href="https://www.bestguo.top/2021/04/19/How-do-you-configure-ssh-in-your-pc/#%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE">å¦‚ä½•ç®¡ç†ä½ çš„å¤šä¸ª SSH key - é¡¹ç›®é…ç½®</a></p><p>ä»¥ä¸‹é…ç½®å®Œæˆä¹‹åå°±å¯ä»¥ç»§ç»­æ„‰å¿«çš„å†™ä»£ç äº†ã€‚</p><p>3ã€å‡å¦‚ä½ æŸé¡¹åŠŸèƒ½å®Œæˆä¹‹åï¼Œéœ€è¦æ·»åŠ ä½ è¦æäº¤çš„ä»£ç ï¼ˆâ€œ.â€ ä»£è¡¨å…¨éƒ¨çš„ä»£ç ï¼‰</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span></code></pre><p>4ã€åœ¨æäº¤ä»£ç æ—¶éœ€è¦äº¤ä»£æ¸…æ¥šä½ éœ€è¦åšäº†å“ªäº›å·¥ä½œï¼Œä¹Ÿå°±æ˜¯ xxxxx é‡Œçš„å†…å®¹éœ€è¦å¡«å†™çš„éƒ¨åˆ†ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> commit -m <span class="token string">"xxxxxx"</span></code></pre><p>5ã€æ¨é€åˆ°è¿œç¨‹ä»“åº“ä¹‹å‰ï¼Œå°† gitee ä¸Šçš„è¿œç¨‹ä»£ç æ‹‰å–ä¸‹æ¥</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> pull origin dev01</code></pre><p>6ã€å¼€å§‹æ¨é€ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦å°†ä½ çš„å·¥ä½œåŒºæ¨åˆ° gitee</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> push origin dev01</code></pre><h4 id="å¦‚æœä½ æ˜¯å·²ç»åŠ å…¥çš„ç»„å‘˜"><a href="#å¦‚æœä½ æ˜¯å·²ç»åŠ å…¥çš„ç»„å‘˜" class="headerlink" title="å¦‚æœä½ æ˜¯å·²ç»åŠ å…¥çš„ç»„å‘˜"></a>å¦‚æœä½ æ˜¯å·²ç»åŠ å…¥çš„ç»„å‘˜</h4><p>1ã€é¦–å…ˆè·å–æœ€æ–°çš„é¡¹ç›®ï¼š</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> pull origin dev01</code></pre><p>æ‹‰å–å®Œæˆä¹‹åå°±å¯ä»¥ç»§ç»­æ„‰å¿«çš„å†™ä»£ç äº†ã€‚</p><p>2ã€å‡å¦‚ä½ æŸé¡¹åŠŸèƒ½å®Œæˆä¹‹åï¼Œéœ€è¦æ·»åŠ ä½ è¦æäº¤çš„ä»£ç ï¼ˆâ€œ.â€ ä»£è¡¨å…¨éƒ¨çš„ä»£ç ï¼‰</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span></code></pre><p>3ã€åœ¨æäº¤ä»£ç æ—¶éœ€è¦äº¤ä»£æ¸…æ¥šä½ éœ€è¦åšäº†å“ªäº›å·¥ä½œï¼Œä¹Ÿå°±æ˜¯ xxxxx é‡Œçš„å†…å®¹éœ€è¦å¡«å†™çš„éƒ¨åˆ†ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> commit -m <span class="token string">"xxxxxx"</span></code></pre><p>4ã€æ¨é€åˆ°è¿œç¨‹ä»“åº“ä¹‹å‰ï¼Œå°† gitee ä¸Šçš„è¿œç¨‹ä»£ç æ‹‰å–ä¸‹æ¥</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> pull origin dev01</code></pre><p>5ã€å¼€å§‹æ¨é€ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦å°†ä½ çš„å·¥ä½œåŒºæ¨åˆ° gitee</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> push origin dev01</code></pre><h3 id="å¯èƒ½å‡ºç°çš„é—®é¢˜"><a href="#å¯èƒ½å‡ºç°çš„é—®é¢˜" class="headerlink" title="å¯èƒ½å‡ºç°çš„é—®é¢˜"></a>å¯èƒ½å‡ºç°çš„é—®é¢˜</h3><p>åœ¨è¿›è¡Œåä½œçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‡ºç°ä»£ç å†²çªç­‰ç­‰é—®é¢˜ï¼Œåç»­å‡ºç°äº†é—®é¢˜åœ¨æ–°åˆ›å»ºçš„æ—¥å¿—ä¸­è®°å½•</p><h4 id="2021-04-29"><a href="#2021-04-29" class="headerlink" title="2021-04-29"></a>2021-04-29</h4><p>æäº¤é¡¹ç›®æ—¶å‡ºç°æƒé™ä¸å¤Ÿçš„é—®é¢˜ï¼Œå…¶å®å°±æ˜¯æ²¡å°†æˆå‘˜æ·»åŠ è¿›æ¥ã€‚<a href="/2021/04/29/git-push-access-denied/">å‚è€ƒé“¾æ¥</a></p><h4 id="2021-05-09"><a href="#2021-05-09" class="headerlink" title="2021-05-09"></a>2021-05-09</h4><p>æ¨¡æ‹Ÿæäº¤ä»£ç çš„æ—¶å€™ç”±äºä¿®æ”¹åŒä¸€ä¸ªä½ç½®å¯¼è‡´çš„ä»£ç å†²çªï¼Œè¿™ç§å†²çªæ²¡åŠæ³•åªå¥½é€šè¿‡åå•†çš„æ–¹å¼è§£å†³ã€‚</p><p>æ‹‰å–ä»£ç æ—¶å‡ºç°ä»£ç å†²çªä¿¡æ¯</p><pre class="language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> pull origin dev01remote: Enumerating objects: <span class="token number">6</span>, done.remote: Counting objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">6</span>/6<span class="token punctuation">)</span>, done.remote: Compressing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">2</span>/2<span class="token punctuation">)</span>, done.remote: Total <span class="token number">4</span> <span class="token punctuation">(</span>delta <span class="token number">1</span><span class="token punctuation">)</span>, reused <span class="token number">0</span> <span class="token punctuation">(</span>delta <span class="token number">0</span><span class="token punctuation">)</span>, pack-reused <span class="token number">0</span>Unpacking objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">4</span>/4<span class="token punctuation">)</span>, done.From gitee.com:bestguo2020/ssm_online_exam * branch            dev01      -<span class="token operator">></span> FETCH_HEAD   271754d<span class="token punctuation">..</span>e441092  dev01      -<span class="token operator">></span> origin/dev01Auto-merging asd.txtCONFLICT <span class="token punctuation">(</span>content<span class="token punctuation">)</span>: Merge conflict <span class="token keyword">in</span> asd.txtAutomatic merge failed<span class="token punctuation">;</span> fix conflicts and <span class="token keyword">then</span> commit the result.</code></pre><p>å‘ç”Ÿå†²çªä¹‹åï¼Œasd.txt ä¸­çš„æ–‡ä»¶å†…å®¹å¦‚ä¸‹</p><p><img src="/journal/ssm-online-exam/QQ%E6%88%AA%E5%9B%BE20210509173006.jpg" alt="QQæˆªå›¾20210509173006" loading="lazy"></p><p>è§£å†³çš„åŠæ³•æœ‰ä¸‰ç§ï¼Œä¸€ç§æ˜¯ä¿ç•™ä¸Šé¢çš„ï¼Œå¦ä¸€ç§æ—¶ä¿ç•™ä¸‹é¢çš„ï¼Œæœ€åä¸€ç§æ˜¯ä¸¤è€…éƒ½ä¿ç•™ã€‚</p><p>é€šè¿‡åå•†å®Œæˆä¹‹åï¼Œé‡æ–°æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span><span class="token function">git</span> commit -m <span class="token string">"xxxxxx"</span></code></pre><p>ï¼ˆxxxxx é‡Œçš„å†…å®¹éœ€è¦å¡«å†™çš„éƒ¨åˆ†ï¼‰</p><h4 id="2021-05-13"><a href="#2021-05-13" class="headerlink" title="2021-05-13"></a>2021-05-13</h4><h5 id="é—®é¢˜-1"><a href="#é—®é¢˜-1" class="headerlink" title="é—®é¢˜ 1"></a>é—®é¢˜ 1</h5><p>å­¦ç”Ÿç«¯ç™»å½•ä¹‹åè·³å‡ºé¡µé¢å·²è¿‡æœŸçš„é—®é¢˜ï¼Œå…¶ä¸»è¦åŸå› ï¼šå­¦ç”Ÿç«¯ç³»ç»Ÿä¸­å³ä¾§çš„ iframe åµŒå…¥çš„é¡µé¢æ˜¯æ•™å¸ˆç«¯ã€‚å¯¼è‡´æ•™å¸ˆç«¯çš„ session ä¸ºç©ºã€‚ä»è€Œé‡å®šå‘åˆ°ç™»å½•ç•Œé¢ã€‚</p><p>è§£å†³åŠæ³•ï¼šæ–°å»ºä¸€ä¸ªå­¦ç”Ÿç«¯çš„å·¦ä¾§å¯¼èˆªèœå•çš„é…ç½®æ–‡ä»¶ï¼Œé‡æ–°é…ç½®è¯¥èœå•å³å¯ã€‚</p><p>å‘ƒ(âŠ™oâŠ™)â€¦â€¦</p><p>åé¢å®åœ¨æ˜¯æ²¡ç©ºè®°å½•äº†ğŸ˜‚ğŸ˜‚ğŸ˜‚</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><h3 id="ç³»ç»Ÿæè¿°"><a href="#ç³»ç»Ÿæè¿°" class="headerlink" title="ç³»ç»Ÿæè¿°"></a>ç³»ç»Ÿæè¿°</h3><p>åœ¨çº¿è€ƒè¯•ç³»ç»Ÿä¸­ï¼Œå­¦ç”Ÿå’Œæ•™å¸ˆéœ€è¦è¿›è¡Œç™»å½•æ–¹å¯è¿›å…¥è€ƒè¯•ç³»ç»Ÿã€‚æ•™å¸ˆå¯ä»¥å°†è‡ªå·±çš„é¢˜ç›®ä¸Šä¼ åˆ°ç³»ç»Ÿï¼Œå½¢æˆè‡ªå·±çš„é¢˜åº“ï¼Œå¯ä»¥å‘å¸ƒè€ƒé¢˜è¿›è¡Œçº¿ä¸Šè€ƒæ ¸ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç”Ÿæˆè¯•å·è¿›è¡Œçº¿ä¸‹è€ƒæ ¸ï¼Œä½†æ˜¯çº¿ä¸‹è€ƒæ ¸çš„åˆ†æ•°éœ€è¦äººå·¥æ¥è¿›è¡Œåˆ¤å®šã€‚è€ƒè¯•ç»“æŸä¹‹åï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è®¡ç®—æ¯ä¸ªå­¦ç”Ÿçš„è€ƒè¯•æˆç»©ï¼Œæˆç»©è®¡ç®—å®Œæˆä¹‹åï¼Œæ•™å¸ˆå¯ä»¥æŸ¥è¯¢å­¦ç”Ÿçš„è€ƒè¯•æƒ…å†µï¼Œä¹Ÿå¯ä»¥å°†çº¿ä¸Šè€ƒè¯•æˆç»©è¿›è¡Œå¯¼å‡ºã€‚</p><p>å­¦ç”Ÿåœ¨ç™»å½•è¿›å…¥è€ƒè¯•ç³»ç»Ÿå‚åŠ è€ƒè¯•ï¼Œåœ¨å‚åŠ è€ƒè¯•ä¹‹å‰éœ€è¦åŠ å…¥ç­çº§å¹¶é€‰æ‹©ä¸€ä¸ªç­çº§ï¼Œå¹¶ä¸”å¯ä»¥æŸ¥çœ‹ï¼Œå¾…è€å¸ˆå‘å¸ƒè€ƒé¢˜ï¼Œåœ¨è§„å®šçš„æ—¶é—´å¼€å§‹æ‰èƒ½å¼€å§‹è€ƒè¯•ï¼Œè€ƒè¯•ç»“æŸä¹‹åï¼Œå­¦ç”Ÿå¯ä»¥æŸ¥çœ‹è€ƒè¯•æˆç»©ï¼Œä¹Ÿå¯ä»¥ä¸çœ‹ï¼Œç­‰è€å¸ˆå°†æˆç»©å…¬å¸ƒå‡ºæ¥ä¹Ÿè¡Œã€‚å¦‚æœå­¦ç”ŸåŠ é”™äº†ç­çº§æˆ–è€…æƒ³é€€å‡ºç­çº§ï¼Œå¯ä»¥ç›´æ¥é€€å‡ºè¯¥ç­çº§ã€‚</p><p>ç®¡ç†å‘˜é™¤äº†æ‹¥æœ‰æ•™å¸ˆçš„å…¨éƒ¨åŠŸèƒ½ï¼Œè¿˜å¯ä»¥ç®¡ç†æ•™å¸ˆä¿¡æ¯ã€å­¦ç”Ÿä¿¡æ¯å’Œç­çº§ä¿¡æ¯ã€‚</p><h3 id="è¡¨è®¾è®¡"><a href="#è¡¨è®¾è®¡" class="headerlink" title="è¡¨è®¾è®¡"></a>è¡¨è®¾è®¡</h3><p>è¯¥ç³»ç»Ÿä¸­çš„æ•°æ®åº“è¡¨å’Œè¡¨ä¹‹é—´çš„å…³ç³»ï¼Œä»¥åŠå•ä¸ªè¡¨ä¸­çš„å­—æ®µå’Œå±æ€§</p><p><img src="/journal/ssm-online-exam/Diagram_1.png" alt="æ•°æ®åº“è¡¨ä¹‹é—´çš„å…³ç³»" loading="lazy"></p><p>åç»­å°±æ˜¯å’Œæœªæ¥çš„ç»„å‘˜æ²Ÿé€šäº¤æµçš„æ—¶åˆ»äº†ã€‚</p><h2 id="å¿ƒå¾—"><a href="#å¿ƒå¾—" class="headerlink" title="å¿ƒå¾—"></a>å¿ƒå¾—</h2><h3 id="2021-06-08"><a href="#2021-06-08" class="headerlink" title="2021-06-08"></a>2021-06-08</h3><p>è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å’Œèˆå‹è¿›è¡Œå¤šäººé¡¹ç›®åˆä½œï¼Œæ¯•ç«Ÿä½œä¸ºä¸€ä¸ªéš¾åº¦ç³»æ•°ä¸º 1.0 çš„è€ƒè¯•ç³»ç»Ÿï¼Œåœ¨åŠ ä¸Šæ—¶é—´æ‰åªæœ‰çŸ­çŸ­çš„ä¸€ä¸ªæœˆçš„æ—¶é—´ï¼Œä¸€ä¸ªäººç¡¬åˆšè‚¯å®šæ˜¯å—ä¸äº†çš„ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä½“ä¼šåˆ°å¤šäººåä½œçš„å¥½å¤„ï¼ˆå‰ææ˜¯æ²¡æœ‰å•¥éƒ½ä¸åšçš„ï¼Œä¸è¿‡æˆ‘ä»¬è¿˜å¥½ï¼Œè‡³å°‘æ¯ä¸ªäººéƒ½æœ‰å»åšçš„ï¼‰ã€‚</p><p>å…¶å®é‡åˆ°å¯ä»¥ä¸€èµ·åšé¡¹ç›®çš„åŒå­¦æŒºä¸å®¹æ˜“çš„ï¼Œè€Œä¸”è¿˜è¦å’Œç»„å‘˜è¿›è¡Œä¸€ä¸ªæ²Ÿé€šã€‚è¿˜è¦æ•™èˆå‹å¦‚ä½•ç®€ç®€å•å•çš„ä½¿ç”¨ git ï¼Œç”¨æ¥æ–¹ä¾¿çš„å°†æˆ‘ä»¬å†™çš„ä»£ç è¿›è¡Œä¸€ä¸ªåˆå¹¶ã€‚ä»–ä»¬éƒ½èƒ½å¤Ÿè¾ƒå¥½çš„å»ä½¿ç”¨ï¼Œè¿™ä¸ªé¡¹ç›®æˆ‘è§‰å¾—å¸®äº†å¤§å¿™çš„è¿˜æ˜¯ git ï¼Œå®ƒå¯ä»¥å‘Šè¯‰æˆ‘ä»¬åœ¨é¡¹ç›®åä½œçš„æ—¶å€™ï¼Œæœ‰æç¤ºå†²çªçš„åœ°æ–¹ï¼Œè¿™ç§ä¹Ÿæ˜¯å¾ˆå¥½å»è§£å†³çš„ã€‚è¿˜æœ‰ä»£ç çš„åˆå¹¶ä¸éœ€è¦æˆ‘ä»¬äººå·¥æ¥åˆå¹¶ï¼Œè¿™æ ·ä¹Ÿä¸ä¼šéå¸¸æµªè´¹åœ¨åˆå¹¶ä»£ç ä¸Šäº†ã€‚</p><p>ç¬¬ä¸€æ¬¡å’Œèˆå‹è¿›è¡Œåä½œï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯å¾ˆæˆåŠŸçš„ã€‚</p><p>è¿™å‘¨äº”å°±è¦å¼€å§‹é¡¹ç›®ç­”è¾©å•¦ï¼Œç¥æˆ‘å¥½è¿å§ã€‚ä»Šå¤©è¿˜æœ‰ä¸€ä¸ªå®‰å“çš„æœŸæœ«é¡¹ç›®ç­”è¾©ï¼ŒåŠ æ²¹åŠ æ²¹ï¼</p><p>â€”â€”â€”â€”â€”â€”â€”â€“âœ‚â€”â€”â€”â€”â€”â€”â€”â€”â€”</p><p>å®‰å“æœŸæœ«ç­”è¾©ç»ˆäºç»“æŸäº†ï¼Œç¨³çš„ä¸€åŒ¹ ğŸ’ğŸ‘ŒğŸï¼Œå°±å·®å‘¨äº”çš„ J2EE çš„é¡¹ç›®ç­”è¾©äº†ï¼Œå¯ä»¥çš„ã€‚</p><p>çªç„¶æƒ³èµ·è¿™å‘¨è¿˜æœ‰è‹±è¯­å››çº§ã€‚å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆï¼Œå®Œäº†ï¼Œå•¥ä¹Ÿæ²¡ä»€ä¹ˆå‡†å¤‡å‘€ğŸ˜‚ğŸ˜‚ğŸ˜‚ï¼Œç›´æ¥è£¸è€ƒï¼Œè‹±è¯­å››çº§åˆå¾ˆå·®ã€‚è‹±è¯­å››çº§å°±éšç¼˜å§ ğŸ˜…ã€‚è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡è€ƒï¼Œä¹Ÿæ˜¯æˆ‘æœ€åä¸€æ¬¡è€ƒã€‚</p><h3 id="2021-06-11"><a href="#2021-06-11" class="headerlink" title="2021-06-11"></a>2021-06-11</h3><p>ä»Šå¤©çš„ j2ee ç­”è¾©æœ‰ç‚¹å°ç´§å¼ ï¼Œè¿˜ä»¥ä¸ºè¦ä»å¤´åˆ°å°¾æŠŠæ‰€æœ‰çš„åŠŸèƒ½å…¨éƒ¨å±•ç¤ºä¸€éã€‚ä¸è¿‡è€å¸ˆæ˜¯æŒ‰ç…§åŠŸèƒ½ç‚¹æ¥è¿›è¡Œæ¼”ç¤ºçš„ï¼Œè¿™è®©æˆ‘é¡¿æ—¶ä¸é‚£ä¹ˆæ…Œäº†ï¼ŒåŠ ä¸Šè€å¸ˆåœ¨æ—è¾¹æé†’ç€æˆ‘åˆ«ç´§å¼ ï¼Œæ€»å¾—æ¥è¯´è¿˜æ˜¯æŒºå¥½çš„ã€‚è¿˜æ˜¯æŒºæ„Ÿè°¢çš„ï¼Œå¯¹è¿™ä¸ªé¡¹ç›®æŒ‡å‡ºäº†ä¸€äº›ä¸è¶³ä¹‹å¤„ä»¥åŠä¸€äº›éœ€è¦æ”¹è¿›çš„åœ°æ–¹è¿™æ ·å­ï¼ŒåæœŸä¹Ÿä¼šæŠ½ç©ºæ¥å¯¹è¯¥é¡¹ç›®è¿›è¡Œä¸€äº›æ”¹è¿›çš„ğŸ˜ŠğŸ˜Šã€‚</p><p>æœ€ç»ˆçš„é¡¹ç›®æ•´ä½“æˆç»©è¿˜æ˜¯ä»¤äººæ»¡æ„çš„ã€‚ä¹Ÿéå¸¸æ„Ÿè°¢è€å¸ˆçš„æŒ‡å¯¼ã€‚</p><p>ä¸Šä¸ªæœˆç¡®å®æŒºè¾›è‹¦çš„ï¼Œä¸€ç›´éƒ½åœ¨é›†ä¸­ç«åŠ›å¹² Javaã€‚</p><p><img src="/journal/ssm-online-exam/QQ%E6%88%AA%E5%9B%BE20210611212912.png" alt="è´¡çŒ®åº¦" loading="lazy"></p><p>ä¸è¿‡â€¦â€¦</p><p>æ˜å¤©çš„è‹±è¯­å››çº§è‚¯å®šè¿‡ä¸äº†ï¼Œåªèƒ½ç­‰æ­»å•¦ ğŸ˜‚ğŸ˜‚</p><p>â€”â€”â€”â€”â€”â€”â€”â€“âœ‚â€”â€”â€”â€”â€”â€”â€”â€”â€”</p><p>å¿«å¿«ç‚¹è¿™é‡Œ ğŸ‘‰ <a href="https://gitee.com/bestguo2020/ssm_online_exam">ç‚¹æˆ‘ç‚¹æˆ‘ï¼Œæ¬¢è¿æ¥ç©è€å‘€</a></p><p>å…¶å®å°±æ˜¯æˆ‘çš„æœŸæœ«é¡¹ç›®å“’~</p>]]></content>
      
      
      <categories>
          
          <category> å°èµ«èµ«çš„é¡¹ç›®æ—¥å¿— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> UML </tag>
            
            <tag> ssm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android ä¹‹ ViewPager2 ç»„ä»¶çš„ä½¿ç”¨</title>
      <link href="/journal/view-pager/"/>
      <url>/journal/view-pager/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åœ¨æœ¬å‘¨å®éªŒä¸­ï¼Œ å­¦ä¹ åˆ°äº†ä¸€ä¸ªæ–°ç»„ä»¶ï¼Œå®ƒå°±æ˜¯ ViewPager2ã€‚ä»Šå¤©æ­£å¥½æœ‰è¿™ä¸ªæ—¶é—´æ¥ç ”ç©¶ä¸€ä¸‹è¿™ä¸ªç»„ä»¶çš„ä½¿ç”¨ğŸ˜Šã€‚æœ€è¿‘è¿™å‡ å¤©çŠ¶æ€ä¸å¤§å¥½ï¼Œä¸€å®šèƒ½å¤Ÿæ¢å¤è¿‡æ¥ã€‚</p><p>ä¸è¿‡åœ¨è¿™å‡ å¤©å¾ˆå·§åˆï¼Œåœ¨æŸä¹çé€›æ—¶å‘ç°å“ˆä½›å¤§å­¦çš„ç§¯æå¿ƒç†å­¦è¯¾ç¨‹ï¼Œè¿™é—¨è¯¾ç¨‹åœ¨å“ˆä½›å¤§å­¦æœ€å—æ¬¢è¿ï¼Œæœ€åé£é¡å…¨çƒï¼Œæˆ‘è§‰å¾—è‡ªå·±å¾ˆæœ‰å¿…è¦å»å­¦å­¦ã€‚æˆ‘å‘ç°åœ¨æˆ‘æœ€è¿‘ä¹°äº†ä¸€æœ¬ä¹¦ï¼Œå«<a href="https://book.douban.com/subject/20480823/">ã€Šå¹¸ç¦çš„æ–¹æ³•ã€‹</a>ï¼Œä½œè€…æ˜¯<a href="https://book.douban.com/search/%E6%B3%B0%E5%8B%92%E2%80%A2%E6%9C%AC-%E6%B2%99%E5%93%88%E5%B0%94">æ³°å‹’â€¢æœ¬-æ²™å“ˆå°”</a>ã€‚ç„¶ååœ¨ bilibili ä¸Šä¹Ÿæœ‰ç›¸å…³çš„è¯¾ç¨‹ï¼Œå¯ä»¥æŠŠå®ƒå½“æˆæ˜¯ä¸€ç§å‚è€ƒæ•™æï¼ŒæŠŠå®ƒç”¨æ¥å½“ä½œå¤ä¹ ã€‚å…³äºæˆ‘ä¸ªäººçš„ç”Ÿæ´»ï¼Œå¯ä»¥åˆ°â€œå°èµ«èµ«çš„æ—¥å¸¸â€å½’æ¡£ä¸­æŸ¥çœ‹ã€‚</p><p>æˆ‘ä¼šåŠªåŠ›çš„ğŸ’ªğŸ’ª</p><span id="more"></span><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨äº†è§£çš„è¿‡ç¨‹ä¸­ä»¥åŠä¸Šè¯¾è€å¸ˆæ‰€è®²åˆ°çš„éƒ¨åˆ†ï¼Œä»–çš„ç”¨æ³•å’Œ RecyclerView å¾ˆç›¸ä¼¼ï¼ŒåŒæ—¶ä¹Ÿæœ‰å…±æ€§ä¹‹å¤„ã€‚æ¯”å¦‚å®ƒä»¬ä¿©ä½¿ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ª Adapter ï¼Œæ‰€ä»¥è¯´ï¼Œåªè¦ä½ ä¼š RecyclerView å°±ä¼š ViewPager2 çš„å¤§éƒ¨åˆ†ä½¿ç”¨åœºæ™¯ã€‚</p><p>ä¸åŒä¹‹å¤„å°±åœ¨äºï¼ŒViewPager å›ºå®šäº†ä¸€ä¸ªçº¿æ€§çš„å¸ƒå±€ç®¡ç†å™¨ï¼Œè€Œ RecyclerView å¯æ˜¯èƒ½æŒ‡å®šå¸ƒå±€ç®¡ç†å™¨çš„å‘¢ã€‚</p><p>ä¸ºä»€ä¹ˆè¦è¯´æ˜¯å¤§éƒ¨åˆ†çš„ä½¿ç”¨åœºæ™¯å‘¢ï¼Œå´ä¸æ˜¯å…¨éƒ¨ï¼Ÿåœ¨å‚è€ƒå…¶å®ƒçš„åšå®¢æ—¶ï¼Œå‘ç° ViewPager2 å¯ä»¥å’Œ Fragment è¿›è¡ŒåŒé‡è”åŠ¨ã€‚å…³äºè¿™ä¸¤ä¸ªè”åŠ¨çš„é—®é¢˜ï¼Œå°±æ”¾åˆ°ä¸‹ä¸€ç¯‡æ—¥å¿—ä¸­è¿›è¡Œã€‚</p><p>ViewPager2 çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•éå¸¸ä¹‹ç®€å•ï¼Œéšæˆ‘æ¥ã€‚ğŸ˜ŠğŸ˜Š</p><h2 id="å¼€å§‹å®éªŒ"><a href="#å¼€å§‹å®éªŒ" class="headerlink" title="å¼€å§‹å®éªŒ"></a>å¼€å§‹å®éªŒ</h2><p>è¿™é‡Œæˆ‘æ–°å»ºäº†ä¸€ä¸ªé¡¹ç›®ï¼Œé¡¹ç›®åˆ›å»ºå®Œæˆä¹‹åï¼Œç›´æ¥åœ¨ activity_main.xml ä¸­å°† ViewPager2 ç»„ä»¶ç»™æ‹–è¿›æ¥ï¼Œå¹¶è®¾ç½®å¥½ idã€‚ç›¸å…³ä»£ç å¦‚ä¸‹ã€‚</p><blockquote><p>ç”±äºåªæœ‰ä¸€ä¸ªç»„ä»¶çš„å…³ç³»ï¼Œä½¿ç”¨çº¦æŸå¸ƒå±€ä¹Ÿå¯ï¼Œè¿™ä¸ªä¾‹å­ä¸­æˆ‘ä½¿ç”¨çº¿æ€§å¸ƒå±€ã€‚</p></blockquote><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.MainActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.viewpager2.widget.ViewPager2</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/view_pager2<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><p>éšåæˆ‘ä»¬éšä¾¿å»ºç«‹ä¸€ä¸ª item å¸ƒå±€æ–‡ä»¶ï¼Œä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå¸ƒå±€æ–‡ä»¶çš„ item.xml çš„ç›¸å…³ä»£ç å¦‚ä¸‹ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/textView<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>TextView<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><p>éšååˆ›å»º Adapterï¼Œæ²¡é”™å°±æ˜¯ç”¨ RecyclerView ä¸­çš„ Adapterã€‚Adapter å…·ä½“çš„ç”¨æ³•å¯æŸ¥çœ‹â€œ<a href="/2021/02/19/recycleview-component/">Android å…¥é—¨ç¯‡ä¹‹ RecycleView ç»„ä»¶çš„ä½¿ç”¨</a>â€è¿™ç¯‡æ—¥å¿—ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>viewpager2study<span class="token punctuation">.</span>adapter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">LayoutInflater</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">View</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">ViewGroup</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">TextView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">androidx<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">NonNull</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">androidx<span class="token punctuation">.</span>recyclerview<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">RecyclerView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>viewpager2study<span class="token punctuation">.</span></span><span class="token class-name">Item</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>viewpager2study<span class="token punctuation">.</span></span><span class="token class-name">R</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ViewPager2Adapter</span> <span class="token keyword">extends</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>Adapter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ViewPager2Adapter<span class="token punctuation">.</span>ItemViewHolder</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token comment">// æ•°æ®</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> data<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">ViewPager2Adapter</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@NonNull</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">ItemViewHolder</span> <span class="token function">onCreateViewHolder</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">ViewGroup</span> parent<span class="token punctuation">,</span> <span class="token keyword">int</span> viewType<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// åŠ è½½ item.xml å¸ƒå±€æ–‡ä»¶</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ItemViewHolder</span><span class="token punctuation">(</span><span class="token class-name">LayoutInflater</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>item<span class="token punctuation">,</span> parent<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onBindViewHolder</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">ItemViewHolder</span> holder<span class="token punctuation">,</span> <span class="token keyword">int</span> position<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// è®¾ç½®ç›¸å…³çš„å±æ€§</span>        holder<span class="token punctuation">.</span>textView<span class="token punctuation">.</span><span class="token function">setBackgroundColor</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        holder<span class="token punctuation">.</span>textView<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        holder<span class="token punctuation">.</span>textView<span class="token punctuation">.</span><span class="token function">setTextColor</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTextColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getItemCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> data<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ItemViewHolder</span> <span class="token keyword">extends</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>ViewHolder</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">TextView</span> textView<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">ItemViewHolder</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">View</span> itemView<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">super</span><span class="token punctuation">(</span>itemView<span class="token punctuation">)</span><span class="token punctuation">;</span>            textView <span class="token operator">=</span> itemView<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>textView<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æœ€åå°±æ˜¯åœ¨ MainActivity.java ä¸­åˆå§‹åŒ–å¥½æ•°æ®ï¼Œè·å–ç»„ä»¶ï¼Œè®¾ç½® Adapter å’Œæ’åˆ—æ–¹å¼å³å¯ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>viewpager2study</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">androidx<span class="token punctuation">.</span>appcompat<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">AppCompatActivity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">androidx<span class="token punctuation">.</span>viewpager2<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">ViewPager2</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span></span><span class="token class-name">Color</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>viewpager2study<span class="token punctuation">.</span>adapter<span class="token punctuation">.</span></span><span class="token class-name">ViewPager2Adapter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">ViewPager2</span> viewPager2<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆå§‹åŒ–å€¼</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>RED<span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>WHITE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token function">parseColor</span><span class="token punctuation">(</span><span class="token string">"#FFA500"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"2"</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>WHITE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>YELLOW<span class="token punctuation">,</span> <span class="token string">"3"</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>BLACK<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>GREEN<span class="token punctuation">,</span> <span class="token string">"4"</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>WHITE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>BLUE<span class="token punctuation">,</span> <span class="token string">"5"</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>WHITE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token function">parseColor</span><span class="token punctuation">(</span><span class="token string">"#4B0082"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"6"</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>WHITE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token function">parseColor</span><span class="token punctuation">(</span><span class="token string">"#800080"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"7"</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>WHITE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        viewPager2 <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>view_pager2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è®¾ç½®æ’åˆ—æ–¹å¼</span>        viewPager2<span class="token punctuation">.</span><span class="token function">setOrientation</span><span class="token punctuation">(</span><span class="token class-name">ViewPager2</span><span class="token punctuation">.</span>ORIENTATION_HORIZONTAL<span class="token punctuation">)</span><span class="token punctuation">;</span>        viewPager2<span class="token punctuation">.</span><span class="token function">setAdapter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ViewPager2Adapter</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>å…¶ä¸­ï¼ŒsetOrientation æ–¹æ³•æ˜¯è®¾ç½®æ°´å¹³æ»‘åŠ¨è¿˜æ˜¯å‚ç›´æ»‘åŠ¨ã€‚å®ƒæœ‰ä¸¤ä¸ªå€¼ï¼Œåˆ†åˆ«ä¸º <code>ORIENTATION_HORIZONTAL</code> å’Œ <code>ORIENTATION_VERTICAL</code>ã€‚setAdapter æ–¹æ³•å°±å’Œ RecyclerView ä¸­çš„ setAdapter æ–¹æ³•ç®€ç›´å°±æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼ï¼</p><p>æ°´å¹³æ»‘åŠ¨æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/images/Android/view-pager/kjlwr-vph6j.gif" loading="lazy"></p><p>å°† <code>ORIENTATION_HORIZONTAL</code> è®¾ç½®æˆ <code>ORIENTATION_VERTICAL</code>ï¼Œå³è®¾ç½®æˆå‚ç›´çš„æ–¹å‘ã€‚å®ƒçš„æ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/view-pager/5sm3w-auv9b.gif" loading="lazy"></p><h2 id="å’Œ-RecyclerView-çš„åŒºåˆ«"><a href="#å’Œ-RecyclerView-çš„åŒºåˆ«" class="headerlink" title="å’Œ RecyclerView çš„åŒºåˆ«"></a>å’Œ RecyclerView çš„åŒºåˆ«</h2><p>åŸºæœ¬çš„ç”¨æ³•å¤§éƒ¨åˆ†å’Œ RecyclerView æ˜¯ä¸€æ ·çš„ï¼Œé™¤äº†åœ¨å¼€å§‹çš„æ—¶å€™æåˆ°ä»–ä»¬çš„åŒºåˆ«ï¼Œåœ¨è¿™é‡Œï¼Œè¿˜æœ‰ä¸€ä¸ªåŒºåˆ«å°±æ˜¯è¿è¡Œç»“æœã€‚è¿è¡Œå‡ºæ¥ä¹‹åæ‰€å±•ç¤ºçš„æ•ˆæœç¡®å®å®Œå…¨ä¸ä¸€æ ·çš„ï¼Œä¸‹é¢çš„åŠ¨ç”»å°±æ¯”è¾ƒå¥½è§£é‡Šäº†ã€‚</p><p>ä¸‹é¢çš„åŠ¨ç”»ï¼Œä¸ŠåŠéƒ¨åˆ†æ˜¯ ViewPager2ï¼Œä¸‹åŠéƒ¨åˆ†æ˜¯ RecyclerViewã€‚</p><p><img src="/images/Android/view-pager/9ydly-8fmiy.gif" loading="lazy"></p><p>é€šè¿‡ä»¥ä¸Šçš„åŠ¨ç”»å¯ä»¥å¾ˆæ˜æ˜¾çœ‹å‡ºæ•ˆæœæ¥ï¼Œå½“æˆ‘è§¦æ‘¸ä¸ŠåŠéƒ¨åˆ†æ—¶ï¼Œæ¾å¼€é¼ æ ‡ï¼Œå‘ç°ä»–ä¼šè‡ªåŠ¨æ»‘åˆ°ä¸‹å»äº†ï¼Œè€Œ RecyclerView è¿™æ ·æ¾å¼€é¼ æ ‡ï¼Œå´æ²¡æœ‰ä»»ä½•ååº”ã€‚</p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>åœ¨å­¦ä¹  ViewPager å‚è€ƒäº†ä»¥ä¸‹èµ„æ–™ï¼š</p><ul><li><a href="https://blog.csdn.net/willway_wang/article/details/88725392">å®˜æ–¹ Viewpager å‡çº§ç‰ˆ - ViewPager2 å®æˆ˜</a></li></ul><p>æœ¬æ¬¡çš„å®éªŒä»£ç åœ¨ <a href="https://github.com/BestGuo2020/AndroidStudy">AndroidStudy</a> çš„ github ä»“åº“ä¸­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android å…¥é—¨ç¯‡ä¹‹ ConstraintLayout çš„ä½¿ç”¨</title>
      <link href="/journal/ConstraintLayout-component/"/>
      <url>/journal/ConstraintLayout-component/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ConstraintLayoutï¼Œå³çº¦æŸå¸ƒå±€ã€‚</p><p>ConstraintLayout æœ€æ—©å‘å¸ƒçš„é‚£ä¸€å¹´æ˜¯åœ¨ 2016 å¹´ï¼Œç°åœ¨è·ä»Šä¹Ÿæœ‰ 5 å¹´äº†å§ã€‚æˆ‘ä»¬è€å¸ˆä¸€å¼€å§‹æ•™çš„å¸ƒå±€å°±æ˜¯ ConstraintLayout å¸ƒå±€ï¼Œè¿™ä¸ªå¸ƒå±€æ˜¯å¯ä»¥ç”¨é¼ æ ‡è¿›è¡Œæ‹–æ‹½æ§ä»¶æ¥å¯¹ç•Œé¢è¿›è¡Œå¸ƒå±€ã€‚ä½†æ˜¯ï¼Œå®ƒå¯ä¸æ˜¯åƒ UI åŸå‹è®¾è®¡é‚£æ ·éšä¾¿å°±å¯ä»¥æ‹–æ‹½çš„ï¼Œæ˜¯éœ€è¦å­¦ä¹ çš„ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘åˆšåˆšå­¦ä¹ æ–°å¸ƒå±€çš„ä¸€ä¸ªå·¨å‘ã€‚</p><p>åœ¨æ²¡æœ‰ ConstraintLayout å¸ƒå±€å‡ºç°ä¹‹å‰ï¼Œç”¨çš„å¾ˆå¤šçš„å°±æ˜¯ RelativeLayout äº†ï¼Œä¹Ÿå°±æ˜¯ç›¸å¯¹å¸ƒå±€ã€‚æˆ‘ä¹‹å‰å†™çš„é‚£äº›æ—¥å¿—éƒ½æ˜¯åŸºäºæ­¤æ¥è¿›è¡Œå¸ƒå±€ï¼Œæ˜¯éœ€è¦è¿›è¡Œå¤§é‡çš„æ‰“ä»£ç æ¥å¯¹ç»„ä»¶çš„ä½ç½®è¿›è¡Œä¸€ä¸ªå®šä½ï¼Œä½†æ˜¯ä¸éš¾ã€‚è€Œ ConstraintLayout è™½ç„¶å¯ä»¥æ‹–æ‹½ï¼Œä½†å®ƒå¯æ˜¯è¿™é‡Œé¢æœ€å¤æ‚çš„å¸ƒå±€äº†ã€‚</p><p>åˆšå¼€å§‹å­¦çœŸçš„éš¾ï¼Œä½†æ˜¯èƒ½å¤ŸçœŸæ­£çš„æŒæ¡æ­£ç¡®çš„æ‹–æ‹½æ–¹å¼å°±çœŸçš„å¾ˆé¦™ã€‚<del>ï¼ˆæˆ‘å°èµ«èµ«å°±æ˜¯ç”¨é¥¿æ­»ï¼Œæ­»å¤–é¢ä»è¿™è·³ä¸‹å»ä¹Ÿä¸ä¼šå­¦çº¦æŸå¸ƒå±€ï¼Œå•ŠçœŸé¦™å“å‘€ï¼ï¼‰</del></p><span id="more"></span><h2 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¦æŸå¸ƒå±€"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¦æŸå¸ƒå±€" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¦æŸå¸ƒå±€"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¦æŸå¸ƒå±€</h2><p>çº¦æŸå¸ƒå±€å…¶å®è§£å†³çš„æ˜¯åµŒå¥—è¿‡å¤šçš„é—®é¢˜ï¼ŒåµŒå¥—è¿‡å¤šï¼ŒåŠ è½½æ—¶é—´å°±ä¼šè¶Šä¹…ã€‚Android å¸ƒå±€çš„åµŒå¥—ä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆä¹…ï¼Œå¯ä»¥æŠŠå®ƒæƒ³è±¡æˆ for å¾ªç¯åµŒå¥—ã€‚æ¯•ç«Ÿæ—¶é—´å¤æ‚åº¦æ˜¯ O(n^m) å˜›ï¼Œæœ‰åµŒå¥— m å±‚ï¼Œæ—¶é—´å¤æ‚åº¦å°±æ˜¯å¤šå°‘å’¯ã€‚</p><h3 id="ä¼˜ç‚¹å’Œç¼ºç‚¹"><a href="#ä¼˜ç‚¹å’Œç¼ºç‚¹" class="headerlink" title="ä¼˜ç‚¹å’Œç¼ºç‚¹"></a>ä¼˜ç‚¹å’Œç¼ºç‚¹</h3><p>æ‰€æœ‰äº‹ç‰©å‡æœ‰ä¼˜ç¼ºç‚¹ï¼ŒConstraintLayout å¸ƒå±€ä¹Ÿä¸ä¾‹å¤–ï¼Œä»¥ä¸‹æ˜¯æˆ‘äº†è§£åˆ°çš„ä¼˜ç‚¹ã€‚</p><h4 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><ol><li>å‡å°‘äº†å¾ˆå¤šå¸ƒå±€åµŒå¥—ã€‚</li><li>æå‡äº† app ç•Œé¢çš„åŠ è½½é€Ÿåº¦ã€‚</li><li>è‡ªé€‚åº”å„ç§å±å¹•ï¼Œå°‘èŠ±è´¹æ—¶é—´åœ¨ç•Œé¢é€‚é…ä¸Šã€‚</li></ol><p>ä»¥ä¸Šå°±æ˜¯æˆ‘äº†è§£åˆ°çš„ä¼˜ç‚¹ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç¼ºç‚¹äº†ã€‚</p><h4 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><ol><li>çœ‹ä¼¼ç®€å•çš„æ‹–æ‹½ï¼Œå…¶å®ä¸Šæ‰‹éš¾åº¦è¾ƒå¤§ã€‚</li><li>ä»£ç çš„å¯è¯»æ€§å·®ã€‚</li></ol><h2 id="å¼€å§‹å‰æ"><a href="#å¼€å§‹å‰æ" class="headerlink" title="å¼€å§‹å‰æ"></a>å¼€å§‹å‰æ</h2><p>å¼€å­¦çš„ç¬¬ä¸€å‘¨å°±æŠŠ AndroidStudio ç»™å‡çº§åˆ°äº†æœ€æ–°çš„ 4.1.2 ç‰ˆæœ¬ï¼Œä¸å†ä½¿ç”¨æ—§çš„ç‰ˆæœ¬ã€‚ç‚¹å‡»ä¸‹è½½<a href="https://developer.android.google.cn/studio/">æ–°ç‰ˆæœ¬</a>ï¼Œä¸è¿‡ä½¿ç”¨ 4.1.2 ä¹‹åçš„ç‰ˆæœ¬ä¹Ÿè¡Œã€‚æ¯•ç«Ÿæ–°æŠ€æœ¯æ›´æ–°çš„å®åœ¨æ˜¯å¤ªå¿«å•¦ğŸ˜‚ğŸ˜‚ğŸ˜‚ã€‚</p><h2 id="å¼€å§‹ä½¿ç”¨"><a href="#å¼€å§‹ä½¿ç”¨" class="headerlink" title="å¼€å§‹ä½¿ç”¨"></a>å¼€å§‹ä½¿ç”¨</h2><h3 id="çº¦æŸå¸ƒå±€ä¸­çš„çº¿æ€§å¸ƒå±€å’Œç›¸å¯¹å¸ƒå±€"><a href="#çº¦æŸå¸ƒå±€ä¸­çš„çº¿æ€§å¸ƒå±€å’Œç›¸å¯¹å¸ƒå±€" class="headerlink" title="çº¦æŸå¸ƒå±€ä¸­çš„çº¿æ€§å¸ƒå±€å’Œç›¸å¯¹å¸ƒå±€"></a>çº¦æŸå¸ƒå±€ä¸­çš„çº¿æ€§å¸ƒå±€å’Œç›¸å¯¹å¸ƒå±€</h3><p>å…¶å®ï¼ŒConstraintLayout æ˜¯å¯ä»¥å½“æˆæ˜¯çº¿æ€§å¸ƒå±€æˆ–è€…ç›¸å¯¹å¸ƒå±€ä¸­ï¼Œå®ƒå¯ä»¥æ›¿ä»£ç›¸å¯¹å¸ƒå±€ï¼Œä½†æ˜¯çº¿æ€§å¸ƒå±€çš„æ›¿ä»£æ€§å°±æ²¡æœ‰é‚£ä¹ˆå¥½äº†ï¼Œä¸‹é¢çš„ä¾‹å­å°±æ˜¯ç”¨æ¥å±•ç¤ºå¸ƒå±€çš„ã€‚</p><h4 id="ç›¸å¯¹å¸ƒå±€"><a href="#ç›¸å¯¹å¸ƒå±€" class="headerlink" title="ç›¸å¯¹å¸ƒå±€"></a>ç›¸å¯¹å¸ƒå±€</h4><h5 id="ä¸€ä¸ªæŒ‰é’®"><a href="#ä¸€ä¸ªæŒ‰é’®" class="headerlink" title="ä¸€ä¸ªæŒ‰é’®"></a>ä¸€ä¸ªæŒ‰é’®</h5><p>é¦–å…ˆæ‹–å…¥ä¸€ä¸ªæŒ‰é’®ï¼Œç”±äºæ­¤æ—¶æ˜¯æ²¡æœ‰çº¦æŸçš„ã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªæŒ‰é’®åœ¨çº¦æŸå¸ƒå±€ä¸­ä¼šæŠ¥é”™ã€‚éœ€è¦æ·»åŠ çº¦æŸã€‚</p><p><img src="/images/Android/constraintlayout/QQ%E6%88%AA%E5%9B%BE20210319221211.jpg" loading="lazy"></p><p>æ·»åŠ çº¦æŸçš„æ–¹å¼ä¹Ÿéå¸¸ä¹‹ç®€å•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚æ‹‰å‡ºæ¥çš„ç®­å¤´ï¼Œå°±æ˜¯ç»™æŒ‰é’®è®¾ç½®çº¦æŸçš„ã€‚</p><p><img src="/images/Android/constraintlayout/QQ%E6%88%AA%E5%9B%BE20210319221659.jpg" loading="lazy"></p><p>ç”±äºéœ€è¦ç¡®å®šè¿™ä¸ªæŒ‰é’®æ‰€åœ¨çš„ä½ç½®ï¼Œæ‰€ä»¥åªè¦å®šä¹‰ä¸¤ä¸ªçº¦æŸã€‚æ¯”å¦‚æˆ‘ä»¬è®¾ç½®æŒ‰é’®å·¦è¾¹çš„çº¦æŸå’ŒæŒ‰é’®ä¸Šé¢çš„çº¦æŸï¼Œè®¾ç½®æˆåŠŸä¹‹åï¼ŒæŒ‰é’®ç»„ä»¶å°±åœ¨å·¦ä¸Šè§’çš„ä½ç½®ã€‚ç„¶åå·¦è¾¹ä¹Ÿä¸ä¼šæŠ¥é”™äº†ã€‚</p><p><img src="/images/Android/constraintlayout/QQ%E6%88%AA%E5%9B%BE20210319221923.jpg" loading="lazy"></p><p>ç„¶åè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥éšä¾¿æ‹–åŠ¨æŒ‰é’®çš„ä½ç½®äº†ã€‚</p><p><img src="/images/Android/constraintlayout/qnxk0-2ndi0.gif" loading="lazy"></p><p>å¦‚æœéœ€è¦è¿›è¡Œç²¾ç¡®çš„å®šä½ï¼Œé‚£éº½å¯ä»¥é€šè¿‡å³è¾¹çš„å±æ€§æ å’Œä¸‹é¢çš„ Layout å®šä¹‰ä½ç½®ã€‚å…¶å®å¹¶ä¸èƒ½é€šè¿‡è¿™ä¸ªæ¥å°†ç»„ä»¶çš„ä½ç½®æ¥å®šæ­»ï¼Œå› ä¸ºè¿™ä¸ªå…¶å®æ˜¯ <code>layout_marginTop</code> å’Œ <code>layout_marginStart</code> ï¼Œä¹Ÿå°±æ˜¯å¤–è¾¹è·ã€‚</p><p>æ‰€ä»¥ç”¨å®ƒæ¥è¿›è¡Œç»å¯¹çš„å®šä½æ˜¾ç„¶ä¸å¤ªç°å®ã€‚è€Œä¸”ï¼Œä½¿ç”¨è¿™ç§å®šä½æ–¹å¼ï¼Œå®ƒä¸èƒ½è‡ªå®šé€‚åº”å±å¹•çš„ã€‚</p><p><img src="/images/Android/constraintlayout/QQ%E6%88%AA%E5%9B%BE20210319222553.jpg" loading="lazy"></p><p>å¦‚æœæˆ‘ä»¬è¦ç„¶æŒ‰é’®è¿›è¡Œæ°´å¹³å±…ä¸­ï¼Œé‚£æ€ä¹ˆåŠå‘¢ï¼Ÿé€šè¿‡ä¸Šé¢çš„æ–¹å¼åˆä¸è¡Œã€‚é‚£å°±å¢åŠ çº¦æŸï¼Œå†åŠ ä¸€æ¡çº¦æŸç”¨æ¥çº¦æŸæŒ‰é’®å³è¾¹å³å¯ï¼Œè¿™æ ·å°±æ°´å¹³å±…ä¸­äº†ã€‚</p><p>ä¸è¿‡åˆå‘ç°äº†ä¸€ä¸ªæ–°ç°è±¡ï¼Œå°±æ˜¯ <code>marginStart</code> å±æ€§ä¸è§äº†ï¼Œå¹¶ä¸”ç®­å¤´å˜æˆäº†â€œå¼¹ç°§â€çš„å½¢çŠ¶ã€‚å®³ï¼Œçªç„¶æƒ³èµ·äº†é«˜ä¸­ç‰©ç†ã€‚æˆ‘åˆæƒ³èµ·äº†<a href="https://baike.baidu.com/item/%E8%83%A1%E5%85%8B%E5%AE%9A%E5%BE%8B/2307271?fr=aladdin">èƒ¡å…‹å®šå¾‹</a>ï¼Œ<code>F=kx</code>ï¼ˆk ä¸ºå¼¹ç°§çš„åŠ²åº¦ç³»æ•°ï¼Œx ä¸ºå¼¹ç°§è¢«æ‹‰é•¿çš„è·ç¦»ï¼‰</p><p><img src="/images/Android/constraintlayout/QQ%E6%88%AA%E5%9B%BE20210319223952.jpg" loading="lazy"></p><p>é€šè¿‡ä¸Šå›¾å¯çŸ¥ï¼Œæ˜¯å› ä¸ºå®ƒä»¬æ‰€è°“çš„â€œåŠ²åº¦ç³»æ•°kâ€ç›¸åŒæ‰ä½¿å¾—è¿™ä¸ªæŒ‰é’®åœ¨æ°´å¹³æ˜¯å±…ä¸­çš„ã€‚ç„¶å Layout ä¸‹é¢å˜æˆäº†æ»‘å—ã€‚é€šè¿‡æ»‘å—ï¼Œå°±ç›¸å½“äºæ˜¯è°ƒæ•´ä¸¤ä¸ªå¼¹ç°§çš„â€œåŠ²åº¦ç³»æ•°â€ã€‚ä¹Ÿå°±æœ‰å¦‚ä¸‹çš„ç»“æœäº†ã€‚</p><p><img src="/images/Android/constraintlayout/edkna-3yhj8.gif" loading="lazy"></p><p>ä»£ç å¦‚ä¸‹</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.MainActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button13<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>56dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintEnd_toEndOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintStart_toStartOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintTop_toTopOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class="token punctuation">></span></span></code></pre><p>åŒç†ï¼Œå¦‚æœè®©ä»–å‚ç›´å±…ä¸­çš„è¯ï¼Œç»™æŒ‰é’®åº•éƒ¨ä¸€ä¸ªçº¦æŸå³å¯ï¼ŒåŒæ—¶ç«–ç›´æŒ‰é’®éƒ¨åˆ†ä¹Ÿä¼šç»™å‡ºä¸€ä¸ªæ»‘å—æ¥è°ƒæ•´å¼¹ç°§çš„â€œåŠ²åº¦ç³»æ•°â€ã€‚</p><h5 id="å¤šä¸ªæŒ‰é’®"><a href="#å¤šä¸ªæŒ‰é’®" class="headerlink" title="å¤šä¸ªæŒ‰é’®"></a>å¤šä¸ªæŒ‰é’®</h5><p>ä»¥ä¸‹ï¼Œæˆ‘ä»¬å¤šæ”¾å‡ ä¸ªæŒ‰é’®ï¼Œæ¥ä½“éªŒä¸€ä¸‹çœŸæ­£çš„ç›¸å¯¹å¸ƒå±€ã€‚åœ¨å®éªŒä¹‹å‰ï¼Œæˆ‘æŠŠåŸæ¥çš„æŒ‰é’®ç»™åˆ é™¤äº†ã€‚é‡æ–°æ”¾ç½®äº†ä¸€äº›æ–°æŒ‰é’®ã€‚ç„¶åï¼Œæˆ‘ä»¬æ¥ç©ä¸€ç©â€œè™šå¹»ä¸€æªâ€ï¼Œæ¥çœ‹çœ‹å…¶ä¸­çš„æ•ˆæœã€‚</p><p><img src="/images/Android/constraintlayout/r1zqm-p36cd.gif" loading="lazy"></p><p>é€šè¿‡è¿™ä¸ªæ•ˆæœåŠ¨ç”»ï¼Œæˆ‘ä»¬å‘ç°ï¼Œåªè¦æˆ‘ä»¬å¯¹è¿™ä¸ªæŒ‰é’®è¿›è¡Œçº¦æŸçš„æ—¶å€™ã€‚ä»–ä¼šç»™ä½ ä¸€äº›æç¤ºï¼Œæ¥æç¤ºè¿æ¥æŒ‰é’®çš„å“ªä¸€è¾¹ã€‚çº¦æŸæŒ‰é’®çš„å·¦è¾¹ï¼Œé‚£ä¹ˆå®ƒåªèƒ½è¿æ¥å…¶å®ƒæŒ‰é’®ï¼ˆæˆ–è€…å…¶å®ƒçš„ç»„ä»¶ï¼‰çš„å·¦è¾¹å’Œå³è¾¹ï¼Œæˆ–è€…çº¦æŸå¸ƒå±€å®¹å™¨çš„å·¦å³è¾¹ã€‚</p><p>åŒç†ï¼Œçº¦æŸçš„æ˜¯ä¸Šè¾¹å’Œä¸‹è¾¹ï¼Œé‚£ä¹ˆä¹Ÿåªèƒ½å…¶å®ƒæŒ‰é’®ï¼ˆæˆ–è€…å…¶å®ƒçš„ç»„ä»¶ï¼‰çš„ä¸Šè¾¹å’Œä¸‹è¾¹ï¼Œæˆ–è€…çº¦æŸå¸ƒå±€çš„ä¸Šä¸‹è¾¹ã€‚</p><p>å¦‚æœæˆ‘ä»¬è¦è®©ä¸‰ä¸ªæŒ‰é’®è¿›è¡Œä¸Šå¯¹é½ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿™æ ·è¿æ¥ã€‚é€šè¿‡ç§»åŠ¨çš„æ–¹å¼å‘ç°ï¼Œå½“ç§»åŠ¨åˆ°å’Œä¸­é—´æŒ‰é’®çš„é¡¶éƒ¨å¯¹é½æ—¶å‘ç°æŒ‰é’®ä¸èƒ½å¤Ÿåœ¨å‘ä¸Šç§»åŠ¨ã€‚ç¬¬ä¸‰ä¸ªå¯ä»¥ç§»åŠ¨çš„åŸå› æ˜¯å› ä¸ºæ²¡æœ‰è®¾ç½®çº¦æŸã€‚æ‰€ä»¥å®ƒæ˜¯å¯ä»¥è‡ªç”±ç§»åŠ¨çš„ï¼Œè€Œä¸”ä¼šå¸¦åŠ¨å…¶ä½™ä¸¤ä¸ªæŒ‰é’®ã€‚</p><p><img src="/images/Android/constraintlayout/1jx2s-mw89d.gif" loading="lazy"></p><p>ä»£ç å¦‚ä¸‹ï¼Œè¯·æ³¨æ„çº¦æŸå±æ€§ <code>layout_constraintTop_toTopOf</code></p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>96dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>82dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintTop_toTopOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button2<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteX</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>33dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button2<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintTop_toTopOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button3<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteX</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>159dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button3<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>98dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>142dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteX</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>288dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteY</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>294dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class="token punctuation">></span></span></code></pre><p>å¦‚æœè¦è®©ä¸‰ä¸ªæŒ‰é’®è¿›è¡Œæ°´å¹³å¯¹é½ï¼Œå¯ä»¥è¿™æ ·å»åšã€‚å½“è¿™æ ·è¿æ¥æ—¶ä¸‰ä¸ªæŒ‰é’®é»˜è®¤éƒ½å¤„äºä¸€æ¡æ°´å¹³çº¿ä¸Šï¼Œè¿æ¥å®Œä¹‹åï¼Œå³è¾¹å¤šäº†ä¸€ä¸ªç«–ç›´çš„æ»‘å—ï¼Œå°±è¯´æ˜ä¸Šä¸‹ä¸¤ä¸ªå¼¹ç°§çš„â€œåŠ²åº¦ç³»æ•°â€æ˜¯å¯ä»¥è°ƒçš„ï¼Œå¯ä»¥ä½¿å®ƒä»¬ä¸åœ¨åŒä¸€æ¡æ°´å¹³çº¿ä¸Šã€‚åŒç†ï¼Œä¹Ÿå¯ä»¥ä½¿å®ƒä»¬åœ¨å‚ç›´çº¿ä¸Šã€‚</p><p>ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span><span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span><span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span><span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>96dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>82dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintBottom_toBottomOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button2<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintTop_toTopOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button2<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintVertical_bias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.62<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteX</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>33dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button2<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintBottom_toBottomOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button3<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintTop_toTopOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button3<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintVertical_bias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.53<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteX</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>159dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button3<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>98dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>142dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteX</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>288dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteY</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>294dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class="token punctuation">></span></span></code></pre><p><img src="/images/Android/constraintlayout/fz0yg-hz7kl.gif" loading="lazy"></p><h5 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h5><p>ç›¸å¯¹å¸ƒå±€çš„å®šä½ç›®æ ‡ä»…ä»…æ˜¯å…¶å®ƒç»„ä»¶çš„ï¼Œè€Œçº¦æŸå¸ƒå±€å¯ä»¥ç²¾ç¡®åˆ°å…¶ä»–ç»„ä»¶çš„è¾¹ã€‚è€Œä¸”æ¯”èµ·ç›¸å¯¹å¸ƒå±€ç¡®å®å¼ºåŒ–äº†ä¸å°‘ã€‚åœ¨ä»¥ä¸Šçš„æ“ä½œä¸­ï¼Œæ€»å…±åˆ©ç”¨åˆ°äº† 12 ç§å±æ€§ã€‚</p><ul><li>layout_constraintLeft_toLeftOfï¼šè¿™ä¸ªç»„ä»¶çš„å·¦è¾¹è¿æ¥åˆ°å¦ä¸€ä¸ªç»„ä»¶çš„å·¦è¾¹</li><li>layout_constraintLeft_toRightOfï¼šè¿™ä¸ªç»„ä»¶çš„å·¦è¾¹è¿æ¥åˆ°å¦ä¸€ä¸ªç»„ä»¶çš„å³è¾¹</li><li>layout_constraintRight_toLeftOfï¼šè¿™ä¸ªç»„ä»¶çš„å³è¾¹è¿æ¥åˆ°å¦ä¸€ä¸ªç»„ä»¶çš„å·¦è¾¹</li><li>layout_constraintRight_toRightOfï¼šè¿™ä¸ªç»„ä»¶çš„å³è¾¹è¿æ¥åˆ°å¦ä¸€ä¸ªç»„ä»¶çš„å³è¾¹</li><li>layout_constraintTop_toTopOfï¼šè¿™ä¸ªç»„ä»¶çš„ä¸Šè¾¹è¿æ¥åˆ°å¦ä¸€ä¸ªç»„ä»¶çš„ä¸Šè¾¹</li><li>layout_constraintTop_toBottomOfï¼šè¿™ä¸ªç»„ä»¶çš„ä¸Šè¾¹è¿æ¥åˆ°å¦ä¸€ä¸ªç»„ä»¶çš„ä¸‹è¾¹</li><li>layout_constraintBottom_toTopOfï¼šè¿™ä¸ªç»„ä»¶çš„ä¸‹è¾¹è¿æ¥åˆ°å¦ä¸€ä¸ªç»„ä»¶çš„ä¸Šè¾¹</li><li>layout_constraintBottom_toBottomOfï¼šè¿™ä¸ªç»„ä»¶çš„ä¸‹è¾¹è¿æ¥åˆ°å¦ä¸€ä¸ªç»„ä»¶çš„ä¸‹è¾¹</li><li>layout_constraintStart_toEndOfï¼šåŒ layout_constraintLeft_toRightOf</li><li>layout_constraintStart_toStartOfï¼šåŒ layout_constraintLeft_toLeftOf</li><li>layout_constraintEnd_toStartOfï¼šåŒ layout_constraintRight_toLeftOf</li><li>layout_constraintEnd_toEndOfï¼šåŒ layout_constraintRight_toRightOf</li></ul><p>è¿˜æœ‰ä¸€ç§æ˜¯åŸºäºæ–‡æœ¬åŸºçº¿çš„æ–¹å¼</p><ul><li>layout_constraintBaseline_toBaselineOf</li></ul><p>è®¾ç½®å¼¹ç°§â€œåŠ²åº¦ç³»æ•°â€çš„å±æ€§</p><ul><li>layout_constraintVertical_bias</li></ul><h4 id="çº¿æ€§å¸ƒå±€"><a href="#çº¿æ€§å¸ƒå±€" class="headerlink" title="çº¿æ€§å¸ƒå±€"></a>çº¿æ€§å¸ƒå±€</h4><p>åœ¨çº¦æŸå¸ƒå±€å½“ä¸­ï¼Œå¦‚æœè¦å®ç°ç±»ä¼¼äºçº¿æ€§å¸ƒå±€çš„æ–¹å¼ã€‚å¯ä»¥ä½¿ç”¨ Chain æ¥å°†è¿™äº›ç»„ä»¶æ¥è¿æ¥èµ·æ¥ã€‚è¿æ¥çš„åŠ¨ç”»å¦‚ä¸‹ã€‚å½“è¿æ¥èµ·æ¥ä¹‹åï¼Œå‘ç°è¿™ä¸‰ä¸ªç»„ä»¶çš„è¿æ¥æ–¹å¼é€šè¿‡ä¸€æ¡é“é“¾çš„æ–¹å¼è¿æ¥èµ·æ¥äº†ï¼Œè€Œä¸æ˜¯ä¹‹å‰çš„å¼¹ç°§ã€‚</p><p><img src="/images/Android/constraintlayout/vog2n-obu6v.gif" loading="lazy"></p><p>æ€»å…±æœ‰ä¸‰ç§æ–¹å¼ï¼šspreadï¼Œspread_inside å’Œ packedï¼Œåˆ†åˆ«æ¼”ç¤º</p><p><img src="/images/Android/constraintlayout/mp6vn-6a7nq.gif" loading="lazy"></p><p>ä¸‰ç§æ–¹å¼çš„ä»£ç ï¼Œåœ¨å…¨é€‰æŒ‰é’®é€‰æ‹© Chain çš„æ—¶å€™ï¼Œä»£ç ä¸­çš„æ“ä½œå…¶å®å°±æ˜¯ç»™ç¬¬ä¸€ä¸ªæŒ‰é’®è®¾ç½®äº† <code>app:layout_constraintHorizontal_chainStyle</code> å±æ€§ï¼Œè¿™æ ·å°±ä¼šæœ‰é“¾æ¡è¿™ç§æ•ˆæœäº†ã€‚ä¸å†™é»˜è®¤ä¸º spreadã€‚</p><p>ä½¿ç”¨ spread çš„ä»£ç ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintBottom_toBottomOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintEnd_toStartOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button2<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintHorizontal_bias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.5<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintHorizontal_chainStyle</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spread<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintStart_toStartOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintTop_toTopOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button2<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintBottom_toBottomOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintEnd_toStartOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button3<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintHorizontal_bias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.5<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintStart_toEndOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintTop_toTopOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button3<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintBottom_toBottomOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintEnd_toEndOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintHorizontal_bias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.5<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintStart_toEndOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button2<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintTop_toTopOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class="token punctuation">></span></span></code></pre><p>ä½¿ç”¨ spread_inside ï¼Œä¹Ÿå°±æ˜¯æœ€å·¦ç«¯å’Œæœ€å³ç«¯ç´§é çº¦æŸå¸ƒå±€è¾¹ç¼˜ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintBottom_toBottomOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintEnd_toStartOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button2<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintHorizontal_bias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.5<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintHorizontal_chainStyle</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spread_inside<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintStart_toStartOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintTop_toTopOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- å…¶å®ƒä¸¤ä¸ªæŒ‰é’®çœç•¥ --></span>    ......    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class="token punctuation">></span></span></code></pre><p>ä½¿ç”¨ packed ï¼Œå°†ä¸‰ä¸ªå…ƒç´ ç´§é åœ¨ä¸€èµ·ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintBottom_toBottomOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintEnd_toStartOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button2<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintHorizontal_bias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.5<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintHorizontal_chainStyle</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>packed<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintStart_toStartOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintTop_toTopOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- å…¶å®ƒä¸¤ä¸ªæŒ‰é’®çœç•¥ --></span>    ......    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class="token punctuation">></span></span></code></pre><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥å•ç‹¬çš„è®¾ç½®å‚ç›´çš„é“¾æ¥æ–¹å¼ï¼Œç‚¹å‡» Create vertical chain å³å¯ã€‚å‚ç›´æ–¹å¼ä¹Ÿæœ‰ä»¥ä¸Šä¸‰ç§è¿™ç§æ–¹å¼ï¼Œåˆ†åˆ«ä¸ºï¼šspreadï¼Œspread_inside å’Œ packedã€‚</p><p><img src="/images/Android/constraintlayout/QQ%E6%88%AA%E5%9B%BE20210320001239.jpg" loading="lazy"></p><p>æœ‰çš„æ—¶å€™ï¼Œä½¿ç”¨é“¾æ¡çš„è¿™ç§æ–¹å¼ï¼Œç”¨ Helpers ä¸­çš„ Flow è¿™ç§æµå¼è™šæ‹Ÿå¸ƒå±€æ¥è¿›è¡Œæ›¿ä»£ã€‚</p><h3 id="å„ç§-Helper"><a href="#å„ç§-Helper" class="headerlink" title="å„ç§ Helper"></a>å„ç§ Helper</h3><p>helper æ˜¯ç”¨åœ¨çº¦æŸå¸ƒå±€ç”¨æ¥è¿›è¡Œè¾…åŠ©ä½œç”¨çš„ï¼Œé€šè¿‡è¿™äº›è¾…åŠ©çš„ä¸œè¥¿ï¼Œå°±å¯ä»¥åšå‡ºä¸€äº›å¤æ‚çš„å¸ƒå±€äº†ã€‚åæ­£æˆ‘æ˜¯è§‰å¾—ï¼Œå•çº¯çš„åªç”¨çº¦æŸå¸ƒå±€çš„é‚£äº›å±æ€§ï¼Œè¦æ˜¯åšå‡ºå¤æ‚çš„å¸ƒå±€æ˜¯å¾ˆéš¾çš„ã€‚è¿™äº› Helper ä¹Ÿæ˜¯åˆ©ç”¨æ‹–æ‹½çš„æ–¹å¼å°±å¯ä»¥è½»æ¾å®Œæˆäº†</p><p>Helper çš„ç§ç±»æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ Groupï¼ˆç»„ï¼‰ã€Barrierï¼ˆæ´»åŠ¨çš„éš”æ¿ï¼‰ã€Flowï¼ˆæµå¼ï¼‰ã€Guidelineï¼ˆæŒ‡å¯¼çº¿ï¼‰ã€Layerï¼ˆå±‚å¸ƒå±€ï¼‰ã€ImageFilterButtonã€ImageFilterVIewã€Mockï¼ˆç†Ÿæ‚‰çš„åŸå‹è®¾è®¡ï¼‰</p><h4 id="Group"><a href="#Group" class="headerlink" title="Group"></a>Group</h4><p>ç”±äºçº¦æŸå¸ƒå±€ä¸­æ˜¯æ²¡æœ‰é‚£ç§å±‚çº§çš„å…³ç³»ï¼Œåœ¨å¼€å‘çš„æ—¶å€™ä¼šæ¯”è¾ƒæ··ä¹±ã€‚å°†å‡ ä¸ªç›¸å…³è”ç»„ä»¶æ”¾å…¥åˆ°è¿™ä¸ªé€»è¾‘çš„ç»„ä¸­ï¼Œå°±æ„Ÿè§‰ç•Œé¢ä¸Šæœ‰é‚£ç§å±‚çº§çš„å…³ç³»ï¼Œä¾¿äºç®¡ç†ã€‚</p><blockquote><p>æ¯”å¦‚åé¢ç”¨åˆ°çš„ Flow å’Œ Layer ï¼Œè¿™äº›æ„Ÿè§‰åœ¨çœ‹ä¼¼åœ¨ä»£ç ä¸­èƒ½ä½“ç°æ¥ï¼Œå…¶å®å¹¶æ²¡æœ‰åµŒå¥—ã€‚å®ƒä»…ä»…æ˜¯åœ¨ç•Œé¢ä¸Šå¯ä»¥ä½“ç°å‡ºæ¥ã€‚</p></blockquote><p>ä½¿ç”¨æ–¹æ³•ä¹Ÿéå¸¸ç®€å•ï¼Œåªè¦å°†ç•Œé¢çš„ä¸­çš„ç»„ä»¶æ‹–åŠ¨åˆ° Group ä¸­å³å¯ã€‚ä½†æ˜¯ï¼Œæ‹–è¿›å»ä¹‹åè¿˜éœ€è¦å¯¹è¿™äº›ç»„ä»¶æ¥è¿›è¡Œçº¦æŸã€‚</p><p>è€Œä¸”ï¼Œæ·»åŠ è¿›å»ä¹‹åï¼ŒGroup é‡Œé¢å¹¶æ²¡æœ‰å°†å†…å®¹å¡«å……è¿›å»ï¼Œè¿™ä¹Ÿå’Œä¸‹é¢çš„ Flow æœ‰åŒºåˆ«ã€‚</p><p><img src="/images/Android/constraintlayout/xxx.gif" loading="lazy"></p><p>ç›®å‰åœ¨å­¦ä¹ ä½¿ç”¨ Group çš„æ—¶å€™ï¼Œå­¦ä¹ åˆ°äº†å°†ç»„ä¸­çš„ç©ºé—´è¿›è¡Œéšè—å’Œæ˜¾ç¤ºã€‚</p><p>è¿™æ˜¯ visibility å±æ€§è®¾ç½®æˆ enable çš„æ—¶å€™å±•ç¤ºçš„ã€‚</p><p><img src="/images/Android/constraintlayout/QQ%E6%88%AA%E5%9B%BE20210320135857.jpg" loading="lazy"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button4<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button4<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteX</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>220dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteY</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>433dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button5<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button5<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteX</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>81dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteY</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>433dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CalendarView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/calendarView<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintEnd_toEndOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintStart_toStartOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintTop_toTopOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.constraintlayout.widget.Group</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>constraint_referenced_ids</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button4,button5,calendarView<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteX</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>148dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteY</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>122dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">tools:</span>visibility</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>visible<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class="token punctuation">></span></span></code></pre><p>åŒç†ï¼Œå¯¹åº”çš„ invisible å’Œ gone å¯¹åº”çš„æ•ˆæœå°±æ˜¯ä¸æ˜¾ç¤ºå’Œéšè—ã€‚</p><h4 id="Guideline"><a href="#Guideline" class="headerlink" title="Guideline"></a>Guideline</h4><p>Guideline æ˜¯å‘å¯¼çº¿ï¼Œå…¶å®å°±æ˜¯è¾…åŠ©çº¿çš„æ„æ€å•¦ã€‚é€šè¿‡è¾…åŠ©ç°å°†å±å¹•åˆ’æˆå‡ ä»½ï¼Œç„¶åå†ä½¿ç”¨çº¦æŸå¸ƒå±€ï¼Œçº¦æŸå¸ƒå±€çš„æŒ‡å‘å°±å¯ä»¥æŒ‡åˆ°è¾…åŠ©çº¿ä¸Šäº†ã€‚</p><p>è¾…åŠ©çº¿åœ¨ç•Œé¢è®¾è®¡æ—¶å¯è§ï¼Œåœ¨è¿è¡Œæ—¶æ˜¯çœ‹ä¸è§çš„ã€‚</p><p>çº¢è‰²åœˆåœˆéƒ¨åˆ†å¯ä»¥ä¿®æ”¹ï¼Œé€šè¿‡é¼ æ ‡çš„ç‚¹å‡»ï¼Œå¯ä»¥è°ƒæˆç™¾åˆ†æ¯”ã€‚æ€»å…±æœ‰ä¸‰ç§æ–¹å¼ï¼Œä¸€ä¸ªæ˜¯è·ç¦»å±å¹•é¡¶éƒ¨çš„è·ç¦»ï¼Œä¸€ä¸ªæ˜¯è·ç¦»å±å¹•åº•éƒ¨çš„è·ç¦»ï¼Œæœ€åä¸€ä¸ªæ˜¯å±å¹•è·ç¦»é¡¶éƒ¨çš„ç™¾åˆ†æ¯”ã€‚æœ€åä¸€ä¸ªç”¨ç™¾åˆ†æ¯”å°±å¾ˆå¸¸ç”¨ï¼Œé€šè¿‡ç™¾åˆ†æ¯”çš„è®¾ç½®å¯ä»¥è‡ªç”±é€‚é…å±å¹•äº†ã€‚</p><p>è¿™æ˜¯è·ç¦»é¡¶éƒ¨çš„</p><p><img src="/images/Android/constraintlayout/QQ%E6%88%AA%E5%9B%BE20210320141256.jpg" loading="lazy"></p><p>è¿™æ˜¯è·ç¦»åº•éƒ¨çš„</p><p><img src="/images/Android/constraintlayout/QQ%E6%88%AA%E5%9B%BE20210320141310.jpg" loading="lazy"></p><p>è¿™æ˜¯è·ç¦»é¡¶éƒ¨çš„ç™¾åˆ†æ¯”</p><p><img src="/images/Android/constraintlayout/QQ%E6%88%AA%E5%9B%BE20210320140946.jpg" loading="lazy"></p><p>åŒç†ï¼Œæ°´å¹³æ–¹å¼ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><p>å°†ç»„ä»¶æŒ‡å‘ Guidelineï¼Œçœ‹åˆ°äº†å¼¹ç°§æŒ‡å‘äº†è¾…åŠ©çº¿ã€‚</p><p><img src="/images/Android/constraintlayout/QQ%E6%88%AA%E5%9B%BE20210320142036.jpg" loading="lazy"></p><p>Guideline ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button4<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>48dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginEnd</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>32dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button4<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintEnd_toStartOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/guideline3<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintTop_toBottomOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/calendarView<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button5<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginStart</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>28dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>48dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button5<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintStart_toStartOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/guideline2<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintTop_toBottomOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/calendarView<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CalendarView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/calendarView<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>266dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>243dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>24dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintEnd_toStartOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/guideline3<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintHorizontal_bias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.464<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintStart_toStartOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/guideline2<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintTop_toTopOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/guideline<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.constraintlayout.widget.Group</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>visibility</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>visible<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>constraint_referenced_ids</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button4,button5,calendarView<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteX</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>148dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteY</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>122dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">tools:</span>visibility</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>visible<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.constraintlayout.widget.Guideline</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/guideline<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>horizontal<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintGuide_percent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.047879618<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.constraintlayout.widget.Guideline</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/guideline2<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintGuide_end</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>355dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.constraintlayout.widget.Guideline</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/guideline3<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintGuide_begin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>355dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class="token punctuation">></span></span></code></pre><h4 id="Barrier"><a href="#Barrier" class="headerlink" title="Barrier"></a>Barrier</h4><p>å’Œ Guideline ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯ä¸€ç§éš”æ¿ï¼Œå°†å·¦å³æˆ–è€…ä¸Šä¸‹ä¸¤è¾¹çš„æ§ä»¶è¿›è¡Œéš”å¼€ï¼Œä½¿ç”¨æ–¹æ³•ä¹Ÿéå¸¸ä¹‹ç®€å•ã€‚Barrier ç”¨äºè§£å†³åœ¨çº¦æŸå¸ƒå±€ä¸­ç”±äºå®½åº¦è¿‡å®½å¯¼è‡´ç»„ä»¶è¢«è¦†ç›–çš„æƒ…å†µã€‚ä¸è¿‡æˆ‘åœ¨å°†æŒ‰é’®çº¦æŸè‡³éš”æ¿ä¸Šé¢å¥½åƒä¸è¡Œï¼Œéœ€è¦æ‰‹åŠ¨æ¥æ‰“çº¦æŸçš„ä»£ç æ‰å¯ä»¥ã€‚</p><p>è¿™æ˜¯æœªä½¿ç”¨éš”æ¿ï¼Œå³ä¸‹æ–¹çš„æŒ‰é’®è¢«è¦†ç›–äº†ã€‚</p><p><img src="/images/Android/constraintlayout/QQ%E6%88%AA%E5%9B%BE20210320142036.jpg" loading="lazy"></p><p>è¿™æ˜¯å·²ä½¿ç”¨éš”æ¿çš„ï¼Œä¸‹æ–¹çš„æŒ‰é’®è¢«éš”æ¿çº¦æŸç€æ²¡æœ‰è¢«è¦†ç›–æ‰ï¼Œè€Œæ˜¯éšç€éš”æ¿å‘ä¸‹ç§»åŠ¨äº†ã€‚</p><p><img src="/images/Android/constraintlayout/QQ%E6%88%AA%E5%9B%BE20210320142036.jpg" loading="lazy"></p><p>ç›¸å…³çš„ä»£ç å¦‚ä¸‹</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.constraintlayout.widget.Barrier</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/barrier<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>barrierAllowsGoneWidgets</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>barrierDirection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>constraint_referenced_ids</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button6,button8<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteX</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>67dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteY</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>160dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button6<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteX</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>137dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteY</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>518dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button8<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>82dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>172dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteX</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>272dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteY</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>470dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button9<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>28dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintTop_toBottomOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/barrier<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">tools:</span>layout_editor_absoluteX</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>148dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class="token punctuation">></span></span></code></pre><h4 id="Flow"><a href="#Flow" class="headerlink" title="Flow"></a>Flow</h4><p>Flow è™šæ‹Ÿå¸ƒå±€å’Œå°†ä¸‰ä¸ªç»„ä»¶é€šè¿‡é“é“¾è¿èµ·æ¥çš„éƒ¨åˆ†æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œå±æ€§å€¼ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œå±æ€§åå°±ä¸ä¸€æ ·ï¼ŒFlow å¸ƒå±€ä¸­æœ‰ä¸€ä¸ªç‰¹æœ‰çš„å±æ€§å°±æ˜¯ <code>flow_horizontalStyle</code> ã€‚</p><p>å½“å±æ€§å€¼ä¸º spread_inside çš„æ—¶å€™</p><p><img src="/images/Android/constraintlayout/QQ%E6%88%AA%E5%9B%BE20210320151348.jpg" loading="lazy"></p><p>å½“å±æ€§ä¸º packed çš„æ—¶å€™</p><p><img src="/images/Android/constraintlayout/image-20210320151553323.png" loading="lazy"></p><p>å½“å±æ€§ä¸º spread çš„æ—¶å€™</p><p><img src="/images/Android/constraintlayout/QQ%E6%88%AA%E5%9B%BE20210320151735.jpg" loading="lazy"></p><p>å¦‚æœæ°´å¹³å†…å®¹æ»¡äº†ï¼Œéœ€è¦æ¥åˆ°ä¸‹ä¸€è¡Œï¼Œæ­¤æ—¶å¯ä»¥åˆ©ç”¨è¿™ä¸ªå±æ€§ <code>flow_wrap</code>ï¼Œè¿™ä¸ªå±æ€§å…±æœ‰ä¸‰ç§å€¼ï¼šalignã€chainã€none ä¸‰ç§å€¼ã€‚none å€¼æ˜¯ä¸æ¢è¡Œçš„ã€‚</p><p>å½“å±æ€§å€¼ä¸º chain çš„æ—¶å€™</p><p><img src="/images/Android/constraintlayout/QQ%E6%88%AA%E5%9B%BE20210320152746.jpg" loading="lazy"></p><p>å½“å±æ€§å€¼ä¸º none çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤çš„</p><p><img src="/images/Android/constraintlayout/QQ%E6%88%AA%E5%9B%BE20210320152821.jpg" loading="lazy"></p><p>å½“å±æ€§å€¼ä¸º aligned çš„æ—¶å€™</p><p><img src="/images/Android/constraintlayout/QQ%E6%88%AA%E5%9B%BE20210320152913.jpg" loading="lazy"></p><p>æœªå®Œå¾…ç»­ï¼Œåé¢å­¦ä¹ åˆ°å†è¡¥å……è¡¥å……â€¦â€¦</p><p><img src="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2651107050,918836939&fm=26&gp=0.jpg" loading="lazy"></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é™¤äº†åœ¨è¯¾ä¸Šå­¦ä¹ çº¦æŸå¸ƒå±€åŠå…¶ç›¸å…³çš„ç»„ä»¶ä¹‹åï¼Œè¿˜å‚è€ƒäº†ä»¥ä¸‹èµ„æ–™</p><ul><li><a href="https://juejin.cn/post/6854573221312725000#heading-0">Constraintlayout 2.0ï¼šä½ ä»¬è¦çš„æ›´æ–°æ¥äº†</a></li><li><a href="https://www.jianshu.com/p/17ec9bd6ca8a">çº¦æŸå¸ƒå±€ConstraintLayoutçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†</a></li><li><a href="https://blog.csdn.net/guolin_blog/article/details/53122387">Androidæ–°ç‰¹æ€§ä»‹ç»ï¼ŒConstraintLayoutå®Œå…¨è§£æ</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android å…¥é—¨ç¯‡ä¹‹ Fragment</title>
      <link href="/journal/fragment-component/"/>
      <url>/journal/fragment-component/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>æ³¨æ„ï¼šå»ºè®®åœ¨ç™½å¤©æ¨¡å¼ä¸‹çœ‹ï¼</p></blockquote><p>åœ¨å­¦ä¹ å®Œ Fragment ä¹‹åï¼Œå…¶å®è¿™ä¸ªç»„ä»¶ä¹Ÿæ˜¯éå¸¸ä¹‹å¸¸è§çš„ã€‚QQã€å¾®ä¿¡ã€Bç«™ç­‰ç­‰ app ç»å¤§å¤šæ•°éƒ½ä½¿ç”¨äº†åˆ°äº† Fragmentï¼Œç„¶åç»“åˆåº•éƒ¨çš„å¯¼èˆªæŒ‰é’®æ¥è·³è½¬åˆ°ä¸åŒçš„ Fragment çš„ã€‚ä¸€çœ‹åˆ°æ•ˆæœå°±èƒ½å¾ˆå¥½çš„æƒ³å‡ºå®ƒçš„è¿ç”¨åœºæ™¯ã€‚</p><p>åŒæ—¶ä¹ŸçŸ¥é“ Fragment çš„é‡è¦æ€§ã€‚éš¾åº¦è¿˜æ˜¯æœ‰ç‚¹ï¼Œä¸è¿‡æ¯”èµ·å°†è¦å­¦çš„ <code>ConstraintLayout</code> è¿˜æ˜¯è¦å®¹æ˜“ä¸€äº›ï¼ˆæˆ‘ä¸ªäººæ„Ÿè§‰ï¼Œç¡®ä¿¡ï¼‰</p><p>ä¸è¿‡ï¼Œä»Šå¤©ä¸€å£æ°”çœ‹äº† 5 é›†çš„è¿›å‡»çš„å·¨äººã€‚è¿›å‡»çš„å·¨äººç¬¬äºŒå­£å®åœ¨æ˜¯å¤ªç‡ƒäº†ã€‚æ¯•ç«Ÿæ˜¯ç¬¬ä¸€æ¬¡çœ‹å˜›ï¼Œçœ‹å®Œæ‰ä¼šæœ‰åŠ¨åŠ›å­¦ä¹ å˜›ã€‚</p><span id="more"></span><h2 id="å‰æƒ…æ¦‚è¦"><a href="#å‰æƒ…æ¦‚è¦" class="headerlink" title="å‰æƒ…æ¦‚è¦"></a>å‰æƒ…æ¦‚è¦</h2><p>Fragmentï¼Œæœ¬æ„å«ç¢ç‰‡ã€ç‰‡æ®µä¹‹æ„ã€‚å®ƒçš„å‡ºç°æ˜¯ä¸ºäº†é€‚åº”å¹³æ¿ç”µè„‘ç­‰å¤§å±è®¾å¤‡ä¸Šï¼Œä¸è¿‡ä¹Ÿç¡®å®æ˜¯è¿™æ ·ï¼Œä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œå¥½åƒå…¼å®¹ Android å¹³æ¿çš„åº”ç”¨å…¶å®å¾ˆå°‘è€¶ï¼Œåè€Œè¿™äº›å¼€å‘è€…æ›´å–œæ¬¢ iPad çš„å¹³æ¿ã€‚å°±æ„Ÿè§‰ Android å¹³æ¿çš„ç”Ÿæ€ä¼¼ä¹è¢«æŠ›å¼ƒäº†ä¸€æ ·ã€‚</p><h3 id="Fragment-ç”Ÿå‘½å‘¨æœŸ"><a href="#Fragment-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Fragment ç”Ÿå‘½å‘¨æœŸ"></a>Fragment ç”Ÿå‘½å‘¨æœŸ</h3><p>Fragment ä¹Ÿæœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼Œä»–çš„ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹æ‰€ç¤ºã€‚ä¸åŒçš„æ˜¯ï¼Œå®ƒä¸èƒ½å•ç‹¬å­˜åœ¨ï¼Œå¿…é¡»è¦â€œå¯„ç”Ÿâ€åœ¨ Activity ä¹‹ä¸­ã€‚</p><p><img src="/journal/fragment-component/1604195-20200303165929247-1414515511.png" alt="Fragmentçš„ç”Ÿå‘½å‘¨æœŸ" loading="lazy"></p><h3 id="Fragment-çš„ç”Ÿå‘½å‘¨æœŸçš„å½±å“"><a href="#Fragment-çš„ç”Ÿå‘½å‘¨æœŸçš„å½±å“" class="headerlink" title="Fragment çš„ç”Ÿå‘½å‘¨æœŸçš„å½±å“"></a>Fragment çš„ç”Ÿå‘½å‘¨æœŸçš„å½±å“</h3><p>Fragment çš„ç”Ÿå‘½å‘¨æœŸä¼šå—åˆ° Activity ç”Ÿå‘½å‘¨æœŸçš„å½±å“ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚Activity åˆ›å»ºäº†ï¼Œæˆ‘ Fragment ä¹Ÿå¼€å§‹åšåˆ›å»ºç›¸å…³çš„åŠ¨ä½œã€‚è¿™æ ·å’‹ä¸€çœ¼çœ‹è¿˜çœŸçš„åƒæ˜¯ä¸€ç§â€œå¯„ç”Ÿâ€çš„å…³ç³»è€¶ã€‚</p><p><img src="/journal/fragment-component/1688279-e513845a80659860.png" loading="lazy"></p><p>ä¸è¿‡è¿™æ ·çœ‹èµ·æ¥ä¼¼ä¹çœ‹ä¸å‡ºä»€ä¹ˆä¸œè¥¿æ¥ï¼Œå¯ä»¥é‡å†™è¿™äº›æ–¹æ³•æ¥çœ‹çœ‹ Fragment æ˜¯å¦‚ä½•æ‰§è¡Œçš„ã€‚è¿™ä¸ªè¿˜æ˜¯åˆ°åé¢å†æ¥çœ‹çœ‹å§ã€‚</p><p>å…ˆæ¥å­¦ä¹ å­¦ä¹ ç®€å•çš„åº”ç”¨ï¼Œä» AFragment åˆ° BFragmentã€‚æ¥çœ‹çœ‹æ˜¯æ€æ ·çš„æ•ˆæœå§</p><h2 id="ç®€å•ç¤ºä¾‹"><a href="#ç®€å•ç¤ºä¾‹" class="headerlink" title="ç®€å•ç¤ºä¾‹"></a>ç®€å•ç¤ºä¾‹</h2><p>é¦–å…ˆï¼Œå»ºç«‹ä¸€ä¸ª ContainerActivity ç”¨äºæ”¾ç½® Fragmentã€‚</p><p>ç„¶åï¼Œå»ºç«‹ AFragment å’Œ BFragment çš„ç±»ã€‚AFragment å’Œ BFragment éƒ½éœ€è¦ç»§æ‰¿è‡ª Fragment ç±»ã€‚æäº†ä¸¤å¼ æ´›å¤©ä¾çš„ç”»åƒã€‚å“ˆå“ˆå“ˆ</p><h3 id="å­˜æ”¾-Fragment-çš„-Acitvity"><a href="#å­˜æ”¾-Fragment-çš„-Acitvity" class="headerlink" title="å­˜æ”¾ Fragment çš„ Acitvity"></a>å­˜æ”¾ Fragment çš„ Acitvity</h3><p>è®¾ç½®å¥½å¸ƒå±€æ–‡ä»¶</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- ç”¨äºæ”¾ç½®å­å¸ƒå±€çš„ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FrameLayout</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/frag_layout<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/change_fragment<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æ”¹å˜ Fragment<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textAllCaps</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_alignParentTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">></span></span></code></pre><h3 id="AFragment"><a href="#AFragment" class="headerlink" title="AFragment"></a>AFragment</h3><p>AFragment çš„ java ä»£ç å¦‚ä¸‹</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AFragment</span> <span class="token keyword">extends</span> <span class="token class-name">Fragment</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">TextView</span> fragA<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Button</span> changeText<span class="token punctuation">,</span> changeFragment<span class="token punctuation">,</span> changeOuterText<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">BFragment</span> bFragment<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Nullable</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">View</span> <span class="token function">onCreateView</span><span class="token punctuation">(</span><span class="token class-name">LayoutInflater</span> inflater<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">ViewGroup</span> container<span class="token punctuation">,</span> <span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"onCreateView"</span><span class="token punctuation">,</span> <span class="token string">"-------isRunning------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> inflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>fragment_a<span class="token punctuation">,</span> container<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>AFragment çš„ fragment_a.xml å¸ƒå±€æ–‡ä»¶å¦‚ä¸‹</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/lty_a<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/frag_a<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æˆ‘æ˜¯ FragmentA<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@color/colorBlack<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><h3 id="BFragment"><a href="#BFragment" class="headerlink" title="BFragment"></a>BFragment</h3><p>BFragment çš„ java ä»£ç å¦‚ä¸‹</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BFragment</span> <span class="token keyword">extends</span> <span class="token class-name">Fragment</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Nullable</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">View</span> <span class="token function">onCreateView</span><span class="token punctuation">(</span><span class="token class-name">LayoutInflater</span> inflater<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">ViewGroup</span> container<span class="token punctuation">,</span> <span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å°†è‡ªå®šä¹‰çš„å¸ƒå±€æ·»åŠ åˆ° view ä¸­</span>        <span class="token class-name">View</span> view <span class="token operator">=</span> inflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>fragment_b<span class="token punctuation">,</span> container<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> view<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>BFragment çš„ fragment_b.xml å¸ƒå±€æ–‡ä»¶å¦‚ä¸‹</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/lty_b<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æˆ‘æ˜¯ FragmentB<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@color/colorBlack<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><p>åˆ›å»ºå®Œ BFragment å°±å¯ä»¥åœ¨ ContainerActivity ä¸­æ¥æ”¾ç½® Fragment äº†ï¼ŒContainerActivity.java ä»£ç å¦‚ä¸‹ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ContainerActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Fragment</span> aFragment<span class="token punctuation">,</span> bFragment<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Button</span> button<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_container<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å¾—åˆ°æŒ‰é’®ï¼Œç”¨äºç‚¹å‡»è·³è½¬åˆ°Bfragment</span>        button <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>change_fragment<span class="token punctuation">)</span><span class="token punctuation">;</span>        button<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token function">getFragmentManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>frag_layout<span class="token punctuation">,</span> bFragment<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">commitAllowingStateLoss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åŠ è½½ AFragment</span>        aFragment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åŠ è½½ BFragment</span>        bFragment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ·»åŠ  Fragmentï¼Œadd æ–¹æ³•éœ€è¦æ·»åŠ ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªéœ€è¦</span>        <span class="token function">getFragmentManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>frag_layout<span class="token punctuation">,</span> aFragment<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">commitAllowingStateLoss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="è¿è¡Œæ•ˆæœ"><a href="#è¿è¡Œæ•ˆæœ" class="headerlink" title="è¿è¡Œæ•ˆæœ"></a>è¿è¡Œæ•ˆæœ</h3><p>è¿è¡Œçš„æ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/fragment/0janp-atem6.gif" loading="lazy"></p><p>æ•ˆæœä¸Šé¢ï¼Œä» AFragment è·³åˆ° BFragmentã€‚</p><h2 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h2><p>åœ¨æ­¤ä¹‹å‰ï¼Œç”¨ä¸€å¼ å›¾æ¥å±•ç¤ºäº† Fragment çš„ç”Ÿå‘½å‘¨æœŸã€‚æ¥ä¸‹æ¥ï¼Œé€šè¿‡è¾“å‡ºæ¥ç›´è§‚çš„çœ‹åˆ° Fragment çš„ç”Ÿå‘½å‘¨æœŸã€‚äº†è§£ç”Ÿå‘½å‘¨æœŸçš„ç›®çš„å°±åœ¨äºï¼Œèƒ½å¤Ÿä½•æ—¶åœ¨æŸä¸ªè¿‡ç¨‹ä¸­æ¥æ‰§è¡Œå“ªäº›å…³é”®æ€§çš„ä»£ç ã€‚è¿™ä¸ªå…¶å®æ˜¯éå¸¸é‡è¦çš„ã€‚</p><p>æˆ‘ä»¬å°±åˆ©ç”¨ç®€å•ä¾‹å­ä¸­çš„ AFragment ç±»ä¸­çš„ä»£ç ï¼Œæµ‹è¯•å®ƒçš„ç”Ÿå‘½å‘¨æœŸï¼Œé‡å†™äº†å®ƒçš„å…¨éƒ¨å…³äºç”Ÿå‘½å‘¨æœŸç›¸å…³çš„ä»£ç ã€‚</p><p>å½“æˆ‘ä»¬è¿›å…¥çš„æ—¶å€™ï¼Œæ‰§è¡Œäº†ä»¥ä¸‹æ–¹æ³•ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">D/fragment: -------onAttach running-------D/fragment: -------onCreate running-------D/fragment: -------onCreateView isRunning------D/fragment: -------onViewCreated isRunning------D/fragment: -------onActivityCreated running-------D/fragment: -------onStart isRunning------D/fragment: -------onResume isRunning------</code></pre><p>å½“ç†„å±ã€æŒ‰ä¸‹ Home é”®ã€åˆ‡æ¢åˆ°å…¶å®ƒç¨‹åºæ—¶ï¼Œæ‰§è¡Œäº†ä»¥ä¸‹æ–¹æ³•ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">D/fragment: -------onPause isRunning------D/fragment: -------onStop isRunning------</code></pre><p>å½“äº®å±çš„æ—¶å€™ã€å›åˆ°åŸæ¥çš„ç¨‹åºæ—¶ï¼Œæ‰§è¡Œäº†ä»¥ä¸‹æ–¹æ³•ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">D/fragment: -------onStart isRunning------D/fragment: -------onResume isRunning------</code></pre><p>å½“åˆ° BFragment çš„æ—¶å€™ï¼Œæ‰§è¡Œäº†ä»¥ä¸‹æ–¹æ³•ã€‚ç”±äºç‚¹å‡»äº†æŒ‰é’®ï¼Œè°ƒç”¨äº† replace æ–¹æ³•ï¼Œå¯¼è‡´ AFragment çš„ View å·²ç»ç ´åäº†ã€‚å¦‚æœè¿”å›åˆ° AFragmentï¼Œå®ƒå°†ä¸æ˜¯åŸæ¥çš„ AFragmentï¼Œè€Œæ˜¯æ–°çš„ Fragment å§ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">D/fragment: -------onPause isRunning------D/fragment: -------onStop isRunning------D/fragment: -------onDestroyView isRunning------</code></pre><p>å½“è¿”å›åˆ° AFragment çš„æ—¶å€™ï¼Œæ‰§è¡Œäº†ä»¥ä¸‹æ–¹æ³•ã€‚æ­¤æ—¶æ‰§è¡Œäº† onCreateView æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ AFragment çš„ View æ˜¯é‡æ–°åˆ›å»ºçš„ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">D/fragment: -------onCreateView isRunning------D/fragment: -------onActivityCreated running--------D/fragment: -------onViewCreated isRunning------D/fragment: -------onStart isRunning------D/fragment: -------onResume isRunning------</code></pre><p>å½“é€€å‡ºäº†è¿™ä¸ª Activity çš„æ—¶å€™ï¼Œæ‰§è¡Œäº†ä»¥ä¸‹æ–¹æ³•ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">D/fragment: -------onPause isRunning------D/fragment: -------onStop isRunning------D/fragment: -------onDestroyView isRunning------D/fragment: -------onDestroy isRunning------D/fragment: -------onDetach isRunning------</code></pre><p>å½“æœ‰æ¥ç”µæ—¶ï¼Œæ‰§è¡Œäº†ä»¥ä¸‹æ–¹æ³•ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">D/fragment: -------onPause isRunning------</code></pre><p>å½“æŒ‚æœºæ—¶ï¼Œæ‰§è¡Œäº†ä»¥ä¸‹æ–¹æ³•ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">D/fragment: -------onResume isRunning------</code></pre><h2 id="å›é€€é—®é¢˜"><a href="#å›é€€é—®é¢˜" class="headerlink" title="å›é€€é—®é¢˜"></a>å›é€€é—®é¢˜</h2><h3 id="å›é€€åˆ°ä¸Šä¸€ä¸ª"><a href="#å›é€€åˆ°ä¸Šä¸€ä¸ª" class="headerlink" title="å›é€€åˆ°ä¸Šä¸€ä¸ª"></a>å›é€€åˆ°ä¸Šä¸€ä¸ª</h3><p>Fragment ä¹Ÿæœ‰è‡ªå·±çš„æ ˆï¼Œåœ¨ç®€å•ç¤ºä¾‹çš„ä»£ç ä¸­ï¼Œæœ‰ä¸€ä¸ª add æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•å°±æ˜¯æŠŠ Fragment æ·»åŠ åˆ°æ‰€å±çš„æ ˆä¸­ï¼Œä¸è¿‡ï¼Œæˆ‘ä»¬åœ¨æŒ‰æ‰‹æœºä¸Šçš„è¿”å›æŒ‰é’®æ—¶ã€‚ä¸è·³å›åˆ° FragmentAï¼Œè€Œæ˜¯ç›´æ¥é€€å‡ºäº†è¿™ä¸ª Activity ä¸­ã€‚</p><p><img src="/images/Android/fragment/7dsfo-u8g68.gif" loading="lazy"></p><p>è¿™æ€ä¹ˆåŠå‘¢ï¼Ÿï¼Ÿ</p><p>å…¶å®ä¹Ÿä¸éš¾ï¼Œåªéœ€è¦è°ƒç”¨ <code>addToBackState(null)</code> è¿™ä¸ªæ–¹æ³•ï¼Œå°±å¯ä»¥å‡ºæ ˆï¼Œå›é€€åˆ°ä¸Šä¸€ä¸ª Fragment äº†ã€‚å®Œæ•´çš„å†™æ³•å¦‚ä¸‹ã€‚ä¸è¿‡è¿˜æ˜¯ä¸æ‡‚è¿™ä¸ªæ–¹æ³•ä¸­çš„å‚æ•°åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token function">getFragmentManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>frag_layout<span class="token punctuation">,</span> bFragment<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addToBackState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">commitAllowingStateLoss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æ›´æ”¹ä¹‹åçš„æ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/fragment/i8zig-blfoa.gif" loading="lazy"></p><h4 id="è·³è½¬ä¸é”€æ¯"><a href="#è·³è½¬ä¸é”€æ¯" class="headerlink" title="è·³è½¬ä¸é”€æ¯"></a>è·³è½¬ä¸é”€æ¯</h4><p>åœ¨ä¸Šé¢çš„ç®€å•ç¤ºä¾‹ä»£ç ä¸­å’Œç”Ÿå‘½å‘¨æœŸçš„æ¼”ç¤ºä¸­ï¼Œä» AFragment è°ƒç”¨åˆ° BFragment æ—¶å‘ç°ï¼ŒåŸæ¥çš„ AFragment å·²ç»è¢«é”€æ¯äº†ã€‚é‚£æ˜¯å› ä¸ºæˆ‘ä»¬è°ƒç”¨çš„æ—¶å€™æ˜¯è°ƒç”¨ replace æ–¹æ³•ï¼Œreplace çš„åŠ¨ä½œå¯ä»¥çœ‹æˆæ˜¯å…ˆåˆ é™¤å†æ·»åŠ ï¼Œæ‰€ä»¥æ‰ä¼šé€ æˆè¿™ç§é—®é¢˜çš„ã€‚</p><p>ä»¥ä¸‹æ•ˆæœå¯ä»¥å±•ç¤ºå‡ºï¼Œè¿”å›åˆ° AFragment çš„æ—¶å€™ï¼Œå‘ç°å…¶å†…å®¹è¿˜åŸäº†ã€‚</p><p><img src="/images/Android/fragment/lfwfn-vtb64.gif" loading="lazy"></p><p>ä¸ºäº†å®ç°è·³è½¬ä¹‹åä¸é”€æ¯åŸæ¥çš„ AFragmentï¼Œå¯ä»¥è°ƒç”¨å…¶ hide æ–¹æ³•ï¼Œåœ¨è·³è½¬ BFragment çš„æ—¶å€™ï¼Œå…ˆéšè— AFragment ç„¶åå°† BFragment æ·»åŠ åˆ°æ ˆä¸­æ¥ã€‚è¿”å›åˆ° AFragment æ—¶å°†å…¶æ˜¾ç¤ºå‡ºæ¥ã€‚</p><p>é¦–å…ˆï¼Œåœ¨æ·»åŠ  AFragment çš„æ—¶å€™æ·»åŠ ä¸€ä¸ª tagï¼Œè¿™è¾¹ä¼ å…¥äº†ä¸€ä¸ª tag ä¸º Aã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token function">getFragmentManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>frag_layout<span class="token punctuation">,</span> aFragment<span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">commitAllowingStateLoss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ç„¶åï¼Œåœ¨ AFragment ä¸­çš„ onViewCreated æ–¹æ³•ä¸­è·å–åˆ°è·³è½¬æŒ‰é’®ï¼Œè®¾ç½®ç‚¹å‡»äº‹ä»¶ã€‚ç‚¹å‡»äº‹ä»¶ä¸­ï¼Œå…ˆè·å– tag ä¸º a çš„ Fragmentï¼Œç„¶åè·å–åˆ°ä¹‹åå°†å…¶éšè—ï¼Œå¦‚æœæ²¡æœ‰è·å–åˆ° a æ ‡ç­¾ï¼Œåˆ™ä¸éšè—ï¼Œç›´æ¥ AFragment é”€æ¯ã€‚</p><p>ä¸»è¦ä»£ç å¦‚ä¸‹</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// è·å¾—æŒ‰é’®å¹¶è®¾ç½®è·³è½¬</span>changeFragment <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_fragment_b<span class="token punctuation">)</span><span class="token punctuation">;</span>changeFragment<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>bFragment <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            bFragment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// ç‚¹å‡»è·³è½¬æ—¶ï¼Œå…ˆé€šè¿‡æ ‡ç­¾è·å–AFragment</span>        <span class="token class-name">Fragment</span> fragment <span class="token operator">=</span> <span class="token function">getFragmentManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFragmentByTag</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>fragment <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// å°†Aéšè—ï¼Œå¹¶ä¸”å°†Bæ·»åŠ è¿›æ¥</span>        <span class="token function">getFragmentManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>frag_layout<span class="token punctuation">,</span> bFragment<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addToBackStack</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">commitAllowingStateLoss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>            <span class="token function">getFragmentManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>frag_layout<span class="token punctuation">,</span> bFragment<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addToBackStack</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">commitAllowingStateLoss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æœ€åçš„è¿è¡Œæ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/fragment/kqlip-yosnh.gif" loading="lazy"></p><h2 id="æ•°æ®ä¼ é€’"><a href="#æ•°æ®ä¼ é€’" class="headerlink" title="æ•°æ®ä¼ é€’"></a>æ•°æ®ä¼ é€’</h2><p>æ•°æ®ä¼ é€’æ€»å…±æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ä¸ªæ˜¯ä» Activity ä¼ é€’åˆ° Fragmentï¼Œå¦å¤–ä¸€ä¸ªæ˜¯ä» Fragment åˆ° Activityã€‚ä» Activity åˆ° Fragment é€šè¿‡ Bundle çš„æ–¹å¼ä¼ é€’çš„ã€‚ä» Fragment åˆ° Activity æ˜¯é€šè¿‡è°ƒç”¨ getActivity æ–¹æ³•ï¼Œç„¶ååœ¨è°ƒç”¨ Activity ä¸­çš„å…¬å…±æ–¹æ³•æ¥è¾¾åˆ°æ•°æ®ä¼ é€’çš„ç›®çš„ã€‚</p><h3 id="ä»-Activity-ä¼ é€’åˆ°-Fragment"><a href="#ä»-Activity-ä¼ é€’åˆ°-Fragment" class="headerlink" title="ä» Activity ä¼ é€’åˆ° Fragment"></a>ä» Activity ä¼ é€’åˆ° Fragment</h3><p>ä¸ºäº†è°ƒå–æ–¹ä¾¿ï¼Œæˆ‘ä»¬åœ¨ AFragment ä¸­ç¼–å†™ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œç”¨äºåˆ›å»º AFragment ç¤ºä¾‹ï¼ŒåŒæ—¶å¸¦ä¸€ä¸ªå‚æ•°ç”¨æ¥ä¼ é€’æ•°æ®ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AFragment</span> <span class="token keyword">extends</span> <span class="token class-name">Fragment</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">AFragment</span> <span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token class-name">String</span> data<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">AFragment</span> aFragment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä¼ å…¥å‚æ•°</span>        <span class="token class-name">Bundle</span> bundle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bundle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        bundle<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åœ¨Fragmentä¸­è®¾ç½®å‚æ•°</span>        aFragment<span class="token punctuation">.</span><span class="token function">setArguments</span><span class="token punctuation">(</span>bundle<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> aFragment<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">&#125;</span></code></pre><p>ç„¶åï¼Œåœ¨è§†å›¾åˆ›å»ºå®Œæˆä¹‹åï¼Œä¼šæ‰§è¡Œ onViewCreated æ–¹æ³•ï¼Œæ‰€ä»¥ï¼Œåº”è¯¥åœ¨åˆ›å»ºä¹‹åè·å–ä¼ è¿‡æ¥çš„å€¼å¹¶ä¸”è®¾ç½®å¥½å³å¯</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onViewCreated</span><span class="token punctuation">(</span><span class="token class-name">View</span> view<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// è·å–å‚æ•°</span>    <span class="token class-name">Bundle</span> bundle <span class="token operator">=</span> <span class="token function">getArguments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> data <span class="token operator">=</span> bundle<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span> <span class="token string">"æˆ‘æ˜¯æ´›å¤©ä¾A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// è®¾ç½®æ–‡å­—</span>    <span class="token class-name">TextView</span> textView <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>frag_a<span class="token punctuation">)</span><span class="token punctuation">;</span>    textView<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>åœ¨ ContainerActivity åˆ›å»º Fragment å®ä¾‹ä¸­ï¼Œå°†åˆ›å»ºçš„å®ä¾‹æ›´æ”¹æˆ</p><pre class="language-java" data-language="java"><code class="language-java">aFragment <span class="token operator">=</span> <span class="token class-name">AFragment</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token string">"æˆ‘ä¸æ˜¯FragmentAï¼ŒçœŸéš¾å¬"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æœ€åçœ‹çœ‹æ‰§è¡Œæ•ˆæœ</p><p><img src="/images/Android/fragment/QQ%E6%88%AA%E5%9B%BE20210314173826.jpg" loading="lazy"></p><h3 id="ä»-Fragment-ä¼ é€’åˆ°-Activity"><a href="#ä»-Fragment-ä¼ é€’åˆ°-Activity" class="headerlink" title="ä» Fragment ä¼ é€’åˆ° Activity"></a>ä» Fragment ä¼ é€’åˆ° Activity</h3><p>å› ä¸º Fragment æ˜¯ä¾èµ–äº Activity çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨ Fragment ä¸­é€šè¿‡ getActivity æ–¹æ³•å¾—åˆ° Fragment æ‰€åœ¨çš„ Activityã€‚æœ€ååœ¨è°ƒç”¨å…¶ Activity ä¸­çš„å…¬å¼€çš„æ–¹æ³•å³å¯ã€‚</p><p>é¦–å…ˆï¼Œåœ¨ ContainerActivity  ç¼–å†™ä¸€ä¸ªå…¬å…±æ–¹æ³•ï¼Œæœ¬å®ä¾‹ä¸­çš„å…¬å…±æ–¹æ³•çš„ä¾‹å­å°† Activity ä¸­çš„æ–‡æœ¬ç»„ä»¶é‡æ–°èµ‹å€¼ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ContainerActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Fragment</span> aFragment<span class="token punctuation">,</span> bFragment<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">TextView</span> outerText<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_container<span class="token punctuation">)</span><span class="token punctuation">;</span>        button <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>change_fragment<span class="token punctuation">)</span><span class="token punctuation">;</span>        outerText <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>outer_text<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setOuterText</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       outerText<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>åœ¨ AFragment ä¸­çš„å¸ƒå±€æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæŒ‰é’®ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/lty_a<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        ......    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/btn_change_outer<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æ”¹å˜å¤–éƒ¨æ–‡å­—<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><p>åœ¨ onViewCreated æ–¹æ³•ä¸­ï¼Œè·å–æŒ‰é’®å¹¶è®¾ç½®ç‚¹å‡»äº‹ä»¶ï¼Œç‚¹å‡»äº‹ä»¶ä¸­è·å–å½“å‰çš„ Activity å¹¶ä¸”è°ƒç”¨å…¶ä¸­çš„æ–¹æ³•ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onViewCreated</span><span class="token punctuation">(</span><span class="token class-name">View</span> view<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// æ”¹å˜å¤–éƒ¨çš„æ–‡å­—</span>    changeOuterText <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_change_outer<span class="token punctuation">)</span><span class="token punctuation">;</span>    changeOuterText<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"getActivity()"</span><span class="token punctuation">,</span> <span class="token function">getActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">getActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">ContainerActivity</span><span class="token punctuation">)</span> <span class="token function">getActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setOuterText</span><span class="token punctuation">(</span><span class="token string">"æˆ‘å·²ç»ç‚¸äº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ç‚¹å‡»æŒ‰é’®ä¹‹åçš„æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼Œè¿™ä¸ªâ€œæˆ‘æ˜¯å¤–éƒ¨æ–‡å­—â€æ˜¯å±äº Activity çš„ï¼Œç‚¹å‡»æŒ‰é’®æ—¶å‘ç°æ–‡å­—å†…å®¹å·²ç»å‘ç°å˜åŒ–</p><p><img src="/images/Android/fragment/i99qy-pxm85.gif" loading="lazy"></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¡¹ç›®çš„ä»£ç éƒ½åœ¨ <a href="https://github.com/BestGuo2020/AndroidStudy">AndroidStudy</a> çš„ github ä»“åº“ä¸­ã€‚</p><p>å­¦ä¹ è¿‡ç¨‹ä¸­å‚è€ƒäº†éƒ¨åˆ†åšå®¢</p><ul><li><a href="https://www.jianshu.com/p/21a862dae6f9">https://www.jianshu.com/p/21a862dae6f9</a></li><li><a href="https://www.cnblogs.com/fanglongxiang/p/12149066.html">https://www.cnblogs.com/fanglongxiang/p/12149066.html</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªå®šä¹‰ Android å¯¹è¯æ¡†</title>
      <link href="/journal/custom-dialog/"/>
      <url>/journal/custom-dialog/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>è¯¶ï¼Ÿå°èµ«èµ«ä¸ºä»€ä¹ˆå¾ˆå°‘åœ¨å¸¸ç”¨çš„ app ä¸­çœ‹åˆ°æœ‰ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„å¯¹è¯æ¡†å‘¢ï¼Ÿè€Œä¸”ï¼Œè‡ªå®šä¹‰çš„å¯¹è¯æ¡†åˆå¥½ç¥å¥‡ã€‚è‡ªä»çœ‹äº†å¤©å“¥çš„è‡ªå®šä¹‰çš„ Dialog å¯¹è¯æ¡†ä¹‹åâ€¦â€¦</p><span id="more"></span><h2 id="å‰æƒ…æ¦‚è¦"><a href="#å‰æƒ…æ¦‚è¦" class="headerlink" title="å‰æƒ…æ¦‚è¦"></a>å‰æƒ…æ¦‚è¦</h2><p>ä¹‹å‰åœ¨å­¦ä¹ çš„æ—¶å€™ï¼Œå­¦åˆ°äº†ä½¿ç”¨ Android å†…ç½®çš„ AlertDialog å’Œ ProgressDialog å¯¹è¯æ¡†ã€‚ç„¶åæˆ‘è§åˆ°æŸä¸€äº› app ä¸­éƒ½æ²¡æœ‰è§åˆ°ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„ Dialog ï¼Œéƒ½æ˜¯å»è¿›è¡Œè‡ªå®šä¹‰çš„ã€‚bilibili æœ‰è‡ªå·±çš„å¯¹è¯æ¡†ï¼Œå¾®ä¿¡å’Œ QQ ä¹Ÿæœ‰è‡ªå®šä¹‰çš„å¯¹è¯æ¡†ã€‚</p><p>åé¢çœ‹äº†å¤©å“¥çš„è§†é¢‘å‘ç°ï¼Œå¦‚æœéœ€è¦æ¥è‡ªå®šä¹‰å¯¹è¯æ¡†ã€‚éœ€è¦ç»§æ‰¿è‡ª Dialog è¿™ä¸ªç±»ï¼ˆæˆ‘æƒ³ï¼Œç»§æ‰¿ AlertDialog ä¹Ÿå¯ä»¥å§ï¼Œé‡å†™å®ƒçš„ä¸€äº›æ–¹æ³•åº”è¯¥å°±è¡Œäº†å§ï¼‰ï¼Œç„¶åå†è‡ªå·±å†™ä¸€ä¸ªå¯¹è¯æ¡†çš„å¸ƒå±€å°±å¯ä»¥äº†ã€‚</p><p>ä¸è¿‡ï¼Œè¿™æ¬¡æƒ³æ•´ä¸€ä¸ª iPhone çš„å¯¹è¯æ¡†ã€‚è¯ä¸å¤šè¯´ï¼Œç°åœ¨å¼€å¹²ã€‚</p><p><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic.houfx.com%2Fuploads%2Fzedit%2F2019-01%2F08%2F20190108133540_98649.jpg&refer=http%3A%2F%2Fpic.houfx.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg" alt="ç»™æˆ‘æ•´ä¸€ä¸ª" loading="lazy"></p><h2 id="å¼€å§‹æ•´æ´»"><a href="#å¼€å§‹æ•´æ´»" class="headerlink" title="å¼€å§‹æ•´æ´»"></a>å¼€å§‹æ•´æ´»</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦â€¦â€¦</p><p><del>å½“ç„¶æ˜¯æ–°å»ºä¸€ä¸ªActivityå•¦ã€‚</del></p><h3 id="ç»§æ‰¿ç±»ã€é‡å†™æ–¹æ³•"><a href="#ç»§æ‰¿ç±»ã€é‡å†™æ–¹æ³•" class="headerlink" title="ç»§æ‰¿ç±»ã€é‡å†™æ–¹æ³•"></a>ç»§æ‰¿ç±»ã€é‡å†™æ–¹æ³•</h3><p>æˆ³å•¦ï¼Œå…ˆè¦å»ºç«‹ä¸€ä¸ªç±»ã€‚ç±»åéšä¾¿èµ·ä¸€ä¸ªï¼Œç„¶åç›´æ¥ç»§æ‰¿è‡ª Dialogã€‚ç›´æ¥ç»§æ‰¿å®Œæˆä¹‹åï¼ŒAndroid Studio è‚¯å®šä¼šæœ‰ç”»çº¢è‰²çš„ä¸‹åˆ’çº¿ï¼Œéœ€è¦ä½ æ¥é‡å†™æ„é€ æ–¹æ³•ã€‚é‡å†™æ„é€ æ–¹æ³•ä¹Ÿç®€å•ï¼Œç›´æ¥ç»™ä¸ªæç¤ºï¼Œé‡å†™ä¸€ä¸ªå°±å¥½äº†ï¼Œä¸è¿‡æˆ‘è¿™é‡Œé‡å†™äº†ä¸¤ä¸ªã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomDialog</span> <span class="token keyword">extends</span> <span class="token class-name">Dialog</span><span class="token punctuation">&#123;</span>    <span class="token comment">// ä¼ å…¥å½“å‰çš„ Activity</span>    <span class="token keyword">public</span> <span class="token class-name">CustomDialog</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// ä¼ å…¥ä¸€ä¸ª Activity è¿˜æœ‰ä¸»é¢˜</span>    <span class="token keyword">public</span> <span class="token class-name">CustomDialog</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token keyword">int</span> themeResId<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> themeResId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span></code></pre><p>è¯¶ï¼Ÿé‡å†™å®Œä¹‹åï¼Œæˆ‘è‡ªå®šä¹‰çš„å¯¹è¯æ¡†è‚¯å®šæ˜¯éœ€è¦æœ‰ xml å¸ƒå±€æ–‡ä»¶æ‰èƒ½å¤ŸçœŸæ­£çš„å®ç°å¸ƒå±€å§ã€‚é‡å†™ Dialog ç±»ä¸­çš„ <code>onCreate</code> æ–¹æ³•å°±å¥½å’¯ã€‚</p><p>åœ¨é‡Œé¢è°ƒç”¨ä¸€ä¸ª <code>setContentView</code> æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ç‰¹åˆ«ç†Ÿæ‚‰ï¼Œå°±æ˜¯åœ¨æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª Activity ä¹‹åï¼Œé»˜è®¤é‡å†™çš„ <code>onCreate</code> æ–¹æ³•ä¸­æœ‰è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œç›®çš„å°±æ˜¯åŠ è½½å¸ƒå±€æ–‡ä»¶å’¯ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomDialog</span> <span class="token keyword">extends</span> <span class="token class-name">Dialog</span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token class-name">CustomDialog</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">CustomDialog</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token keyword">int</span> themeResId<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> themeResId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>custom_dialog_layout<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æ—¢ç„¶è¿™æ ·ï¼Œé‡å†™å®Œéœ€è¦ä¹‹åï¼Œå°±å¯ä»¥è‡ªå·±æ¥å¸ƒå±€å¥½ iPhone çš„æç¤ºæ¡†äº†ã€‚</p><h3 id="è‡ªå®šä¹‰å¸ƒå±€"><a href="#è‡ªå®šä¹‰å¸ƒå±€" class="headerlink" title="è‡ªå®šä¹‰å¸ƒå±€"></a>è‡ªå®šä¹‰å¸ƒå±€</h3><p>å¸ƒå±€å‡ºæ¥çš„ iPhone ç•Œé¢éœ€è¦èŠ±ä¸€äº›æ—¶é—´ï¼Œå¯¹è¯æ¡†çš„åˆ¶ä½œè¿˜æ˜¯ç®€å•çš„ï¼Œä¸ä¼šç‰¹åˆ«éš¾ã€‚ä¸è¿‡ç»†èŠ‚è¿˜æ˜¯éœ€è¦æ³¨æ„ä¸€ä¸‹çš„</p><blockquote><p>å®³ï¼Œå…¶å®æˆ‘åœ¨è¿™é‡Œè·³äº†å¥½å¤šå‘ï¼Œæ¯”å¦‚åœ¨è®¾ç½® corners å±æ€§æ—¶ï¼Œè¦è®¾ç½®å®Œ radius å†è®¾ç½®æ¯ä¸€ä¸ªè§’çš„ radius ï¼Œè¿™æ ·å°±ä¸ä¼šæœ‰æŠ¥é”™çš„ç°è±¡ã€‚ä¹‹æ‰€ä»¥ä¼šæŠ¥é”™ï¼Œæ˜¯å› ä¸ºæˆ‘æ˜¯ä»…è®¾ç½®äº†å•ä¸ªè§’çš„ radiusã€‚ä¹Ÿå°±æ˜¯è¯´å±æ€§ radius æ˜¯å¿…é¡»å­˜åœ¨çš„</p><p>åƒä¸€å ‘ï¼Œé•¿ä¸€æ™ºã€‚<del>ä¸‹äº¿æ¬¡è¿˜ä¼šçŠ¯é”™</del></p><p>é”™è¯¯çš„å†™æ³•ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>corners</span>    <span class="token attr-name"><span class="token namespace">android:</span>topLeftRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>topRightRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>bottomLeftRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>bottomRightRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre><p>æ­£ç¡®çš„å†™æ³•ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>corners</span>    <span class="token attr-name"><span class="token namespace">android:</span>radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>topLeftRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>topRightRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>bottomLeftRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>bottomRightRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre></blockquote><h4 id="å¯¹è¯æ¡†å¸ƒå±€"><a href="#å¯¹è¯æ¡†å¸ƒå±€" class="headerlink" title="å¯¹è¯æ¡†å¸ƒå±€"></a>å¯¹è¯æ¡†å¸ƒå±€</h4><p>å¯¹è¯æ¡†å¸ƒå±€çš„ä»£ç ï¼š</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/bg_custom_dialog<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- æ–‡æœ¬æ¡†çš„æ ‡é¢˜éƒ¨åˆ† --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/dialog_title<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>TextView<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@color/colorBlack<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textStyle</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bold<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- æ–‡æœ¬æ¡†çš„å†…å®¹éƒ¨åˆ† --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/dialog_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>12sp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>TextView<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@color/colorBlack<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15sp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginBottom</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- ç”¨å®ƒæ¥ç”»æ¨ªçº¿ï¼Œæˆ‘æ˜¯ä¸æ˜¯å¾ˆæœºæ™ºï¼Œå˜»å˜» --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.5dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#ccc<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- æ°´å¹³çº¿æ€§å¸ƒå±€ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>45dp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- é€€å‡ºæŒ‰é’® --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/dialog_cancel<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cancel<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>16sp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/bg_dialog_left_btn<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#4E90F3<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- ç”¨å®ƒæ¥ç”»ç«–çº¿ï¼Œæˆ‘æ˜¯ä¸æ˜¯å¾ˆæœºæ™ºï¼Œå˜»å˜» --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.5dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#ccc<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- è®¾ç½®ç¡®è®¤æŒ‰é’®çš„æ ·å¼ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/dialog_ok<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ok<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>16sp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#4E90F3<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/bg_dialog_right_btn<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><h4 id="å¯¹è¯æ¡†æ ·å¼"><a href="#å¯¹è¯æ¡†æ ·å¼" class="headerlink" title="å¯¹è¯æ¡†æ ·å¼"></a>å¯¹è¯æ¡†æ ·å¼</h4><p>å¯¹è¯æ¡†çš„èƒŒæ™¯æ ·å¼å¦‚ä¸‹ï¼š</p><p>è®¾ç½®äº†å¯¹è¯æ¡†çš„è¾¹æ¡†é¢œè‰²ï¼Œå››ä¸ªè§’ï¼Œå’ŒèƒŒæ™¯é¢œè‰²</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shape</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>stroke</span>        <span class="token attr-name"><span class="token namespace">android:</span>color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@color/colorGray<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>corners</span>        <span class="token attr-name"><span class="token namespace">android:</span>radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>solid</span>        <span class="token attr-name"><span class="token namespace">android:</span>color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#ccffffff<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shape</span><span class="token punctuation">></span></span></code></pre><h4 id="æŒ‰é’®çš„æ ·å¼"><a href="#æŒ‰é’®çš„æ ·å¼" class="headerlink" title="æŒ‰é’®çš„æ ·å¼"></a>æŒ‰é’®çš„æ ·å¼</h4><p>ç”±äºä¸¤ä¸ªæŒ‰é’®çš„æ ·å¼ï¼Œåªæœ‰ä¸€è¾¹å‡ºç°åœ†è§’ã€‚é€€å‡ºæŒ‰é’®çš„å·¦ä¸‹æ–¹å‡ºç°åœ†è§’ï¼Œç¡®è®¤æŒ‰é’®çš„å³ä¸‹æ–¹å‡ºç°åœ†è§’ã€‚æ‰€ä»¥éœ€è¦ç¼–å†™ä¸¤ç§ä¸åŒçš„æ ·å¼åˆ†åˆ«å¯¹ä¸¤ä¸ªæŒ‰é’®ä½¿ç”¨</p><p>å·¦ä¸‹è§’æŒ‰é’®æ ·å¼</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selector</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- ä½¿ç”¨selectoræ¥æ”¹å˜å…¶å…ƒç´ çš„çŠ¶æ€ --></span>    <span class="token comment">&lt;!-- æŒ‰ä¸‹å»çš„çŠ¶æ€ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span> <span class="token attr-name"><span class="token namespace">android:</span>state_pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shape</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>solid</span> <span class="token attr-name"><span class="token namespace">android:</span>color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#cccccccc<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token comment">&lt;!-- åœ†è§’ --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>corners</span>                <span class="token attr-name"><span class="token namespace">android:</span>radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>topLeftRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>topRightRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>bottomLeftRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20dp<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>bottomRightRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shape</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- æœªæŒ‰ä¸‹çš„çŠ¶æ€ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span> <span class="token attr-name"><span class="token namespace">android:</span>state_pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shape</span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!-- åœ†è§’ --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>corners</span>                <span class="token attr-name"><span class="token namespace">android:</span>radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>topLeftRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>topRightRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>bottomLeftRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>bottomRightRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shape</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selector</span><span class="token punctuation">></span></span></code></pre><p>å³ä¸‹è§’æŒ‰é’®æ ·å¼</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selector</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- ä½¿ç”¨selectoræ¥æ”¹å˜å…¶å…ƒç´ çš„çŠ¶æ€ --></span>    <span class="token comment">&lt;!-- æŒ‰ä¸‹å»çš„çŠ¶æ€ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span> <span class="token attr-name"><span class="token namespace">android:</span>state_pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shape</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>solid</span> <span class="token attr-name"><span class="token namespace">android:</span>color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#cccccccc<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token comment">&lt;!-- åœ†è§’ --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>corners</span>                <span class="token attr-name"><span class="token namespace">android:</span>radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>topLeftRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>topRightRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>bottomLeftRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>bottomRightRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shape</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- æœªæŒ‰ä¸‹çš„çŠ¶æ€ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span> <span class="token attr-name"><span class="token namespace">android:</span>state_pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shape</span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!-- åœ†è§’ --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>corners</span>                <span class="token attr-name"><span class="token namespace">android:</span>radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>topLeftRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>topRightRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>bottomLeftRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0dp<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>bottomRightRadius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shape</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selector</span><span class="token punctuation">></span></span></code></pre><h4 id="æ›´æ”¹å¯¹è¯æ¡†çš„é»˜è®¤æ ·å¼"><a href="#æ›´æ”¹å¯¹è¯æ¡†çš„é»˜è®¤æ ·å¼" class="headerlink" title="æ›´æ”¹å¯¹è¯æ¡†çš„é»˜è®¤æ ·å¼"></a>æ›´æ”¹å¯¹è¯æ¡†çš„é»˜è®¤æ ·å¼</h4><p>æœ€åï¼Œå°±æ˜¯æ›´æ”¹å¯¹è¯æ¡†çš„é»˜è®¤æ ·å¼äº†ï¼Œä¹Ÿå°±æ˜¯ styles.xml çš„é…ç½®äº†ï¼Œè™½ç„¶è¿™æ ·å­çš„é…ç½®å®¾ä¸æ˜¯ç‰¹åˆ«æ‡‚ã€‚ä½†æ˜¯æ€»æœ‰èƒ½è§£å†³çš„åŠæ³•çš„ã€‚</p><blockquote><p>æˆ‘è®°å¾—åœ¨ä½¿ç”¨ RGB æ¥è¡¨ç¤ºé€æ˜åº¦çš„æ—¶å€™ï¼Œæ˜¯ç”¨ rgba(0, 0, 0, 0.2)ï¼Œä¹Ÿå°±æ˜¯æœ€åä¸€é¡¹æ˜¯é€æ˜çš„ã€‚ä½†æ˜¯åœ¨è¿™ç§ 16 è¿›åˆ¶ä¸‹é¢ã€‚æ¯”å¦‚ #00000000 è¿™ç§çš„ï¼Œé‚£ä¹ˆå®ƒçš„å‰ä¸¤ä½ 00 è¡¨ç¤ºçš„æ˜¯é€æ˜åº¦ã€‚å’Œä¸Šé¢çš„å°æ•°ç‚¹ä¸€æ ·ï¼Œæ•°å€¼è¶Šå°ï¼Œå°±è¶Šé€æ˜ï¼Œå¦åˆ™å°±è¶Šä¸é€æ˜ã€‚</p><p>è¿™ä¸ªä¹Ÿæ˜¯åé¢ä½¿ç”¨è°ƒè‰²æ¿æ‰å‘ç°çš„ã€‚</p></blockquote><p>å¯¹è¯æ¡†æ ·å¼å¦‚ä¸‹</p><blockquote><p>é»˜è®¤çš„ä¸€ä¸ªå¯¹è¯æ¡†æ˜¯ç™½è‰²ï¼Œä¸ºäº†è®©å…¶æ¶ˆå¤±ï¼Œåªå¥½å°†èƒŒæ™¯è¿›è¡Œå®Œå…¨çš„é€æ˜å³å¯</p></blockquote><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CustomDialog<span class="token punctuation">"</span></span> <span class="token attr-name">parent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@android:style/Theme.Dialog<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">    &lt;item name=<span class="token string">"android:windowNoTitle"</span>>true&lt;/item>    &lt;item name=<span class="token string">"android:windowIsFloating"</span>>true&lt;/item>    &lt;item name=<span class="token string">"android:windowBackground"</span>>#00000000&lt;/item></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><h3 id="è§è¯å¥‡è¿¹çš„æ—¶åˆ»"><a href="#è§è¯å¥‡è¿¹çš„æ—¶åˆ»" class="headerlink" title="è§è¯å¥‡è¿¹çš„æ—¶åˆ»"></a>è§è¯å¥‡è¿¹çš„æ—¶åˆ»</h3><p>è¿™äº›æ ·å¼å†™å®Œäº†ï¼Œé‚£æˆ‘ä»¬å°±æ”¾å‡ºæ•ˆæœå›¾</p><p><img src="/images/Android/custom-dialog/Screenshot_20210308_235148.jpg" loading="lazy"></p><p>è¿™ä¹ˆä¼šè¿™ä¹ˆéš¾çœ‹ğŸ˜¨ğŸ˜¨ğŸ˜¨ï¼Œè¿™ä¸å°±æ˜¯é‚£ä¸ªæµè§ˆå™¨çš„é‚£ä¸ªæ¶æ„å¹¿å‘ŠğŸ˜‚ğŸ˜‚ </p><p><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20190208%2F18686ad0f90a4a3486b27f432dade8fb.jpeg&refer=http%3A%2F%2F5b0988e595225.cdn.sohucs.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1617886190&t=6007ebcd1d9faef445f69d6df70f6528" loading="lazy"></p><p>ä¸å¥½æ„æ€ï¼Œæ”¾é”™å›¾äº†ï¼Œè¿™ä¸ªæ‰æ˜¯çœŸçš„ã€‚å·²ç»æ¯”è¾ƒæ¥è¿‘ iPhone çš„é‚£ä¸ªå¯¹è¯æ¡†</p><p><img src="/images/Android/custom-dialog/Screenshot_20210309_103855.jpg" loading="lazy"></p><p>ä¸è¿‡è¿˜æ²¡å®Œï¼Œæ¥ä¸‹æ¥è¿˜è¦è·å–æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ï¼Œä»¥åŠä¸Šé¢çš„æ–‡å­—éƒ½èƒ½è®¾ç½®çš„é‚£ç§ã€‚è¿™ä¸ªå¯¹è¯æ¡†ï¼Œæ‰ç®—æ˜¯çœŸæ­£å¯ä»¥ç”¨çš„å¯¹è¯æ¡†</p><h2 id="æ–‡å­—è®¾ç½®å’Œç‚¹å‡»äº‹ä»¶"><a href="#æ–‡å­—è®¾ç½®å’Œç‚¹å‡»äº‹ä»¶" class="headerlink" title="æ–‡å­—è®¾ç½®å’Œç‚¹å‡»äº‹ä»¶"></a>æ–‡å­—è®¾ç½®å’Œç‚¹å‡»äº‹ä»¶</h2><p>è¦è®¾ç½®å…¶ä¸­çš„æ–‡å­—ï¼Œä»¥åŠè·å–æ§ä»¶ï¼Œéœ€è¦åœ¨é‡Œé¢å£°æ˜ä¸€äº›å˜é‡ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomDialog</span> <span class="token keyword">extends</span> <span class="token class-name">Dialog</span><span class="token punctuation">&#123;</span>    <span class="token comment">// è·å–æ–‡æœ¬æ§ä»¶</span>    <span class="token keyword">private</span> <span class="token class-name">TextView</span> mTitle<span class="token punctuation">,</span> mMessage<span class="token punctuation">,</span> mCancel<span class="token punctuation">,</span> mOk<span class="token punctuation">;</span>    <span class="token comment">// å­—ä½“è®¾ç½®</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> title<span class="token punctuation">,</span> message<span class="token punctuation">,</span> cancel<span class="token punctuation">,</span> ok<span class="token punctuation">;</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">&#125;</span></code></pre><p>å£°æ˜ä¸¤ä¸ªæŒ‰é’®çš„æ¥å£ï¼Œæ–¹ä¾¿å¤–è¾¹å®ç°è¿™ä¸ªæ¥å£ï¼Œç„¶åå¯¹æ¥å£è¿›è¡Œå›è°ƒã€‚æ‰€è°“çš„æ¥å£å›è°ƒï¼Œå…¶å®å°±æ˜¯è¿ç”¨äº†é¢å‘å¯¹è±¡çš„å¤šæ€æ€§è€Œå·²å•¦ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomDialog</span> <span class="token keyword">extends</span> <span class="token class-name">Dialog</span><span class="token punctuation">&#123;</span>    <span class="token comment">// é€€å‡ºäº‹ä»¶æ¥å£</span>    <span class="token keyword">private</span> <span class="token class-name">OnCancelListener</span> cancelListener<span class="token punctuation">;</span>    <span class="token comment">// ç¡®å®šäº‹ä»¶æ¥å£</span>    <span class="token keyword">private</span> <span class="token class-name">OnOkListener</span> okListener<span class="token punctuation">;</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OnCancelListener</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">CustomDialog</span> dialog<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OnOkListener</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">CustomDialog</span> dialog<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ç„¶åå‘¢ï¼Œå°±æ˜¯è®¾ç½®ä¸€äº›æ–‡å­—å’Œç›‘å¬äº‹ä»¶</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomDialog</span> <span class="token keyword">extends</span> <span class="token class-name">Dialog</span><span class="token punctuation">&#123;</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment">/**     * è®¾ç½®å¼¹çª—æ ‡é¢˜     *     * @param title æ ‡é¢˜     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token class-name">String</span> title<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> title<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * è®¾ç½®å¼¹çª—æ¶ˆæ¯     *     * @param message æ¶ˆæ¯     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> message<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * è®¾ç½®é€€å‡ºæŒ‰é’®ä»¥åŠç›‘å¬äº‹ä»¶     *     * @param cancel é€€å‡ºæŒ‰é’®æ–‡å­—     * @param cancelListener æŒ‰é’®ç‚¹å‡»äº‹ä»¶     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCancel</span><span class="token punctuation">(</span><span class="token class-name">String</span> cancel<span class="token punctuation">,</span> <span class="token class-name">OnCancelListener</span> cancelListener<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>cancel <span class="token operator">=</span> cancel<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>cancelListener <span class="token operator">=</span> cancelListener<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * è®¾ç½® OK æŒ‰é’®ä»¥åŠç›‘å¬äº‹ä»¶     *     * @param ok ç¡®å®šæŒ‰é’®æ–‡å­—     * @param okListener ç¡®å®šæŒ‰é’®äº‹ä»¶     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setOk</span><span class="token punctuation">(</span><span class="token class-name">String</span> ok<span class="token punctuation">,</span> <span class="token class-name">OnOkListener</span> okListener<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>ok <span class="token operator">=</span> ok<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>okListener <span class="token operator">=</span> okListener<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æœ€åå°±æ˜¯æ‰¾åˆ°æ§ä»¶ï¼Œç„¶åè®¾ç½®ç‚¹å‡»äº‹ä»¶å’Œç›¸å…³çš„æ–‡å­—å°±è¡Œäº†</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomDialog</span> <span class="token keyword">extends</span> <span class="token class-name">Dialog</span><span class="token punctuation">&#123;</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è‡ªé€‚åº”å®½é«˜</span>        <span class="token class-name">OtherUtils</span><span class="token punctuation">.</span><span class="token function">adjustDialog</span><span class="token punctuation">(</span><span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span><span class="token function">getWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è½½å…¥è‡ªå®šä¹‰çš„å¯¹è¯æ¡†æ ·å¼</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>custom_dialog_layout<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·å–</span>        mTitle <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>dialog_title<span class="token punctuation">)</span><span class="token punctuation">;</span>        mMessage <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>dialog_content<span class="token punctuation">)</span><span class="token punctuation">;</span>        mCancel <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>dialog_cancel<span class="token punctuation">)</span><span class="token punctuation">;</span>        mOk <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>dialog_ok<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è®¾ç½®ç›¸å…³æ–‡å­—ï¼Œåˆ¤æ–­è®¾ç½®çš„å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            mTitle<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            mMessage<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>cancel<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            mCancel<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>cancel<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>ok<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            mOk<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>ok<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// è®¾ç½®é€€å‡ºç›‘å¬äº‹ä»¶</span>        mCancel<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>cancelListener <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    cancelListener<span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">CustomDialog</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token function">dismiss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è®¾ç½®ç¡®å®šç›‘å¬äº‹ä»¶</span>        mOk<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>okListener <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                    okListener<span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">CustomDialog</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token function">dismiss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æœ€åçš„æ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/custom-dialog/Screenshot_20210309_201312.jpg" loading="lazy"></p><p>å¯ä»¥ç‚¹å‡»å‡ºæ¥çš„æ•ˆæœ</p><p><img src="/images/Android/custom-dialog/e0iy1-qywc9.gif" loading="lazy"></p><h2 id="å¦‚ä½•è°ƒç”¨"><a href="#å¦‚ä½•è°ƒç”¨" class="headerlink" title="å¦‚ä½•è°ƒç”¨"></a>å¦‚ä½•è°ƒç”¨</h2><p>è°ƒç”¨çš„æ–¹å¼éå¸¸ç®€å•ï¼Œå°±åƒæ˜¯åˆ›å»º AlertDialog.Builder ä¸€æ ·ï¼Œè°ƒç”¨æ–¹æ³•å»è®¾ç½®å°±å¥½äº†ã€‚ä»¥ä¸‹æ˜¯è°ƒç”¨ç¤ºä¾‹</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// è¿™é‡ŒæŠŠ styles.xml ä¸­è‡ªå®šä¹‰çš„æ ·å¼è°ƒå…¥è¿›æ¥</span><span class="token class-name">CustomDialog</span> customDialog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomDialog</span><span class="token punctuation">(</span><span class="token class-name">AlertDialogActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>CustomDialog<span class="token punctuation">)</span><span class="token punctuation">;</span>customDialog<span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">"è­¦å‘Š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>customDialog<span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token string">"ä½ çš„æ‰‹æœºç”µé‡è¿‡ä½ï¼Œè¯·å……ç”µ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>customDialog<span class="token punctuation">.</span><span class="token function">setCancel</span><span class="token punctuation">(</span><span class="token string">"å–æ¶ˆ"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">CustomDialog<span class="token punctuation">.</span>OnCancelListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">CustomDialog</span> dialog<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">AlertDialogActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"ç‚¹å‡»äº†å–æ¶ˆæŒ‰é’®"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>customDialog<span class="token punctuation">.</span><span class="token function">setOk</span><span class="token punctuation">(</span><span class="token string">"ç¡®å®š"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">CustomDialog<span class="token punctuation">.</span>OnOkListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">CustomDialog</span> dialog<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">AlertDialogActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"ç‚¹å‡»äº†ç¡®å®šæŒ‰é’®"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>customDialog<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¡¹ç›®çš„ä»£ç éƒ½åœ¨ <a href="https://github.com/BestGuo2020/AndroidStudy">AndroidStudy</a> çš„ github ä»“åº“ä¸­ã€‚</p><p>å‚è€ƒäº†ä»¥ä¸‹ï¼š</p><ul><li><a href="https://blog.csdn.net/woshi_awei/article/details/99664527">https://blog.csdn.net/woshi_awei/article/details/99664527</a></li><li><a href="https://www.cnblogs.com/cyanfei/archive/2012/07/27/2612023.html">https://www.cnblogs.com/cyanfei/archive/2012/07/27/2612023.html</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢å‘å¯¹è±¡æ–¹æ³•</title>
      <link href="/journal/UML-totoral/"/>
      <url>/journal/UML-totoral/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>OOï¼šå»ºç«‹å¯¹è±¡çš„æ€ç»´æ–¹å¼ï¼Œå¯¹é¢å‘å¯¹è±¡æ€æƒ³å’Œç†è®ºæœ‰è¿›ä¸€æ­¥çš„ç†è§£é¢å‘å¯¹è±¡æŠ€æœ¯æ˜¯ä¸€ç§å»ºæ¨¡ç†è®ºã€‚</p><p>UMLï¼šèƒ½å¤Ÿç†Ÿç»ƒåœ°ä½¿ç”¨UMLè¡¨è¾¾é¢å‘å¯¹è±¡çš„è®¾è®¡æ€æƒ³ï¼Œä½“ç°ooçš„å»ºæ¨¡è¯­è¨€ï¼Œæ˜¯å°† OO ç†è®ºè½¬åŒ–ä¸ºå®è·µçš„å·¥å…·ã€‚</p><p>MODELï¼šè¿ç”¨é¢å‘å¯¹è±¡æŠ€æœ¯çš„ä¸€èˆ¬åŸåˆ™å’Œæ¨¡å¼è¿›è¡Œåº”ç”¨ç³»ç»Ÿçš„åˆ†æå’Œè®¾è®¡å»ºæ¨¡ã€‚å»ºæ¨¡æ˜¯æœ€ç»ˆç›®çš„ã€‚</p><p>8 æ¬¡å®éªŒï¼Œè€ƒå‹¤ 20% ï¼‹ å®éªŒæŠ¥å‘Š 40% ï¼‹ æœŸæœ«å¤§ä½œä¸š 40%</p><span id="more"></span><h2 id="è½¯ä»¶å·¥ç¨‹å’Œé¢å‘å¯¹è±¡æ–¹æ³•"><a href="#è½¯ä»¶å·¥ç¨‹å’Œé¢å‘å¯¹è±¡æ–¹æ³•" class="headerlink" title="è½¯ä»¶å·¥ç¨‹å’Œé¢å‘å¯¹è±¡æ–¹æ³•"></a>è½¯ä»¶å·¥ç¨‹å’Œé¢å‘å¯¹è±¡æ–¹æ³•</h2><p>åœ¨æ²¡æœ‰è½¯ä»¶å·¥ç¨‹ä¹‹å‰ï¼Œç”±äºé¡¹ç›®çš„è§„æ¨¡è¶Šå¤§ï¼Œå¯¼è‡´é¡¹ç›®çš„ä¸å¯æ§ï¼Œä½¿å¾—é«˜è´¨é‡çš„è½¯ä»¶å¼€å‘çš„å›°éš¾ã€‚</p><p>äº§å“è´¨é‡å¾—ä¸åˆ°ä¿éšœï¼Œå·¥ä½œæ•ˆç‡ä½ä¸‹ï¼Œå¼€å‘æˆæœ¬ä¸¥é‡è¶…æ”¯ç­‰ç­‰â€¦..</p><h2 id="è½¯ä»¶å·¥ç¨‹çš„ç›®æ ‡"><a href="#è½¯ä»¶å·¥ç¨‹çš„ç›®æ ‡" class="headerlink" title="è½¯ä»¶å·¥ç¨‹çš„ç›®æ ‡"></a>è½¯ä»¶å·¥ç¨‹çš„ç›®æ ‡</h2><ul><li>ä½¿è½¯ä»¶å¼€å‘çš„æˆæœ¬èƒ½å¤Ÿæ§åˆ¶åœ¨é¢„è®¡çš„åˆç†èŒƒå›´å†…ã€‚</li><li>ä½¿è½¯ä»¶äº§å“çš„å„é¡¹åŠŸèƒ½å’Œæ€§èƒ½èƒ½å¤Ÿæ»¡è¶³ç”¨æˆ·éœ€æ±‚ã€‚</li><li>æé«˜è½¯ä»¶äº§å“çš„è´¨é‡ã€‚</li><li>æé«˜è½¯ä»¶äº§å“çš„å¯é æ€§ã€‚</li><li>ä½¿ç”Ÿäº§å‡ºæ¥çš„è½¯ä»¶äº§å“æ˜“äºç§»æ¤ã€ç»´æŠ¤ã€å‡çº§å’Œä½¿ç”¨ã€‚ä½¿è½¯ä»¶äº§å“çš„å¼€å‘å‘¨æœŸèƒ½å¤Ÿæ§åˆ¶åœ¨é¢„è®¡çš„åˆç†æ—¶é—´èŒƒå›´å†…ã€‚</li></ul><h2 id="é¢å‘å¯¹è±¡çš„æ–¹æ³•"><a href="#é¢å‘å¯¹è±¡çš„æ–¹æ³•" class="headerlink" title="é¢å‘å¯¹è±¡çš„æ–¹æ³•"></a>é¢å‘å¯¹è±¡çš„æ–¹æ³•</h2><p>å¯ç»´æŠ¤ã€å¯æœç”¨ã€å¯æ‰©å±•ã€çµæ´»æ€§å¥½ã€‚</p><p>é¢å‘å¯¹è±¡åˆ†æè®¾è®¡ç¼–ç¨‹æ€æƒ³ï¼Œé€šè¿‡å°è£…ã€ç»§æ‰¿ã€å¤šæ€æŠŠç¨‹åºçš„è€¦åˆåº¦é™ä½ï¼ˆä¼ ç»Ÿå°åˆ·æœ¯çš„é—®é¢˜å°±åœ¨äºæ‰€æœ‰çš„å­—éƒ½åˆ»åœ¨åŒä¸€ç‰ˆé¢ä¸Šé€ æˆè€¦åˆåº¦å¤ªé«˜æ‰€è‡´ï¼‰ï¼Œä½¿ç”¨è®¾è®¡æ¨¡å¼ä½¿å¾—ç¨‹åºæ›´åŠ çš„çµæ´»ï¼Œå®¹æ˜“ä¿®æ”¹ï¼Œå¹¶ä¸”æ˜“äºå¤ç”¨ã€‚</p><h2 id="ç»“æ„åŒ–å’Œé¢å‘å¯¹è±¡çš„åŒºåˆ«"><a href="#ç»“æ„åŒ–å’Œé¢å‘å¯¹è±¡çš„åŒºåˆ«" class="headerlink" title="ç»“æ„åŒ–å’Œé¢å‘å¯¹è±¡çš„åŒºåˆ«"></a>ç»“æ„åŒ–å’Œé¢å‘å¯¹è±¡çš„åŒºåˆ«</h2><ul><li>ç»“æ„åŒ–æ€ç»´ç”¨è¿‡ç¨‹åˆ»ç”»æ•°æ®é—´å…³ç³»</li><li>å¯¹è±¡æ€ç»´ç›´æ¥ç”¨ç±»è¡¨è¾¾æ•°æ®é—´å…³ç³»</li><li>ç»“æ„åŒ–ä¸­ï¼Œæ•°æ®æ˜¯æ­»çš„ï¼Œå…¨éƒ¨ä¾èµ–ç®—æ³•æ“ä½œ</li><li>å¯¹è±¡æ€ç»´ä¸­ï¼Œæ•°æ®æ˜¯æ´»çš„ï¼Œâ€œå¥¹â€çŸ¥é“è‡ªå·±çš„ä¿¡æ¯ï¼ˆå±æ€§ï¼‰ï¼Œå¹¶èƒ½å®Œæˆè‡ªå·±çš„å·¥ä½œï¼ˆæ“ä½œ)</li><li>ç»“æ„åŒ–æ€ç»´æ›´åƒæ˜¯ä¸€ä¸ªäººåœ¨è§£å†³æ‰€æœ‰é—®é¢˜å¯¹è±¡æ€ç»´æ›´åƒæ˜¯ä¸€ä¸ªå›¢é˜Ÿçš„åˆ†å·¥åä½œ</li></ul><h2 id="é¢å‘å¯¹è±¡çš„ä¼˜ç‚¹"><a href="#é¢å‘å¯¹è±¡çš„ä¼˜ç‚¹" class="headerlink" title="é¢å‘å¯¹è±¡çš„ä¼˜ç‚¹"></a>é¢å‘å¯¹è±¡çš„ä¼˜ç‚¹</h2><ul><li>é¡ºåº”äººç±»æ€ç»´ä¹ æƒ¯ï¼šè®©è½¯ä»¶å¼€å‘äººå‘˜åœ¨<font color="red">è§£ç©ºé—´</font>ä¸­ç›´æ¥æ¨¡æ‹Ÿ<font color="red">é—®é¢˜ç©ºé—´</font>ä¸­çš„å¯¹è±¡åŠå…¶è¡Œä¸º</li><li>ç¨³å®šï¼šè¾ƒå°çš„éœ€æ±‚å˜åŒ–ä¸ä¼šå¯¼è‡´ç³»ç»Ÿç»“æ„å¤§çš„æ”¹å˜å½“éœ€æ±‚å˜åŒ–æ—¶ï¼ŒåŠŸèƒ½æœ€æ˜“å˜ï¼Œæ•°æ®è¾ƒæ˜“å˜ï¼Œå¯¹è±¡è¾ƒç¨³å®šã€‚</li><li>å¤ç”¨ï¼š<ul><li>ä»£ç é‡ç”¨ï¼šç±»åº“ã€æ¡†æ¶ç­‰é‡ç”¨æœºåˆ¶</li><li>æé«˜è´¨é‡ï¼šå‡å°‘ç”±äºç¼–åˆ¶æ–°çš„ç³»ç»Ÿä»£ç è€Œäº§ç”Ÿçš„æˆæœ¬</li><li>é€šè¿‡ç»§æ‰¿ã€å…³è”ã€å°è£…ç­‰æ‰‹æ®µ</li></ul></li></ul><h2 id="UMLå›¾"><a href="#UMLå›¾" class="headerlink" title="UMLå›¾"></a>UMLå›¾</h2><p>åŸºäºé¢å‘å¯¹è±¡çš„åˆ†æä¸è®¾è®¡æˆ‘ä»¬éœ€è¦ä½¿ç”¨ uml å›¾æ¥è¡¨ç¤ºå‡ºæ¥ï¼Œæœ‰ä»¥ä¸‹å‡ ç§å›¾ã€‚</p><p>ä¸è¿‡ä½¿ç”¨ä¸­æ–‡è¯´è¿™æ˜¯ä»€ä¹ˆå›¾ï¼Œå°±çœŸçš„å¤´ç–¼ï¼Œå°¤å…¶æ˜¯åˆšåˆšå­¦ä¹ çš„æ—¶å€™ï¼Œå¾ˆå®¹æ˜“æ··æ‰ï¼Œæ‰€ä»¥è¿˜æ˜¯ç”¨è‹±æ–‡æ¥è§£é‡Šã€‚</p><h3 id="Class-Diagram"><a href="#Class-Diagram" class="headerlink" title="Class Diagram"></a>Class Diagram</h3><p>ç±»å›¾ï¼Œæ„Ÿè§‰å¼€å‘è¿‡ java å¯¹è¿™ä¸ªä¼šéå¸¸ç†Ÿæ‚‰ï¼Œå›¾ä¾‹å¦‚ä¸‹</p><p><img src="/images/uml/ClassDiagram.png" loading="lazy"></p><h3 id="Sequence-Diagram"><a href="#Sequence-Diagram" class="headerlink" title="Sequence Diagram"></a>Sequence Diagram</h3><p>é¡ºåºå›¾</p><p><img src="/images/uml/SequenceDiagram.png" loading="lazy"></p><h3 id="Collaboration-Diagram"><a href="#Collaboration-Diagram" class="headerlink" title="Collaboration Diagram"></a>Collaboration Diagram</h3><p>åä½œå›¾ï¼Œæœ‰æ—¶å€™ä¹Ÿå«é€šä¿¡å›¾ï¼Œæä¸æ‡‚ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå¤šçš„æ„æ€ã€‚<br>å®³~</p><p><img src="/images/uml/CollaborationDialog.png" loading="lazy"></p><h3 id="Activity-Diagram"><a href="#Activity-Diagram" class="headerlink" title="Activity Diagram"></a>Activity Diagram</h3><p>æ´»åŠ¨å›¾</p><p><img src="/images/uml/ActivityDiagram.png" loading="lazy"></p><h3 id="StateChart-Diagram"><a href="#StateChart-Diagram" class="headerlink" title="StateChart Diagram"></a>StateChart Diagram</h3><p>çŠ¶æ€å›¾</p><p><img src="/images/uml/StatechartDiagram.png" loading="lazy"></p>]]></content>
      
      
      <categories>
          
          <category> UML è¯¾å ‚ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> UML </tag>
            
            <tag> è½¯ä»¶å·¥ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The UML</title>
      <link href="/journal/the-uml/"/>
      <url>/journal/the-uml/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä»€ä¹ˆæ˜¯-UML"><a href="#ä»€ä¹ˆæ˜¯-UML" class="headerlink" title="ä»€ä¹ˆæ˜¯ UML"></a>ä»€ä¹ˆæ˜¯ UML</h2><p>UMLæ˜¯ä¸€ç§æ ‡å‡†çš„å›¾å½¢åŒ–å»ºæ¨¡è¯­è¨€ï¼Œæ˜¯é¢å‘å¯¹è±¡åˆ†æä¸è®¾è®¡çš„æ ‡å‡†è¡¨ç¤ºã€‚</p><p>å®ƒï¼Œä¸æ˜¯ä¸€ç§å¯è§†åŒ–çš„ç¨‹åºè®¾è®¡è¯­è¨€,è€Œæ˜¯ä¸€ç§å¯è§†åŒ–çš„å»ºæ¨¡è¯­è¨€(ç”¨äºåˆ†æè®¾è®¡)ï¼›ä¸æ˜¯å·¥å…·æˆ–çŸ¥è¯†åº“çš„è§„æ ¼è¯´æ˜,è€Œæ˜¯ä¸€ç§å»ºæ¨¡è¯­è¨€è§„æ ¼è¯´æ˜ï¼Œæ˜¯ä¸€ç§è¡¨ç¤ºçš„æ ‡å‡†ã€‚</p><p>ä¸æ˜¯è¿‡ç¨‹ï¼Œä¹Ÿä¸æ˜¯æ–¹æ³•ï¼Œä½†å…è®¸ä»»ä½•ä¸€ç§è¿‡ç¨‹å’Œæ–¹æ³•ä½¿ç”¨å®ƒã€‚</p><span id="more"></span><h2 id="ä¸ºä»€ä¹ˆè¦å»ºæ¨¡"><a href="#ä¸ºä»€ä¹ˆè¦å»ºæ¨¡" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å»ºæ¨¡"></a>ä¸ºä»€ä¹ˆè¦å»ºæ¨¡</h2><h3 id="å»ºæ¨¡çš„ç›®çš„"><a href="#å»ºæ¨¡çš„ç›®çš„" class="headerlink" title="å»ºæ¨¡çš„ç›®çš„"></a>å»ºæ¨¡çš„ç›®çš„</h3><ol><li><p>æ¨¡å‹æœ‰åŠ©äºæŒ‰ç…§æ‰€éœ€çš„æ ·å¼å¯è§†åŒ–ï¼ˆVISUALIZEï¼‰ç³»ç»Ÿ</p></li><li><p>æ¨¡å‹èƒ½å¤Ÿæè¿°ï¼ˆSPECIFYï¼‰ç³»ç»Ÿçš„ç»“æ„å’Œè¡Œä¸º</p></li><li><p>æ¨¡å‹æä¾›æ„é€ ï¼ˆCONSTRUCTï¼‰ç³»ç»Ÿçš„æ¨¡æ¿</p></li><li><p>æ¨¡å‹å¯ä»¥æ–‡æ¡£åŒ–ï¼ˆDOCUMENTï¼‰è®¾è®¡å†³ç­–</p></li></ol><h3 id="å»ºæ¨¡çš„åŸåˆ™"><a href="#å»ºæ¨¡çš„åŸåˆ™" class="headerlink" title="å»ºæ¨¡çš„åŸåˆ™"></a>å»ºæ¨¡çš„åŸåˆ™</h3><ol><li>é€‰æ‹©åˆé€‚çš„æ¨¡å‹</li><li>æ¨¡å‹å…·æœ‰ä¸åŒçš„ç²¾ç¡®ç¨‹åº¦</li><li>æœ€å¥½çš„æ¨¡å‹æ˜¯ä¸ç°å®ç›¸è”ç³»</li><li>éœ€è¦ä»å¤šä¸ªè§†è§’åˆ›å»ºä¸åŒçš„æ¨¡å‹ï¼Œå•ä¸€çš„æ¨¡å‹æ˜¯ä¸å¤Ÿçš„</li></ol><h2 id="ä»€ä¹ˆæƒ…å†µä¸‹æ¨èä½¿ç”¨UML"><a href="#ä»€ä¹ˆæƒ…å†µä¸‹æ¨èä½¿ç”¨UML" class="headerlink" title="ä»€ä¹ˆæƒ…å†µä¸‹æ¨èä½¿ç”¨UML"></a>ä»€ä¹ˆæƒ…å†µä¸‹æ¨èä½¿ç”¨UML</h2><ol><li>OO æ–¹æ³•æ˜¯é¡¹ç›®å†³å®šé‡‡ç”¨çš„æ–¹æ³•è®ºï¼Œæ˜¯æ•´ä¸ªé¡¹ç›®æˆ–äº§å“æˆåŠŸçš„å…³é”®</li><li>ç³»ç»Ÿè§„æ¨¡æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦ç”¨å›¾å½¢æŠ½è±¡åœ°è¡¨è¾¾å¤æ‚æ¦‚å¿µï¼Œå¢å¼ºè®¾è®¡çš„çµæ´»æ€§ã€å¯è¯»æ€§å’Œå¯ç†è§£æ€§ï¼Œä»¥ä¾¿æš´éœ²æ·±å±‚æ¬¡çš„è®¾è®¡é—®é¢˜ï¼Œé™ä½å¼€å‘é£é™©</li><li>ç»„ç»‡å¸Œæœ›è®°å½•å·²æˆåŠŸé¡¹ç›®ã€äº§å“çš„å…¬å…±è®¾è®¡æ–¹æ¡ˆï¼Œåœ¨å¼€å‘æ–°é¡¹ç›®æ—¶å¯ä»¥å‚è€ƒã€é‡ç”¨è¿‡å»çš„è®¾è®¡ï¼Œä»¥èŠ‚çœæŠ•å…¥ï¼Œæé«˜å¼€å‘æ•ˆç‡å’Œæ•´ä½“æˆåŠŸç‡</li><li>æœ‰å¿…è¦é‡‡ç”¨ä¸€å¥—é€šç”¨çš„å›¾å½¢è¯­è¨€å’Œç¬¦å·ä½“ç³»æè¿°ç»„ç»‡çš„ä¸šåŠ¡æµç¨‹å’Œè½¯ä»¶éœ€æ±‚ï¼Œä¿ƒè¿›ä¸šåŠ¡äººå‘˜ã€å¼€å‘äººå‘˜ä¹‹é—´ä¸€è‡´ã€é«˜æ•ˆåœ°äº¤æµ</li></ol><h2 id="ä»€ä¹ˆæƒ…å†µä¸‹ä¸é€‚åˆ"><a href="#ä»€ä¹ˆæƒ…å†µä¸‹ä¸é€‚åˆ" class="headerlink" title="ä»€ä¹ˆæƒ…å†µä¸‹ä¸é€‚åˆ"></a>ä»€ä¹ˆæƒ…å†µä¸‹ä¸é€‚åˆ</h2><p>UMLä¸æ˜¯ä¸‡èƒ½ï¼Œæœ‰äº›åœºåˆå¹¶ä¸é€‚åˆ</p><ul><li>ä¼ ç»Ÿçš„åšæ³•å·²å®Œå…¨é€‚ç”¨ï¼Œå¯¹ OOADï¼ˆé¢å‘å¯¹è±¡çš„è®¾è®¡ä¸åˆ†æï¼‰ çš„è¦æ±‚ä¹Ÿä¸é«˜ï¼Œé¡¹ç›®éå¸¸æˆåŠŸï¼Œæ— æ”¹è¿›å¿…è¦ã€‚</li><li>å¼€å‘çš„ç³»ç»Ÿæ¯”è¾ƒç®€å•ï¼Œç›´æ¥ç”¨æºç é…ä¸Šå°‘é‡çš„æ–‡å­—å°±èƒ½è§£å†³é—®é¢˜ï¼Œè½¯ä»¶å¼€å‘æ–‡æ¡£ä¹Ÿæ— éœ€æ·»åŠ å›¾å½¢æ¥è¾…åŠ©è¯´æ˜ã€‚</li><li>å¼€å‘çš„ç³»ç»Ÿæœ¬èº«ä¸å±äº OO æ–¹æ³•ã€UML é€‚ç”¨èŒƒå›´</li></ul><h2 id="UML-åŸºç¡€ç»“æ„å’Œä¸Šå±‚ç»“æ„"><a href="#UML-åŸºç¡€ç»“æ„å’Œä¸Šå±‚ç»“æ„" class="headerlink" title="UML åŸºç¡€ç»“æ„å’Œä¸Šå±‚ç»“æ„"></a>UML åŸºç¡€ç»“æ„å’Œä¸Šå±‚ç»“æ„</h2><h3 id="UMLåŸºç¡€ç»“æ„ï¼ˆInfrastructureï¼‰"><a href="#UMLåŸºç¡€ç»“æ„ï¼ˆInfrastructureï¼‰" class="headerlink" title="UMLåŸºç¡€ç»“æ„ï¼ˆInfrastructureï¼‰"></a>UMLåŸºç¡€ç»“æ„ï¼ˆInfrastructureï¼‰</h3><ul><li>å³ UML å…ƒæ¨¡å‹</li><li>ä½¿ä¹‹æ›´åŠ æ¨¡å—åŒ–ï¼Œæ›´æ˜“äºæ‰©å±•</li><li>ä¸UMLå…¶å®ƒè§„èŒƒæ›´åŠ ä¿æŒä¸€è‡´ï¼ˆMOFï¼‰</li></ul><h4 id="MOF-å››å±‚æ¨¡å‹"><a href="#MOF-å››å±‚æ¨¡å‹" class="headerlink" title="MOF å››å±‚æ¨¡å‹"></a>MOF å››å±‚æ¨¡å‹</h4><ul><li>å…ƒå…ƒæ¨¡å‹å±‚(M3)<ul><li>åŒ…å«äº†å®šä¹‰å»ºæ¨¡è¯­è¨€æ‰€éœ€çš„å…ƒç´ (UMLåŸºç¡€ç»“æ„)</li><li>METACLASSï¼ŒMETAATTRIBUTEï¼ŒMETAOPERATION</li></ul></li><li>å…ƒæ¨¡å‹å±‚(M2)<ul><li>å®šä¹‰äº†ä¸€ç§å»ºæ¨¡è¯­è¨€çš„ç»“æ„å’Œè¯­æ³•(UMLä¸Šå±‚ç»“æ„)</li><li>å¦‚UML: CLASSï¼ŒATTRIBUTEï¼ŒOPERATION</li></ul></li><li>æ¨¡å‹å±‚(M1)<ul><li>å®šä¹‰äº†ä¸€ä¸ªå…·ä½“çš„ç³»ç»Ÿçš„æ¨¡å‹</li><li>å¦‚é‡‡ç”¨ UML è¡¨ç¤ºçš„æŸç³»ç»Ÿæ¨¡å‹</li></ul></li><li>è¿è¡Œæ—¶(MO)<ul><li>åŒ…å«äº†ä¸€ä¸ªæ¨¡å‹çš„å¯¹è±¡åœ¨è¿è¡Œæ—¶çš„çŠ¶æ€ç­‰</li><li>å¦‚æŸç³»ç»Ÿè¿è¡Œæ—¶çš„å¯¹è±¡å’Œæ•°æ®æ¨¡å‹</li></ul></li></ul><h3 id="UMLä¸Šå±‚ç»“æ„ï¼ˆSuperstructureï¼‰"><a href="#UMLä¸Šå±‚ç»“æ„ï¼ˆSuperstructureï¼‰" class="headerlink" title="UMLä¸Šå±‚ç»“æ„ï¼ˆSuperstructureï¼‰"></a>UMLä¸Šå±‚ç»“æ„ï¼ˆSuperstructureï¼‰</h3><ul><li>æ˜¯æŒ‡æ™®é€šç”¨æˆ·ä½¿ç”¨çš„UMLè¯­æ³•ã€è¯­ä¹‰ä»¥åŠç¬¦å·è¡¨ç¤º</li><li>ä½¿UMLæ›´å…·å¯ç”¨æ€§</li></ul><h2 id="æ„é€ å—ï¼ˆBuilding-Blocksï¼‰"><a href="#æ„é€ å—ï¼ˆBuilding-Blocksï¼‰" class="headerlink" title="æ„é€ å—ï¼ˆBuilding Blocksï¼‰"></a>æ„é€ å—ï¼ˆBuilding Blocksï¼‰</h2><h3 id="äº‹ç‰©ï¼ˆThingsï¼‰"><a href="#äº‹ç‰©ï¼ˆThingsï¼‰" class="headerlink" title="äº‹ç‰©ï¼ˆThingsï¼‰"></a>äº‹ç‰©ï¼ˆThingsï¼‰</h3><ul><li>ç»“æ„ï¼ˆSTRUCTURALï¼‰äº‹ç‰©<ul><li>ç±»ã€æ¥å£</li><li>ç”¨ä¾‹ã€åä½œ</li><li>æ„ä»¶ã€å·¥ä»¶ã€èŠ‚ç‚¹</li></ul></li><li>è¡Œä¸ºï¼ˆBEHAVIORALï¼‰äº‹ç‰©<ul><li>äº¤äº’ã€çŠ¶æ€æœºã€æ´»åŠ¨</li></ul></li><li>åˆ†ç»„ï¼ˆGROUPINGï¼‰äº‹ç‰©<ul><li>åŒ…(ã€æ¡†æ¶ã€æ¨¡å‹ã€å­ç³»ç»Ÿâ€¦)</li></ul></li><li>æ³¨é‡Šï¼ˆANNOTATIONALï¼‰äº‹ç‰©</li></ul><h3 id="å…³ç³»ï¼ˆRelationshipsï¼‰"><a href="#å…³ç³»ï¼ˆRelationshipsï¼‰" class="headerlink" title="å…³ç³»ï¼ˆRelationshipsï¼‰"></a>å…³ç³»ï¼ˆRelationshipsï¼‰</h3><p>ä¾èµ–ã€å…³è”ã€æ³›åŒ–ã€å®ç°</p><h3 id="å›¾ï¼ˆDiagramï¼‰"><a href="#å›¾ï¼ˆDiagramï¼‰" class="headerlink" title="å›¾ï¼ˆDiagramï¼‰"></a>å›¾ï¼ˆDiagramï¼‰</h3><ul><li><p>é™æ€ï¼ˆ7ç§ï¼‰ï¼šç±»å›¾ã€å¯¹è±¡å›¾ã€æ„ä»¶å›¾ã€éƒ¨ç½²å›¾ã€åŒ…å›¾ã€ç»„åˆç»“æ„å›¾ã€å¤–å»“å›¾ã€‚</p></li><li><p>åŠ¨æ€ï¼ˆ7ç§ï¼‰ï¼šé¡ºåºå›¾ã€é€šä¿¡å›¾ã€æ—¶é—´å›¾ã€äº¤äº’çºµè§ˆå›¾ã€æ´»åŠ¨å›¾ã€çŠ¶æ€æœºå›¾ã€ç”¨ä¾‹å›¾ã€‚</p></li></ul><h2 id="è§„æ ¼è¯´æ˜ï¼ˆSPECIFICATIONSï¼‰"><a href="#è§„æ ¼è¯´æ˜ï¼ˆSPECIFICATIONSï¼‰" class="headerlink" title="è§„æ ¼è¯´æ˜ï¼ˆSPECIFICATIONSï¼‰"></a>è§„æ ¼è¯´æ˜ï¼ˆSPECIFICATIONSï¼‰</h2><p>UMLæ¨¡å‹è‡³å°‘å…·æœ‰ä¸¤ç§ç»´åº¦:</p><ul><li><p>å›¾å½¢ç»´åº¦ï¼šä½¿ç”¨å›¾å’Œå›¾æ ‡å¯è§†åŒ–æ¨¡å‹</p></li><li><p>æ–‡æœ¬ç»´åº¦ï¼šå„ç§å»ºæ¨¡å…ƒç´ çš„</p></li></ul><p>è§„æ ¼è¯´æ˜</p><ul><li>æ¨¡å‹å…ƒç´ çš„ç‰¹å¾å’Œè¯­ä¹‰çš„æ–‡æœ¬æè¿°</li><li>å½¢æˆäº†æ‰¿è½½æ¨¡å‹çš„è¯­ä¹‰èƒŒæ¿ï¼ˆSEMANTIC BACKPLANEï¼‰ï¼Œèµ‹äºˆæ¨¡å‹æ„ä¹‰ï¼Œå„ç§å›¾ä»…ä»…æ˜¯è¯¥èƒŒæ¿çš„è§†å›¾æˆ–è€…å¯è§†åŒ–æŠ•å½±</li><li>DEATH BY DIAGRAMï¼ˆç”±äºå›¾å½¢è€Œæ­»äº¡ï¼‰</li></ul>]]></content>
      
      
      <categories>
          
          <category> UML è¯¾å ‚ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> UML </tag>
            
            <tag> è½¯ä»¶å·¥ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android ä¹‹æ–‡ä»¶å­˜å‚¨</title>
      <link href="/journal/file-storage-android/"/>
      <url>/journal/file-storage-android/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰æƒ…æ¦‚è¦"><a href="#å‰æƒ…æ¦‚è¦" class="headerlink" title="å‰æƒ…æ¦‚è¦"></a>å‰æƒ…æ¦‚è¦</h2><p>Android çš„æ–‡ä»¶å­˜å‚¨ä¹Ÿæ˜¯éå¸¸é‡è¦çš„ï¼Œæ¯”å¦‚å¾®ä¿¡ä¸­çš„èŠå¤©æ—¶äº§ç”Ÿçš„è¯­éŸ³ï¼Œè§†é¢‘ï¼Œå›¾ç‰‡ï¼Œæ–‡ä»¶ç­‰ç­‰ã€‚åœ¨è§†é¢‘ app ä¸­ä¸‹è½½çš„è§†é¢‘ï¼ŒæŸæŸéŸ³ä¹ app æ‰€äº§ç”Ÿçš„ç¼“å­˜æ–‡ä»¶ç­‰ç­‰éƒ½æ˜¯éœ€è¦ä¿å­˜åˆ°å®‰å“æ‰‹æœºä¸Šç£ç›˜çš„ã€‚</p><p>ç„¶åï¼Œç”±äºè¿‡å¤šçš„æ–‡ä»¶è¢«ä¿å­˜æˆ–è€…ç¼“å­˜åˆ°å®‰å“æ‰‹æœºçš„æ–‡ä»¶ï¼Œå°±ä¼šå ç”¨éå¸¸å¤šçš„å­˜å‚¨ç©ºé—´ã€‚è¿™ä¹Ÿæ˜¯ä¸€ä¸ªåŸå› ï¼Œè¿˜æœ‰ä¸€ä¸ªåŸå› æ˜¯å› ä¸ºå…¶ app ä¸­æ‰€å¸¦çš„ç´ æå®åœ¨æ˜¯éå¸¸ä¹‹å¤šï¼Œè¿˜æœ‰ç¬¬ä¸‰æ–¹åº“çš„å¯¼å…¥ã€‚æœ‰å¾ˆå¤š app éƒ½æ˜¯äº”å…­åå…†ï¼Œç”šè‡³æ˜¯ä¸Šç™¾å…†çš„éƒ½æœ‰ã€‚åŠ ä¸Šç°åœ¨çš„å­˜å‚¨ç©ºé—´ç‰¹åˆ«å¤§ï¼Œapp å¤§å°ä¹Ÿåœ¨å˜å¤§ã€‚</p><p>åˆšå¼€å§‹å­¦ï¼Œæ‰€æ³¨æ„åˆ°çš„ä¹Ÿå°±è¿™äº›ã€‚</p><span id="more"></span><h3 id="å†…éƒ¨å­˜å‚¨å’Œå¤–éƒ¨å­˜å‚¨"><a href="#å†…éƒ¨å­˜å‚¨å’Œå¤–éƒ¨å­˜å‚¨" class="headerlink" title="å†…éƒ¨å­˜å‚¨å’Œå¤–éƒ¨å­˜å‚¨"></a>å†…éƒ¨å­˜å‚¨å’Œå¤–éƒ¨å­˜å‚¨</h3><p>åœ¨å­¦ä¹ æ–‡ä»¶å­˜å‚¨ä¹‹å‰ï¼Œæˆ‘è¿˜æ˜¯æœ‰å»äº†è§£ Android çš„å†…éƒ¨å­˜å‚¨å’Œå¤–éƒ¨å­˜å‚¨ã€‚</p><p>ä»€ä¹ˆæ˜¯å†…éƒ¨å­˜å‚¨ï¼Œæˆ‘ä»¬ä¸€ç›´è®¤ä¸ºï¼Œæ‰‹æœºå†…ç½®çš„å­˜å‚¨è®¾å¤‡å°±æ˜¯å†…éƒ¨å­˜å‚¨ï¼›ä½¿ç”¨ SD å¡ï¼ŒUç›˜ç­‰è¿™ç§å¤–éƒ¨è®¾å°±æ˜¯å¤–éƒ¨å­˜å‚¨ã€‚åœ¨ Android 4.4 ä¹‹å‰è¿˜ç¡®å®æ˜¯å¦‚æ­¤ï¼Œä¸è¿‡åœ¨ Android 4.4 ä¹‹åã€‚å®‰å“æ‰‹æœºæœ¬èº«çš„å­˜å‚¨ç©ºé—´å˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œä»ä»¥å‰çš„ 16G å˜æˆäº†ç°åœ¨çš„ 512G ï¼Œé‚£ä»–ä»¬è¿™ä¸ªå­˜å‚¨æ˜¯ä¸æ˜¯å†…éƒ¨å­˜å‚¨å‘¢ï¼Ÿ</p><p>ä¸æ˜¯çš„ï¼Œåœ¨ Android 4.4 ä¹‹åï¼Œä»¥ä¸Šæ‰€åˆ—å‡ºçš„ç©ºé—´å¤§å°æ˜¯â€œæœºèº«å­˜å‚¨â€ï¼Œåœ¨æ¦‚å¿µä¸ŠåŒºåˆ†äº†â€œå†…éƒ¨å­˜å‚¨â€å’Œâ€œå¤–éƒ¨å­˜å‚¨â€ã€‚</p><p>å¦‚æœæˆ‘ä»¬åœ¨æ‰‹æœºä¸Šæ’äº†ä¸€å¼  SD å¡ï¼Œé‚£æ€ä¹ˆè·å– SD å¡ä¸Šçš„å­˜å‚¨ä½ç½®å‘¢ï¼Ÿ</p><p>Android æœ‰ç»™æˆ‘ä»¬ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºè°ƒå–å…¨éƒ¨çš„å¤–éƒ¨è·¯å¾„ï¼Œå®ƒå°±æ˜¯ <code>context.getExternalFilesDir()</code>ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥å¾—åˆ°æ‰€æœ‰çš„å¤–éƒ¨è®¾å¤‡çš„å­˜å‚¨ã€‚ä»¥åŠæ¦‚å¿µä¸Šçš„å¤–éƒ¨å­˜å‚¨ã€‚</p><h2 id="å†…éƒ¨å­˜å‚¨"><a href="#å†…éƒ¨å­˜å‚¨" class="headerlink" title="å†…éƒ¨å­˜å‚¨"></a>å†…éƒ¨å­˜å‚¨</h2><p>å†…éƒ¨å­˜å‚¨çš„ä¿å­˜è·¯å¾„æ˜¯åœ¨ <code>/data/data/applicationId</code> è·¯å¾„ä¸‹é¢ï¼Œè¿™ä¸ªè·¯å¾„ç”¨æˆ·ä¸èƒ½é€šè¿‡æ–‡ä»¶ç®¡ç†å™¨ç›´æ¥è®¿é—®åˆ°ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨ Android å‘½ä»¤è¡Œç»ˆç«¯æ¥è®¿é—®ã€‚éœ€è¦è·å– root æƒé™ï¼Œè€Œä¸”ç°åœ¨çš„æ‰‹æœºä½¿ç”¨å·¥å…·æ¥ root çš„æˆåŠŸç‡å®åœ¨æ˜¯å¤ªä½äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®‰å“æ¨¡æ‹Ÿå™¨æŸ¥çœ‹é‡Œé¢çš„å†…å®¹</p><p>å› ä¸ºï¼Œå®‰å“æ¨¡æ‹Ÿå™¨å¯æ˜¯è‡ªå¸¦ root çš„ã€‚</p><p>æˆ‘ä»¬åœ¨å†…éƒ¨å­˜å‚¨çš„ç›®å½•ä¸­å¯ä»¥çœ‹åˆ°ä»¥ä¸‹çš„æ–‡ä»¶å¤¹ï¼Œè¿™äº›æ–‡ä»¶å¤¹å…¨éƒ¨éƒ½æ˜¯ app çš„æ–‡ä»¶å¤¹</p><p><img src="/images/Android/filestorage/QQ%E6%88%AA%E5%9B%BE20210306175230.jpg" loading="lazy"></p><h3 id="å†…éƒ¨å­˜å‚¨çš„ç›®å½•"><a href="#å†…éƒ¨å­˜å‚¨çš„ç›®å½•" class="headerlink" title="å†…éƒ¨å­˜å‚¨çš„ç›®å½•"></a>å†…éƒ¨å­˜å‚¨çš„ç›®å½•</h3><p>SharedPreferencesï¼š<code>/data/data/<applicationId>/shared_prefs</applicationId></code><br>æ•°æ®åº“ç›®å½•ï¼š<code>/data/data/<applicationId>/databases</applicationId></code><br>æ–‡ä»¶ç›®å½•ï¼š<code>/data/data/<applicationId>/files</applicationId></code><br>ç¼“å­˜ç›®å½•ï¼š<code>/data/data/<applicationId>/cache</applicationId></code></p><h3 id="å†…éƒ¨å­˜å‚¨è·¯å¾„çš„æ–¹æ³•è°ƒç”¨"><a href="#å†…éƒ¨å­˜å‚¨è·¯å¾„çš„æ–¹æ³•è°ƒç”¨" class="headerlink" title="å†…éƒ¨å­˜å‚¨è·¯å¾„çš„æ–¹æ³•è°ƒç”¨"></a>å†…éƒ¨å­˜å‚¨è·¯å¾„çš„æ–¹æ³•è°ƒç”¨</h3><p>è·å–å†…éƒ¨å­˜å‚¨å¯¹åº”çš„ä¸‰ä¸ªè·¯å¾„éå¸¸ç®€å•ï¼Œä½¿ç”¨ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•ã€‚è‡³äºç¬¬ä¸€ä¸ª SharedPreferences å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ—¥å¿—<a href="/2021/02/02/shared-preferences/">ã€ŠAndroid æ•°æ®å­˜å‚¨ä¹‹ SharedPreferencesã€‹</a></p><p>æ–‡ä»¶ç›®å½•ï¼š<code>getFilesDir()</code><br>ç¼“å­˜ç›®å½•ï¼š<code>getCachesDir()</code><br>æ•°æ®åº“ç›®å½•ï¼š<code>getDatabasePath()</code></p><h3 id="è¯»å†™å†…éƒ¨å­˜å‚¨"><a href="#è¯»å†™å†…éƒ¨å­˜å‚¨" class="headerlink" title="è¯»å†™å†…éƒ¨å­˜å‚¨"></a>è¯»å†™å†…éƒ¨å­˜å‚¨</h3><p>æœ¬æ¬¡å­¦ä¹ çš„æ˜¯æ–‡ä»¶çš„è¯»å†™ï¼Œè¿™é‡Œå°±å±•ç¤ºäº†è¯»å–æ–‡ä»¶ã€å†™å…¥æ–‡ä»¶å’Œåˆ é™¤æ–‡ä»¶çš„ä¸€äº›æ–¹æ³•ã€‚è°ƒç”¨æ–¹æ³•ä¹‹åï¼Œå°±å¯ä»¥åƒ java io ä¸€æ ·æ“ä½œå†…éƒ¨å­˜å‚¨çš„æ•°æ®ã€‚</p><p>è€Œä¸”å†…éƒ¨å­˜å‚¨çš„è¯»å†™æ˜¯ä¸éœ€è¦åœ¨ AndroidManifest.xml æ¥å£°æ˜è¯»å†™æƒé™çš„ã€‚</p><ul><li>è¯»å–ï¼š<code>openFileInput()</code><ul><li>å‚æ•°<ul><li>stringï¼šæ–‡ä»¶å</li></ul></li></ul></li><li>å†™å…¥ï¼š<code>openFileOutput()</code><ul><li>å‚æ•°<ul><li>stringï¼šæ–‡ä»¶å</li><li>intï¼šæ¨¡å¼ï¼ˆMODE_PRIVATEï¼ŒMODE_APPENDï¼‰</li></ul></li></ul></li><li>åˆ é™¤ï¼š<code>deleteFile()</code><ul><li>å‚æ•°<ul><li>stringï¼šæ–‡ä»¶å</li></ul></li></ul></li></ul><p>è¯»å–å’Œå†™å…¥ï¼Œæˆ‘æ„Ÿè§‰æœ‰ç‚¹ç»•ï¼Œå†™ç€å†™ç€å°±æ··äº†ã€‚</p><p>æˆ‘ä»¬å¯ä»¥è¿™æ ·å­ç†è§£ï¼š</p><p>è€å¸ˆè¦æ±‚æˆ‘ä»¬èƒŒä¸€é¦–è¯—ï¼Œè¦æŠŠçº¸ä¸Šçš„è¯—èƒŒåˆ°è„‘å­é‡Œï¼Œè‚¯å®šéœ€è¦å¤šè¯»ï¼Œè¯»çš„è¿‡ç¨‹ç›¸å½“äºè¾“å…¥ï¼ˆInputï¼‰åˆ°è„‘å­é‡Œã€‚è„‘å­ç›¸å½“äºæ˜¯ä¸€ä¸ªâ€œå˜é‡â€ã€‚</p><p>ç„¶åï¼Œè€å¸ˆè¦å¼€å§‹æˆ‘ä»¬é»˜å†™è¿™é¦–è¯—ï¼Œè¿™ä¸ªæ—¶å€™å°±æ˜¯æŠŠè„‘å­é‡Œçš„è¯—å†™åœ¨ä¸€å¼ æ–°çº¸ä¸Šï¼Œå†™çš„è¿‡ç¨‹ç›¸å½“äºè¾“å‡ºï¼ˆOutputï¼‰ï¼Œå°†å˜é‡ä¸­çš„å€¼ç»™æ‰“å°å‡ºæ¥ã€‚</p><p>ä¾‹å­è™½ç„¶ä¸æ€ä¹ˆå¥½å§ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯èƒ½ç†è§£çš„ã€‚</p><h3 id="è°ƒç”¨ç¤ºä¾‹"><a href="#è°ƒç”¨ç¤ºä¾‹" class="headerlink" title="è°ƒç”¨ç¤ºä¾‹"></a>è°ƒç”¨ç¤ºä¾‹</h3><p>æˆ‘ä»¬çœ‹çœ‹ä½¿ç”¨è¿™ä¸‰ä¸ªæ–¹æ³•ï¼Œçœ‹çœ‹è°ƒç”¨çš„ç»“æœå¦‚ä½•ã€‚è¿™é‡Œçš„ fileName çš„å€¼æ˜¯ test.txt æ–‡ä»¶</p><h4 id="å†™å…¥æ–¹æ³•"><a href="#å†™å…¥æ–¹æ³•" class="headerlink" title="å†™å…¥æ–¹æ³•"></a>å†™å…¥æ–¹æ³•</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// å­˜å‚¨æ•°æ®åˆ°å†…éƒ¨å­˜å‚¨</span><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">saveInternal</span><span class="token punctuation">(</span><span class="token class-name">String</span> content<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name">FileOutputStream</span> fos <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// æ‰“å¼€æ–‡ä»¶</span>        fos <span class="token operator">=</span> <span class="token function">openFileOutput</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> MODE_PRIVATE<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å°†è„‘å­ä¸­çš„æ•°æ®å†™å…¥åˆ°æ–‡ä»¶ä¸­</span>        fos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>content<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// å…³é—­æ–‡ä»¶æµ</span>            fos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>å†™å…¥ä¹‹åï¼Œè¿™ä¸ªç›®å½•ä¸‹å°±ä¼šç”Ÿæˆä¸€ä¸ª test.txt çš„æ–‡ä»¶</p><p><img src="/images/Android/filestorage/QQ%E6%88%AA%E5%9B%BE20210306163703.jpg" loading="lazy"></p><p>æ‰“å¼€ä¹‹åï¼Œå‘ç°é‡Œé¢æœ‰æˆ‘ä»¬å†™å…¥çš„å†…å®¹</p><p><img src="/images/Android/filestorage/QQ%E6%88%AA%E5%9B%BE20210306163933.jpg" loading="lazy"></p><h4 id="è¯»å–æ–¹æ³•"><a href="#è¯»å–æ–¹æ³•" class="headerlink" title="è¯»å–æ–¹æ³•"></a>è¯»å–æ–¹æ³•</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// ä»å†…éƒ¨å­˜å‚¨è¯»å–æ•°æ®</span><span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">readInternal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token class-name">StringBuilder</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        fis <span class="token operator">=</span> <span class="token function">openFileInput</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> len<span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> fis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            fis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ioException<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            ioException<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ç‚¹å‡»è¯»å–ä¹‹åï¼Œé‚£ä¸ªæ–‡æœ¬æ§ä»¶å°±ä¼šæŠŠå®ƒç»™æ˜¾ç¤ºå‡ºæ¥</p><p><img src="/images/Android/filestorage/QQ%E6%88%AA%E5%9B%BE20210306163912.jpg" loading="lazy"></p><h4 id="åˆ é™¤æ–¹æ³•"><a href="#åˆ é™¤æ–¹æ³•" class="headerlink" title="åˆ é™¤æ–¹æ³•"></a>åˆ é™¤æ–¹æ³•</h4><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">boolean</span> isDeleted <span class="token operator">=</span> <span class="token function">deleteFile</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>isDeleted<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">FileStorageActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"åˆ é™¤æˆåŠŸ"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">FileStorageActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"åˆ é™¤å¤±è´¥ï¼Œè¯¥æ–‡ä»¶å¯èƒ½ä¸å­˜åœ¨"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æç¤ºåˆ é™¤æˆåŠŸ</p><p><img src="/images/Android/filestorage/QQ%E5%9B%BE%E7%89%8720210306213538.png" loading="lazy"></p><p>åˆ é™¤ä¹‹åï¼Œå‘ç°é‚£ä¸ª test.txt çš„æ–‡ä»¶ä¸è§äº†</p><p><img src="/images/Android/filestorage/QQ%E5%9B%BE%E7%89%8720210306213800.png" loading="lazy"></p><h2 id="å¤–éƒ¨å­˜å‚¨"><a href="#å¤–éƒ¨å­˜å‚¨" class="headerlink" title="å¤–éƒ¨å­˜å‚¨"></a>å¤–éƒ¨å­˜å‚¨</h2><p>å¤–éƒ¨å­˜å‚¨åˆ†ä¸ºå…±æœ‰ç›®å½•å’Œç§æœ‰ç›®å½•ã€‚å¤–éƒ¨å­˜å‚¨æ˜¯æˆ‘ä»¬å¯ä»¥è§åˆ°çš„ç›®å½•ï¼Œä¸€èˆ¬ï¼Œè¯»å–å¤–éƒ¨å­˜å‚¨ç›®å½•çš„æ‰€ä½¿ç”¨çš„æ–¹æ³•æ˜¯ <code>Environment.getExternalStorageDirectory()</code></p><p>åœ¨æ¨¡æ‹Ÿå™¨è·å–åˆ°çš„å€¼æ˜¯ï¼š<code>/storage/emulated/0</code><br>åœ¨æˆ‘è‡ªå·±çš„æ‰‹æœºä¸Šï¼š<code>/storage/0007-CF27/heguo/</code></p><p>ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿé‚£æ˜¯å› ä¸ºåœ¨æˆ‘è‡ªå·±çš„æ‰‹æœºä¸Šï¼Œè®¾ç½®æŠŠå¤–éƒ¨å­˜å‚¨çš„é»˜è®¤å€¼æŒ‡å®šåˆ°æˆ‘çš„ SD å¡ä¸Šé¢ã€‚æˆ‘ä»¬é€šè¿‡è°ƒç”¨  <code>getExternalFilesDirs("")</code>æ–¹æ³•æ¥è·å–æˆ‘çš„æ‰‹æœºä¸­çš„å…¨éƒ¨çš„å¤–éƒ¨å­˜å‚¨è·¯å¾„ã€‚</p><p>è°ƒç”¨çš„ç»“æœå¦‚ä¸‹</p><pre class="language-none"><code class="language-none">&#x2F;storage&#x2F;emulated&#x2F;0&#x2F;Android&#x2F;data&#x2F;top.bestguo.androidlayout&#x2F;files&#x2F;storage&#x2F;0007-CF27&#x2F;Android&#x2F;data&#x2F;top.bestguo.androidlayout&#x2F;files</code></pre><p>å¯ä»¥å‘ç°ï¼Œåœ¨è‡ªå·±çš„æ‰‹æœºä¸Šï¼Œå†…ç½®çš„å¤–éƒ¨å­˜å‚¨çš„è·¯å¾„ä¹Ÿæ˜¯ <code>/storage/emulated/0/</code> ã€‚</p><p>ä¸è¿‡åœ¨è¯»å–å¤–éƒ¨å­˜å‚¨ç©ºé—´çš„æ—¶å€™ï¼Œéœ€è¦ç”¨æˆ·æ¥åŒæ„è¯»å†™ã€‚å¦åˆ™ï¼Œç¨‹åºä¼šæŠ¥å‡ºå¼‚å¸¸ã€‚å…³äº Android çš„æƒé™é‚£ä¸€å—ä¹Ÿä¼šå•ç‹¬æ¥å†™ï¼Œæ¯•ç«Ÿæ²¡æœ‰å­¦åˆ°ã€‚è¿™é‡Œé€šè¿‡ä¸€è¡Œä»£ç æ¥è®©ç”¨æˆ·æ˜¯å¦åŒæ„æˆ‘ä»¬è¯»å†™</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">ActivityCompat</span><span class="token punctuation">.</span><span class="token function">requestPermissions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token class-name">Manifest</span><span class="token punctuation">.</span>permission<span class="token punctuation">.</span>WRITE_EXTERNAL_STORAGE<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å…¶ä¸­ï¼Œ<code>Manifest.permission.WRITE_EXTERNAL_STORAGE</code> è¿™ä¸ªå°±æ˜¯ç”¨äºè¯»å†™å¤–éƒ¨å­˜å‚¨çš„å£°æ˜ã€‚åŒæ—¶è¿™ä¸ªå£°æ˜ä¹Ÿéœ€è¦åœ¨ AndroidManifest.xml æ–‡ä»¶ä¸‹æ¥å£°æ˜</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>manifest</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name">package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.permission.INTERNET<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- éœ€è¦æ·»åŠ çš„ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.permission.WRITE_EXTERNAL_STORAGE<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- ä»¥ä¸‹æ˜¯ application çš„å£°æ˜ï¼Œçœç•¥ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>manifest</span><span class="token punctuation">></span></span></code></pre><h3 id="å…¬æœ‰ç›®å½•"><a href="#å…¬æœ‰ç›®å½•" class="headerlink" title="å…¬æœ‰ç›®å½•"></a>å…¬æœ‰ç›®å½•</h3><p>é€šè¿‡æ–¹æ³•è°ƒç”¨ï¼š</p><p><code>Environment.getExternalStoragePublicDirectory(String type)</code></p><p>å…¶ä¸­ type æœ‰è¿™äº›ï¼Œè¿™äº›å°±æ˜¯æ–‡ä»¶å¤¹åã€‚é€šè¿‡ <code>Environment.DIRXXX</code> æ¥è·å–</p><pre class="language-none"><code class="language-none">DIRECTORY_MUSICéŸ³ä¹æ–‡ä»¶å¤¹DIRECTORY_PODCASTS,éŸ³ä¹æˆ–ç”µå°å½•éŸ³æˆ–è§†é¢‘ä¸­çš„å‰ªè¾‘DIRECTORY_RINGTONES,é“ƒå£°æ–‡ä»¶å¤¹DIRECTORY_ALARMS,é—¹é’Ÿç›¸å…³æ–‡ä»¶å¤¹DIRECTORY_NOTIFICATIONS,é€šçŸ¥æ–‡ä»¶å¤¹DIRECTORY_PICTURES,å›¾ç‰‡æ–‡ä»¶å¤¹DIRECTORY_MOVIES,è§†é¢‘ä¿å­˜æ–‡ä»¶å¤¹DIRECTORY_DOWNLOADS,ä¸‹è½½æ–‡ä»¶å¤¹DIRECTORY_DCIM,ç›¸æœºç…§ç‰‡ç¼“å­˜æ–‡ä»¶å¤¹DIRECTORY_DOCUMENTSæ–‡æ¡£æ–‡ä»¶å¤¹</code></pre><p>æ¯”å¦‚ï¼Œå¾®ä¿¡å‘æœ‹å‹åœˆï¼Œå‘å›¾ç‰‡éœ€è¦è·å– DCIM ä¸‹çš„æ–‡ä»¶ï¼Œæˆ–è€… Pictures ä¸‹çš„æ–‡ä»¶å¤¹ã€‚è®©ç”¨æˆ·æ¥é€‰æ‹©è¿™äº›å›¾ç‰‡ï¼Œæœ€æ¥ä¸Šä¼ åˆ°æœ‹å‹åœˆä¸­ã€‚</p><h3 id="ç§æœ‰ç›®å½•"><a href="#ç§æœ‰ç›®å½•" class="headerlink" title="ç§æœ‰ç›®å½•"></a>ç§æœ‰ç›®å½•</h3><p>ç§æœ‰ç›®å½•æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><p><code>/storage/emulated/Android/data/<applicationId>/cache</applicationId></code><br><code>/storage/emulated/Android/data/<applicationId>/files</applicationId></code></p><p>ä¸è¿‡å¤–éƒ¨å­˜å‚¨çš„ç§æœ‰ç›®å½•å¯ä»¥ç›´æ¥ä½¿ç”¨æ–‡ä»¶ç®¡ç†å™¨èƒ½æŸ¥çœ‹çš„åˆ°ï¼Œåªæ˜¯ç”¨æˆ·å¯èƒ½ä¸æ˜¯å¾ˆåœ¨æ„ã€‚è¿˜æœ‰ä¸€ä¸ªæ˜¯å› ä¸ºï¼Œå®ƒçš„å­˜å‚¨è·¯å¾„æœ‰ç‚¹é•¿ï¼Œå¯¹äºå¤§å¤šæ•°çš„å®‰å“ç”¨æˆ·æ¥è¯´å¯èƒ½å°±éå¸¸éš¾æ‰¾äº†ã€‚</p><h3 id="å¤–éƒ¨å­˜å‚¨ç¤ºä¾‹"><a href="#å¤–éƒ¨å­˜å‚¨ç¤ºä¾‹" class="headerlink" title="å¤–éƒ¨å­˜å‚¨ç¤ºä¾‹"></a>å¤–éƒ¨å­˜å‚¨ç¤ºä¾‹</h3><p>ä»¥ä¸‹ä»£ç ç¤ºä¾‹æ¥å¯¹å¤–éƒ¨å­˜å‚¨è¿›è¡Œè¯»å†™</p><p><font color="red">æ³¨æ„ï¼šåœ¨è¯»å†™å¤–éƒ¨å­˜å‚¨æ—¶éœ€è¦å£°æ˜è¯»å†™æƒé™</font></p><h3 id="å†™å…¥"><a href="#å†™å…¥" class="headerlink" title="å†™å…¥"></a>å†™å…¥</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">saveOuter</span><span class="token punctuation">(</span><span class="token class-name">String</span> context<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Environment</span><span class="token punctuation">.</span><span class="token function">getExternalStoragePublicDirectory</span><span class="token punctuation">(</span><span class="token class-name">Environment</span><span class="token punctuation">.</span>DIRECTORY_MUSIC<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">FileOutputStream</span> fos <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// è·å–å¤–éƒ¨å­˜å‚¨çš„è·¯å¾„</span>        <span class="token class-name">File</span> dir <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token class-name">Environment</span><span class="token punctuation">.</span><span class="token function">getExternalStorageDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"bestguo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºæ–‡ä»¶å¤¹</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>dir<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"isCreatedDir"</span><span class="token punctuation">,</span> dir<span class="token punctuation">.</span><span class="token function">mkdirs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// åˆ›å»ºæ–‡ä»¶</span>        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"file_path"</span><span class="token punctuation">,</span> file<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"isCreatedDir"</span><span class="token punctuation">,</span> <span class="token string">""</span> <span class="token operator">+</span> file<span class="token punctuation">.</span><span class="token function">createNewFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// åˆ›å»ºè¾“å…¥æµ</span>        fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>        fos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            fos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æ‰§è¡Œå®Œæˆä¹‹åï¼Œå¤–éƒ¨å­˜å‚¨ä¸­åˆ›å»ºäº†å¯¹åº”çš„æ–‡ä»¶å¤¹å’Œæ–‡ä»¶</p><p><img src="/images/Android/filestorage/QQ%E6%88%AA%E5%9B%BE20210306224326.jpg" loading="lazy"></p><p><img src="/images/Android/filestorage/QQ%E6%88%AA%E5%9B%BE20210306224337.jpg" loading="lazy"></p><p>æ‰“å¼€ä¹‹åï¼Œå¯¹åº”çš„å†…å®¹åŒæ ·ä¹Ÿèƒ½è¯»å–åˆ°</p><p><img src="/images/Android/filestorage/QQ%E6%88%AA%E5%9B%BE20210306224353.jpg" loading="lazy"></p><h3 id="è¯»å–"><a href="#è¯»å–" class="headerlink" title="è¯»å–"></a>è¯»å–</h3><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">readOuter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">FileInputStream</span> fos <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token comment">// è·å–å¤–éƒ¨å­˜å‚¨ç›®å½•</span>    <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token class-name">Environment</span><span class="token punctuation">.</span><span class="token function">getExternalStorageDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// åˆ›å»ºæ–‡ä»¶ç±»</span>    <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path <span class="token operator">+</span> <span class="token class-name">File</span><span class="token punctuation">.</span>separator <span class="token operator">+</span> <span class="token string">"bestguo"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">StringBuilder</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºå­—èŠ‚æµå¯¹è±¡</span>        fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> len<span class="token punctuation">;</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> fos<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>fos<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// å…³é—­</span>            fos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>ç‚¹å‡»è¯»å–ï¼Œå‘ç°è¯»å–å¾—åˆ°äº†æ•°æ®</p><p><img src="/images/Android/filestorage/QQ%E6%88%AA%E5%9B%BE20210306225031.jpg" loading="lazy"></p><p>åˆ é™¤å¤–éƒ¨æ–‡ä»¶çš„è¯å¯ä»¥ç›´æ¥è°ƒç”¨ File å¯¹è±¡ä¸‹çš„ delete æ–¹æ³•å³å¯</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path <span class="token operator">+</span> <span class="token class-name">File</span><span class="token punctuation">.</span>separator <span class="token operator">+</span> <span class="token string">"bestguo"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>file<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¡¹ç›®çš„ä»£ç éƒ½åœ¨ <a href="https://github.com/BestGuo2020/AndroidStudy">AndroidStudy</a> çš„ github ä»“åº“ä¸­ã€‚</p><p>æœ¬æ—¥å¿—å¯¹åº”çš„ä»£ç ï¼š<a href="https://github.com/BestGuo2020/AndroidStudy/blob/main/app/src/main/java/top/bestguo/androidlayout/datastorage/FileStorageActivity.java">ç‚¹æˆ‘è¿›å…¥</a></p><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://blog.csdn.net/csdn_aiyang/article/details/80665185">https://blog.csdn.net/csdn_aiyang/article/details/80665185</a></p>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android å…¥é—¨ç¯‡ä¹‹ Dialog çš„ä½¿ç”¨</title>
      <link href="/journal/dialog/"/>
      <url>/journal/dialog/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>Dialogï¼Œå³å¯¹è¯æ¡†ï¼Œå¯¹è¯æ¡†åœ¨ Android ä¸­ä¹Ÿæ˜¯éå¸¸é‡è¦ã€‚å¾ˆå¤šåœºæ™¯éƒ½éœ€è¦ç”¨åˆ°å®ƒï¼Œä¸è¿‡ Android çš„å¯¹è¯æ¡†çš„åŸºæœ¬ä½¿ç”¨ä¸ä¼šå¾ˆéš¾ã€‚ä»Šå¤©å°±æ¥ä»‹ç»å››ç§åŸºæœ¬çš„ç”¨æ³•ï¼Œåç»­è¿˜å¯ä»¥è‡ªå®šä¹‰å¯¹è¯æ¡†ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥è‡ªå·±å†™ä¸€ä¸ªå¸ƒå±€æ¥è¾¾åˆ°è‡ªå·±æƒ³è¦å®ç°çš„å¯¹è¯æ¡†ã€‚</p><p>è‡ªå·±å®šä¹‰çš„å¯¹è¯æ¡†å°±å•ç‹¬æ”¾åœ¨ä¸‹ä¸€ç¯‡æ—¥å¿—ä¸­å§ï¼Œæ¯•ç«Ÿä¸æƒ³å†™å¤ªå¤š</p><span id="more"></span><h2 id="å››ç§åŸºæœ¬çš„å¯¹è¯æ¡†"><a href="#å››ç§åŸºæœ¬çš„å¯¹è¯æ¡†" class="headerlink" title="å››ç§åŸºæœ¬çš„å¯¹è¯æ¡†"></a>å››ç§åŸºæœ¬çš„å¯¹è¯æ¡†</h2><p>å¯¹è¯æ¡†æ€»å…±æœ‰ 4 ç§ã€‚ç¬¬ä¸€ä¸ªæ˜¯åŸºæœ¬çš„å¯¹è¯æ¡†ï¼Œå³å¯¹è¯æ¡†çš„æ­£æ–‡éƒ¨åˆ†åªæœ‰æ–‡å­—ï¼Œç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå¯¹è¯æ¡†æ˜¯å•é€‰å¯¹è¯æ¡†ï¼Œåªæ˜¯ç¬¬ä¸‰ç§æ˜¯éœ€è¦é»˜è®¤æŒ‡å®šé€‰ä¸­å“ªä¸€é¡¹ï¼Œç¬¬å››ä¸ªæ˜¯å¤šé€‰æ¡†ï¼Œé€šè¿‡ä¸€ä¸ªå¸ƒå°”ç±»å‹çš„æ•°ç»„æ¥é»˜è®¤å“ªäº›æ˜¯è¢«é€‰ä¸­çš„ã€‚</p><p>ä»¥ä¸‹å°†ä»‹ç»å’Œå®ä¾‹éƒ½ä¸€ä¸€åˆ—ä¸¾å‡ºæ¥</p><h3 id="ç¬¬ä¸€ç§å¯¹è¯æ¡†"><a href="#ç¬¬ä¸€ç§å¯¹è¯æ¡†" class="headerlink" title="ç¬¬ä¸€ç§å¯¹è¯æ¡†"></a>ç¬¬ä¸€ç§å¯¹è¯æ¡†</h3><p>ç¬¬ä¸€ç§å¯¹è¯æ¡†ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª AlertDialog.Builder å¯¹è±¡ã€‚é»˜è®¤æœ‰ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œç”¨äºæŒ‡å®šåœ¨å“ªä¸ª Activity ä¸Šé¢å¼¹å‡ºå¯¹è¯æ¡†ï¼Œå’Œ Toast ç±»ä¼¼ï¼ŒToast ä¹Ÿæ˜¯éœ€è¦æŒ‡å®šåœ¨å“ªä¸€ä¸ª Activity ä¸Šé¢ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">AlertDialog<span class="token punctuation">.</span>Builder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AlertDialog<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token class-name">AlertDialogActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å¯¹è±¡åˆ›å»ºå®Œæˆä¹‹åï¼Œä½¿ç”¨ setTitle è®¾ç½®å¯¹è¯æ¡†çš„æ ‡é¢˜ï¼Œä½¿ç”¨ setMsg è®¾ç½®æ¶ˆæ¯å†…å®¹</p><pre class="language-java" data-language="java"><code class="language-java">builder<span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">"è¯·å›ç­”"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token string">"ä½ è§‰å¾—ã€Šå·¥ä½œç»†èƒã€‹å…¨ç³»åˆ—å¥½çœ‹å—ï¼Ÿ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å¯¹è¯æ¡†æœ‰ä¸‰ä¸ªæŒ‰é’®å¯ä»¥è®¾ç½®ï¼Œè®¾ç½®äº†ä¸€ä¸ªå°±ä¼šæœ‰æŒ‰é’®å‡ºæ¥ï¼Œä¸è®¾ç½®å°±æ²¡æœ‰æŒ‰é’®å‡ºæ¥ï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•åˆ†åˆ«æ˜¯ setPositiveButtonã€setNeutralButtonã€setNegativeButtonã€‚è¿™ä¸ªä¸‰ä¸ªæ–¹æ³•ç¿»è¯‘æˆä¸­æ–‡æ„Ÿè§‰æ€ªæ€ªçš„ï¼Œå°±æ˜¯ä¸€ä¸ªå¥½ï¼Œä¸­ï¼Œå·®ä¸‰ä¸ªæŒ‰é’®å˜›ã€‚è¿™å…¶å®ä¹Ÿä¸èƒ½å®Œå…¨é€šè¿‡è¿™äº›æ–¹æ³•çš„æ„æ€æ¥ã€‚æ¯”å¦‚æˆ‘æœ‰ä¸€ä¸ªå…¬å‘Šè¦å‘ŠçŸ¥ç”¨æˆ·ï¼Œæˆ‘åªè¦ä¸€ä¸ªæŒ‰é’®å°±å¤Ÿäº†ï¼Œä½†æ˜¯è¿™ä¸‰ä¸ªæ–¹æ³•é€‰å“ªä¸ªå‘¢ï¼Ÿæˆ‘è§‰å¾—éƒ½å¯ä»¥ï¼Œçˆ±ç”¨å“ªä¸ªå°±ç”¨å“ªä¸ªï¼Œæ²¡å¿…è¦è¿‡äºçº ç»“åœ¨è¿™ä¸Šé¢ã€‚</p><p>è¯¥æ–¹æ³•éœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯æŒ‰é’®æ–‡å­—ï¼Œå¦ä¸€ä¸ªå°±æ˜¯ç‚¹å‡»äº‹ä»¶ã€‚ç”±äºè¿™äº›æ–¹æ³•çš„è¿”å›å€¼æ˜¯å½“å‰çš„å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥è¿›è¡Œé“¾å¼çš„è°ƒç”¨ï¼Œè¯·çœ‹ä»¥ä¸‹ä»£ç ã€‚</p><pre class="language-java" data-language="java"><code class="language-java">builder<span class="token punctuation">.</span><span class="token function">setPositiveButton</span><span class="token punctuation">(</span><span class="token string">"å¥½çœ‹"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">DialogInterface<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">DialogInterface</span> dialog<span class="token punctuation">,</span> <span class="token keyword">int</span> which<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">AlertDialogActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"è°¢è°¢ï¼Œæˆ‘ä»¬ä¼šåšçš„è¶Šæ¥è¶Šå¥½ï¼"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">setNeutralButton</span><span class="token punctuation">(</span><span class="token string">"ä¸€èˆ¬"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">DialogInterface<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">DialogInterface</span> dialog<span class="token punctuation">,</span> <span class="token keyword">int</span> which<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">AlertDialogActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"è°¢è°¢ï¼Œçœ‹æ¥è¿˜éœ€è¦å¤šæ”¹è¿›æ‰æ˜¯ï¼"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">setNegativeButton</span><span class="token punctuation">(</span><span class="token string">"éš¾çœ‹"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">DialogInterface<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">DialogInterface</span> dialog<span class="token punctuation">,</span> <span class="token keyword">int</span> which<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">AlertDialogActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"è°¢è°¢ï¼Œè¡€å°æ¿å¥½æ¡‘å¿ƒå‘¢ï¼Œ555ï½"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œæ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/dialog/v2x13-pqujv.gif" loading="lazy"></p><h3 id="ç¬¬äºŒç§å¯¹è¯æ¡†"><a href="#ç¬¬äºŒç§å¯¹è¯æ¡†" class="headerlink" title="ç¬¬äºŒç§å¯¹è¯æ¡†"></a>ç¬¬äºŒç§å¯¹è¯æ¡†</h3><p>ç¬¬äºŒç§å¯¹è¯æ¡†ï¼Œä¹Ÿå°±å•é€‰çš„å¯¹è¯æ¡†ï¼Œä½†æ˜¯é»˜è®¤æ²¡é€‰ä¸­ã€‚è¦å®ç°è¿™ä¸ªåŠŸèƒ½éœ€è¦ä½¿ç”¨ setItems æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²çš„æ•°ç»„ï¼Œå¦ä¸€ä¸ªå°±æ˜¯é€‰ä¸­äº†å“ªä¸€é¡¹ä¹‹åçš„ç‚¹å‡»äº‹ä»¶ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> genders <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"ç”·"</span><span class="token punctuation">,</span> <span class="token string">"å¥³"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>builder1<span class="token punctuation">.</span><span class="token function">setItems</span><span class="token punctuation">(</span>genders<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">DialogInterface<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">DialogInterface</span> dialog<span class="token punctuation">,</span> <span class="token keyword">int</span> which<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">AlertDialogActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"ä½ é€‰æ‹©äº†ï¼š"</span> <span class="token operator">+</span> genders<span class="token punctuation">[</span>which<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">"è¯·é€‰æ‹©æ€§åˆ«"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œæ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/dialog/ik0ol-e40f0.gif" loading="lazy"></p><h3 id="ç¬¬ä¸‰ç§å¯¹è¯æ¡†"><a href="#ç¬¬ä¸‰ç§å¯¹è¯æ¡†" class="headerlink" title="ç¬¬ä¸‰ç§å¯¹è¯æ¡†"></a>ç¬¬ä¸‰ç§å¯¹è¯æ¡†</h3><p>ç¬¬ä¸‰ç§å¯¹è¯æ¡†å’Œç¬¬äºŒç§å·®ä¸å¤šï¼Œä½†æ˜¯é»˜è®¤æœ‰é€‰ä¸­å“ªä¸€é¡¹ã€‚è¦å®ç°è¿™ä¸ªåŠŸèƒ½éœ€è¦ä½¿ç”¨ setSingleChoiceItems æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œæ¯”ä¸Šé¢è¿™ä¸ªå¤šäº†ä¸€ä¸ªï¼Œä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²çš„æ•°ç»„ï¼Œä¸€ä¸ªæ˜¯æŒ‡å®šé€‰ä¸­çš„å“ªä¸€é¡¹ï¼Œå¦ä¸€ä¸ªå°±æ˜¯é€‰ä¸­äº†å“ªä¸€é¡¹ä¹‹åçš„ç‚¹å‡»äº‹ä»¶ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">AlertDialog<span class="token punctuation">.</span>Builder</span> builder2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AlertDialog<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token class-name">AlertDialogActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> genders2 <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"ç”·"</span><span class="token punctuation">,</span> <span class="token string">"å¥³"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>builder2<span class="token punctuation">.</span><span class="token function">setSingleChoiceItems</span><span class="token punctuation">(</span>genders2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">DialogInterface<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">DialogInterface</span> dialog<span class="token punctuation">,</span> <span class="token keyword">int</span> which<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">AlertDialogActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"ä½ é€‰æ‹©äº†ï¼š"</span> <span class="token operator">+</span> genders2<span class="token punctuation">[</span>which<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        dialog<span class="token punctuation">.</span><span class="token function">dismiss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é€‰ä¸­å®Œæˆä¹‹åæ‰ä¼šæ¶ˆå¤±</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">"è¯·é€‰æ‹©æ€§åˆ«"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCancelable</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿™é‡Œè®¾ç½®äº†ç‚¹å‡»å¯¹è¯æ¡†ä»¥å¤–çš„éƒ¨åˆ†ä¸æ¶ˆå¤±</span></code></pre><p>è¿è¡Œæ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/dialog/tzaja-re5kv.gif" loading="lazy"></p><p>ä»ä¸Šé¢çš„ gif å›¾ä¸­å‘ç°ä¸ºä»€ä¹ˆæˆ‘é€‰æ‹©å¥³çš„æ—¶å€™ä¸å‘ç”Ÿå˜åŒ–ï¼Ÿé‚£æ˜¯å› ä¸ºå½“å‰çš„ä»£ç æ˜¯åœ¨ç‚¹å‡»æŒ‰é’®æ—¶è§¦å‘çš„ï¼Œæ‰€ä»¥é‡Œé¢çš„ä»£ç è¢«é‡æ–°æ‰§è¡Œäº†ä¸€éï¼Œæœ€åå¯¼è‡´ä¹‹å‰çš„å†…å®¹å…¨éƒ¨è¦†ç›–æˆåŸå§‹çš„çŠ¶æ€ã€‚</p><blockquote><p>å¦‚æœä¸è®©ç”¨æˆ·ç‚¹å‡»å…¶å®ƒåœ°æ–¹è®©å¯¹è¯æ¡†æ¶ˆå¤±ï¼Œåˆ™è®¾ç½® setCalcelable æ–¹æ³•ï¼Œä¼ é€’çš„å€¼ä¸º falseï¼Œè¯·çœ‹æ•ˆæœå›¾ã€‚<br><img src="/images/Android/dialog/qjj9o-os7pw.gif" loading="lazy"><br>å¦‚æœè¦è®©å…¶æ¶ˆå¤±çš„è¯ï¼Œä½¿ç”¨ dismiss æ–¹æ³•å³å¯ã€‚</p></blockquote><h3 id="ç¬¬å››ç§å¯¹è¯æ¡†"><a href="#ç¬¬å››ç§å¯¹è¯æ¡†" class="headerlink" title="ç¬¬å››ç§å¯¹è¯æ¡†"></a>ç¬¬å››ç§å¯¹è¯æ¡†</h3><p>ç¬¬å››ç§å¯¹è¯æ¡†å°±æ˜¯å¤šé€‰å¯¹è¯æ¡†äº†ï¼Œå¯ä»¥é»˜è®¤é€‰ä¸­å¤šé¡¹ï¼Œé€‰ä¸­å¤šé¡¹æ˜¯éœ€è¦ä¼ é€’ä¸€ä¸ªå¸ƒå°”ç±»å‹çš„æ•°ç»„ã€‚è¦å®ç°è¿™ä¸ªæ–¹æ³•ï¼Œåˆ™éœ€è¦ä½¿ç”¨ setMultiChoiceItems æ–¹æ³•ã€‚ä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²çš„æ•°ç»„ï¼Œä¸€ä¸ªæ˜¯æŒ‡å®šé€‰ä¸­çš„æ•°ç»„ï¼Œå¦ä¸€ä¸ªå°±æ˜¯é€‰ä¸­äº†å“ªä¸€é¡¹ä¹‹åçš„ç‚¹å‡»äº‹ä»¶ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">AlertDialog<span class="token punctuation">.</span>Builder</span> builder3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AlertDialog<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token class-name">AlertDialogActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> multiChoices <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"AcFun"</span><span class="token punctuation">,</span> <span class="token string">"bilibili"</span><span class="token punctuation">,</span> <span class="token string">"å˜€å“©å˜€å“©"</span><span class="token punctuation">,</span> <span class="token string">"æ¨±èŠ±åŠ¨æ¼«"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">final</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> multiChecked <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span>multiChoices<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>builder3<span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">"ä½ å–œæ¬¢åœ¨å“ªä¸ªç½‘ç«™è¿½ç•ª"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMultiChoiceItems</span><span class="token punctuation">(</span>multiChoices<span class="token punctuation">,</span> multiChecked<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">DialogInterface<span class="token punctuation">.</span>OnMultiChoiceClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">DialogInterface</span> dialog<span class="token punctuation">,</span> <span class="token keyword">int</span> which<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isChecked<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> msg <span class="token operator">=</span> isChecked <span class="token operator">?</span> <span class="token string">"ä½ é€‰æ‹©äº†ï¼š"</span> <span class="token operator">+</span> multiChoices<span class="token punctuation">[</span>which<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token string">"ä½ åé€‰äº†ï¼š"</span> <span class="token operator">+</span> multiChoices<span class="token punctuation">[</span>which<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">AlertDialogActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> msg<span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setPositiveButton</span><span class="token punctuation">(</span><span class="token string">"ç¡®è®¤"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">DialogInterface<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">DialogInterface</span> dialog<span class="token punctuation">,</span> <span class="token keyword">int</span> which<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// ä½¿ç”¨å­—ç¬¦ä¸²æ„å»ºç±»ï¼Œå°†å·²ç»é€‰ä¸­çš„å†…å®¹æ·»åŠ è¿›å»</span>        <span class="token class-name">StringBuilder</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å¾ªç¯éå†</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> multiChecked<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// å¦‚æœé€‰ä¸­äº†å°±æ·»åŠ è¿›åˆ°å­—ç¬¦ä¸²æ„å»ºç±»ä¸­</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>multiChecked<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>i <span class="token operator">==</span> multiChecked<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">?</span> multiChoices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">:</span> multiChoices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"ï¼Œ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// å°†æ„å»ºå¥½çš„å­—ç¬¦ä¸²ç”¨ toString æ–¹æ³•æ‰“å°å‡ºæ¥</span>        <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">AlertDialogActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"ä½ å–œæ¬¢åœ¨â€œ"</span> <span class="token operator">+</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"â€è¿½ç•ª"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä¸è¿‡åœ¨ 2 å’Œ 3 çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å‘ç°å¹¶æ²¡æœ‰åŠ ç¡®å®šè¿™äº›æŒ‰é’®å‘€ã€‚é‚£æˆ‘å¯ä¸å¯ä»¥æ·»åŠ ä¸€ä¸ªï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œæ ¹æ®ç°æœ‰çš„åœºæ™¯æ˜¯å¦æ·»åŠ æŒ‰é’®å³å¯ã€‚æ¯”å¦‚å½“å‰çš„åŠ±å¿—ï¼Œé€‰å¥½ä¹‹åè¦è¿›è¡Œä¸€ä¸ªæ€»ç»“ï¼Œæˆ‘ä»¬å°±å°†é€‰ä¸­çš„é€šè¿‡ Toast æ¥å…¨éƒ¨å±•ç¤ºå‡ºæ¥ã€‚</p><p>è¿è¡Œæ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/dialog/4fni0-whdz1.gif" loading="lazy"></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¡¹ç›®çš„ä»£ç éƒ½åœ¨ <a href="https://github.com/BestGuo2020/AndroidStudy">AndroidStudy</a> çš„ github ä»“åº“ä¸­ã€‚</p><p>æœ¬æ—¥å¿—å¯¹åº”çš„ä»£ç ï¼š<a href="https://github.com/BestGuo2020/AndroidStudy/blob/main/app/src/main/java/top/bestguo/androidlayout/dialog/AlertDialogActivity.java">ç‚¹æˆ‘è¿›å…¥</a></p>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android å…¥é—¨ç¯‡ä¹‹ RecycleView ç»„ä»¶çš„ä½¿ç”¨</title>
      <link href="/journal/recycleview-component/"/>
      <url>/journal/recycleview-component/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æˆ‘æƒ³è¦è¯´"><a href="#æˆ‘æƒ³è¦è¯´" class="headerlink" title="æˆ‘æƒ³è¦è¯´"></a>æˆ‘æƒ³è¦è¯´</h2><p>RecycleView å®ƒæ˜¯ä¸€ä¸ªå¤šç§è§†å›¾çš„æ€»ç§°ï¼Œå®ƒå¯ä»¥å±•ç¤ºåƒæˆ‘ä¸Šä¸ªæœˆå­¦ä¹ åˆ°çš„ ListViewã€GirdViewï¼Œè¿˜æœ‰æ¢ç´¢çš„ç€‘å¸ƒæµã€å„ç§å¸ƒå±€æ··æ‚åœ¨ä¸€èµ·ã€‚ä¹‹å‰åœ¨äº†è§£ RecycleView çš„æ—¶å€™ï¼Œå®ƒä¹Ÿç¡®å®èƒ½åšåˆ°ã€‚ä¸è¿‡æœ€è¿‘æˆ‘åœ¨åšä¸€ä¸ªå…¥é—¨çš„ APP ï¼Œå‘ç°å°±æ˜¯æ¨ªå‘çš„ ListView æ— æ³•ç›´æ¥å»å®ç°ï¼Œç„¶åå‘ç° RecycleView å°±èƒ½å¤Ÿå»å®ç°æˆ‘æƒ³è¦çš„å¸ƒå±€ï¼Œæ‰å‘ç° RecycleView çš„é‡è¦æ€§ã€‚</p><p>ä¸è¿‡ RecycleView çš„çµæ´»ç¨‹åº¦ä¹Ÿç‰¹åˆ«çš„é«˜ï¼Œè§†å›¾çš„å¤ç”¨ç®¡ç†ç¨‹åº¦ä¹Ÿå¾ˆé«˜ï¼Œéš¾åº¦å¯èƒ½ä¼šé«˜ä¸€äº›ï¼Œè‡ªå·±å®ç°æƒ³è¦çš„å¸ƒå±€è¿˜éœ€è¦å¤šèŠ±è´¹ä¸€äº›æ—¶é—´çš„å­¦äº†å¤§æ¦‚ä¸¤ä¸‰å‘¨çš„ Android å‘ç°ç»å¤§éƒ¨åˆ†éƒ½æ˜¯éœ€è¦å»è‡ªå·±ç»§æ‰¿ç±»æ¥é‡å†™æŸäº›æ–¹æ³•ï¼Œä¹Ÿç›¸å½“äºæ˜¯å¯¹ java é¢å‘å¯¹è±¡å¼€å‘åŸºç¡€éƒ¨åˆ†çš„ä¸€ä¸ªå¤ä¹ å§ã€‚æ„Ÿè§‰ RecycleView çš„å†…å®¹ä¼šæœ‰ä¸€äº›å¤šï¼Œæ‰€ä»¥è®°å½•çš„å†…å®¹ä¹Ÿä¼šå¾ˆå¤šã€‚</p><p>ç›®å‰å­¦ä¹ äº†ä¸‰ç§å¸ƒå±€æ–¹å¼ï¼šLinearLayoutManagerã€GridLayoutManager å’Œ StaggeredGridLayoutManagerã€‚å°†ä¼šä¸»è¦ä»¥è¿™ä¸‰ç§å¸ƒå±€ç®¡ç†è¿›è¡Œè¯´æ˜ã€‚</p><p>å¥½å•¦ï¼Œç°åœ¨æ­£å¼å¼€å§‹å§ã€‚</p><span id="more"></span><h2 id="å¼€å§‹çš„å‰æ"><a href="#å¼€å§‹çš„å‰æ" class="headerlink" title="å¼€å§‹çš„å‰æ"></a>å¼€å§‹çš„å‰æ</h2><p>åœ¨å¼€å§‹ RecycleView çš„å­¦ä¹ ä¹‹æ—…ä¹‹å‰ï¼Œåœ¨ build.gradle ä¸­æ·»åŠ ä¸€ä¸‹ä¾èµ–</p><p><img src="/images/Android/recycleview/QQ%E6%88%AA%E5%9B%BE20210210170122.jpg" loading="lazy"></p><pre class="language-gradle" data-language="gradle"><code class="language-gradle">compile &#39;com.android.support:design:26.0.1&#39;</code></pre><p>æ³¨æ„ï¼šç¬¬ä¸€ä½çš„ 26 å¯¹åº”çš„æ˜¯ compileSdkVersion çš„ç‰ˆæœ¬å·ã€‚</p><h3 id="å¯èƒ½å‡ºç°çš„é—®é¢˜"><a href="#å¯èƒ½å‡ºç°çš„é—®é¢˜" class="headerlink" title="å¯èƒ½å‡ºç°çš„é—®é¢˜"></a>å¯èƒ½å‡ºç°çš„é—®é¢˜</h3><h4 id="RecyclerView-ç›¸å…³"><a href="#RecyclerView-ç›¸å…³" class="headerlink" title="RecyclerView ç›¸å…³"></a>RecyclerView ç›¸å…³</h4><p>åœ¨é‡æ–°ç¼–è¯‘çš„æ—¶å€™å‘ç°æ‰¾ä¸åˆ°ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹çš„è§£å†³åŠæ³•<br><img src="/images/Android/recycleview/QQ%E6%88%AA%E5%9B%BE20210210171636.jpg" loading="lazy"><br>é€šè¿‡ä¿®æ”¹ç‰ˆæœ¬å·çš„åä¸¤ä½åº”è¯¥èƒ½å¤Ÿè§£å†³æ­¤é—®é¢˜ã€‚</p><h4 id="OOM-é—®é¢˜"><a href="#OOM-é—®é¢˜" class="headerlink" title="OOM é—®é¢˜"></a>OOM é—®é¢˜</h4><p>OOMï¼Œä¹Ÿå°±æ˜¯ Out of memoryï¼Œå³å†…å­˜è¶…å‡ºã€‚</p><p>å½“ä½¿ç”¨å›¾ç‰‡å’Œ addItemDecoration æ–¹æ³•æ—¶å¯èƒ½ä¼šå¯¼è‡´å†…å­˜æº¢å‡ºï¼Œç›®å‰è¿˜æ²¡æœ‰æ‰¾åˆ°å…·ä½“çš„è§£å†³åŠæ³•ã€‚ä½†æ˜¯ä¸ºäº†å­¦ä¹  RecyclerView æš‚æ—¶åœ¨ä½¿ç”¨ List å¸ƒå±€æ—¶ä½¿ç”¨</p><p>å”¯ä¸€çš„è§£å†³åŠæ³•å°±æ˜¯åœ¨ä½¿ç”¨å›¾ç‰‡æ—¶ä¸ä½¿ç”¨ addItemDecoration æ–¹æ³•</p><p>å¯èƒ½å‡ºç°çš„é”™è¯¯å¦‚ä¸‹</p><pre class="language-none"><code class="language-none">02-19 10:50:44.230 4504-4787&#x2F;top.bestguo.androidlayout E&#x2F;Bitmap: OOM allocating Bitmap with dimensions 15859853 x 15895097</code></pre><p>2 æœˆ 20 å·ï¼Œå¥½å§ï¼Œæˆ‘çŸ¥é“æˆ‘å“ªé‡Œæœ‰é—®é¢˜äº†ã€‚è¦æ­£ç¡®çš„è·å–é…ç½®æ–‡ä»¶çš„åƒç´ å•ä½éœ€è¦ç”¨ä»¥ä¸‹æ–¹æ³•è·å–ğŸ˜­ğŸ˜­ğŸ˜­ï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºç° OOM çš„é—®é¢˜äº†ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDimensionPixelOffset</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>dimen<span class="token punctuation">.</span>xxx<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿™ä¹Ÿæ˜¯å¯¼è‡´å‡ºç° OOM çš„åŸå› ï¼Œä¸æ’é™¤æœ‰å…¶å®ƒçš„å¯èƒ½å¯¼è‡´ OOM é”™è¯¯çš„å‘ç”Ÿã€‚</p><h4 id="AppCompatTextView-æ— æ³•å®ä¾‹åŒ–"><a href="#AppCompatTextView-æ— æ³•å®ä¾‹åŒ–" class="headerlink" title="AppCompatTextView æ— æ³•å®ä¾‹åŒ–"></a>AppCompatTextView æ— æ³•å®ä¾‹åŒ–</h4><p>åœ¨ RecyclerView çš„ä¾èµ–å¯¼å…¥è¿›æ¥ï¼Œå¯èƒ½ä¼šçˆ†å‡ºä»¥ä¸‹é”™è¯¯ï¼Œè™½ç„¶ä¼šå‡ºç° AppCompatTextView æ— æ³•å®ä¾‹åŒ–çš„æƒ…å†µï¼Œåœ¨ç»è¿‡æµ‹è¯•çš„æ—¶å€™è¿™å¹¶ä¸ä¼šå½±å“åˆ°ç¨‹åºçš„æ­£å¸¸è¿è¡Œ<br><img src="/images/Android/recycleview/QQ%E6%88%AA%E5%9B%BE20210219203734.jpg" loading="lazy"><br>æ‰€ä»¥ï¼Œç›´æ¥ä¸ç®¡å®ƒã€‚ğŸ˜œğŸ˜œğŸ˜œ</p><h2 id="RecyclerView-æ–¹æ³•ä»‹ç»"><a href="#RecyclerView-æ–¹æ³•ä»‹ç»" class="headerlink" title="RecyclerView æ–¹æ³•ä»‹ç»"></a>RecyclerView æ–¹æ³•ä»‹ç»</h2><p>åœ¨å­¦ä¹ æ—¶ï¼Œæˆ‘å­¦ä¹ åˆ° RecyclerView çš„ä¸‰ç§æ–¹æ³•</p><h3 id="setLayoutManager-æ–¹æ³•"><a href="#setLayoutManager-æ–¹æ³•" class="headerlink" title="setLayoutManager æ–¹æ³•"></a>setLayoutManager æ–¹æ³•</h3><p>å‚æ•°ï¼šLayoutManager<br>è¯¥æ–¹æ³•ç”¨äºè®¾ç½®å“ªç§ç±»å‹çš„å¸ƒå±€ï¼Œé€šè¿‡å®ä¾‹åŒ–å¸ƒå±€ç±»çš„æ–¹å¼æ¥åˆ›å»ºå¸ƒå±€ã€‚</p><p>ä¸‹é¢å°†ä¼šä»‹ç»ä¸‰ç§å¸ƒå±€ç®¡ç†ç±»ã€‚åˆ°åé¢å‰å®³çš„è¯ï¼Œä½ å°±ç›´æ¥å†™ä¸€ä¸ªè‡ªå·±ä¸ª LayoutManager å‡ºæ¥ï¼Œ<del>ç»™æˆ‘ä»¬è¿™ç¾¤æ‡’äººç”¨ï¼ˆbushiï¼‰</del></p><h3 id="setAdapter-æ–¹æ³•"><a href="#setAdapter-æ–¹æ³•" class="headerlink" title="setAdapter æ–¹æ³•"></a>setAdapter æ–¹æ³•</h3><p>åœ¨å­¦ä¹  RecyclerView ä¹‹å‰ï¼Œæˆ‘ä»¬å·²ç»ä½¿ç”¨è¿‡è¿™ä¸ªæ–¹æ³•ã€‚å¹¶ä¸”è¿˜æ˜¯ç»§æ‰¿äº† BaseAdapter è¿™ä¸ªæ–¹æ³•ï¼Œç„¶åè¿˜è‡ªå·±å†™äº†ä¸€ä¸ª ViewHolderã€‚Adapter æ˜¯ç”¨æ¥å°†æ•°æ®å±•ç¤ºåˆ° item å½“ä¸­çš„ï¼ŒViewHolder å°±æ˜¯å°†æ¯ä¸€ä¸ª item ä¸­çš„ç»„ä»¶ç»™å°è£…èµ·æ¥ï¼Œç”¨äºåç»­è°ƒç”¨çš„ã€‚</p><p>ä½†æ˜¯ï¼Œåœ¨è¿™é‡Œé¢ï¼Œæˆ‘ä»¬ä¸èƒ½å¤Ÿç»§æ‰¿è‡ª BaseAdapterï¼Œé‚£è¦å†™å¾ˆå¤šä¸œè¥¿ã€‚æˆ‘ä»¬éœ€è¦ç»§æ‰¿è‡ª RecyclerView.Adapter è¿™ä¸ªæŠ½è±¡ç±»ï¼Œè¯¥æŠ½è±¡ç±»åœ¨ RecyclerView çš„å†…éƒ¨ï¼Œæ‰€ä»¥æ˜¯å†…éƒ¨ç±»ï¼Œè€Œä¸”è¿˜æ˜¯å¸¦æ³›å‹çš„ï¼Œè¯¥ç±»çš„æ³›å‹å¿…é¡»æ˜¯ç»§æ‰¿è‡ª Recycler.ViewHolder ç±»çš„ã€‚æ‰€ä»¥æˆ‘ä»¬è‡ªå·±åˆ›å»º ViewHolder ç±»æ—¶è¿˜éœ€ç»§æ‰¿è‡ªè¯¥ç±»ã€‚</p><p>éœ€è¦å®ç°çš„æ–¹æ³•æœ‰è¿™ä¸‰ä¸ªï¼š</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">XXXAdapter</span> <span class="token keyword">extends</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>Adapter</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>ViewHolder</span> <span class="token function">onCreateViewHolder</span><span class="token punctuation">(</span><span class="token class-name">ViewGroup</span> parent<span class="token punctuation">,</span> <span class="token keyword">int</span> viewType<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onBindViewHolder</span><span class="token punctuation">(</span><span class="token class-name">RecyclerView<span class="token punctuation">.</span>ViewHolder</span> holder<span class="token punctuation">,</span> <span class="token keyword">int</span> position<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getItemCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ç»§æ‰¿è‡ª ViewHolder çš„æ—¶å€™ï¼Œå†™æ³•å’Œä¹‹å‰è‡ªå·±å†™ ViewHolder æœ‰äº›å·®åˆ«</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">LinearViewHolder</span> <span class="token keyword">extends</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>ViewHolder</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// StatementComponent......</span>    <span class="token class-name">LinearViewHolder</span><span class="token punctuation">(</span><span class="token class-name">View</span> itemView<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>itemView<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// findViewToDo......</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>åç»­çš„å†™æ³•å°†åœ¨ç¤ºä¾‹ä¸­è¯¦ç»†çš„è§£é‡Š</p><h3 id="setItemDecoration"><a href="#setItemDecoration" class="headerlink" title="setItemDecoration"></a>setItemDecoration</h3><p>è¿™ä¸ªæ–¹æ³•ç”¨äºè®¾ç½® item çš„æ ·å¼ï¼Œä¸è¿‡æˆ‘åªå­¦ä¹ åˆ°åˆ©ç”¨è¿™ä¸ªæ¥å®ç°è¾¹æ¡†ğŸ¤­ğŸ¤­ğŸ¤­ï¼Œåé¢åœ¨ç ”ç©¶çš„æ—¶å€™å°†ä¼šå•ç‹¬çš„å†™ä¸€ç¯‡æ—¥å¿—ï¼Œåšä¸€äº›å¥½ç©çš„ä¸œè¥¿å‡ºæ¥ã€‚ä½†æ˜¯ä¹Ÿæ­£æ˜¯å› ä¸ºè®¾ç½®äº†è¿™ä¸ªæ‰å¯¼è‡´äº†å†…å­˜ä¸è¶³çš„é—®é¢˜ã€‚å®³ï¼Œè¿™ä¸ªé—®é¢˜åç»­åœ¨è§£å†³å§ã€‚</p><h2 id="å¸ƒå±€ç®¡ç†ç±»ä»‹ç»"><a href="#å¸ƒå±€ç®¡ç†ç±»ä»‹ç»" class="headerlink" title="å¸ƒå±€ç®¡ç†ç±»ä»‹ç»"></a>å¸ƒå±€ç®¡ç†ç±»ä»‹ç»</h2><h3 id="LinearLayoutManager"><a href="#LinearLayoutManager" class="headerlink" title="LinearLayoutManager"></a>LinearLayoutManager</h3><p>è¿™æ˜¯ä¸€ä¸ªçº¿æ€§å¸ƒå±€çš„ç®¡ç†ç±»</p><h4 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h4><p>å®ƒæœ‰ä¸¤ç§å¸¸ç”¨çš„æ„é€ æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>public LinearLayoutManager(Context context)</code></td><td>ä¸€ä¸ªå‚æ•°ï¼Œä¼ å…¥å½“å‰çš„ Activity å¯¹è±¡ï¼Œé»˜è®¤æ˜¯å‚ç›´ä¸”é¡ºåºçš„æ’åˆ—ä¸‹æ¥ã€‚</td></tr><tr><td><code>public LinearLayoutManager(Context context, int orientation, boolean reverseLayout)</code></td><td>é™¤äº†å¯ä»¥ä¼ é€’ Activity è¿˜èƒ½æŒ‡å®šæ˜¯æ°´å¹³æ’åˆ—å’Œç«–ç›´æ’åˆ—ï¼Œè¿˜èƒ½æŒ‡å®šæ˜¯å¦é€†åºã€‚</td></tr></tbody></table><blockquote><p>åœ¨æŒ‡å®šæ°´å¹³æˆ–è€…å‚ç›´çš„æ–¹å¼æ—¶ï¼Œè¿™äº›å¸ƒå±€ç®¡ç†ç±»ä¸­éƒ½æœ‰ 2 ä¸ªå¸¸é‡ç”¨æ¥æŒ‡å®šæ˜¯å¦å‚ç›´å’Œæ°´å¹³ï¼Œæ°´å¹³å¸ƒå±€å°±æ˜¯æŒ‰ç…§ <code>XXXManager.HORIZENTAL</code> çš„æ ¼å¼ï¼Œå‚ç›´å¸ƒå±€å°±æ˜¯ <code>XXXManager.VERTICAL</code> çš„æ ¼å¼</p></blockquote><p>å®ƒçš„å±•ç¤ºæ•ˆæœå’Œä¹‹å‰å­¦ä¹ çš„ ListView çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚ä¸è¿‡å®ƒæ¯” ListView æ›´å‰å®³ï¼Œè¿™å¯ä»¥æ°´å¹³æ’åˆ—çš„ã€‚åœ¨æ²¡æœ‰ RecyclerView ä¹‹å‰éœ€è¦å¼•å…¥ç¬¬ä¸‰æ–¹çš„åŒ…æ¥ä½¿å¾— ListView æ¨ªå‘æ’åˆ—ï¼Œç°åœ¨æœ‰äº†è¿™ä¸ªæ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚</p><h3 id="GridLayoutManager"><a href="#GridLayoutManager" class="headerlink" title="GridLayoutManager"></a>GridLayoutManager</h3><p>è¿™æ˜¯ä¸€ä¸ªç½‘æ ¼å¸ƒå±€çš„ç®¡ç†ç±»ï¼Œå®ƒæœ‰ä¸¤ç§å¸¸ç”¨çš„æ„é€ æ–¹æ³•ã€‚ä¸è¿‡æŸ¥çœ‹æºç å‘ç°å®ƒæ˜¯ç»§æ‰¿è‡ª LinearLayoutManager ç±»çš„ï¼Œå˜»å˜»ã€‚</p><h4 id="æ„é€ æ–¹æ³•-1"><a href="#æ„é€ æ–¹æ³•-1" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h4><p>å®ƒä¹Ÿå…·æœ‰ä¸¤ç§æ„é€ æ–¹æ³•ã€‚</p><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>GridLayoutManager(Context context, int spanCount)</code></td><td>ä¸¤ä¸ªå‚æ•°ï¼Œä¼ å…¥å½“å‰çš„ Activity å¯¹è±¡å¹¶ä¸”æŒ‡å®šä¸€è¡Œå‡ åˆ—ï¼Œé»˜è®¤æ˜¯å‚ç›´ä¸”é¡ºåºçš„æ’åˆ—ä¸‹æ¥ã€‚</td></tr><tr><td><code>public GridLayoutManager(Context context, int spanCount, int orientation, boolean reverseLayout)</code></td><td>é™¤äº†å¯ä»¥ä¼ é€’ä»¥ä¸Šå‚æ•°ä»¥å¤–ï¼Œè¿˜èƒ½æŒ‡å®šæ°´å¹³å’Œå‚ç›´çš„æ–¹å¼ï¼Œä»¥åŠæ˜¯å¦é€†åº</td></tr></tbody></table><p>ç¬¬äºŒä¸ªæ„é€ æ–¹æ³•ä¹Ÿå°±æ˜¯ LinearLayoutManger ä¸­çš„å¤§åŒå°å¼‚ã€‚</p><h3 id="StaggeredGridLayoutManager"><a href="#StaggeredGridLayoutManager" class="headerlink" title="StaggeredGridLayoutManager"></a>StaggeredGridLayoutManager</h3><p>è¿™æ˜¯ç€‘å¸ƒæµçš„ä¸€ä¸ªç®¡ç†ç±»ï¼Œä¸è¿‡å®ƒçš„æœ¬æ„å¹¶ä¸æ˜¯ç€‘å¸ƒï¼Œè€Œæ˜¯é”™å¼€çš„ç½‘æ ¼å¸ƒå±€ã€‚ç€‘å¸ƒæµåœ¨ app ä¸­ç‰¹åˆ«å¸¸è§ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„æ·˜å®ï¼Œæ‹¼å¤šå¤šè¿™ç§ç”µå•† app ä¸­å°±ä½¿ç”¨äº†è¿™ç§ç€‘å¸ƒæµçš„å¸ƒå±€å½¢å¼ã€‚</p><h4 id="æ„é€ æ–¹æ³•-2"><a href="#æ„é€ æ–¹æ³•-2" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h4><p>å®ƒå…·æœ‰ä¸€ç§æ„é€ æ–¹æ³•ã€‚</p><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>StaggeredGridLayoutManager(int spanCount, int orientation)</code></td><td>ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæŒ‡å®šä¸€è¡Œå‡ åˆ—ï¼Œå¦ä¸€ä¸ªæŒ‡å®šæ’åˆ—æ–¹å¼ã€‚</td></tr></tbody></table><blockquote><p>ä¸è¿‡å¾ˆé—æ†¾ï¼ŒRecyclerView å¹¶ä¸åƒ ListView å’Œ GridView ä¸€æ ·æœ‰ç‚¹å‡»äº‹ä»¶ã€‚ä¸è¿‡æ²¡å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±åˆ›é€ ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ã€‚åˆ©ç”¨æ¥å£å›è°ƒçš„æ–¹å¼è‡ªå·±å†™ä¸€ä¸ªç‚¹å‡»äº‹ä»¶çš„æ–¹æ³•ã€‚</p></blockquote><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p>ä»¥ä¸‹çš„ç¤ºä¾‹å±•ç¤ºå‡º LinearLayoutManagerã€GridLayoutManager å’Œ StaggeredGridLayoutManager ä¸‰ç§å¸ƒå±€çš„æ•ˆæœ</p><h3 id="ç¤ºä¾‹1"><a href="#ç¤ºä¾‹1" class="headerlink" title="ç¤ºä¾‹1"></a>ç¤ºä¾‹1</h3><h4 id="å¸ƒå±€æ–‡ä»¶"><a href="#å¸ƒå±€æ–‡ä»¶" class="headerlink" title="å¸ƒå±€æ–‡ä»¶"></a>å¸ƒå±€æ–‡ä»¶</h4><h5 id="å±•ç¤ºçº¿æ€§å¸ƒå±€çš„æ–‡ä»¶"><a href="#å±•ç¤ºçº¿æ€§å¸ƒå±€çš„æ–‡ä»¶" class="headerlink" title="å±•ç¤ºçº¿æ€§å¸ƒå±€çš„æ–‡ä»¶"></a>å±•ç¤ºçº¿æ€§å¸ƒå±€çš„æ–‡ä»¶</h5><p>è¯¥ activity çš„å¸ƒå±€æ–‡ä»¶çš„å†…å®¹éå¸¸ç®€å•ï¼Œé‡Œé¢æ˜¯ä¸€ä¸ª RecyclerView æ ‡ç­¾</p><p>å¯¹åº”çš„ activity_linear_recycler_view.xml å¦‚ä¸‹</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>android.support.v7.widget.RecyclerView</span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#eee<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/rv_list<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">></span></span></code></pre><h5 id="item-å¸ƒå±€æ–‡ä»¶"><a href="#item-å¸ƒå±€æ–‡ä»¶" class="headerlink" title="item å¸ƒå±€æ–‡ä»¶"></a>item å¸ƒå±€æ–‡ä»¶</h5><p>åœ¨ item ä¸­ï¼Œæˆ‘ç»™å®ƒæ”¾äº†ä¸€ä¸ªç®€å•çš„ TextView æ¥æ”¾ç½® item ä¸­çš„æ ·å¼</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#fff<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/tv_recycle_item<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æµ‹è¯•æ–‡å­—<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@color/colorBlack<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><h4 id="java-ä»£ç "><a href="#java-ä»£ç " class="headerlink" title="java ä»£ç "></a>java ä»£ç </h4><h5 id="Activity-ä»£ç "><a href="#Activity-ä»£ç " class="headerlink" title="Activity ä»£ç "></a>Activity ä»£ç </h5><p>è·å–åˆ° RecyclerView è¿™ä¸ªç»„ä»¶æ—¶ï¼Œè¿™ä¸¤ä¸ªæ­¥éª¤æ˜¯å¿…é¡»çš„ï¼Œé¡ºåºå¯ä»¥æ‰“ä¹±ã€‚</p><ol><li>è®¾ç½®å¸ƒå±€ç®¡ç†ç±»</li><li>è®¾ç½® Adapter</li></ol><p>å¯é€‰æ­¥éª¤<br>3. è®¾ç½®åç§»é‡ç­‰å¸ƒå±€æ–¹å¼</p><p>ä»£ç å¦‚ä¸‹</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LinearRecyclerViewActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">RecyclerView</span> rv_list<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_linear_recycler_view<span class="token punctuation">)</span><span class="token punctuation">;</span>        rv_list <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>rv_list<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ·»åŠ å¸ƒå±€ç®¡ç†å™¨ï¼Œè¿™é‡Œæ·»åŠ çš„æ˜¯çº¿æ€§å¸ƒå±€ç®¡ç†å™¨ï¼Œé»˜è®¤ä¸ºç«–ç›´æ–¹å‘</span>        <span class="token comment">// rv_list.setLayoutManager(new LinearLayoutManager(this));</span>        <span class="token comment">// å°†å…¶è®¾ç½®æˆæ°´å¹³æ–¹å‘ï¼Œé»˜è®¤ä¸é€†åºå±•ç¤º</span>        rv_list<span class="token punctuation">.</span><span class="token function">setLayoutManager</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LinearLayoutManager</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">LinearLayoutManager</span><span class="token punctuation">.</span>HORIZONTAL<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ·»åŠ ä¸€ä¸ª Adapter ç”¨äºæ¸²æŸ“å…¨éƒ¨çš„ item</span>        rv_list<span class="token punctuation">.</span><span class="token function">setAdapter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LinearAdapter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ·»åŠ ä¸€ä¸ª Decoration</span>        rv_list<span class="token punctuation">.</span><span class="token function">addItemDecoration</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyDecoration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ä»¥ä¸Šçš„ä»£ç æŒ‡å®šäº†ä¸€ä¸ª LinearLayoutManager çš„å¸ƒå±€ç®¡ç†ç±»ï¼Œä¼ å…¥å½“å‰çš„å®ä¾‹å¯¹è±¡ï¼Œè®¾ç½®ä¸ºæ°´å¹³æ‘†æ”¾ä¸”ä¸è®¾ç½®ä¸ºé€†åºã€‚<br>è®¾ç½®çš„ Adapter éœ€è¦æˆ‘ä»¬ç»§æ‰¿è‡ª RecyclerView.Adapter ç±»ï¼Œè¯¥ç±»æ˜¯ RecyclerView ä¸­çš„å†…éƒ¨ç±»ã€‚</p><p>åœ¨é‡å†™ Adapter ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±å†™ä¸€ä¸ª ViewHolderï¼Œå¹¶ä¸”ç»§æ‰¿è‡ª RecyclerView.ViewHolderã€‚æœ¬ç¤ºä¾‹è‡ªå·±å†™äº†ä¸€ä¸ª LinearViewHolder ç±»</p><p>ç›¸å…³çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// è‡ªå®šä¹‰ LinearViewHolder</span><span class="token keyword">class</span> <span class="token class-name">LinearViewHolder</span> <span class="token keyword">extends</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>ViewHolder</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">TextView</span> textView<span class="token punctuation">;</span>    <span class="token class-name">LinearViewHolder</span><span class="token punctuation">(</span><span class="token class-name">View</span> itemView<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>itemView<span class="token punctuation">)</span><span class="token punctuation">;</span>        textView <span class="token operator">=</span> itemView<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>tv_recycle_item<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token class-name">TextView</span> <span class="token function">getTextView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> textView<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è‡ªå®šä¹‰ ViewHolder å®Œæˆä¹‹åï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦ç»§æ‰¿ä¸€ä¸ª RecyclerView.Adapterï¼Œæœ¬ç¤ºä¾‹ä¸­è‡ªå·±ç¼–å†™äº† LinearAdapter ç±»ã€‚</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// æ–°å»ºçš„ Adapter</span><span class="token keyword">class</span> <span class="token class-name">LinearAdapter</span> <span class="token keyword">extends</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>Adapter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LinearViewHolder</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Context</span> context<span class="token punctuation">;</span>    <span class="token class-name">LinearAdapter</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">LinearViewHolder</span> <span class="token function">onCreateViewHolder</span><span class="token punctuation">(</span><span class="token class-name">ViewGroup</span> parent<span class="token punctuation">,</span> <span class="token keyword">int</span> viewType<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å°† layout_list_recycler_item.xml å¸ƒå±€æ–‡ä»¶å¡«å……åˆ° RecyclerView ä¸­ã€‚</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LinearViewHolder</span><span class="token punctuation">(</span><span class="token class-name">LayoutInflater</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>layout_list_recycler_item<span class="token punctuation">,</span> parent<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onBindViewHolder</span><span class="token punctuation">(</span><span class="token class-name">LinearViewHolder</span> holder<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token keyword">int</span> position<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        holder<span class="token punctuation">.</span><span class="token function">getTextView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"èœå•é€‰é¡¹_"</span> <span class="token operator">+</span> position<span class="token punctuation">)</span><span class="token punctuation">;</span>        holder<span class="token punctuation">.</span>itemView<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">LinearRecyclerViewActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"ç‚¹å‡»äº†ç¬¬ "</span> <span class="token operator">+</span> position <span class="token operator">+</span> <span class="token string">" é¡¹"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// è®¾ç½®å¤šå°‘ä¸ª item</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getItemCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token number">20</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>onCreateViewHolder æ–¹æ³•ä¸­å°†æˆ‘ä»¬è‡ªå·±å†™å¥½çš„ LinearViewHolder ç±»å®ä¾‹åŒ–å‡ºå»å³å¯ï¼ŒåŒæ—¶ä¹Ÿèƒ½å¤Ÿä½¿ç”¨ ViewType æ¥è¿”å›ä¸åŒçš„ ViewHolder å®ç°æ›´åŠ å¤æ‚çš„å¸ƒå±€æ–¹å¼ã€‚</p><p>onBindViewHolder æ–¹æ³•å°±æ˜¯ç»™å¯¹æ¯ä¸€ä¸ª item é¡¹è¿›è¡Œè®¾ç½®ã€‚æ¯”å¦‚ä»¥ä¸Šçš„ç¤ºä¾‹ï¼Œå¯ä»¥è®¾ç½®å­—ä½“ï¼Œè®¾ç½®ä¸€ä¸ªç‚¹å‡»çš„ç›‘å¬äº‹ä»¶ç­‰ç­‰ã€‚</p><p>getItemCount æ–¹æ³•æ˜¯è¿”å›å¤šå°‘ä¸ª itemã€‚</p><p>è‡ªå·±åˆ›å»ºäº†ä¸€ä¸ª Decorationï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œè®¾ç½®äº†ä¸€ä¸ªç°è‰²çš„èƒŒæ™¯è‰²ã€‚é€šè¿‡åç§»é‡å°†ç°è‰²çš„èƒŒæ™¯å±•ç¤ºå‡ºæ¥ï¼Œä»è€Œä½¿ç”¨æˆ·æ„Ÿå—åˆ°ä¸€ç§é”™è§‰ï¼Œæ„Ÿè§‰å°±æ˜¯æœ‰è¾¹æ¡†ä¸€æ ·ã€‚<br>ä»£ç å¦‚ä¸‹ï¼š</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„ Decoration</span><span class="token keyword">class</span> <span class="token class-name">MyDecoration</span> <span class="token keyword">extends</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>ItemDecoration</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// è®¾ç½®åç§»é‡</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getItemOffsets</span><span class="token punctuation">(</span><span class="token class-name">Rect</span> outRect<span class="token punctuation">,</span> <span class="token class-name">View</span> view<span class="token punctuation">,</span> <span class="token class-name">RecyclerView</span> parent<span class="token punctuation">,</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>State</span> state<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getItemOffsets</span><span class="token punctuation">(</span>outRect<span class="token punctuation">,</span> view<span class="token punctuation">,</span> parent<span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>        outRect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDimensionPixelOffset</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>dimen<span class="token punctuation">.</span>divideHeight<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="è¿è¡Œæ•ˆæœ"><a href="#è¿è¡Œæ•ˆæœ" class="headerlink" title="è¿è¡Œæ•ˆæœ"></a>è¿è¡Œæ•ˆæœ</h4><p><img src="/images/Android/recycleview/nvnpd-cc8xg.gif" loading="lazy"></p><h3 id="ç¤ºä¾‹2"><a href="#ç¤ºä¾‹2" class="headerlink" title="ç¤ºä¾‹2"></a>ç¤ºä¾‹2</h3><blockquote><p>ç¤ºä¾‹ 2 å’Œ ç¤ºä¾‹ 3 éƒ½å·®ä¸å¤šï¼Œç»§æ‰¿çš„ Adapter å’Œ ViewHolder éƒ½æ˜¯æ¥è‡ª RecyclerView ä¸­çš„å†…éƒ¨ç±»ï¼Œå¾ˆå¤šéƒ¨åˆ†ï¼Œå¾ˆå¤šå†™æ³•å…¶å®éƒ½æ˜¯å¤§åŒå°å¼‚çš„ã€‚åé¢çš„å¸ƒå±€æ–¹å¼ä¹Ÿå°±ä¸è¯¦ç»†ä»‹ç»äº†ã€‚</p></blockquote><h4 id="å¸ƒå±€æ–‡ä»¶-1"><a href="#å¸ƒå±€æ–‡ä»¶-1" class="headerlink" title="å¸ƒå±€æ–‡ä»¶"></a>å¸ƒå±€æ–‡ä»¶</h4><h5 id="å±•ç¤ºç½‘æ ¼å¸ƒå±€çš„æ–‡ä»¶"><a href="#å±•ç¤ºç½‘æ ¼å¸ƒå±€çš„æ–‡ä»¶" class="headerlink" title="å±•ç¤ºç½‘æ ¼å¸ƒå±€çš„æ–‡ä»¶"></a>å±•ç¤ºç½‘æ ¼å¸ƒå±€çš„æ–‡ä»¶</h5><p>activity_grid_recycler_view.xml</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@color/colorGray<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>android.support.v7.widget.RecyclerView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/recycler_view_grid<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><h5 id="item-å¸ƒå±€æ–‡ä»¶-1"><a href="#item-å¸ƒå±€æ–‡ä»¶-1" class="headerlink" title="item å¸ƒå±€æ–‡ä»¶"></a>item å¸ƒå±€æ–‡ä»¶</h5><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ImageView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/header<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@color/colorAccent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>scaleType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>centerCrop<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>        <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>7dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/name<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æµ‹è¯•æ–‡å­—<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>14dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><h4 id="java-ä»£ç -1"><a href="#java-ä»£ç -1" class="headerlink" title="java ä»£ç "></a>java ä»£ç </h4><h5 id="Activity-ä»£ç -1"><a href="#Activity-ä»£ç -1" class="headerlink" title="Activity ä»£ç "></a>Activity ä»£ç </h5><p>å½“å‰ç¤ºä¾‹ä¸­ä½¿ç”¨çš„ GridLayoutManager ç±»ï¼Œä¼ å…¥äº†å½“å‰çš„ Activity ç±»ï¼Œè¿˜æŒ‡å®šäº†ä¸€è¡Œ 3 åˆ—ã€‚å¦‚æœæœ‰é€†åºå’Œæ°´å¹³çš„éœ€è¦ï¼Œä½¿ç”¨ HORIZENTAL å¸¸é‡ã€è®¾ç½®æˆ true å³å¯</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GridRecyclerViewActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">RecyclerView</span> recyclerView<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_grid_recycler_view<span class="token punctuation">)</span><span class="token punctuation">;</span>        recyclerView <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>recycler_view_grid<span class="token punctuation">)</span><span class="token punctuation">;</span>        recyclerView<span class="token punctuation">.</span><span class="token function">setLayoutManager</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">GridLayoutManager</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        recyclerView<span class="token punctuation">.</span><span class="token function">setAdapter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">GridRecyclerViewAdapter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        recyclerView<span class="token punctuation">.</span><span class="token function">addItemDecoration</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>ItemDecoration</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getItemOffsets</span><span class="token punctuation">(</span><span class="token class-name">Rect</span> outRect<span class="token punctuation">,</span> <span class="token class-name">View</span> view<span class="token punctuation">,</span> <span class="token class-name">RecyclerView</span> parent<span class="token punctuation">,</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>State</span> state<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getItemOffsets</span><span class="token punctuation">(</span>outRect<span class="token punctuation">,</span> view<span class="token punctuation">,</span> parent<span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> gap <span class="token operator">=</span> <span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDimensionPixelOffset</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>dimen<span class="token punctuation">.</span>space<span class="token punctuation">)</span><span class="token punctuation">;</span>                outRect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>gap<span class="token punctuation">,</span> gap<span class="token punctuation">,</span> gap<span class="token punctuation">,</span> gap<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h5 id="Adapter-ä»£ç "><a href="#Adapter-ä»£ç " class="headerlink" title="Adapter ä»£ç "></a>Adapter ä»£ç </h5><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GridRecyclerViewAdapter</span> <span class="token keyword">extends</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>Adapter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GridRecyclerViewAdapter<span class="token punctuation">.</span>GridViewHolder</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Context</span> context<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">GridRecyclerViewAdapter<span class="token punctuation">.</span>GridViewHolder</span> <span class="token function">onCreateViewHolder</span><span class="token punctuation">(</span><span class="token class-name">ViewGroup</span> parent<span class="token punctuation">,</span> <span class="token keyword">int</span> viewType<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">GridViewHolder</span><span class="token punctuation">(</span><span class="token class-name">LayoutInflater</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>layout_grid_item<span class="token punctuation">,</span> parent<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onBindViewHolder</span><span class="token punctuation">(</span><span class="token class-name">GridRecyclerViewAdapter<span class="token punctuation">.</span>GridViewHolder</span> holder<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token keyword">int</span> position<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// åŠ è½½ç½‘ç»œå›¾ç‰‡</span>        <span class="token class-name">Glide</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"http://www.topacg.com/wp-content/uploads"</span> <span class="token operator">+</span>                <span class="token string">"/2020/03/frc-11c619718c036bf579c246cdd07e6d77.jpeg"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span>holder<span class="token punctuation">.</span>imageView<span class="token punctuation">)</span><span class="token punctuation">;</span>        holder<span class="token punctuation">.</span>textView<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"ç¶é—¨ç¥¢è±†å­"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getItemCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token number">20</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">class</span> <span class="token class-name">GridViewHolder</span> <span class="token keyword">extends</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>ViewHolder</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ImageView</span> imageView<span class="token punctuation">;</span>        <span class="token class-name">TextView</span> textView<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">GridViewHolder</span><span class="token punctuation">(</span><span class="token class-name">View</span> itemView<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">super</span><span class="token punctuation">(</span>itemView<span class="token punctuation">)</span><span class="token punctuation">;</span>            imageView <span class="token operator">=</span> itemView<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>header<span class="token punctuation">)</span><span class="token punctuation">;</span>            textView <span class="token operator">=</span> itemView<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="è¿è¡Œæ•ˆæœ-1"><a href="#è¿è¡Œæ•ˆæœ-1" class="headerlink" title="è¿è¡Œæ•ˆæœ"></a>è¿è¡Œæ•ˆæœ</h4><p><img src="/images/Android/recycleview/Screenshot_20210220_115145_top.bestguo.androidlay.jpg" loading="lazy"></p><h3 id="ç¤ºä¾‹3"><a href="#ç¤ºä¾‹3" class="headerlink" title="ç¤ºä¾‹3"></a>ç¤ºä¾‹3</h3><h4 id="å¸ƒå±€æ–‡ä»¶-2"><a href="#å¸ƒå±€æ–‡ä»¶-2" class="headerlink" title="å¸ƒå±€æ–‡ä»¶"></a>å¸ƒå±€æ–‡ä»¶</h4><h5 id="å±•ç¤ºç€‘å¸ƒæµå¸ƒå±€çš„æ–‡ä»¶"><a href="#å±•ç¤ºç€‘å¸ƒæµå¸ƒå±€çš„æ–‡ä»¶" class="headerlink" title="å±•ç¤ºç€‘å¸ƒæµå¸ƒå±€çš„æ–‡ä»¶"></a>å±•ç¤ºç€‘å¸ƒæµå¸ƒå±€çš„æ–‡ä»¶</h5><p>activity_pu_recycler_view.xml</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@color/colorGray<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>android.support.v7.widget.RecyclerView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/recycler_view_pu<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><h5 id="item-å¸ƒå±€æ–‡ä»¶-2"><a href="#item-å¸ƒå±€æ–‡ä»¶-2" class="headerlink" title="item å¸ƒå±€æ–‡ä»¶"></a>item å¸ƒå±€æ–‡ä»¶</h5><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ImageView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/image_asd<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><h4 id="java-ä»£ç -2"><a href="#java-ä»£ç -2" class="headerlink" title="java ä»£ç "></a>java ä»£ç </h4><h5 id="Activity-ä»£ç -2"><a href="#Activity-ä»£ç -2" class="headerlink" title="Activity ä»£ç "></a>Activity ä»£ç </h5><p>å½“å‰ç¤ºä¾‹ä¸­ä½¿ç”¨çš„ GridLayoutManager ç±»ï¼ŒæŒ‡å®šäº†ä¸€è¡Œ 3 åˆ—ï¼Œè®¾ç½®æˆå‚ç›´çš„ç€‘å¸ƒæµæ•ˆæœã€‚å¦‚æœæœ‰æ°´å¹³çš„éœ€è¦ï¼Œä½¿ç”¨ HORIZENTAL å¸¸é‡å³å¯</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PuRecyclerViewActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">RecyclerView</span> recyclerView<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_pu_recycler_view<span class="token punctuation">)</span><span class="token punctuation">;</span>        recyclerView <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>recycler_view_pu<span class="token punctuation">)</span><span class="token punctuation">;</span>        recyclerView<span class="token punctuation">.</span><span class="token function">setLayoutManager</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StaggeredGridLayoutManager</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token class-name">StaggeredGridLayoutManager</span><span class="token punctuation">.</span>VERTICAL<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        recyclerView<span class="token punctuation">.</span><span class="token function">setAdapter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PuAdapter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        recyclerView<span class="token punctuation">.</span><span class="token function">addItemDecoration</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>ItemDecoration</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getItemOffsets</span><span class="token punctuation">(</span><span class="token class-name">Rect</span> outRect<span class="token punctuation">,</span> <span class="token class-name">View</span> view<span class="token punctuation">,</span> <span class="token class-name">RecyclerView</span> parent<span class="token punctuation">,</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>State</span> state<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getItemOffsets</span><span class="token punctuation">(</span>outRect<span class="token punctuation">,</span> view<span class="token punctuation">,</span> parent<span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> gap <span class="token operator">=</span> <span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDimensionPixelOffset</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>dimen<span class="token punctuation">.</span>space<span class="token punctuation">)</span><span class="token punctuation">;</span>                outRect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>gap<span class="token punctuation">,</span> gap<span class="token punctuation">,</span> gap<span class="token punctuation">,</span> gap<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h5 id="Adapter-ä»£ç -1"><a href="#Adapter-ä»£ç -1" class="headerlink" title="Adapter ä»£ç "></a>Adapter ä»£ç </h5><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PuAdapter</span> <span class="token keyword">extends</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>Adapter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PuAdapter<span class="token punctuation">.</span>PuViewHolder</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Context</span> context<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">PuAdapter</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">PuViewHolder</span> <span class="token function">onCreateViewHolder</span><span class="token punctuation">(</span><span class="token class-name">ViewGroup</span> parent<span class="token punctuation">,</span> <span class="token keyword">int</span> viewType<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PuViewHolder</span><span class="token punctuation">(</span><span class="token class-name">LayoutInflater</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>layout_pu_recycler_item<span class="token punctuation">,</span> parent<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onBindViewHolder</span><span class="token punctuation">(</span><span class="token class-name">PuViewHolder</span> holder<span class="token punctuation">,</span> <span class="token keyword">int</span> position<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">switch</span> <span class="token punctuation">(</span>position <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>                <span class="token class-name">Glide</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fattachments.gfan.com%2Fforum%2F201501%2F15%2F1"</span> <span class="token operator">+</span>                        <span class="token string">"05418z33cyjacahzodgc3.jpg&amp;refer=http%3A%2F%2Fattachments.gfan.com&amp;a"</span> <span class="token operator">+</span>                        <span class="token string">"pp=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span>holder<span class="token punctuation">.</span>imageView<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>                <span class="token class-name">Glide</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"https://ss1.baidu.com/9vo3dSag_xI4khGko9WTAnF"</span> <span class="token operator">+</span>                        <span class="token string">"6hhy/zhidao/pic/item/4610b912c8fcc3ce1a3113699045d688d53f20f3.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span>holder<span class="token punctuation">.</span>imageView<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">default</span><span class="token operator">:</span>                <span class="token class-name">Glide</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fblog%2F201307%2F"</span> <span class="token operator">+</span>                        <span class="token string">"23%2F20130723121038_WxiVJ.jpeg&amp;refer=http%3A%2F%2Fb-ssl.duitang.com&amp;app"</span> <span class="token operator">+</span>                        <span class="token string">"=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span>holder<span class="token punctuation">.</span>imageView<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getItemCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token number">21</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">PuViewHolder</span> <span class="token keyword">extends</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>ViewHolder</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token class-name">ImageView</span> imageView<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">PuViewHolder</span><span class="token punctuation">(</span><span class="token class-name">View</span> itemView<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">super</span><span class="token punctuation">(</span>itemView<span class="token punctuation">)</span><span class="token punctuation">;</span>            imageView <span class="token operator">=</span> itemView<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>image_asd<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="è¿è¡Œæ•ˆæœ-2"><a href="#è¿è¡Œæ•ˆæœ-2" class="headerlink" title="è¿è¡Œæ•ˆæœ"></a>è¿è¡Œæ•ˆæœ</h4><p><img src="/images/Android/recycleview/Screenshot_20210220_115200_top.bestguo.androidlay.jpg" loading="lazy"></p><h2 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h2><p>ä¸Šæ–‡ä¹Ÿæåˆ°è¿‡ RecyclerView å¹¶æ²¡æœ‰é’ˆå¯¹ item æ¥ä¸“é—¨æŒ‡å®šäº‹ä»¶ç›‘å¬çš„æ–¹æ³•ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥è‡ªå·±å†™ä¸€ä¸ªæ¥å£ï¼Œç„¶åå»å®ç°è¿™ä¸ªæ¥å£ï¼Œæœ€åè¿›è¡Œæ¥å£å›è°ƒã€‚ï¼ˆå…¶å®æ‰€è°“çš„æ¥å£å›è°ƒå°±æ˜¯åˆ©ç”¨äº†é¢å‘å¯¹è±¡çš„å¤šæ€æ€§ï¼Œå­ç±»å¯ä»¥ç±»å‹æå‡ä¸ºçˆ¶ç±»çš„ç±»å‹ï¼Œçˆ¶ç±»å¼ºåˆ¶è½¬æ¢æˆå­ç±»ã€‚ï¼‰è¿™æ ·çš„ç›®çš„ç›®å‰æ˜¯å¯ä»¥çœå»ä½ åœ¨è‡ªå·±çš„ Adapter ç±»ä¸­é¢‘ç¹çš„ä¿®æ”¹ä»£ç ï¼ŒåŒæ—¶ä¹Ÿé™ä½çš„ä»£ç çš„è€¦åˆæ€§ã€‚</p><p>ç°åœ¨æˆ‘ä»¬ä»¥ç¤ºä¾‹ 2 çš„ä»£ç æ¥ä¸¾ä¾‹ã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åŠ è½½ç½‘ç»œå›¾ç‰‡ï¼Œé‚£åŠ è½½ç½‘ç»œå›¾ç‰‡çš„æ—¶å€™è‚¯å®šæ˜¯éœ€è¦å¾—åˆ°å®ƒçš„ç»„ä»¶ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨åŠ è½½ç½‘ç»œå›¾ç‰‡ä¹‹åå¯ä»¥è®¾ç½®å…¶ç‚¹å‡»çš„ç›‘å¬äº‹ä»¶ã€‚ä»¥ä¸‹æˆ‘è®¾ç½®äº†ä¸¤ä¸ªäº‹ä»¶ï¼Œä¸€ä¸ªçŸ­æŒ‰ï¼Œä¸€ä¸ªé•¿æŒ‰ã€‚</p><p>äº‹å…ˆåœ¨å†…éƒ¨ç±»ä¸­å†™å¥½ä¸¤ä¸ªæ¥å£ï¼Œå¹¶ä¸”åˆ©ç”¨è¯¥ç±»å‹å£°æ˜å¥½æˆå‘˜å˜é‡ã€‚ä»£ç å¦‚ä¸‹</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GridRecyclerViewAdapter</span> <span class="token keyword">extends</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>Adapter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GridRecyclerViewAdapter<span class="token punctuation">.</span>GridViewHolder</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Context</span> context<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">ItemOnClickListener</span> clickListener<span class="token punctuation">;</span> <span class="token comment">// çŸ­æŒ‰äº‹ä»¶</span>    <span class="token keyword">private</span> <span class="token class-name">ItemOnLongClickListener</span> longClickListener<span class="token punctuation">;</span> <span class="token comment">// é•¿æŒ‰äº‹ä»¶</span>    <span class="token comment">// æ„é€ æ–¹æ³•ï¼Œä¸€ä¸ªç”¨äºä¼ é€’ Activity ç±»ï¼Œä¸€ä¸ªç”¨äºä¼ å…¥ä¸€ä¸ªå·²å®ç°çš„è¯¥æ¥å£çš„ç‚¹å‡»ç±»ï¼Œå¦ä¸€ä¸ªç”¨äºä¼ å…¥ä¸€ä¸ªå·²å®ç°çš„è¯¥æ¥å£é•¿æŒ‰çš„ç‚¹å‡»ç±»</span>    <span class="token keyword">public</span> <span class="token class-name">GridRecyclerViewAdapter</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token class-name">ItemOnClickListener</span> clickListener<span class="token punctuation">,</span> <span class="token class-name">ItemOnLongClickListener</span> longClickListener<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>clickListener <span class="token operator">=</span> clickListener<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>longClickListener <span class="token operator">=</span> longClickListener<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onBindViewHolder</span><span class="token punctuation">(</span><span class="token class-name">GridRecyclerViewAdapter<span class="token punctuation">.</span>GridViewHolder</span> holder<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token keyword">int</span> position<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// åŠ è½½ç½‘ç»œå›¾ç‰‡</span>        <span class="token class-name">Glide</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"http://www.topacg.com/wp-content/uploads"</span> <span class="token operator">+</span>                <span class="token string">"/2020/03/frc-11c619718c036bf579c246cdd07e6d77.jpeg"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span>holder<span class="token punctuation">.</span>imageView<span class="token punctuation">)</span><span class="token punctuation">;</span>        holder<span class="token punctuation">.</span>textView<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"ç¶é—¨ç¥¢è±†å­"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// çŸ­æŒ‰äº‹ä»¶</span>        holder<span class="token punctuation">.</span>imageView<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// çŸ­æŒ‰äº‹ä»¶æ¥å£å›è°ƒ</span>                clickListener<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> position<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é•¿æŒ‰äº‹ä»¶</span>        holder<span class="token punctuation">.</span>imageView<span class="token punctuation">.</span><span class="token function">setOnLongClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnLongClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">onLongClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// é•¿æŒ‰äº‹ä»¶æ¥å£å›è°ƒ</span>                <span class="token keyword">return</span> longClickListener<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> position<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment">/**     * ç‚¹å‡»äº‹ä»¶     */</span>    <span class="token keyword">interface</span> <span class="token class-name">ItemOnClickListener</span><span class="token punctuation">&#123;</span>        <span class="token keyword">void</span> <span class="token function">click</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">,</span> <span class="token keyword">int</span> position<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * é•¿æŒ‰ç‚¹å‡»äº‹ä»¶     */</span>    <span class="token keyword">interface</span> <span class="token class-name">ItemOnLongClickListener</span><span class="token punctuation">&#123;</span>        <span class="token keyword">boolean</span> <span class="token function">click</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">,</span> <span class="token keyword">int</span> position<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ç„¶ååœ¨ Activity ç±»ä¸­å®ç°çŸ­æŒ‰å’Œé•¿æŒ‰çš„ç±»ï¼Œå°†å…¶å®ä¾‹åŒ–ä¼ å…¥æ„é€ æ–¹æ³•ä¸­</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GridRecyclerViewActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">RecyclerView</span> recyclerView<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_grid_recycler_view<span class="token punctuation">)</span><span class="token punctuation">;</span>        recyclerView <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>recycler_view_grid<span class="token punctuation">)</span><span class="token punctuation">;</span>        recyclerView<span class="token punctuation">.</span><span class="token function">setLayoutManager</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">GridLayoutManager</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        recyclerView<span class="token punctuation">.</span><span class="token function">setAdapter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">GridRecyclerViewAdapter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">LongClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment">// å®ç°çŸ­æŒ‰çš„ç‚¹å‡»äº‹ä»¶æ¥å£</span>    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">ClickListener</span> <span class="token keyword">implements</span> <span class="token class-name">GridRecyclerViewAdapter<span class="token punctuation">.</span>ItemOnClickListener</span> <span class="token punctuation">&#123;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">click</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">,</span> <span class="token keyword">int</span> position<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">GridRecyclerViewActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"æˆ‘æ˜¯ç¥¢è±†å­ "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>position <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" å·"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// å®ç°é•¿æŒ‰çš„ç‚¹å‡»äº‹ä»¶æ¥å£</span>    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">LongClickListener</span> <span class="token keyword">implements</span> <span class="token class-name">GridRecyclerViewAdapter<span class="token punctuation">.</span>ItemOnLongClickListener</span> <span class="token punctuation">&#123;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">click</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">,</span> <span class="token keyword">int</span> position<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">ImageView</span> imageView <span class="token operator">=</span> v<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>header<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Glide</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token class-name">GridRecyclerViewActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"http://pic.17qq.com/img_qqtouxiang/87450489.jpeg"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span>imageView<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">GridRecyclerViewActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"å˜»å˜»ï¼Œå·å·æŠ±èµ°"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>position <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"å·ç¥¢è±†å­"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æœ€åçš„æ•ˆæœå¦‚ä¸‹ï¼Œæ²¡é”™ï¼Œåˆæ˜¯æˆ‘å¯çˆ±çš„ç¥¢è±†å­è¿˜æœ‰å–„é€¸æ‹¿æ¥ä¸¾ä¾‹ğŸ˜ğŸ˜ğŸ˜</p><p><img src="/images/Android/recycleview/pbf7o-6w1k4.gif" loading="lazy"></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¡¹ç›®çš„ä»£ç éƒ½åœ¨ <a href="https://github.com/BestGuo2020/AndroidStudy">AndroidStudy</a> çš„ github ä»“åº“ä¸­ã€‚</p><p>æœ¬æ—¥å¿—å¯¹åº”çš„ä»£ç ï¼š<a href="https://github.com/BestGuo2020/AndroidStudy/tree/main/app/src/main/java/top/bestguo/androidlayout/recyclerview">ç‚¹æˆ‘è¿›å…¥</a></p>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R å¯¹è±¡çªç„¶æ¶ˆå¤±çš„çµå¼‚äº‹ä»¶</title>
      <link href="/journal/R-not-found/"/>
      <url>/journal/R-not-found/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="äº‹ä»¶å‘ç”Ÿçš„åŸå› "><a href="#äº‹ä»¶å‘ç”Ÿçš„åŸå› " class="headerlink" title="äº‹ä»¶å‘ç”Ÿçš„åŸå› "></a>äº‹ä»¶å‘ç”Ÿçš„åŸå› </h2><p>æ˜¨å¤©ä¸‹åˆï¼Œæˆ‘çªç„¶å’Œ R å¯¹è±¡ç©çš„å¥½å¥½çš„ï¼Œç„¶è€Œå¥¹ç¡®çªç„¶çš„æ¶ˆå¤±äº†ã€‚</p><p><img src="/images/problem/dismiss-R/QQ%E6%88%AA%E5%9B%BE20210210102419.jpg" loading="lazy"></p><p>R å¯¹è±¡å¥¹å¯æ˜¯æˆ‘ä¸èƒ½ç¼ºå°‘çš„ï¼Œå¥¹èƒ½å¸®åŠ©æˆ‘è·å–å¸ƒå±€æ–‡ä»¶<del>ï¼ˆå“¦ï¼ŒåŸæ¥æ˜¯ç¼–ç¨‹ï¼Œé‚£æ²¡äº‹äº†ï¼‰</del>ä»¥åŠé€šè¿‡ id çš„æ–¹å¼æ¥è·å–æˆ‘åˆ›å»ºçš„ç»„ä»¶ã€‚æˆ‘åœ¨é‡æ–°æ„å»ºé¡¹ç›®æ—¶ï¼Œçªç„¶ç»™æˆ‘æŠ¥é”™ã€‚è¿˜è¯´ä»€ä¹ˆ Cannot resolve symbol R ï¼Œç”šè‡³è¿˜å»ºè®®æˆ‘æ‰¾åŒåå°ä¸‰ã€ä»¥åŠå»ºè®®æˆ‘å»ºç«‹ä¸€ä¸ªRçš„â€œå¢“ç¢‘â€ï¼Œè¿™ç§è ¢äº‹ï¼Œæˆ‘æ˜¯ç»å¯¹ä¸ä¼šåšçš„ã€‚</p><span id="more"></span><p>è¿™äº›å»ºè®®åˆ†åˆ«å¦‚ä¸‹ï¼š</p><p><img src="/images/problem/dismiss-R/%E9%80%89%E6%8B%A9%E4%BD%A0%E7%9A%84%E5%90%8C%E5%90%8D%E5%B0%8F%E4%B8%89.jpg" loading="lazy"></p><p>ä»¥ä¸Šå»ºè®®ç­‰äºæ²¡æœ‰å»ºè®®ã€‚<br>æ‰€ä»¥ï¼Œæˆ‘åšä¿¡ R å¯¹è±¡å¹¶æ²¡æœ‰æ¶ˆå¤±ï¼Œæˆ‘ä¸€å®šè¦æŠŠå¥¹æ‰¾å›æ¥ã€‚</p><h2 id="é”™è¯¯çš„çº¿ç´¢"><a href="#é”™è¯¯çš„çº¿ç´¢" class="headerlink" title="é”™è¯¯çš„çº¿ç´¢"></a>é”™è¯¯çš„çº¿ç´¢</h2><p>å…¶å®æˆ‘åœ¨å‘ç° R å¯¹è±¡æ¶ˆå¤±çš„æ—¶å€™ï¼Œæˆ‘ä¸€ç›´åœ¨å¯»æ‰¾ R å¯¹è±¡ä¸å­˜åœ¨çš„è§£å†³åŠæ³•ã€‚åé¢æ‰å‘ç°ï¼Œæˆ‘æ‰¾é”™äº†ï¼R å¯¹è±¡åœ¨å†™ç€å†™ç€å°±ç›´æ¥æ²¡äº†çš„æƒ…å†µä¹Ÿæ˜¯éå¸¸ä¹‹å°‘è§çš„ã€‚</p><p><img src="/images/problem/dismiss-R/ku.gif" loading="lazy"></p><p>è¿™æ¡è·¯æ ¹æœ¬å°±æ˜¯è¿·æƒ‘æ€§çš„è·¯å­ï¼Œèµ°æ¥èµ°å»åˆèµ°å›åŸå¤„ã€‚åé¢æˆ‘ä»¬ä»æ¶ˆå¤±çš„çœŸæ­£çš„æ ¹æºå¼€å§‹æ‰¾èµ·ã€‚</p><p><img src="/images/problem/dismiss-R/QQ%E6%88%AA%E5%9B%BE20210210104633.jpg" loading="lazy"></p><p>çœ‹äº†é”™è¯¯ä¿¡æ¯çªç„¶å‘ç°äº†ä¸€äº›ç ´ç»½ï¼Œéšåå»é—®é—®åº¦å¨˜ï¼Œå‘ç° R æ¶ˆå¤±çš„é—®é¢˜å±…ç„¶æ˜¯æˆ‘çš„å¸ƒå±€æ–‡ä»¶æœ‰é”™è¯¯æ‰å¯¼è‡´çš„ï¼Œæ‰€ä»¥æ‰æœ‰è¿™ç§ No resource found è¿™ç§é—®é¢˜ã€‚</p><h2 id="æ­£ç¡®çš„çº¿ç´¢"><a href="#æ­£ç¡®çš„çº¿ç´¢" class="headerlink" title="æ­£ç¡®çš„çº¿ç´¢"></a>æ­£ç¡®çš„çº¿ç´¢</h2><p>åœ¨å‘ç°æ˜¯å¸ƒå±€æ–‡ä»¶å‡ºç°äº†é—®é¢˜æ—¶ï¼Œæˆ‘é‡æ–°å®šä½åˆ°é”™è¯¯ä¸­ã€‚é€šè¿‡ä¸Šé¢çš„é”™è¯¯ä¿¡æ¯å‘ç°æ˜¯æ‰¾ä¸åˆ° â€˜@id/add_btnâ€™ è¿™ä¸ªå€¼ï¼Œå¯æ˜¯åœ¨æˆ‘çš„ä»£ç ä¸­å‘ç°æ˜¯æœ‰çš„ã€‚ä¸‹é¢çš„ä»£ç æ˜æ˜å°±æœ‰å•Šã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- æ·»åŠ çš„åŸå¸‚ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ListView</span>    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/addedCity<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_above</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/add_btn<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_below</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/return_btn<span class="token punctuation">"</span></span>    <span class="token punctuation">/></span></span><span class="token comment">&lt;!--&amp;lt;!&amp;ndash; æ·»åŠ æŒ‰é’® --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span>    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/add_btn<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>55dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_alignParentBottom</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    ...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">></span></span></code></pre><p>åé¢åœ¨å¯¹é”™è¯¯ä¿¡æ¯è¿›è¡Œä¸€ä¸ªæœç´¢ï¼Œå‘ç°éœ€è¦åœ¨â€œ@â€åé¢åŠ ä¸Šä¸€ä¸ªâ€œ+â€å·ï¼Œä¹Ÿå°±æ˜¯ layout_above å’Œ layout_belowï¼Œç„¶åæˆ‘å…¨éƒ¨åŠ ä¸Šå»ï¼Œé‡æ–°æ„å»ºäº†ä¸€ä¸‹ã€‚å‘ç°è¿˜çœŸçš„å°±æ‰¾å›æ¥äº†ï¼Œä»£ç ä¹Ÿä¸æŠ¥é”™äº†ã€‚</p><pre class="language-none"><code class="language-none">android:layout_above&#x3D;&quot;@+id&#x2F;add_btn&quot;android:layout_below&#x3D;&quot;@+id&#x2F;return_btn&quot;</code></pre><p><img src="/images/problem/dismiss-R/QQ%E6%88%AA%E5%9B%BE20210210110352.jpg" loading="lazy"></p><h3 id="åç»­æ€è€ƒ"><a href="#åç»­æ€è€ƒ" class="headerlink" title="åç»­æ€è€ƒ"></a>åç»­æ€è€ƒ</h3><p>ç›´åˆ°ä»Šå¤©ä¸Šåˆï¼Œæ‰æ˜ç™½ R å¯¹è±¡æ¶ˆå¤±çš„åŸå› ã€‚å› ä¸ºè¿™äº› xml å¸ƒå±€æ–‡ä»¶æ˜¯ä»ä¸Šè€Œä¸‹æ‰§è¡Œçš„ï¼Œè€Œä¸Šé¢çš„ id ä¸º id/add_btn æ˜¯åœ¨ä¸‹é¢ï¼Œå¹¶ä¸”æˆ‘ä»¬æ˜¯åœ¨æ­¤ä¹‹å‰è¿›è¡Œå¯»æ‰¾çš„ã€‚æ‰€ä»¥å°±ä¼šæç¤ºæ‰¾ä¸åˆ°ï¼Œä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œç›´æ¥åœ¨ layout_above çš„ id çš„â€œ@â€åé¢åŠ ä¸Šä¸€ä¸ªâ€œ+â€å·ä¹Ÿèƒ½è§£å†³ã€‚</p><pre class="language-none"><code class="language-none">android:layout_above&#x3D;&quot;@+id&#x2F;add_btn&quot;android:layout_below&#x3D;&quot;@id&#x2F;return_btn&quot;</code></pre><p>R å¯¹è±¡æ€»ç®—æ˜¯æ‰¾å›æ¥äº†ï¼Œå¼€å¿ƒå¿ƒğŸ˜ŠğŸ˜ŠğŸ˜Š</p><h2 id="å‚è€ƒæ¥æº"><a href="#å‚è€ƒæ¥æº" class="headerlink" title="å‚è€ƒæ¥æº"></a>å‚è€ƒæ¥æº</h2><p><a href="https://blog.csdn.net/asdf9328/article/details/50360358">https://blog.csdn.net/asdf9328/article/details/50360358</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹å¸¸è§é—®é¢˜è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android æ•°æ®å­˜å‚¨ä¹‹ SharedPreferences</title>
      <link href="/journal/shared-preferences/"/>
      <url>/journal/shared-preferences/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>åœ¨å­¦ä¹ å®Œä¹‹å‰çš„å†…å®¹ï¼Œå‘ç°æ²¡æœ‰å¯¹ç»„ä»¶ä¸­çš„è¾“å…¥çš„æ•°æ®è¿›è¡Œå­˜å‚¨ã€‚æ‰€ä»¥ï¼Œåœ¨è¿™é‡Œä¼šæåˆ°æ•°æ®å­˜å‚¨ã€‚å¯æ˜¯è¾“å‡ºå­˜å‚¨æœ‰å¾ˆå¤šç§ï¼Œä¸Šé¢çš„ SharedPreferences å°±æ˜¯å…¶ä¸­çš„ä¸€ä¸ªã€è¿˜æœ‰ä½¿ç”¨æ•°æ®åº“ï¼ˆMysqlã€sqliteï¼‰ä»¥åŠä½¿ç”¨æ–‡ä»¶çš„å½¢å¼ä¿å­˜æ–‡ä»¶ã€‚</p><p>å…¶å® SharedPreferences ä¿å­˜çš„æ–¹å¼ï¼Œå®ƒä¹Ÿæ˜¯ç”¨æ–‡ä»¶ä¿å­˜ã€‚åªæ˜¯å®ƒå¯æ˜¯ç”¨ xml æ–‡ä»¶æ¥ä¿å­˜çš„ï¼Œä¸€èˆ¬è¿™ä¸ªæ–‡ä»¶æˆ‘ä»¬æ˜¯æ— æ³•çœ‹åˆ°çš„ã€‚è€Œä¸”ç”±äºç°åœ¨çš„å®‰å“æ‰‹æœºçš„å®‰å…¨æ€§å¢å¼ºï¼Œé‚£äº›å¤„äºç³»ç»Ÿç›®å½•ä¸‹çš„æ–‡ä»¶éƒ½ä¸èƒ½ç›´æ¥å»æŸ¥çœ‹ï¼ˆå…¶å®ä¹Ÿæ²¡å¿…è¦å»çœ‹ï¼‰ã€‚</p><p>SharedPreference çš„ä½¿ç”¨åœºæ™¯éå¸¸å¹¿æ³›ã€‚å¯ä»¥ä¿å­˜è¯¥åº”ç”¨ç›¸å…³ä¿¡æ¯ï¼Œä»¥åŠ QQ å’Œ å¾®ä¿¡ä¸­çš„å…å¯†ç™»å½•ç­‰ç­‰â€¦â€¦ï¼Œä¸è¿‡å®ƒçš„ç”¨æ³•ä¹Ÿéå¸¸çš„ç®€å•ã€‚å’±ä»¬ç°åœ¨å¼€å§‹å§</p><span id="more"></span><h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>æœ¬å®ä¾‹ä¸­å£°æ˜äº† 4 ä¸ªç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯ä¸€ä¸ªå¯ç¼–è¾‘çš„æ–‡æœ¬æ¡†ï¼Œä¸¤ä¸ªæŒ‰é’®å’Œä¸€ä¸ªæ˜¾ç¤ºæ–‡å­—çš„ç»„ä»¶ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EditText</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/et_name<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>hint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>è¾“å…¥å†…å®¹<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/btn_save<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ä¿å­˜<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/btn_show<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æ˜¾ç¤º<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/tv_show<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><p>é™¤äº†å£°æ˜è¿™äº›ç»„ä»¶ä¹‹å¤–ï¼Œè¿˜è¦å£°æ˜ä¸¤ä¸ªå¯¹è±¡ï¼š</p><ul><li>SharedPreferences</li><li>SharedPreferences.Editor</li></ul><p>SharedPreferences å¯¹è±¡ç”¨æ¥åŠ è½½è‡ªå®šä¹‰çš„ xml æ–‡ä»¶ï¼Œé€šè¿‡ getSharedPreferences æ–¹æ³•æ¥è·å–è¿™ä¸ªå¯¹è±¡ã€‚<br>å¦‚æœè¦ç¼–è¾‘è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œåˆ™éœ€è¦è°ƒç”¨ getSharedPreferences ä¸­çš„ editor æ–¹æ³•å³å¯ã€‚</p><p>å®Œæ•´çš„ java ä»£ç </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout<span class="token punctuation">.</span>datastorage</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span><span class="token class-name">SharedPreferences</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">AppCompatActivity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">View</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">Button</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">EditText</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">TextView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout<span class="token punctuation">.</span></span><span class="token class-name">R</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SharedPreferenceActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// åŸºæœ¬ç»„ä»¶å£°æ˜</span>    <span class="token keyword">private</span> <span class="token class-name">EditText</span> etName<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Button</span> btnSave<span class="token punctuation">,</span> btnShow<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">TextView</span> tvShow<span class="token punctuation">;</span>    <span class="token comment">// SharedPreferences å¯¹è±¡å£°æ˜</span>    <span class="token keyword">private</span> <span class="token class-name">SharedPreferences</span> sharedPreferences<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">SharedPreferences<span class="token punctuation">.</span>Editor</span> sEditor<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_shared_preference<span class="token punctuation">)</span><span class="token punctuation">;</span>        etName <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">EditText</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>et_name<span class="token punctuation">)</span><span class="token punctuation">;</span>        btnSave <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Button</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_save<span class="token punctuation">)</span><span class="token punctuation">;</span>        btnShow <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Button</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_show<span class="token punctuation">)</span><span class="token punctuation">;</span>        tvShow <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TextView</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>tv_show<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·å– SharedPreferences å¯¹è±¡</span>        <span class="token comment">// æ–‡ä»¶åç§°ï¼Œç›´æ¥ä½¿ç”¨ MODE_PRIVATE</span>        sharedPreferences <span class="token operator">=</span> <span class="token function">getSharedPreferences</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span> MODE_PRIVATE<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»º Editor å¯¹è±¡ï¼Œç”¨äºç¼–è¾‘æˆ‘ä»¬åˆ›å»ºçš„ data.xml é…ç½®æ–‡ä»¶</span>        sEditor <span class="token operator">=</span> sharedPreferences<span class="token punctuation">.</span><span class="token function">edit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å†™æ–‡ä»¶</span>        btnSave<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// å†™å…¥æ•°æ®</span>                sEditor<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> etName<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// æäº¤æ•°æ®ï¼Œæäº¤æ•°æ®æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ä¸ªæ˜¯ commitï¼Œä¸€ä¸ªæ˜¯ apply</span>                sEditor<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è¯»æ–‡ä»¶</span>        btnShow<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// è¯»å–æ•°æ®ï¼Œå°†æ•°æ®å±•ç¤ºåˆ° TextView ä¸­</span>                tvShow<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>sharedPreferences<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œæ•ˆæœå¦‚ä¸‹<br><img src="/images/Android/datastorage/sharedpreferences/0rkl9-4600g.gif" loading="lazy"></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>è¿™ä¸ª xml æ–‡ä»¶æ˜¯ä¿å­˜åœ¨ä½ çš„å®‰å“è®¾å¤‡ä¸­æˆ–è€…å®‰å“æ¨¡æ‹Ÿå™¨ä¸­ï¼Œ<font color="red">è€Œä¸æ˜¯åœ¨ä½ çš„ç”µè„‘ä¸­</font>ã€‚é»˜è®¤çš„å®‰è£…ä½ç½®æ˜¯åœ¨ â€œ/data/data/<applicationId>/shared_prefsâ€ ä¸­ï¼Œè¿™ä¸ªè·¯å¾„åœ¨æ¨¡æ‹Ÿå™¨ä¸­æ˜¯å¯ä»¥çœ‹åˆ°äº†ï¼Œå¦‚æœæˆ‘ä»¬è£…åœ¨å®ä½“æœºä¸Šï¼Œå°±ä¸ä¸€å®šèƒ½çœ‹åˆ°äº†ï¼ˆæ„Ÿè§‰å¸‚é¢ä¸Šå¤§éƒ¨åˆ†çš„å®‰å“æ‰‹æœºéƒ½æ˜¯ä¸èƒ½çœ‹çš„å§ğŸ˜ŠğŸ˜ŠğŸ˜Šï¼‰</applicationId></p><p>é¡¹ç›®çš„ä»£ç éƒ½åœ¨ <a href="https://github.com/BestGuo2020/AndroidStudy">AndroidStudy</a> çš„ github ä»“åº“ä¸­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android å…¥é—¨ç¯‡ä¹‹ PopupWindow ç»„ä»¶çš„ä½¿ç”¨</title>
      <link href="/journal/popupwindow-component/"/>
      <url>/journal/popupwindow-component/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>PopupWindow ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„ä¸€ä¸ªç»„ä»¶ã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨ QQ ä¸­ï¼Œç‚¹å‡»é€€å‡ºçš„æŒ‰é’®æ—¶ï¼Œå®ƒå¼¹å‡ºçš„çš„é€‰é¡¹å°±æ˜¯ä½¿ç”¨çš„æ˜¯ PopupWindowã€‚è€Œä¸”ï¼Œåœ¨ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œæ­¥éª¤ä¹Ÿå’Œ ListView ç±»ä¼¼ã€‚</p><p>è¿™ä¸ªæ˜¯ QQ é€€å‡ºæ—¶ï¼Œä½¿ç”¨ PopupWindow</p><span id="more"></span><p><img src="/images/Android/popupwindow/Screenshot_20210201_104616.jpg" loading="lazy"></p><p>è¿™ä¸ªæ˜¯åä¸ºå¤©æ°”çš„ç•Œé¢ï¼Œæ‰€ä½¿ç”¨çš„ PopupWindow</p><p><img src="/images/Android/popupwindow/Screenshot_20210201_105305.jpg" loading="lazy"></p><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><h3 id="å¸ƒå±€æ–‡ä»¶"><a href="#å¸ƒå±€æ–‡ä»¶" class="headerlink" title="å¸ƒå±€æ–‡ä»¶"></a>å¸ƒå±€æ–‡ä»¶</h3><p>å¸ƒå±€æ–‡ä»¶çš„ç¤ºä¾‹éå¸¸ç®€å•ï¼Œåªè¦ä¸€ä¸ªæŒ‰é’®å°±è¡Œ</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button_pop<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>150dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center_horizontal<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pop<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>45dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><h3 id="è‡ªå®šä¹‰-popup-ç»„ä»¶"><a href="#è‡ªå®šä¹‰-popup-ç»„ä»¶" class="headerlink" title="è‡ªå®šä¹‰ popup ç»„ä»¶"></a>è‡ªå®šä¹‰ popup ç»„ä»¶</h3><p>layout_pop.xml æ–‡ä»¶</p><p>layout_pop ä¸­æ˜¯ä¸€ä¸ªèœå•å¸ƒå±€æ–‡ä»¶</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/good<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å¥½<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>14dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#aaa<span class="token punctuation">"</span></span>        <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/general<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ä¸€èˆ¬<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>14dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#aaa<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/bad<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å·®<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>14dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><h3 id="java-ä»£ç "><a href="#java-ä»£ç " class="headerlink" title="java ä»£ç "></a>java ä»£ç </h3><p>é¦–å…ˆéœ€è¦å£°æ˜ä¸€ä¸ª PopupWindow çš„ç»„ä»¶ï¼Œä½†æ˜¯å®ƒçš„å£°æ˜æ–¹å¼å’Œæ™®é€šçš„ç»„å£°æ˜æ–¹å¼åˆæ˜¯ä¸ç›¸åŒçš„ã€‚æˆ‘ä»¬åœ¨å£°æ˜ä¸€ä¸ª Button ç»„ä»¶æ—¶ï¼Œéƒ½æ˜¯æ¥ä½¿ç”¨ findViewById è¿™ä¸ªæ–¹æ³•æ¥è·å–æˆ‘ä»¬åˆ›å»ºçš„ç»„ä»¶ã€‚è€Œè¿™ä¸ªç»„ä»¶å°±ä¸ç›¸åŒäº†ã€‚</p><p>å®ƒæ˜¯å…ˆåˆ›å»º PopupWindow çš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œç„¶åå°†æˆ‘ä»¬è‡ªå®šä¹‰çš„ç»„ä»¶æ”¾åœ¨ PopupWindowï¼ŒåŒæ—¶è®¾ç½®å¥½å®½å’Œé«˜ï¼Œæœ€åå†è®¾ç½®å…¶æ˜¾ç¤ºæ–¹å¼ã€‚</p><p>å®ƒçš„æ˜¾ç¤ºæ–¹å¼æœ‰ä¸‰ç§ï¼š</p><ol><li>showAsDropDown(view)  é»˜è®¤åœ¨æœ€ä¸‹æ–¹</li><li>showAsDropDown(view, offsetX, offsetY)  åœ¨ä¸‹æ–¹ï¼Œå¯ä»¥è®¾å®šå…·ä½“çš„åç§»é‡</li><li>popupWindow.showAtLocation(view, gravity, x, y)  è®¾ç½®ä»»æ„çš„ä½ç½®</li></ol><h4 id="showAsDropDown"><a href="#showAsDropDown" class="headerlink" title="showAsDropDown"></a>showAsDropDown</h4><pre class="language-java" data-language="java"><code class="language-java">button <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Button</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>button_pop<span class="token punctuation">)</span><span class="token punctuation">;</span>button<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">View</span> view <span class="token operator">=</span> <span class="token function">getLayoutInflater</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>layout_pop<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">TextView</span> good <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>good<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">TextView</span> general <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>general<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">TextView</span> bad <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>bad<span class="token punctuation">)</span><span class="token punctuation">;</span>        popupWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PopupWindow</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> button<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ViewGroup<span class="token punctuation">.</span>LayoutParams</span><span class="token punctuation">.</span>WRAP_CONTENT<span class="token punctuation">)</span><span class="token punctuation">;</span>        popupWindow<span class="token punctuation">.</span><span class="token function">setOutsideTouchable</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        popupWindow<span class="token punctuation">.</span><span class="token function">setFocusable</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//</span>        popupWindow<span class="token punctuation">.</span><span class="token function">showAsDropDown</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œæ•ˆæœ<br><img src="/images/Android/popupwindow/6xfgz-c10tw.gif" loading="lazy"></p><h4 id="showAsDropDown-æŒ‡å®šåç§»é‡çš„"><a href="#showAsDropDown-æŒ‡å®šåç§»é‡çš„" class="headerlink" title="showAsDropDown æŒ‡å®šåç§»é‡çš„"></a>showAsDropDown æŒ‡å®šåç§»é‡çš„</h4><pre class="language-java" data-language="java"><code class="language-java">button <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Button</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>button_pop<span class="token punctuation">)</span><span class="token punctuation">;</span>button<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">View</span> view <span class="token operator">=</span> <span class="token function">getLayoutInflater</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>layout_pop<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">TextView</span> good <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>good<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">TextView</span> general <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>general<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">TextView</span> bad <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>bad<span class="token punctuation">)</span><span class="token punctuation">;</span>        good<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PopupItemClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        general<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PopupItemClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        bad<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PopupItemClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        popupWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PopupWindow</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> button<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ViewGroup<span class="token punctuation">.</span>LayoutParams</span><span class="token punctuation">.</span>WRAP_CONTENT<span class="token punctuation">)</span><span class="token punctuation">;</span>        popupWindow<span class="token punctuation">.</span><span class="token function">setOutsideTouchable</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç‚¹å‡»æŒ‰é’®ä¹‹å¤–çš„å†…å®¹ï¼Œèœå•æ¶ˆå¤±</span>        popupWindow<span class="token punctuation">.</span><span class="token function">setFocusable</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å†æ¬¡ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œèœå•æ¶ˆå¤±</span>                popupWindow<span class="token punctuation">.</span><span class="token function">showAsDropDown</span><span class="token punctuation">(</span>button<span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œæ•ˆæœ<br><img src="/images/Android/popupwindow/5nvro-75m9r.gif" loading="lazy"></p><h4 id="showAtLocation-æŒ‡å®šä½ç½®"><a href="#showAtLocation-æŒ‡å®šä½ç½®" class="headerlink" title="showAtLocation æŒ‡å®šä½ç½®"></a>showAtLocation æŒ‡å®šä½ç½®</h4><p>åœ¨å±•ç¤ºä½ç½®ä¹‹å‰ï¼Œéœ€è¦è·å–åˆ°å®ƒçš„çˆ¶ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯ activity_popup_windowï¼Œå¾—åˆ°äº†çˆ¶ç©ºé—´å°±å¯ä»¥éšæ„çš„æ˜¾ç¤º PopupWindow çš„ä½ç½®ã€‚</p><pre class="language-java" data-language="java"><code class="language-java">button <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Button</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>button_pop<span class="token punctuation">)</span><span class="token punctuation">;</span>button<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">View</span> view <span class="token operator">=</span> <span class="token function">getLayoutInflater</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>layout_pop<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">TextView</span> good <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>good<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">TextView</span> general <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>general<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">TextView</span> bad <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>bad<span class="token punctuation">)</span><span class="token punctuation">;</span>        popupWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PopupWindow</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> button<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ViewGroup<span class="token punctuation">.</span>LayoutParams</span><span class="token punctuation">.</span>WRAP_CONTENT<span class="token punctuation">)</span><span class="token punctuation">;</span>        popupWindow<span class="token punctuation">.</span><span class="token function">setOutsideTouchable</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        popupWindow<span class="token punctuation">.</span><span class="token function">setFocusable</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">View</span> rootview <span class="token operator">=</span> <span class="token class-name">LayoutInflater</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token class-name">PopupWindowActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_popup_window<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        popupWindow<span class="token punctuation">.</span><span class="token function">showAtLocation</span><span class="token punctuation">(</span>rootview<span class="token punctuation">,</span> <span class="token class-name">Gravity</span><span class="token punctuation">.</span>BOTTOM<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿è¡Œæ•ˆæœ<br><img src="/images/Android/popupwindow/zbxh1-brc4e.gif" loading="lazy"></p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p>éƒ¨åˆ†å‚è€ƒäºï¼š<a href="https://blog.csdn.net/harvic880925/article/details/49272285">https://blog.csdn.net/harvic880925/article/details/49272285</a></p><p>é¡¹ç›®çš„ä»£ç éƒ½åœ¨ <a href="https://github.com/BestGuo2020/AndroidStudy">AndroidStudy</a> çš„ github ä»“åº“ä¸­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Activity çš„ç”Ÿå‘½å‘¨æœŸ</title>
      <link href="/journal/activity-life/"/>
      <url>/journal/activity-life/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>é¦–æ¬¡å­¦ä¹  Activity çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¼¼æ‡‚éæ‡‚ã€‚ä¸è¿‡é€šè¿‡ä»£ç çš„æ–¹å¼å¯ä»¥å¤§è‡´ç†è§£ä¸€ä¸‹ï¼ŒActivity åœ¨åˆ›å»ºçš„æ—¶å€™ä¼šæ‰§è¡Œé‚£äº›æ–¹æ³•ï¼Œæ¯”å¦‚ä¸´æ—¶é€€å‡ºåˆ°ä¸»ç•Œé¢ï¼Œæ‰‹æœºæ¯å±ï¼Œæ–°æ¶ˆæ¯ï¼Œæ¥ç”µç­‰ç­‰çŠ¶æ€æ—¶ã€‚ä¼šæ‰§è¡Œåˆ°çš„æ–¹æ³•ã€‚</p><p>ä¸€ä¸ª Activity çš„ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹ã€‚</p><p><img src="https://images0.cnblogs.com/blog2015/614265/201508/281713137507426.jpg" loading="lazy"></p><center>å›¾ç‰‡æ¥è‡ªç½‘ç»œï¼Œä¾µåˆ </center><span id="more"></span><p>è¿™å¼ å›¾çœ‹çš„ä¸æ˜¯å¾ˆæ‡‚ï¼Œä½†æ˜¯ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•æœ‰ä»¥ä¸‹ 6 ä¸ª</p><ul><li>onCreate</li><li>onStart</li><li>onResume</li><li>onPause</li><li>onStop</li><li>onDestroy</li></ul><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä»£ç çš„æ–¹å¼å¯¹è¿™äº›æ–¹æ³•è¿›è¡Œåº”ç”¨ã€‚</p><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p>ä»¥ä¸‹ç¤ºä¾‹å°†è¿™äº›æ–¹æ³•è¿›è¡Œæ¼”ç¤ºä¸€é</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Nullable</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">AppCompatActivity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Log</span><span class="token punctuation">;</span><span class="token comment">/** * Created by He Guo on 2021/1/31. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LifeCycleActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_life_cycle<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"LifeCycle"</span><span class="token punctuation">,</span> <span class="token string">"----onCreate----"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"LifeCycle"</span><span class="token punctuation">,</span> <span class="token string">"----onStart----"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"LifeCycle"</span><span class="token punctuation">,</span> <span class="token string">"----onResume----"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"LifeCycle"</span><span class="token punctuation">,</span> <span class="token string">"----onPause----"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"LifeCycle"</span><span class="token punctuation">,</span> <span class="token string">"----onStop----"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"LifeCycle"</span><span class="token punctuation">,</span> <span class="token string">"----onDestroy----"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="è¿›å…¥-Activity"><a href="#è¿›å…¥-Activity" class="headerlink" title="è¿›å…¥ Activity"></a>è¿›å…¥ Activity</h3><p>è¿›å…¥ Activity æ—¶ï¼Œå…±æ‰§è¡Œäº†ä¸‰ä¸ªæ–¹æ³•ã€‚å…ˆ onCreateï¼Œå† onStartï¼Œæœ€å onResume</p><p><img src="/images/Android/lifecycle/QQ%E6%88%AA%E5%9B%BE20210131164457.jpg" loading="lazy"></p><h3 id="æ¯å±æˆ–è€…è¿›å…¥å…¶å®ƒåº”ç”¨"><a href="#æ¯å±æˆ–è€…è¿›å…¥å…¶å®ƒåº”ç”¨" class="headerlink" title="æ¯å±æˆ–è€…è¿›å…¥å…¶å®ƒåº”ç”¨"></a>æ¯å±æˆ–è€…è¿›å…¥å…¶å®ƒåº”ç”¨</h3><p>å½“æ‰‹æœºå¤„äºæ¯å±æˆ–è€…åˆ°å…¶å®ƒç¨‹åºä¸­çš„çŠ¶æ€æ—¶ï¼Œæ‰§è¡Œäº†ä¸¤ä¸ªæ–¹æ³•ã€‚å…ˆ onPauseï¼Œå† onStop</p><p><img src="/images/Android/lifecycle/QQ%E6%88%AA%E5%9B%BE20210131165004.jpg" loading="lazy"></p><p>å½“æ‰‹æœºè§£é”æˆ–è€…å›åˆ°å½“å‰çš„ Activity æ—¶ï¼Œä¹Ÿæ˜¯æ‰§è¡Œäº†ä¸¤ä¸ªæ–¹æ³•ã€‚å…ˆ onStartã€å† onResume</p><p><img src="/images/Android/lifecycle/QQ%E6%88%AA%E5%9B%BE20210131165319.jpg" loading="lazy"></p><h3 id="é€€å‡º"><a href="#é€€å‡º" class="headerlink" title="é€€å‡º"></a>é€€å‡º</h3><p>å½“é€€å‡ºè¿™ä¸ª activity æ—¶ï¼Œä¼šæ‰§è¡Œä¸‰ä¸ªæ–¹æ³•ã€‚å…ˆ onPauseã€å† onStopã€æœ€åæ˜¯ onDestroy</p><p><img src="/images/Android/lifecycle/QQ%E6%88%AA%E5%9B%BE20210131165530.jpg" loading="lazy"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨åº”ç”¨äº†è¿™äº›æ–¹æ³•æ—¶ï¼Œå¤§æ¦‚èƒ½çŒœæµ‹åˆ°éƒ¨åˆ†æ–¹æ³•çš„ç”¨é€”</p><p>onCreate æ–¹æ³•å°±æ˜¯åœ¨åˆå§‹åŒ–ä¸€äº›ç»„ä»¶çš„æ—¶å€™ï¼Œéœ€è¦å†™åœ¨è¿™äº›æ–¹æ³•ä¸­ã€‚åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚<br>onStart æ–¹æ³•å¯ä»¥ç”¨äºåŠ è½½æ•°æ®ï¼Œå³è¿™ä¸ªé˜¶æ®µæ˜¯å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ï¼Œæˆ–è€…æ˜¯ä»æœ¬åœ°æ¥åŠ è½½æ•°æ®ã€‚<br>onPause æ–¹æ³•å¯ä»¥ç”¨äºè§†é¢‘ï¼Œæ¯”å¦‚æ‰‹æœºæ¯å±æˆ–è€…çªç„¶æ¥ç”µï¼Œé‡åˆ°è¿™ç§çŠ¶æ€ï¼Œæˆ‘ä»¬éœ€è¦å¯¹è§†é¢‘è¿›è¡Œæš‚åœã€‚<br>onDestroy ä¹Ÿæ˜¯åªæ‰§è¡Œä¸€æ¬¡ï¼Œå…·ä½“ç”¨åœ¨ä»€ä¹ˆåœ°æ–¹è¿˜çŒœä¸åˆ°ã€‚</p><p>å…¶å®ƒçš„ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•ï¼Œè¿˜æ²¡çŒœåˆ°å®ƒä»¬çš„åº”ç”¨åœºæ™¯ã€‚</p><p>å¥½è¾£ï¼Œå·®ä¸å¤šå°±è¿™äº›å’¯ã€‚</p><p>é¡¹ç›®çš„ä»£ç éƒ½åœ¨ <a href="https://github.com/BestGuo2020/AndroidStudy">AndroidStudy</a> çš„ github ä»“åº“ä¸­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android å…¥é—¨ç¯‡ä¹‹ WebView ç»„ä»¶çš„ä½¿ç”¨</title>
      <link href="/journal/webview-component/"/>
      <url>/journal/webview-component/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å­¦ä¹ æ„Ÿå—"><a href="#å­¦ä¹ æ„Ÿå—" class="headerlink" title="å­¦ä¹ æ„Ÿå—"></a>å­¦ä¹ æ„Ÿå—</h2><p>WebView ç½‘é¡µè§†å›¾åœ¨ Android APP ä¸­ä¹Ÿæ˜¯ç”¨çš„éå¸¸å¤šï¼Œæ¯”å¦‚å¾®ä¿¡ã€QQã€æ·˜å®ã€bilibili ç­‰ç­‰è¿™äº›éå¸¸å—æ¬¢è¿çš„åº”ç”¨éƒ½æœ‰ä½¿ç”¨åˆ°è¿™ä¸ªç»„ä»¶ã€‚</p><p>åŒæ—¶ï¼ŒWebView æ˜¯å¯ä»¥è°ƒç”¨é‡Œé¢çš„ Javascript ä»£ç ã€‚JavaScript ä»£ç ä¹Ÿèƒ½å¤Ÿè°ƒç”¨çš„ Android ä¸­ç›¸å…³çš„ä»£ç ï¼Œè¿™å°±ç›¸å½“äºæ˜¯æ··åˆå¼€å‘ã€‚æ··åˆå¼€å‘çš„æ¡ˆä¾‹ä¹Ÿéå¸¸å¤šï¼Œæ¯”å¦‚æˆ‘ä»¬çš„å¸¸ç”¨çš„æ·˜å®ï¼Œå®ƒå°±æ˜¯ä½¿ç”¨äº†æ··åˆå¼€å‘çš„æ–¹å¼äº†ã€‚</p><p>æœ¬æ—¥å¿—ä»…ä»…æ˜¯è®°å½•äº† WebView çš„ä¸€äº›åŸºæœ¬çš„ä½¿ç”¨ï¼Œæ·±å…¥å­¦ä¹ è¿™ç§æ··åˆçš„å¼€å‘æ–¹å¼ï¼Œè¿™é‡Œä¸è¿‡å¤šèµ˜è¿°ã€‚</p><span id="more"></span><h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><h3 id="åˆ›å»º-WebView"><a href="#åˆ›å»º-WebView" class="headerlink" title="åˆ›å»º WebView"></a>åˆ›å»º WebView</h3><p>åˆ›å»º WebView éå¸¸ç®€å•ï¼Œåªéœ€åˆ›å»ºç»„ä»¶å³å¯ï¼ŒåŒæ—¶éœ€è¦è®¾ç½®id</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>WebView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/web_view<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><h3 id="åŠ è½½ç½‘é¡µ"><a href="#åŠ è½½ç½‘é¡µ" class="headerlink" title="åŠ è½½ç½‘é¡µ"></a>åŠ è½½ç½‘é¡µ</h3><p>åŠ è½½ç½‘é¡µåˆ†åˆ«æœ‰ä¸¤ç§ä¸åŒçš„åŠ è½½æ–¹å¼ï¼Œä¸€ä¸ªæ˜¯åŠ è½½æœ¬åœ°çš„ç½‘é¡µï¼Œå¦ä¸€ä¸ªæ˜¯åŠ è½½è¿œç¨‹çš„ç½‘é¡µã€‚</p><h4 id="æœ¬åœ°åŠ è½½"><a href="#æœ¬åœ°åŠ è½½" class="headerlink" title="æœ¬åœ°åŠ è½½"></a>æœ¬åœ°åŠ è½½</h4><p>åœ¨åŠ è½½æœ¬åœ°ç½‘é¡µä¹‹å‰ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ª asset çš„æ–‡ä»¶å¤¹ã€‚å› ä¸ºåªæœ‰ asset æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ä¸ä¼šè¢«ç¼–è¯‘è¿›å»ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¹‹å‰åœ¨ res/drawable æ–‡ä»¶å¤¹ä¸­æ”¾å…¥çš„è¿™äº›å›¾ç‰‡éƒ½æ˜¯ä¼šè¿›è¡Œä¸€ä¸ªç¼–è¯‘ã€‚è°ƒç”¨å›¾ç‰‡çš„æ–¹å¼ï¼Œä¹Ÿä¸æ˜¯ç”¨è·¯å¾„æ¥è¿›è¡Œä¸€ä¸ªç¼–è¯‘ï¼Œè€Œæ˜¯ä½¿ç”¨è¿™ç§ <code>@drawablw/xxxx</code> è¿™ç§æ–¹å¼æ¥è·å–å›¾ç‰‡çš„ã€‚</p><p>æ­£ç¡®çš„åˆ›å»ºçš„ asset æ–‡ä»¶å¤¹çš„æ­¥éª¤å¦‚ä¸‹ã€‚</p><ol><li><p>æ–°å»º<br><img src="/images/Android/webview/QQ%E6%88%AA%E5%9B%BE20210130213210.jpg" loading="lazy"></p></li><li><p>ç›´æ¥ Finish<br><img src="/images/Android/webview/QQ%E6%88%AA%E5%9B%BE20210130213336.jpg" loading="lazy"></p></li></ol><p>åˆ›å»ºå®Œæˆä¹‹åï¼Œå¯ä»¥éšä¾¿å†™ä¸€ä¸ª html ä»£ç ï¼Œæ”¾åˆ°è¿™ä¸ª asset æ–‡ä»¶å¤¹ä¸‹ã€‚è¿™é‡Œç”¨çš„æ˜¯æˆ‘ä¹‹å‰å†™çš„ä¸€ä¸ªç½‘é¡µè¿›è¡Œæµ‹è¯•</p><p>åŠ è½½ç½‘é¡µçš„æ–¹æ³•ç”¨çš„æ˜¯ onLoad æ–¹æ³•ï¼Œå›ºå®šçš„éƒ¨åˆ†æ˜¯ file:///android_asset/ ï¼Œåé¢çš„éƒ¨åˆ†å°±å¯ä»¥æŒ‡å®šçš„ç½‘é¡µçš„ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">AppCompatActivity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>webkit<span class="token punctuation">.</span></span><span class="token class-name">WebView</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebViewActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">WebView</span> webView<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_web_view<span class="token punctuation">)</span><span class="token punctuation">;</span>        progressBar <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ProgressBar</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>progress<span class="token punctuation">)</span><span class="token punctuation">;</span>        webView <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">WebView</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>web_view<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å…è®¸ javascript</span>        webView<span class="token punctuation">.</span><span class="token function">getSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setJavaScriptEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åŠ è½½æœ¬åœ°çš„ html æ–‡ä»¶</span>        webView<span class="token punctuation">.</span><span class="token function">loadUrl</span><span class="token punctuation">(</span><span class="token string">"file:///android_asset/index.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/images/Android/webview/Screenshot_20210130_214525.jpg" loading="lazy"></p><h4 id="è¿œç¨‹åŠ è½½"><a href="#è¿œç¨‹åŠ è½½" class="headerlink" title="è¿œç¨‹åŠ è½½"></a>è¿œç¨‹åŠ è½½</h4><p>è¿œç¨‹åŠ è½½åªéœ€è¦ä¸€ä¸ª http æˆ–è€… https åè®®çš„åœ°å€å°±å¯ä»¥äº†ã€‚ä¸è¿‡ï¼Œåœ¨åŠ è½½è¿œç¨‹çš„ä¸€ä¸ªç½‘å€æ—¶ï¼Œéœ€è¦å…è®¸ javascript ç½‘é¡µæ‰èƒ½å¤Ÿæ­£å¸¸çš„è¿è¡ŒæˆåŠŸã€‚ä¸å…è®¸å°†åŠ è½½ä¸å‡ºæ¥ã€‚</p><p>å¯ç”¨ javascript çš„æ–¹æ³•ä¸º <code>setJavaScriptEnabled</code> ï¼Œè®¾ç½®ä¸º true å…è®¸ï¼Œfalse ä¸ºç¦æ­¢ã€‚</p><p>è¿™é‡Œä»¥æˆ‘çš„ä¸ªäººç½‘ç«™ä¸ºä¾‹å­</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">AppCompatActivity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Log</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>webkit<span class="token punctuation">.</span></span><span class="token class-name">WebView</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebViewActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">WebView</span> webView<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_web_view<span class="token punctuation">)</span><span class="token punctuation">;</span>        progressBar <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ProgressBar</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>progress<span class="token punctuation">)</span><span class="token punctuation">;</span>        webView <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">WebView</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>web_view<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å…è®¸ javascript</span>        webView<span class="token punctuation">.</span><span class="token function">getSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setJavaScriptEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åŠ è½½æœ¬åœ°çš„ html æ–‡ä»¶</span>        <span class="token comment">// webView.loadUrl("file:///android_asset/index.html");</span>        webView<span class="token punctuation">.</span><span class="token function">loadUrl</span><span class="token punctuation">(</span><span class="token string">"https://www.bestguo.top"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œæ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/webview/Screenshot_20210130_214715.jpg" loading="lazy"></p><h3 id="è¿›å…¥æ–°é¡µé¢"><a href="#è¿›å…¥æ–°é¡µé¢" class="headerlink" title="è¿›å…¥æ–°é¡µé¢"></a>è¿›å…¥æ–°é¡µé¢</h3><p>æˆ‘ä»¬åœ¨æµè§ˆç½‘é¡µçš„æ—¶å€™ï¼Œéœ€è¦ç‚¹å‡»è¶…é“¾æ¥æ¥è¿›å…¥æ–°çš„é¡µé¢ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨ç‚¹å‡»æ—¶ã€‚å‡ºç°äº†ä»¥ä¸‹çš„æ•ˆæœ</p><p><img src="/images/Android/webview/Screenshot_20210130_214728.jpg" loading="lazy"></p><p>å°±æ˜¯éœ€è¦æˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªå¤–ç½®çš„æµè§ˆå™¨æ¥è®¿é—®æ–°çš„é¡µé¢ï¼Œè¿™æ ·çš„ä½“éªŒå…¶å®å¹¶ä¸å¥½ã€‚</p><p>å› æ­¤ï¼Œè§£å†³è¿™ç§æ–¹æ³•éœ€è¦ç”¨åˆ° <code>setWebViewClient</code> è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒçš„å‚æ•°æ˜¯ <code>WebViewClient</code> ä»¥åŠè¢«å®ƒæ‰€ç»§æ‰¿çš„å­ç±»ï¼Œé‡å†™å…¶ä¸­çš„æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•å°±æ˜¯ <code>shouldOverrideUrlLoading</code>ã€‚</p><p>å®ç°çš„ä»£ç å¦‚ä¸‹</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">AppCompatActivity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>webkit<span class="token punctuation">.</span></span><span class="token class-name">WebResourceRequest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>webkit<span class="token punctuation">.</span></span><span class="token class-name">WebView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>webkit<span class="token punctuation">.</span></span><span class="token class-name">WebViewClient</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebViewActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">WebView</span> webView<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_web_view<span class="token punctuation">)</span><span class="token punctuation">;</span>        progressBar <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ProgressBar</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>progress<span class="token punctuation">)</span><span class="token punctuation">;</span>        webView <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">WebView</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>web_view<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å…è®¸ javascript</span>        webView<span class="token punctuation">.</span><span class="token function">getSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setJavaScriptEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åŠ è½½æœ¬åœ°çš„ html æ–‡ä»¶</span>        <span class="token comment">// webView.loadUrl("file:///android_asset/index.html");</span>        webView<span class="token punctuation">.</span><span class="token function">loadUrl</span><span class="token punctuation">(</span><span class="token string">"https://www.bestguo.top"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        webView<span class="token punctuation">.</span><span class="token function">setWebViewClient</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyWebViewClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">MyWebViewClient</span> <span class="token keyword">extends</span> <span class="token class-name">WebViewClient</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å¦‚æœè¦è®¾ç½®æˆä¸ç”¨æ–°æµè§ˆå™¨æ‰“å¼€</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">shouldOverrideUrlLoading</span><span class="token punctuation">(</span><span class="token class-name">WebView</span> view<span class="token punctuation">,</span> <span class="token class-name">WebResourceRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            view<span class="token punctuation">.</span><span class="token function">loadUrl</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>å»ºç«‹äº†ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œç±»åä¸º MyWebViewClientï¼Œéœ€è¦ç»§æ‰¿è‡ª WebViewClient ç±»ã€‚é‡å†™å…¶ shouldOverrideUrlLoading æ–¹æ³•ï¼Œå°†å½“å‰çš„ webview ä¸­çš„ url è¿›è¡Œä¸€ä¸ªé‡æ–°çš„åŠ è½½ï¼Œè¿™æ ·ä¸€æ¥å°±ä¸ä¼šç›´æ¥æç¤ºä½¿ç”¨å¤–ç½®æµè§ˆå™¨äº†ã€‚</p><p>è°ƒç”¨ setWebViewClient æ–¹æ³•æ˜¯ï¼Œä¼ å…¥çš„æ˜¯è‡ªå·±åˆ›å»ºçš„å†…éƒ¨ç±»å¯¹è±¡å°±è¡Œäº† <code>webView.setWebViewClient(new MyWebViewClient());</code></p><p>æ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/webview/d9flt-ythk8.gif" loading="lazy"></p><h3 id="è¿”å›"><a href="#è¿”å›" class="headerlink" title="è¿”å›"></a>è¿”å›</h3><p>ä½†æ˜¯ï¼Œæˆ‘ä»¬è¿›å…¥åˆ°è¿™ä¸ªé¡µé¢å†è¿”å›ï¼Œåˆå‡ºç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œè¯·çœ‹ä¸‹å›¾ã€‚</p><p><img src="/images/Android/webview/j7vx8-2t7y4.gif" loading="lazy"></p><p>å¾ˆå®¹æ˜“å‘ç°ï¼Œå®ƒå¹¶æ²¡æœ‰åé€€åˆ°ä¸Šä¸€ä¸ªé¡µé¢ï¼Œè€Œæ˜¯ç›´æ¥é€€å‡ºäº†ã€‚æ‰€ä»¥è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æŒ‰é”®è¿›è¡Œä¸€ä¸ªåˆ¤æ–­ã€‚åˆ¤æ–­æ–¹æ³•ä¹Ÿéå¸¸ç®€å•ï¼Œå°±æ˜¯æŒ‰ä¸‹çš„æ˜¯å¦ä¸ºè¿”å›é”®å¹¶ä¸”èƒ½å¤Ÿåé€€åˆ°ä¸Šä¸€ä¸ªé¡µé¢ã€‚æ¡ä»¶æˆç«‹åˆ™æ‰§è¡Œè¿”å›åˆ°ä¸Šä¸€ä¸ªé¡µé¢ï¼Œæ¡ä»¶ä¸æˆç«‹åˆ™ç›´æ¥é€€å‡ºã€‚</p><p>åŒæ—¶ç½‘é¡µçš„å‰è¿›ä¸åé€€ï¼Œä¹Ÿæœ‰ 6 ç§æ–¹æ³•å¯ä»¥é€‰æ‹©</p><ul><li>webview.canGoBack()  èƒ½å¦åé€€åˆ°ä¸Šä¸€ä¸ªé¡µé¢</li><li>webview.goBack()  åé€€åˆ°ä¸Šä¸€ä¸ªé¡µé¢</li><li>webview.canGoForward()  å‰è¿›åˆ°ä¸‹ä¸€ä¸ªé¡µé¢</li><li>webview.goForward()  å‰è¿›åˆ°ä¸‹ä¸€ä¸ªé¡µé¢</li><li>webview.canGoBackOrForward(int steps)  èƒ½å¦åé€€æˆ–è€…å‰æ™¯åˆ°ç¬¬å‡ ä¸ªé¡µé¢ï¼Œåé€€ä¸ºè´Ÿå€¼ï¼Œå‰è¿›ä¸ºæ­£å€¼</li><li>webview.GoBackOrForward(int steps)  åé€€æˆ–è€…å‰æ™¯åˆ°ç¬¬å‡ ä¸ªé¡µé¢ï¼Œåé€€ä¸ºè´Ÿå€¼ï¼Œå‰è¿›ä¸ºæ­£å€¼</li></ul><p>åœ¨ WebViewActivity ä¸­é‡å†™ onKeyDown æ–¹æ³•ï¼Œé‡æ–°åˆ¤ç«¯ï¼ŒæŒ‰ä¸‹è¿”å›é”®çš„æ“ä½œã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/**  * è®¾ç½®è¿”å›å€¼ï¼Œé˜²æ­¢ç›´æ¥è¿”å›  * @param keyCode  * @param event  * @return  */</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">onKeyDown</span><span class="token punctuation">(</span><span class="token keyword">int</span> keyCode<span class="token punctuation">,</span> <span class="token class-name">KeyEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// å¦‚æœæŒ‰ä¸‹äº†è¿”å›é”®ï¼Œå¹¶ä¸”èƒ½å¤Ÿè¿”å›åˆ°ä¸Šä¸€çº§ç›®å½•</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span>KEYCODE_BACK <span class="token operator">&amp;&amp;</span> webView<span class="token punctuation">.</span><span class="token function">canGoBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å¯ä»¥è¿”å›åˆ°ä¸Šä¸€çº§çš„ç›®å½•</span>        webView<span class="token punctuation">.</span><span class="token function">goBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// é€€å‡º</span>    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onKeyDown</span><span class="token punctuation">(</span>keyCode<span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œæ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/webview/31gqw-z2rim.gif" loading="lazy"></p><h3 id="å…¶å®ƒé«˜çº§è®¾ç½®"><a href="#å…¶å®ƒé«˜çº§è®¾ç½®" class="headerlink" title="å…¶å®ƒé«˜çº§è®¾ç½®"></a>å…¶å®ƒé«˜çº§è®¾ç½®</h3><p>ä»¥ä¸Šé—®é¢˜è§£å†³äº†ï¼Œæˆ‘ä»¬å¯ä»¥è·å–è¿›åº¦æ¡æ¥æ˜¾ç¤ºç½‘é¡µåŠ è½½çš„æƒ…å†µï¼Œä»¥åŠè®¾ç½®æ ‡é¢˜ï¼Œå°†åŸæ¥çš„ AndroidLayout æ ‡é¢˜è¿›è¡Œä¸€ä¸ªæ›¿æ¢ã€‚</p><p>è¦åšåˆ°è¿™ç§æ•ˆæœï¼Œè¿˜æ˜¯è¦å†™ä¸€ä¸ªç±»ï¼Œç±»åä¸º MyWebChromeClient ï¼Œè¯¥ç±»éœ€è¦ç»§æ‰¿è‡ª WebChromeClientï¼Œé‡å†™å®ƒçš„ä¸¤ä¸ªæ–¹æ³•å°±èƒ½å¤Ÿå®ç°ä»¥ä¸Šçš„åŠŸèƒ½äº†ã€‚</p><p>é‡å†™çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š</p><ul><li>onProgressChanged åŠ è½½è¿›åº¦ï¼Œåˆ›å»ºä¸€ä¸ª ProgressBar è¿™ä¸ªç»„ä»¶å°±å¯ä»¥å»å®ç°</li><li>onReceivedTitle å¾—åˆ°çš„æ ‡é¢˜ï¼Œç›´æ¥ä½¿ç”¨çˆ¶ç±»çš„ setTitle æ–¹æ³•ï¼Œå¯¹æ ‡é¢˜è¿›è¡Œè®¾ç½®</li></ul><p>åœ¨æ­¤ä¹‹å‰ï¼Œå…ˆæ·»åŠ ä¸€ä¸ªè¿›åº¦æ¡çš„ç»„ä»¶</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- è¿›åº¦æ¡ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ProgressBar</span>        <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token style language-css">@<span class="token property">android</span><span class="token punctuation">:</span>style/Widget.ProgressBar.Horizontal</span><span class="token punctuation">"</span></span></span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/progress<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>max</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>WebView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/web_view<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><p>å¯¹åº”çš„Javaä»£ç </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span></span><span class="token class-name">Bitmap</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">AppCompatActivity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Log</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">KeyEvent</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>webkit<span class="token punctuation">.</span></span><span class="token class-name">WebChromeClient</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>webkit<span class="token punctuation">.</span></span><span class="token class-name">WebResourceRequest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>webkit<span class="token punctuation">.</span></span><span class="token class-name">WebView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>webkit<span class="token punctuation">.</span></span><span class="token class-name">WebViewClient</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">ProgressBar</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebViewActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">WebView</span> webView<span class="token punctuation">;</span>    <span class="token comment">// å£°æ˜äº†ä¸€ä¸ªè¿›åº¦æ¡ç»„ä»¶</span>    <span class="token keyword">private</span> <span class="token class-name">ProgressBar</span> progressBar<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_web_view<span class="token punctuation">)</span><span class="token punctuation">;</span>        progressBar <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ProgressBar</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>progress<span class="token punctuation">)</span><span class="token punctuation">;</span>        webView <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">WebView</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>web_view<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å…è®¸ javascript</span>        webView<span class="token punctuation">.</span><span class="token function">getSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setJavaScriptEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åŠ è½½æœ¬åœ°çš„ html æ–‡ä»¶</span>        <span class="token comment">// webView.loadUrl("file:///android_asset/index.html");</span>        webView<span class="token punctuation">.</span><span class="token function">loadUrl</span><span class="token punctuation">(</span><span class="token string">"https://www.bestguo.top"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        webView<span class="token punctuation">.</span><span class="token function">setWebViewClient</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyWebViewClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        webView<span class="token punctuation">.</span><span class="token function">setWebChromeClient</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyWebChromeClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment">// æ–°å»ºäº†ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œç»§æ‰¿è‡ª webchromeclient ç±»</span>    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">MyWebChromeClient</span> <span class="token keyword">extends</span> <span class="token class-name">WebChromeClient</span> <span class="token punctuation">&#123;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onProgressChanged</span><span class="token punctuation">(</span><span class="token class-name">WebView</span> view<span class="token punctuation">,</span> <span class="token keyword">int</span> newProgress<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onProgressChanged</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> newProgress<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// è®¾ç½®è¿›åº¦çš„çŠ¶æ€</span>            progressBar<span class="token punctuation">.</span><span class="token function">setProgress</span><span class="token punctuation">(</span>newProgress<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"loading"</span><span class="token punctuation">,</span> newProgress <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReceivedTitle</span><span class="token punctuation">(</span><span class="token class-name">WebView</span> view<span class="token punctuation">,</span> <span class="token class-name">String</span> title<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onReceivedTitle</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> title<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">setTitle</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œæ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/webview/4vnee-wx7du.gif" loading="lazy"></p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é¡¹ç›®çš„ä»£ç éƒ½åœ¨ <a href="https://github.com/BestGuo2020/AndroidStudy">AndroidStudy</a> çš„ github ä»“åº“ä¸­ã€‚</p><p>KeyEvent å¯¹åº”çš„äº‹ä»¶ï¼Œè¯·å‚è€ƒ <a href="https://www.cnblogs.com/hujingnb/p/10282238.html">https://www.cnblogs.com/hujingnb/p/10282238.html</a></p>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android å…¥é—¨ç¯‡ä¹‹ ScrollView ç»„ä»¶çš„ä½¿ç”¨</title>
      <link href="/journal/scrollview-component/"/>
      <url>/journal/scrollview-component/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æˆ‘æƒ³è¦è¯´"><a href="#æˆ‘æƒ³è¦è¯´" class="headerlink" title="æˆ‘æƒ³è¦è¯´"></a>æˆ‘æƒ³è¦è¯´</h2><p>ScrollView æ˜¯å¸¦æ»‘åŠ¨æ¡çš„è§†å›¾ç»„ä»¶ï¼Œå½“æˆ‘ä»¬çš„å†…å®¹åœ¨è¿™ä¸ªçª—å£æ— æ³•å…¨éƒ¨å±•ç¤ºå‡ºæ¥ï¼Œé»˜è®¤æ˜¯ä¸ä¼šæœ‰æ»šåŠ¨æ¡å‡ºç°çš„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªæ»šåŠ¨è§†å›¾æ¥å±•ç¤ºè¿™äº›æœªå±•ç¤ºçš„éƒ¨åˆ†ã€‚</p><p>ScrollView çš„ä½¿ç”¨æ˜¯éå¸¸ç®€å•çš„ã€‚</p><p>ä¸è¿‡ ScrollView æ˜¯çºµå‘æ»šåŠ¨çš„ã€‚å®ƒè¿˜æœ‰ä¸€ä¸ªæ¨ªå‘çš„æ»šåŠ¨æ¡ï¼Œå«åš HorizontalScrollViewï¼Œå³æ°´å¹³æ»šåŠ¨è§†å›¾ã€‚</p><span id="more"></span><h2 id="éœ€è¦æ³¨æ„çš„"><a href="#éœ€è¦æ³¨æ„çš„" class="headerlink" title="éœ€è¦æ³¨æ„çš„"></a>éœ€è¦æ³¨æ„çš„</h2><p>ScrollView ç»„ä»¶ä¸­åªèƒ½åŒ…å«ä¸€ä¸ªç»„ä»¶æˆ–è€…ä¸€ä¸ªå¸ƒå±€ã€‚å¦åˆ™ä¼šå‡ºç°ä»¥ä¸‹é—®é¢˜</p><p><img src="/images/Android/scrollview/QQ%E6%88%AA%E5%9B%BE20210130161441.jpg" loading="lazy"></p><p>å¯¹åº”çš„ä¼ªä»£ç å¦‚ä¸‹</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ScrollView</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.MainActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ListView</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        ....    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span>    ....<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ScrollView</span><span class="token punctuation">></span></span></code></pre><p>é¢„è§ˆæ•ˆæœä¸­æœ‰ä¸€ä¸ªæŠ¥é”™ä¿¡æ¯ â€œScrollView can host only one direct childâ€ï¼Œè¯´çš„å°±æ˜¯ä¸Šé¢è¿™ä¸ªæ„æ€ã€‚ç„¶åä¸Šé¢è¿™ç§å†™æ³•å°±æ˜¯é”™è¯¯çš„ã€‚</p><p>å¦‚æœè¦åœ¨ ScrollView ä¸­è¦æ˜¾ç¤ºå¤šä¸ªç»„ä»¶è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå¾ˆç®€å•ï¼Œä½¿ç”¨ LinearLayout å’Œ RelativeLayout ç­‰å„ç§å¸ƒå±€å°±å¯ä»¥äº†ã€‚</p><h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>æœ¬å®ä¾‹å°† ScrollView å’Œ HorizontalScrollView ä¸¤ç§æ»šåŠ¨æ–¹å¼</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- å‚ç›´æ»šåŠ¨ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ScrollView</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.MainActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/btn1<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@string/linear_layout<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/btn2<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>RelativeLayout å¸ƒå±€ç¤ºä¾‹<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/btn3<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>TextView ç»„ä»¶ç¤ºä¾‹<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/btn4<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button ç»„ä»¶ç¤ºä¾‹<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/btn5<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>EditText ç»„ä»¶ç¤ºä¾‹<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/btn6<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>RadioButton ç»„ä»¶ç¤ºä¾‹<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/btn7<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CheckBox ç»„ä»¶ç¤ºä¾‹<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/btn8<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ImageView ç»„ä»¶ç¤ºä¾‹<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/btn9<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ListView ç»„ä»¶ç¤ºä¾‹<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/btn10<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GridView ç»„ä»¶ç¤ºä¾‹<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- æ°´å¹³æ»šåŠ¨ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HorizontalScrollView</span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>                    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>150dp<span class="token punctuation">"</span></span>                    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>120dp<span class="token punctuation">"</span></span>                    <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æµ‹è¯•æŒ‰é’® 1<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>                    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/button<span class="token punctuation">"</span></span>                    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>150dp<span class="token punctuation">"</span></span>                    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>120dp<span class="token punctuation">"</span></span>                    <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æµ‹è¯•æŒ‰é’® 2<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>                    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>150dp<span class="token punctuation">"</span></span>                    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>120dp<span class="token punctuation">"</span></span>                    <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æµ‹è¯•æŒ‰é’® 3<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HorizontalScrollView</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ScrollView</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹<br><img src="/images/Android/scrollview/zrzuj-rar1q.gif" loading="lazy"></p>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android å…¥é—¨ç¯‡ä¹‹ GridView ç»„ä»¶çš„ä½¿ç”¨</title>
      <link href="/journal/gridview-component/"/>
      <url>/journal/gridview-component/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æˆ‘æƒ³è¦è¯´"><a href="#æˆ‘æƒ³è¦è¯´" class="headerlink" title="æˆ‘æƒ³è¦è¯´"></a>æˆ‘æƒ³è¦è¯´</h2><p>æ˜¨å¤©æ•´ç†å®Œäº† ListViewï¼Œç°åœ¨å­¦èµ· GridView ç»„ä»¶å°±æ˜¯è¾ƒä¸ºç®€å•çš„äº‹æƒ…äº†ï¼Œæ¯”å¦‚åˆ›å»º Adapter ç­‰ç­‰è¿˜æ˜¯ä¸€æ ·çš„ã€‚<font color="red">å»ºè®®çœ‹å®Œ ListView å†å»å­¦ä¹  GridView å°±ç›¸å¯¹ç®€å•ä¸€äº›</font>ã€‚</p><p>è¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šç¤ºä¾‹ã€‚</p><p>å¯¹å•¦ï¼Œè¿™æ¬¡æˆ‘å¯¹ git çš„ç”¨æ³•æœ‰äº†ä¸€äº›äº†è§£ã€‚åç»­å°±å¯ä»¥åœ¨ github ä¸Šçœ‹åˆ°æˆ‘çš„ Android ä¾‹å­äº†ã€‚</p><span id="more"></span><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p>æœ¬å®ä¾‹å›é¡¾äº†ä¸€ä¸‹å‰é¢ ListView åˆ›å»ºçš„æ­¥éª¤</p><h3 id="åˆ›å»ºç½‘æ ¼è§†å›¾"><a href="#åˆ›å»ºç½‘æ ¼è§†å›¾" class="headerlink" title="åˆ›å»ºç½‘æ ¼è§†å›¾"></a>åˆ›å»ºç½‘æ ¼è§†å›¾</h3><p>åˆ›å»ºä¸€ä¸ª layoutï¼Œæ–‡ä»¶åä¸º activity_grid_view.xml</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5dp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>GridView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/grid_view<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>numColumns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>horizontalSpacing</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>verticalSpacing</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><p>ä»¥ä¸Šæ¶‰åŠåˆ°äº†ä¸‰ä¸ªå±æ€§ï¼Œåˆ†åˆ«æ˜¯ <code>numColumns</code>ã€<code>horizontalSpacing</code> å’Œ <code>verticalSpacing</code></p><p>å…¶ä¸­ <code>numColumn</code> è®¾ç½®çš„æœ‰å‡ åˆ—ï¼Œé»˜è®¤çš„å€¼æ˜¯ 1ï¼Œä¹Ÿå°±æ˜¯åªæœ‰ä¸€åˆ—ï¼Œè¿™æ ·å°±å’Œ ListView ä¸€æ¨¡ä¸€æ ·äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒListView å¯ä»¥è¢« GridView æ›¿ä»£äº†ã€‚<br><code>horizontalSpacing</code> è®¾ç½®æ°´å¹³ä¹‹é—´çš„é—´éš”ï¼Œé»˜è®¤ä¸º 0ã€‚<br><code>verticalSpacing</code> è®¾ç½®çš„æ˜¯ç«–ç›´ä¹‹é—´çš„é—´éš”ï¼Œé»˜è®¤ä¸º 0ã€‚</p><p>ä¸ºäº†èƒ½å¤Ÿä½“ç°å‡º GridViewï¼Œè¿™é‡Œå°†åˆ—æ•°è®¾ç½®æˆ 3 åˆ—ã€‚</p><h3 id="åˆ›å»º-Activity"><a href="#åˆ›å»º-Activity" class="headerlink" title="åˆ›å»º Activity"></a>åˆ›å»º Activity</h3><p>åˆ›å»ºä¸ä¹‹å¯¹åº”çš„ Activity çš„ java ç±»ï¼Œæˆ‘è¿™é‡Œç»§æ‰¿çš„æ˜¯ AppCompatActivity ç±»ã€‚</p><blockquote><p>Activity ç±»æ˜¯æœ€åŸå§‹çš„ä¸€ä¸ªç±»ï¼Œå®ƒæœ‰å¾ˆå¤šè¡ç”Ÿçš„å­ç±»ã€‚æ¯”å¦‚ FragmentActivityã€AppCompatActivity ç­‰ç­‰ï¼Œä¸åŒçš„ Activity å¯¹åº”çš„é»˜è®¤å¸ƒå±€ä¹Ÿå°±ä¸ä¸€æ ·ã€‚æ¯”å¦‚ï¼šActivity é»˜è®¤æ˜¯ä¸å¸¦æ ‡é¢˜æ çš„ï¼Œè€Œ AppConpatActivity é»˜è®¤æ˜¯å¸¦æ ‡é¢˜æ çš„ã€‚</p><p>è¿™æ˜¯ä¸å¸¦æ ‡é¢˜æ çš„æ•ˆæœ<br><img src="/images/Android/gridview/QQ%E6%88%AA%E5%9B%BE20210129231233.jpg" loading="lazy"><br>è¿™æ˜¯å¸¦æ ‡é¢˜æ çš„æ•ˆæœ<br><img src="/images/Android/listview/QQ%E6%88%AA%E5%9B%BE20210128175858.jpg" loading="lazy"></p></blockquote><p>GridViewActivity ç±»</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout<span class="token punctuation">.</span>gridview</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Nullable</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">AppCompatActivity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout<span class="token punctuation">.</span></span><span class="token class-name">R</span><span class="token punctuation">;</span><span class="token comment">/** * Created by He Guo on 2021/1/29. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GridViewActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_grid_view<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="æ·»åŠ -Activity"><a href="#æ·»åŠ -Activity" class="headerlink" title="æ·»åŠ  Activity"></a>æ·»åŠ  Activity</h3><p>å°†è‡ªå·±åˆ›å»ºçš„ Activity æ·»åŠ åˆ° AndroidManifest.xml æ–‡ä»¶ä¸­ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>manifest</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name">package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.permission.INTERNET<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>application</span>        <span class="token attr-name"><span class="token namespace">android:</span>allowBackup</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@mipmap/ic_launcher<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@string/app_name<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>roundIcon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@mipmap/ic_launcher_round<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>supportsRtl</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@style/AppTheme<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.MainActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.intent.action.MAIN<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.intent.category.LAUNCHER<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activity</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.LinearActivity<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.RelativeActivity<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.TextviewActivity<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.ButtonActivity<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.EditTextActivity<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.RadioButtonActivity<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.CheckBoxActivity<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.ImageViewActivity<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.listview.ListViewActivity<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- åœ¨æœ«å°¾è¿½åŠ çš„ activity --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.gridview.GridViewActivity<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>application</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>manifest</span><span class="token punctuation">></span></span></code></pre><h3 id="åˆ›å»ºè‡ªå®šä¹‰-item-å¸ƒå±€"><a href="#åˆ›å»ºè‡ªå®šä¹‰-item-å¸ƒå±€" class="headerlink" title="åˆ›å»ºè‡ªå®šä¹‰ item å¸ƒå±€"></a>åˆ›å»ºè‡ªå®šä¹‰ item å¸ƒå±€</h3><p>è‡ªå®šä¹‰ item çš„å¸ƒå±€</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ImageView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/header<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@color/colorAccent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>scaleType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>centerCrop<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>        <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>7dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/name<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æµ‹è¯•æ–‡å­—<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>14dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><h3 id="åˆ›å»ºä¸€ä¸ª-Adapter"><a href="#åˆ›å»ºä¸€ä¸ª-Adapter" class="headerlink" title="åˆ›å»ºä¸€ä¸ª Adapter"></a>åˆ›å»ºä¸€ä¸ª Adapter</h3><p>åˆ›å»ºä¸€ä¸ª Adapterï¼Œç›®çš„æ˜¯å°† item å±•ç¤ºå‡ºæ¥ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout<span class="token punctuation">.</span>gridview</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span><span class="token class-name">Context</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">LayoutInflater</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">View</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">ViewGroup</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">BaseAdapter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">ImageView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">TextView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>bumptech<span class="token punctuation">.</span>glide<span class="token punctuation">.</span></span><span class="token class-name">Glide</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout<span class="token punctuation">.</span></span><span class="token class-name">R</span><span class="token punctuation">;</span><span class="token comment">/** * Created by He Guo on 2021/1/29. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyGridViewAdapter</span> <span class="token keyword">extends</span> <span class="token class-name">BaseAdapter</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Context</span> context<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">LayoutInflater</span> layoutInflater<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">MyGridViewAdapter</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span>        layoutInflater <span class="token operator">=</span> <span class="token class-name">LayoutInflater</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token number">15</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getItem</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">getItemId</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ViewHolder</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ImageView</span> imageView<span class="token punctuation">;</span>        <span class="token class-name">TextView</span> textView<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">View</span> <span class="token function">getView</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token class-name">View</span> view<span class="token punctuation">,</span> <span class="token class-name">ViewGroup</span> viewGroup<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ViewHolder</span> viewHolder<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>view <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            view <span class="token operator">=</span> layoutInflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>layout_grid_item<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            viewHolder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ViewHolder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            viewHolder<span class="token punctuation">.</span>imageView <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>header<span class="token punctuation">)</span><span class="token punctuation">;</span>            viewHolder<span class="token punctuation">.</span>textView <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>            view<span class="token punctuation">.</span><span class="token function">setTag</span><span class="token punctuation">(</span>viewHolder<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>            viewHolder <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ViewHolder</span><span class="token punctuation">)</span> view<span class="token punctuation">.</span><span class="token function">getTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// åŠ è½½ç½‘ç»œå›¾ç‰‡</span>        <span class="token class-name">Glide</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"http://www.topacg.com/wp-content/uploads"</span> <span class="token operator">+</span>                <span class="token string">"/2020/03/frc-11c619718c036bf579c246cdd07e6d77.jpeg"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span>viewHolder<span class="token punctuation">.</span>imageView<span class="token punctuation">)</span><span class="token punctuation">;</span>        viewHolder<span class="token punctuation">.</span>textView<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"ç¶é—¨ç¥¢è±†å­"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> view<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="æ·»åŠ -Adapter-åˆ°-Activity"><a href="#æ·»åŠ -Adapter-åˆ°-Activity" class="headerlink" title="æ·»åŠ  Adapter åˆ° Activity"></a>æ·»åŠ  Adapter åˆ° Activity</h3><p>è®¾ç½®ä¸€ä¸ª Adapterï¼Œç”¨äºæ¸²æŸ“æ•°æ®çš„ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout<span class="token punctuation">.</span>gridview</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Nullable</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">AppCompatActivity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">View</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">AdapterView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">GridView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">ImageView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">TextView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">Toast</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>bumptech<span class="token punctuation">.</span>glide<span class="token punctuation">.</span></span><span class="token class-name">Glide</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout<span class="token punctuation">.</span></span><span class="token class-name">R</span><span class="token punctuation">;</span><span class="token comment">/** * Created by He Guo on 2021/1/29. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GridViewActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">GridView</span> gridView<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_grid_view<span class="token punctuation">)</span><span class="token punctuation">;</span>        gridView <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">GridView</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>grid_view<span class="token punctuation">)</span><span class="token punctuation">;</span>        gridView<span class="token punctuation">.</span><span class="token function">setAdapter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyGridViewAdapter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h2><p>å’Œ ListView ä¸€æ¨¡ä¸€æ ·ï¼ŒGridView ä¹Ÿæœ‰ä¸¤ç§å¸¸ç”¨çš„äº‹ä»¶ï¼Œåˆ†åˆ«æ˜¯ <code>setOnItemClickListener</code> å’Œ <code>setOnItemLongClickListener</code> ä¸¤ä¸ªæ–¹æ³•ã€‚ä¸€ä¸ªæ˜¯æ‰‹æŒ‡çŸ­æŒ‰çš„äº‹ä»¶ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯é•¿æŒ‰çš„äº‹ä»¶ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout<span class="token punctuation">.</span>gridview</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Nullable</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">AppCompatActivity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">View</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">AdapterView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">GridView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">ImageView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">TextView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">Toast</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>bumptech<span class="token punctuation">.</span>glide<span class="token punctuation">.</span></span><span class="token class-name">Glide</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout<span class="token punctuation">.</span></span><span class="token class-name">R</span><span class="token punctuation">;</span><span class="token comment">/** * Created by He Guo on 2021/1/29. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GridViewActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">GridView</span> gridView<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_grid_view<span class="token punctuation">)</span><span class="token punctuation">;</span>        gridView <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">GridView</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>grid_view<span class="token punctuation">)</span><span class="token punctuation">;</span>        gridView<span class="token punctuation">.</span><span class="token function">setAdapter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyGridViewAdapter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ç‚¹å‡»äº‹ä»¶</span>        gridView<span class="token punctuation">.</span><span class="token function">setOnItemClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AdapterView<span class="token punctuation">.</span>OnItemClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onItemClick</span><span class="token punctuation">(</span><span class="token class-name">AdapterView</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> adapterView<span class="token punctuation">,</span> <span class="token class-name">View</span> view<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">long</span> l<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">GridViewActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"æˆ‘æ˜¯ç¥¢è±†å­ "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" å·"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é•¿æŒ‰äº‹ä»¶</span>        gridView<span class="token punctuation">.</span><span class="token function">setOnItemLongClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AdapterView<span class="token punctuation">.</span>OnItemLongClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">onItemLongClick</span><span class="token punctuation">(</span><span class="token class-name">AdapterView</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> adapterView<span class="token punctuation">,</span> <span class="token class-name">View</span> view<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">long</span> l<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// æ‰¾åˆ°å½“å‰é€‰ä¸­çš„ header å’Œ textviewï¼Œåç»­è¦å¯¹å…¶è¿›è¡Œè®¾ç½®ã€‚</span>                <span class="token class-name">ImageView</span> imageView <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>header<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">TextView</span> textView <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// åŠ è½½ç½‘ç»œå›¾ç‰‡</span>                <span class="token class-name">Glide</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token class-name">GridViewActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"http://pic.17qq.com/img_qqtouxiang/87450489.jpeg"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span>imageView<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// è®¾ç½®æ–‡å­—</span>                textView<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"æˆ‘å¦»å–„é€¸"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// ç»™å‡ºæç¤ºæ¡†</span>                <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">GridViewActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"å˜»å˜»ï¼Œå·å·æŠ±èµ°"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"å·ç¥¢è±†å­"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="æœ€ç»ˆæ•ˆæœ"><a href="#æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æœ€ç»ˆæ•ˆæœ"></a>æœ€ç»ˆæ•ˆæœ</h2><p>æœ€ç»ˆæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/images/Android/gridview/yz3ij-qmw5f.gif" loading="lazy"></p><p>æˆ‘ä¹Ÿæƒ³æŠ±èµ°ç¥¢è±†å­ï¼Œå˜»å˜»ğŸ˜ŠğŸ˜ŠğŸ˜Š</p>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android å…¥é—¨ç¯‡ä¹‹ ListView ç»„ä»¶çš„ä½¿ç”¨</title>
      <link href="/journal/listview-component/"/>
      <url>/journal/listview-component/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æˆ‘æƒ³è¦è¯´"><a href="#æˆ‘æƒ³è¦è¯´" class="headerlink" title="æˆ‘æƒ³è¦è¯´"></a>æˆ‘æƒ³è¦è¯´</h2><p>ä»Šå¤©å­¦ä¹  ListView ç»„ä»¶ï¼Œå’Œå…¶å®ƒçš„ç»„ä»¶ä¸åŒçš„æ˜¯ã€‚ListView ç»„ä»¶å¹¶ä¸æ˜¯ç®€ç®€å•å•çš„åˆ›å»ºå’Œä½¿ç”¨å°±è¡Œï¼ŒListView ç»„ä»¶ä¸­ï¼Œéœ€è¦æ”¾ç½®å…¶æŸä¸€ä¸ªé¡¹ï¼Œä¹Ÿå°±æ˜¯ itemã€‚åœ¨è¯´å®ä¾‹ä¹‹å‰ï¼Œå…ˆæ¥çœ‹çœ‹ ListView æ˜¯é•¿ä»€ä¹ˆæ ·å­çš„å§ã€‚</p><p>ç”±äºè¿™ä¸ªç»„ä»¶éå¸¸çš„é‡è¦ï¼Œä¼šè®²çš„è¯¦ç»†ä¸€äº›ã€‚</p><p>ListView å­¦å¥½äº†ä¹‹åï¼Œåé¢çš„ GridView ä¹Ÿæ˜¯å¤§åŒå°å¼‚</p><span id="more"></span><p><img src="/images/Android/listview/20210128173116.jpg" loading="lazy"></p><p>æ‰“ç æŠ€æœ¯å ªå¿§ï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆğŸ˜…ğŸ˜…ğŸ˜…</p><p>è¿™æ˜¯ä¸€å¼ å¾®ä¿¡ä¸­çš„æˆªå›¾ï¼Œè¿™ä¸ªç•Œé¢å¯ä»¥è®¤ä¸ºæ˜¯åŒ…å«äº†ä¸€ä¸ª ListViewï¼Œè¿™äº›æ¯ä¸€ä¸ªå°é¡¹ï¼Œå°±å«åš itemï¼Œæ¯”å¦‚â€œé›¨è¯¾å ‚â€å°±æ˜¯ä¸€ä¸ª itemã€‚è€Œä¸”ï¼Œè¿™äº› item ä¸­çš„å¸ƒå±€ä¹Ÿæ˜¯éœ€è¦è‡ªå·±æ¥å®ç°å¸ƒå±€çš„ï¼Œæ‰€ä»¥è¿˜éœ€è¦ç”¨åˆ°ä¸€ä¸ªå¸ƒå±€çš„ xml æ–‡ä»¶ã€‚å¸ƒå±€éš¾åº¦ç¨å¾®å¢åŠ äº†ä¸€äº›ï¼Œä½†æ˜¯ä¸è¦æ€•ã€‚</p><p>é€šè¿‡è¿™å¼ å›¾ï¼Œå¯¹ ListView æœ‰äº†ä¸€ä¸ªæ›´å¥½çš„è®¤è¯†ã€‚</p><h2 id="é‡ç‚¹æ¥å’¯"><a href="#é‡ç‚¹æ¥å’¯" class="headerlink" title="é‡ç‚¹æ¥å’¯"></a>é‡ç‚¹æ¥å’¯</h2><h3 id="è‡ªå·±åˆ›å»º-Activity"><a href="#è‡ªå·±åˆ›å»º-Activity" class="headerlink" title="è‡ªå·±åˆ›å»º Activity"></a>è‡ªå·±åˆ›å»º Activity</h3><blockquote><p>ä»¥ä¸‹å†…å®¹æ¶‰åŠåˆ°è‡ªå®šä¹‰ä¸€ä¸ªå¸ƒå±€å’Œä¸å…¶å¯¹åº”çš„ Java ä»£ç ã€‚</p></blockquote><h4 id="åˆ›å»ºå¸ƒå±€æ–‡ä»¶"><a href="#åˆ›å»ºå¸ƒå±€æ–‡ä»¶" class="headerlink" title="åˆ›å»ºå¸ƒå±€æ–‡ä»¶"></a>åˆ›å»ºå¸ƒå±€æ–‡ä»¶</h4><p>1ã€åˆ›å»ºä¸€ä¸ªå¸ƒå±€æ–‡ä»¶</p><p><img src="/images/Android/listview/QQ%E6%88%AA%E5%9B%BE20210128175329.jpg" loading="lazy"></p><p>2ã€è®¾ç½®æ–‡ä»¶åï¼Œåå­—ä¸º activity_list_viewï¼Œç‚¹å‡» OK</p><p><img src="/images/Android/listview/QQ%E6%88%AA%E5%9B%BE20210128175432.jpg" loading="lazy"></p><p>è‡³æ­¤ activity_list_view.xml æ–‡ä»¶åˆ›å»ºå®Œæˆã€‚</p><h4 id="åˆ›å»º-java-æ–‡ä»¶"><a href="#åˆ›å»º-java-æ–‡ä»¶" class="headerlink" title="åˆ›å»º java æ–‡ä»¶"></a>åˆ›å»º java æ–‡ä»¶</h4><p>1ã€åˆ›å»ºä¸€ä¸ª java æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸º ListViewActivityã€‚</p><p><img src="/images/Android/listview/QQ%E6%88%AA%E5%9B%BE20210128183019.jpg" loading="lazy"></p><p>2ã€é‡å†™ onCreate æ–¹æ³•ï¼Œå¹¶å°† activity_list_view å¸ƒå±€åŠ è½½è¿›å»ã€‚</p><p>å†™æ³•å¦‚ä¸‹ï¼š</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_list_view<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å®Œæ•´ä»£ç ï¼š</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout<span class="token punctuation">.</span>listview</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">Activity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Nullable</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout<span class="token punctuation">.</span></span><span class="token class-name">R</span><span class="token punctuation">;</span><span class="token comment">/** * Created by BestGuo on 2021/1/28. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ListViewActivity</span> <span class="token keyword">extends</span> <span class="token class-name">Activity</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_list_view<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>3ã€åœ¨ AndroidManifest.xml æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä¸€ä¸ª activityã€‚</p><p><img src="/images/Android/listview/QQ%E6%88%AA%E5%9B%BE20210128184304.jpg" loading="lazy"></p><p>è‡³æ­¤ï¼ŒActivity çš„åˆ›å»ºå·²ç»å®Œæˆäº†</p><h3 id="æ–°å»ºä¸€ä¸ª-ListView-ç»„ä»¶"><a href="#æ–°å»ºä¸€ä¸ª-ListView-ç»„ä»¶" class="headerlink" title="æ–°å»ºä¸€ä¸ª ListView ç»„ä»¶"></a>æ–°å»ºä¸€ä¸ª ListView ç»„ä»¶</h3><p>åˆ›å»º ListView éå¸¸ç®€å•ï¼Œç›´æ¥åˆ›å»ºå³å¯ã€‚ç»™å®ƒèµ‹äºˆä¸€ä¸ª idï¼Œåé¢éœ€è¦ä½¿ç”¨åˆ°å®ƒã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ListView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/list_view<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><p>åˆ›å»ºå®Œæˆä¹‹åï¼Œå³è¾¹çš„é¢„è§ˆç•Œé¢ä¼šæœ‰ä¸€ä¸ªæ•ˆæœå›¾å‡ºæ¥ã€‚</p><p><img src="/images/Android/listview/QQ%E6%88%AA%E5%9B%BE20210128175858.jpg" loading="lazy"></p><p>è¿™æ˜¯å®ƒå±•ç¤ºçš„ä¸€ä¸ªæ ·ä¾‹ï¼Œç›´æ¥è¿è¡Œæˆ‘æ²¡æœ‰å»å°è¯•ã€‚ä¸çŸ¥é“ç›´æ¥è¿è¡Œèƒ½ä¸èƒ½çœ‹åˆ°è¿™æ ·çš„æ•ˆæœã€‚</p><h3 id="è‡ªå®šä¹‰-item"><a href="#è‡ªå®šä¹‰-item" class="headerlink" title="è‡ªå®šä¹‰ item"></a>è‡ªå®šä¹‰ item</h3><p>è‡ªå®šä¹‰ item æ˜¯éå¸¸é‡è¦çš„ï¼Œä¹Ÿå°±æ˜¯å¾®ä¿¡æˆªå›¾ä¸­â€œé›¨è¯¾å ‚â€çš„é‚£éƒ¨åˆ†ã€‚æœ¬å®ä¾‹ä¸­ï¼Œæˆ‘ä»¬è¦è®¾ç½®çš„ item æ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/listview/QQ%E6%88%AA%E5%9B%BE20210128185241.jpg" loading="lazy"></p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¦å¤–çš„ä¸€ä¸ª xml æ–‡ä»¶ç”¨æ¥è®¾è®¡ itemã€‚</p><h4 id="æ–°å»ºå¸ƒå±€æ–‡ä»¶"><a href="#æ–°å»ºå¸ƒå±€æ–‡ä»¶" class="headerlink" title="æ–°å»ºå¸ƒå±€æ–‡ä»¶"></a>æ–°å»ºå¸ƒå±€æ–‡ä»¶</h4><p>æ–°å»ºä¸€ä¸ªå¸ƒå±€æ–‡ä»¶ï¼Œåå­—ä¸º layout_list_item.xml æ–‡ä»¶</p><p><img src="/images/Android/listview/QQ%E6%88%AA%E5%9B%BE20210128185638.jpg" loading="lazy"></p><h4 id="ç¼–å†™å¸ƒå±€ä»£ç "><a href="#ç¼–å†™å¸ƒå±€ä»£ç " class="headerlink" title="ç¼–å†™å¸ƒå±€ä»£ç "></a>ç¼–å†™å¸ƒå±€ä»£ç </h4><p>ç¼–å†™å¸ƒå±€ä»£ç ï¼ˆä»£ç ä¸­çš„æ³¨é‡Šéœ€è¦å»çœ‹ï¼‰</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token comment">&lt;!-- åˆ›å»ºçš„å¸ƒå±€æ˜¯çº¿æ€§å¸ƒå±€ï¼Œé»˜è®¤æ˜¯çš„ç»„ä»¶æ‘†æ”¾æ–¹å‘æ˜¯æ°´å¹³æ–¹å‘ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- åˆ›å»ºäº†ä¸€ä¸ªå›¾ç‰‡ç»„ä»¶ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ImageView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/iv<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>scaleType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>centerCrop<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@color/colorBlack<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!--      åˆ›å»ºäº†å¦å¤–ä¸€ä¸ªå¸ƒå±€ï¼Œç”¨äºæ”¾ç½®å›¾ç‰‡å³è¾¹çš„æ–‡å­—æè¿°ã€‚      å®½åº¦å’Œçˆ¶ç±»ç›¸åŒï¼Œé«˜åº¦ç”±é‡Œé¢çš„å†…å®¹æ¥å†³å®šã€‚      è®¾ç½®äº† marginTop="4dp"    --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4dp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--           ç¬¬ä¸€ä¸ª TextView ç»„ä»¶ï¼Œç”¨æ¥å±•ç¤ºæ ‡é¢˜ã€‚è®¾ç½®äº†æ–‡å­—å¤§å°å’Œ paddingLeft="15dp"        --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/tv_title<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Hello<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>paddingLeft</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@color/colorBlack<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- ç¬¬äºŒä¸ª TextView ç»„ä»¶ï¼Œç”¨æ¥å±•ç¤ºæ—¶é—´ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/tv_time<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>paddingLeft</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15sp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@color/colorGray<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2020-1-28<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- ç¬¬ä¸‰ä¸ª TextView ç»„ä»¶ï¼Œç”¨æ¥å±•ç¤ºç®€è¦ä»‹ç» --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/tv_content<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>paddingLeft</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>è¿™æ˜¯å†…å®¹<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@color/colorAccent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><p>å¾—åˆ°çš„ item çš„æ•ˆæœå°±æ˜¯å¦‚å›¾æ‰€ç¤ºçš„æ•ˆæœ</p><p><img src="/images/Android/listview/QQ%E6%88%AA%E5%9B%BE20210128185241.jpg" loading="lazy"></p><blockquote><p><font color="red">æ³¨æ„ï¼šä¹‹å‰åœ¨è®¾ç½®å­—ä½“é¢œè‰²å’ŒèƒŒæ™¯é¢œè‰²ï¼Œæ˜¯ç”¨16è¿›åˆ¶æ¥è®¾ç½®çš„ã€‚ä½†æ˜¯åœ¨è¿™é‡Œæ˜¯ç”¨ <code>@color/colorAccent</code> è®¾ç½®çš„ã€‚</font><br>å…¶å®è¿™ä¸ªä¸éš¾è®¾ç½®ï¼Œåªéœ€åœ¨ res æ–‡ä»¶å¤¹ä¸‹çš„ values æ–‡ä»¶å¤¹ä¸‹çš„ colors.xml æ¥è¿›è¡Œè®¾ç½®çš„ã€‚é€šè¿‡æ¯ä¸€ä¸ªè‹±æ–‡æ‰€å¯¹åº”çš„åå…­è¿›åˆ¶é¢œè‰²ä»£ç æ¥è®¾ç½®å°±å¯ä»¥äº†ã€‚åæœŸä½¿ç”¨é¢œè‰²ï¼Œç›´æ¥ä½¿ç”¨ <code>@color/xxxxxx</code> è¿™ç§å†™æ³•å³å¯ã€‚<br><img src="/images/Android/listview/QQ%E6%88%AA%E5%9B%BE20210128191609.jpg" loading="lazy"></p></blockquote><h4 id="æ–°å»º-Adapter"><a href="#æ–°å»º-Adapter" class="headerlink" title="æ–°å»º Adapter"></a>æ–°å»º Adapter</h4><p>éå¸¸é‡ç‚¹çš„éƒ¨åˆ†æ¥å’¯ï¼ä»€ä¹ˆæ˜¯ Adapterï¼ŒAdapter æ˜¯ç”¨æ¥åœ¨å±•ç¤ºè¿™äº› item çš„ã€‚ä»¥ä¸‹çš„å¾®ä¿¡æˆªå›¾ç”¨çº¢è‰²åœˆå‡ºçš„éƒ¨åˆ†å°±æ˜¯ç”± Adapter å°†è¿™äº› item ç»™åˆ›å»ºå‡ºæ¥çš„ã€‚</p><p><del>ä»€ä¹ˆï¼Ÿé€‚é…å™¨ï¼Œä¸è¦å’Œæˆ‘è®²é€‚é…å™¨ï¼Œæˆ‘å¯ä¸æ‡‚æ˜¯ä»€ä¹ˆé¬¼ä¸œè¥¿ã€‚</del></p><p><img src="/images/Android/listview/20210128193509.jpg" loading="lazy"></p><p>å’¦ï¼Œæˆ‘è¯´æ˜çš„æ–‡å­—è¿™ä¹ˆè¿™ä¹ˆå°ï¼Œå¤ªä¸ç»™åŠ›äº†ã€‚ğŸ˜±ğŸ˜±ğŸ˜±</p><p>Adapter æœ‰å¾ˆå¤šç§ï¼Œåœ¨å­¦ä¹ æ—¶è¯´æ˜¯ä½¿ç”¨ BaseAdapter æœ€å¤šï¼Œé‚£æˆ‘ä»¬å°±ç”¨ BaseAdapter æ¥ä¸¾ä¾‹ã€‚</p><p>é¦–å…ˆæ–°å»ºä¸€ä¸ª MyListAdapter ç±»ï¼Œéœ€è¦ç»§æ‰¿è‡ª BaseAdapter ç±»ï¼Œé‡å†™å…¶ç›¸å…³çš„æ–¹æ³•æ‰æ˜¯çœŸæ­£çš„è¿ç”¨åˆ°ã€‚</p><p>ç»§æ‰¿ä¹‹åï¼Œéœ€è¦é‡å†™çš„æ–¹æ³•å…±æœ‰ 4 ä¸ªï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">/** * Created by BestGuo on 2021/1/28. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyListAdapter</span> <span class="token keyword">extends</span> <span class="token class-name">BaseAdapter</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * ListView ç»„ä»¶ä¸­éœ€è¦æ”¾ç½®çš„å¤šå°‘é¡¹ï¼Œè¿™ä¸ªæ˜¯è¦ä»æœåŠ¡ç«¯æ¥è¿›è¡Œè·å–çš„å€¼ã€‚     * åé¢çš„ç¤ºä¾‹ï¼Œç”±äºæ²¡æœ‰æ¶‰åŠåˆ°æœåŠ¡ç«¯ï¼Œå±•ç¤ºä¸€ä¸‹æ•ˆæœï¼Œä¼šç›´æ¥åœ¨æ­¤è®¾ç½®æ•°å€¼     * @return æ•´å‹     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// é€šè¿‡ç´¢å¼•è·å–å†…å®¹ï¼Œä½†æ˜¯æˆ‘ä»¬ç›®å‰æ²¡æœ‰å†…å®¹ï¼Œå› æ­¤å…ˆæ”¾ä¸€ä¸‹</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getItem</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// è·å–idï¼Œå…·ä½“æ˜¯ä»€ä¹ˆæ ·çš„idè¿˜éœ€è¦çœ‹ä»€ä¹ˆåœºæ™¯ï¼Œå› æ­¤å…ˆæ”¾ä¸€ä¸‹</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">getItemId</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * åˆ—è¡¨ä¸­çš„æ ·å¼æ¯ä¸€é¡¹çš„è®¾ç½®     *     * @param i ListView ä¸­çš„ç´¢å¼•     * @param view è‡ªå®šä¹‰çš„ item å¸ƒå±€ï¼Œä¹Ÿå°±æ˜¯å¯¹åº”æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ layout_list_item.xml æ–‡ä»¶     * @param viewGroup ä¸çŸ¥é“ï¼Œåˆ°æ—¶å€™ç”¨åˆ°åœ¨ä»‹ç»     * @return     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">View</span> <span class="token function">getView</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token class-name">View</span> view<span class="token punctuation">,</span> <span class="token class-name">ViewGroup</span> viewGroup<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ä¸­é—´çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œå¯ä»¥å…ˆä¸ç®¡å®ƒã€‚æš‚æ—¶ç”¨ä¸åˆ°</p><h4 id="é‡å†™æ–¹æ³•"><a href="#é‡å†™æ–¹æ³•" class="headerlink" title="é‡å†™æ–¹æ³•"></a>é‡å†™æ–¹æ³•</h4><p>æˆ‘ä»¬ä¸»è¦é‡å†™çš„æ–¹æ³•æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ª <code>getCount()</code>ï¼Œå¦ä¸€ä¸ªæ˜¯ <code>getView()</code></p><h5 id="getCount-æ–¹æ³•"><a href="#getCount-æ–¹æ³•" class="headerlink" title="getCount æ–¹æ³•"></a>getCount æ–¹æ³•</h5><p>è¿™ä¸ªæ–¹æ³•çš„ç”¨é€”å¾ˆç®€å•ï¼Œå°±æ˜¯è¦è®© ListView çŸ¥é“è¦æ”¾å¤šå°‘ä¸ª itemã€‚ä¸€èˆ¬æ˜¯æœåŠ¡å™¨åŠ¨æ€è·å–çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯äººä¸ºè®¾ç½®çš„ã€‚</p><p>å‡è®¾æˆ‘ä»¬åªè¦ 15 é¡¹ï¼Œä¸”æ°¸è¿œä¸å˜ã€‚é‚£æˆ‘ä»¬çš„ getCount æ–¹æ³•ä¸­çš„è¿”å›å€¼ï¼Œé‚£å°±æ˜¯ 15ã€‚æ‰€ä»¥æ˜¯è¿™æ ·å†™ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token number">15</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>å‡è®¾æˆ‘ä»¬ä»æœåŠ¡å™¨è·å–åˆ°çš„æ•°æ®ï¼Œç”¨çš„æ˜¯ ArrayList ä¿å­˜çš„ï¼Œå¦‚æœè¦çŸ¥é“è·å–å¤šå°‘æ¡æ•°æ®ã€‚é‚£ä¹ˆå°±è°ƒç”¨å®ƒçš„ <code>size</code> æ–¹æ³•å³å¯ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">ArrayList</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h5 id="getView-æ–¹æ³•"><a href="#getView-æ–¹æ³•" class="headerlink" title="getView æ–¹æ³•"></a>getView æ–¹æ³•</h5><p>è¿™ä¸ªæ–¹æ³•çš„ç”¨é€”æ˜¯å°†æˆ‘ä»¬è‡ªå®šä¹‰çš„ item å¸ƒå±€è¿›è¡Œå¤„ç†ã€‚å¯¹æ¯ä¸€ä¸ª item ä¸­çš„ç»„ä»¶çš„å€¼è¿›è¡Œä¸€äº›è®¾ç½®ï¼Œæ¯”å¦‚â€œé›¨è¯¾å ‚â€çš„å›¾æ ‡ã€é›¨è¯¾å ‚æ–‡å­—ã€å‘å¸ƒæ—¥æœŸã€‚è¿™äº›å°±æ˜¯ item ä¸­çš„ç»„ä»¶ï¼Œéœ€è¦å¯¹å…¶è¿›è¡Œè®¾ç½®ã€‚</p><p>ä¸‹å›¾æ˜¯é›¨è¯¾å ‚éƒ¨åˆ†ï¼ˆçº¢è‰²åœˆå‡ºçš„éƒ¨åˆ†å°±æ˜¯å¾®ä¿¡ä¸­ item ç”¨åˆ°çš„ç»„ä»¶ï¼‰</p><p><img src="/images/Android/listview/20210129000805.jpg" loading="lazy"></p><p>ä»¥ä¸‹çº¢è‰²åœˆåœˆçš„éƒ¨åˆ†å°±æ˜¯æˆ‘ä»¬éœ€è¦è®¾ç½®çš„éƒ¨åˆ†</p><p><img src="/images/Android/listview/185241.jpg" loading="lazy"></p><blockquote><p>å…¶ä¸­è¿™é‡Œé¢æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„æ–¹æ³•ï¼Œå°±æ˜¯ inflateï¼Œinflate æ–¹æ³•æ˜¯ç”¨äºå°†æˆ‘ä»¬è‡ªå®šä¹‰çš„ layout_list_item.xml æ–‡ä»¶è‡ªåŠ¨å¡«å……åˆ° View ä¸­ï¼Œåªæœ‰å¡«å……è¿›å»äº†ï¼Œæ‰èƒ½æ­£ç¡®çš„è°ƒç”¨åˆ°è¿™ä¸ª layout æ–‡ä»¶ä¸­è®¾ç½®çš„ id å€¼ã€‚</p><p>LayoutInflater å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªå¸ƒå±€æ‰©å……çš„ä¸€ä¸ªç±»ï¼Œå°† layout_list_item è‡ªå®šä¹‰çš„ç»„ä»¶æ‰©åˆ° activity_list_view è¿™ä¸ªç»„ä»¶ä¸­ã€‚å®ƒæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ª <code>from</code> æ–¹æ³•ï¼Œç”¨äºæŒ‡å®š layout_list_item æ˜¯ activity_list_view ç»„ä»¶ç®¡ç†çš„ï¼›ä¸€ä¸ª <code>inflate</code> æ–¹æ³•ï¼Œå°† layout_list_item å¡«å……åˆ° activity_list_view ä¸­ã€‚<br>ä½†æ˜¯ï¼Œæ‰§è¡Œå®Œ inflate æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰å°†è¿™äº›ç»„ä»¶çœŸæ­£çš„å¡«å……è¿›å»ï¼Œåªæ˜¯ç»™è¿™äº›ç»„ä»¶â€œåˆ›å»ºäº†ä¸€ä¸ªåº§ä½â€ã€‚è¦å°†è¿™äº›ç»„ä»¶ä¿å­˜èµ·æ¥ï¼Œéœ€è¦ç”¨åˆ° view ä¸­çš„ <code>setTag</code> æ–¹æ³•æ¥å°†æ‰¾åˆ°çš„ç»„ä»¶çœŸæ­£çš„ä¿å­˜èµ·æ¥ã€‚setTag ä¼ å…¥çš„å‚æ•°ç±»å‹ä¸º Objectï¼Œå› æ­¤ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªç±»ï¼Œç”¨äºä¿å­˜è¿™äº› item ä¸­çš„ç»„ä»¶ã€‚</p></blockquote><p>ä»¥ä¸‹ä¼ªä»£ç å¦‚ä¸‹</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// å®šä¹‰ä¸€ä¸ªå¸ƒå±€æ‰©å……ç±»</span><span class="token keyword">private</span> <span class="token class-name">LayoutInflater</span> layoutInflater <span class="token operator">=</span> <span class="token class-name">LayoutInflater</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token class-name">ListViewActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment">// è‡ªå®šä¹‰çš„å†…éƒ¨ç±»ï¼Œç”¨å®ƒæ¥å°† layout_list_item ä¸­çš„ç»„ä»¶å°†å…¶ä¿å­˜èµ·æ¥</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ViewHolder</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">ImageView</span> imageView<span class="token punctuation">;</span>    <span class="token class-name">TextView</span> tvClock<span class="token punctuation">,</span> tvContent<span class="token punctuation">,</span> tvTitle<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token class-name">View</span> <span class="token function">getView</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token class-name">View</span> view<span class="token punctuation">,</span> <span class="token class-name">ViewGroup</span> viewGroup<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">ViewHolder</span> viewHolder<span class="token punctuation">;</span>    <span class="token comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨ getView æ–¹æ³•æ—¶ã€‚é¦–å…ˆè¿™ä¸ªè‡ªå®šä¹‰çš„ç»„ä»¶è‚¯å®šæ˜¯æ²¡æœ‰è¿›è¡Œå¡«å……è¿›å»ã€‚</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>view <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">// å¼€å§‹æ‰©å……â€œåº§ä½â€ï¼Œå¹¶å°† layout_list_item ä¿å­˜åˆ°å˜é‡ä¸­ã€‚</span>        view <span class="token operator">=</span> layoutInflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>layout_list_item<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„å¯¹è±¡ï¼Œå°†æ‰¾åˆ°çš„ç»„ä»¶æ”¾åˆ°å¯¹è±¡ä¸­</span>        viewHolder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ViewHolder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        viewHolder<span class="token punctuation">.</span>imageView <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>iv<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰¾åˆ° ImageView ç»„ä»¶</span>        viewHolder<span class="token punctuation">.</span>tvClock <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>tv_time<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰¾åˆ° TextView ç»„ä»¶</span>        viewHolder<span class="token punctuation">.</span>tvTitle <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>tv_title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰¾åˆ° TextView ç»„ä»¶</span>        viewHolder<span class="token punctuation">.</span>tvContent <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>tv_content<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰¾åˆ° TextView ç»„ä»¶</span>        <span class="token comment">// å…¨éƒ¨æ‰¾é½ï¼Œä¿å­˜è¿™äº› item ä¸­çš„ç»„ä»¶ã€‚</span>        view<span class="token punctuation">.</span><span class="token function">setTag</span><span class="token punctuation">(</span>viewHolder<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// ç¬¬äºŒæ¬¡è¿›è¡Œè°ƒç”¨ï¼Œæ­¤æ—¶è¿™ä¸ªè‡ªå®šä¹‰çš„ç»„ä»¶å·²ç»æ˜¯å¡«å……è¿›å»çš„ï¼Œå°†å…¶è·å–åˆ°ã€‚æ–¹ä¾¿è®¾ç½®å€¼</span>        viewHolder <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ViewHolder</span><span class="token punctuation">)</span> view<span class="token punctuation">.</span><span class="token function">getTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// ç»™æ§ä»¶èµ‹å€¼</span>    viewHolder<span class="token punctuation">.</span>tvClock<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"2021-1-28"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    viewHolder<span class="token punctuation">.</span>tvTitle<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"Helloï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    viewHolder<span class="token punctuation">.</span>tvContent<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"æˆ‘æ˜¯å¯çˆ±çš„ç¥¢è±†å­ n(*â‰§â–½â‰¦*)n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ·»åŠ ç½‘ç»œå›¾ç‰‡</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">%</span><span class="token number">2</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token class-name">Glide</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"http://www.topacg.com/wp-content/uploads"</span> <span class="token operator">+</span>            <span class="token string">"/2020/03/frc-11c619718c036bf579c246cdd07e6d77.jpeg"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span>viewHolder<span class="token punctuation">.</span>imageView<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>        <span class="token class-name">Glide</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl."</span> <span class="token operator">+</span>                <span class="token string">"duitang.com%2Fuploads%2Fitem%2F201912%2F10%2F20191210915"</span> <span class="token operator">+</span>                <span class="token string">"02_8PjP3.thumb.700_0.jpeg&amp;refer=http%3A%2F%2Fc-ssl.duitang."</span> <span class="token operator">+</span>                <span class="token string">"com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span>viewHolder<span class="token punctuation">.</span>imageView<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"id="</span><span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> view<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h4 id="å®Œæ•´ä»£ç å¦‚ä¸‹"><a href="#å®Œæ•´ä»£ç å¦‚ä¸‹" class="headerlink" title="å®Œæ•´ä»£ç å¦‚ä¸‹"></a>å®Œæ•´ä»£ç å¦‚ä¸‹</h4><p>ä»¥ä¸‹ä»£ç ç”¨åˆ°äº†æ„é€ æ–¹æ³•ï¼Œç”¨äºåœ¨åˆ›å»ºè¯¥ Adapter å¯¹è±¡æ—¶ï¼Œå°†å½“å‰çš„ ListViewActivity ç»™ä¼ å…¥è¿›å»ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout<span class="token punctuation">.</span>listview</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span><span class="token class-name">Context</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Log</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">LayoutInflater</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">View</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">ViewGroup</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">BaseAdapter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">ImageView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">TextView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>bumptech<span class="token punctuation">.</span>glide<span class="token punctuation">.</span></span><span class="token class-name">Glide</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout<span class="token punctuation">.</span></span><span class="token class-name">R</span><span class="token punctuation">;</span><span class="token comment">/** * Created by BestGuo on 2021/1/28. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyListAdapter</span> <span class="token keyword">extends</span> <span class="token class-name">BaseAdapter</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ä¼ å…¥çš„ Activityï¼Œä¹Ÿå°±æ˜¯ ListItemActivity</span>    <span class="token keyword">private</span> <span class="token class-name">Context</span> context<span class="token punctuation">;</span>    <span class="token comment">// è·å–è‡ªå·±è®¾ç½®çš„å¸ƒå±€</span>    <span class="token keyword">private</span> <span class="token class-name">LayoutInflater</span> layoutInflater<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">MyListAdapter</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>layoutInflater <span class="token operator">=</span> <span class="token class-name">LayoutInflater</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * åˆ—è¡¨çš„é•¿åº¦æ˜¯å¤šå°‘     * @return æ•´å‹     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token number">15</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// é€šè¿‡ç´¢å¼•è·å–å†…å®¹ï¼Œä½†æ˜¯æˆ‘ä»¬ç›®å‰æ²¡æœ‰å†…å®¹ï¼Œå› æ­¤å…ˆæ”¾ä¸€ä¸‹</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getItem</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// è·å–idï¼Œå…·ä½“æ˜¯ä»€ä¹ˆæ ·çš„idè¿˜éœ€è¦çœ‹ä»€ä¹ˆåœºæ™¯</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">getItemId</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// è‡ªå®šä¹‰çš„å†…éƒ¨ç±»ï¼Œç”¨å®ƒæ¥å°† layout_list_item ä¸­çš„ç»„ä»¶å°†å…¶ä¿å­˜èµ·æ¥</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ViewHolder</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ImageView</span> imageView<span class="token punctuation">;</span>        <span class="token class-name">TextView</span> tvClock<span class="token punctuation">,</span> tvContent<span class="token punctuation">,</span> tvTitle<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * åˆ—è¡¨ä¸­çš„æ ·å¼æ¯ä¸€é¡¹çš„è®¾ç½®     *     * @param i æ¯ä¸€ä¸ª item ä¸­çš„ç¬¬å‡ é¡¹     * @param view å¯¹åº”çš„ item å¸ƒå±€     * @param viewGroup ä¸çŸ¥é“ï¼Œåˆ°æ—¶å€™ç”¨åˆ°åœ¨ä»‹ç»     * @return     */</span>    <span class="token keyword">public</span> <span class="token class-name">View</span> <span class="token function">getView</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token class-name">View</span> view<span class="token punctuation">,</span> <span class="token class-name">ViewGroup</span> viewGroup<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ViewHolder</span> viewHolder<span class="token punctuation">;</span>        <span class="token comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨ getView æ–¹æ³•æ—¶ã€‚é¦–å…ˆè¿™ä¸ªè‡ªå®šä¹‰çš„ç»„ä»¶è‚¯å®šæ˜¯æ²¡æœ‰è¿›è¡Œå¡«å……è¿›å»ã€‚</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>view <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token comment">// å¼€å§‹æ‰©å……â€œåº§ä½â€ï¼Œå¹¶å°† layout_list_item ä¿å­˜åˆ°å˜é‡ä¸­ã€‚</span>            view <span class="token operator">=</span> layoutInflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>layout_list_item<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„å¯¹è±¡ï¼Œå°†æ‰¾åˆ°çš„ç»„ä»¶æ”¾åˆ°å¯¹è±¡ä¸­</span>            viewHolder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ViewHolder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            viewHolder<span class="token punctuation">.</span>imageView <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>iv<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰¾åˆ° ImageView ç»„ä»¶</span>            viewHolder<span class="token punctuation">.</span>tvClock <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>tv_time<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰¾åˆ° TextView ç»„ä»¶</span>            viewHolder<span class="token punctuation">.</span>tvTitle <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>tv_title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰¾åˆ° TextView ç»„ä»¶</span>            viewHolder<span class="token punctuation">.</span>tvContent <span class="token operator">=</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>tv_content<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰¾åˆ° TextView ç»„ä»¶</span>            <span class="token comment">// å…¨éƒ¨æ‰¾é½ï¼Œä¿å­˜è¿™äº› item ä¸­çš„ç»„ä»¶ã€‚</span>            view<span class="token punctuation">.</span><span class="token function">setTag</span><span class="token punctuation">(</span>viewHolder<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// ç¬¬äºŒæ¬¡è¿›è¡Œè°ƒç”¨ï¼Œæ­¤æ—¶è¿™ä¸ªè‡ªå®šä¹‰çš„ç»„ä»¶å·²ç»æ˜¯å¡«å……è¿›å»çš„ï¼Œå°†å…¶è·å–åˆ°ã€‚æ–¹ä¾¿è®¾ç½®å€¼</span>            viewHolder <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ViewHolder</span><span class="token punctuation">)</span> view<span class="token punctuation">.</span><span class="token function">getTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// ç»™æ§ä»¶èµ‹å€¼</span>        viewHolder<span class="token punctuation">.</span>tvClock<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"2021-1-28"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        viewHolder<span class="token punctuation">.</span>tvTitle<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"Helloï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        viewHolder<span class="token punctuation">.</span>tvContent<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"æˆ‘æ˜¯å¯çˆ±çš„ç¥¢è±†å­ n(*â‰§â–½â‰¦*)n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ·»åŠ ç½‘ç»œå›¾ç‰‡</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">%</span><span class="token number">2</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>            <span class="token class-name">Glide</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"http://www.topacg.com/wp-content/uploads"</span> <span class="token operator">+</span>                <span class="token string">"/2020/03/frc-11c619718c036bf579c246cdd07e6d77.jpeg"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span>viewHolder<span class="token punctuation">.</span>imageView<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">else</span>            <span class="token class-name">Glide</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl."</span> <span class="token operator">+</span>                    <span class="token string">"duitang.com%2Fuploads%2Fitem%2F201912%2F10%2F20191210915"</span> <span class="token operator">+</span>                    <span class="token string">"02_8PjP3.thumb.700_0.jpeg&amp;refer=http%3A%2F%2Fc-ssl.duitang."</span> <span class="token operator">+</span>                    <span class="token string">"com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span>viewHolder<span class="token punctuation">.</span>imageView<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"id="</span><span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> view<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>ListViewActivity.java æ–‡ä»¶</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout<span class="token punctuation">.</span>listview</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">Activity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Nullable</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">View</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">AdapterView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">ListView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">Toast</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout<span class="token punctuation">.</span></span><span class="token class-name">R</span><span class="token punctuation">;</span><span class="token comment">/** * Created by BestGuo on 2021/1/28. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ListViewActivity</span> <span class="token keyword">extends</span> <span class="token class-name">Activity</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">ListView</span> listView<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_list_view<span class="token punctuation">)</span><span class="token punctuation">;</span>        listView <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>list_view<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è®¾ç½®ä¸€ä¸ªé€‚é…å™¨</span>        listView<span class="token punctuation">.</span><span class="token function">setAdapter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyListAdapter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="è¿è¡Œæ•ˆæœ"><a href="#è¿è¡Œæ•ˆæœ" class="headerlink" title="è¿è¡Œæ•ˆæœ"></a>è¿è¡Œæ•ˆæœ</h3><p>è¿è¡Œæ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/listview/c7fud-lxf03.gif" loading="lazy"></p><p><del>åˆ«å†™äº†ï¼Œå†å†™åˆ°æˆ‘è„‘é˜”éƒ½æ™•å’¯ğŸ™„ğŸ™„ğŸ™„</del></p><h2 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h2><p>äº‹ä»¶è¿™ä¸€éƒ¨åˆ†è¿˜æ˜¯è¾ƒä¸ºç®€å•ï¼ŒListView å…±æœ‰ä¸¤ç§å¸¸ç”¨çš„äº‹ä»¶ï¼Œåˆ†åˆ«æ˜¯ <code>setOnItemClickListener</code> å’Œ <code>setOnItemLongClickListener</code> ä¸¤ä¸ªæ–¹æ³•ã€‚ä¸€ä¸ªæ˜¯æ‰‹æŒ‡çŸ­æŒ‰çš„äº‹ä»¶ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯é•¿æŒ‰çš„äº‹ä»¶ã€‚</p><p>æ¡ˆä¾‹å¦‚ä¸‹</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout<span class="token punctuation">.</span>listview</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">Activity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Nullable</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">View</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">AdapterView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">ListView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">Toast</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout<span class="token punctuation">.</span></span><span class="token class-name">R</span><span class="token punctuation">;</span><span class="token comment">/** * Created by BestGuo on 2021/1/28. */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ListViewActivity</span> <span class="token keyword">extends</span> <span class="token class-name">Activity</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">ListView</span> listView<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_list_view<span class="token punctuation">)</span><span class="token punctuation">;</span>        listView <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>list_view<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è®¾ç½®ä¸€ä¸ªé€‚é…å™¨</span>        listView<span class="token punctuation">.</span><span class="token function">setAdapter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyListAdapter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è®¾ç½®ç‚¹å‡»æŸä¸€é¡¹çš„ç›‘å¬äº‹ä»¶</span>        listView<span class="token punctuation">.</span><span class="token function">setOnItemClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AdapterView<span class="token punctuation">.</span>OnItemClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onItemClick</span><span class="token punctuation">(</span><span class="token class-name">AdapterView</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> adapterView<span class="token punctuation">,</span> <span class="token class-name">View</span> view<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">long</span> l<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">ListViewActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"ç‚¹å‡»çš„æ˜¯ç¬¬"</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">"é¡¹ï¼"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è®¾ç½®ç‚¹å‡»æŸä¸€é¡¹é•¿æŒ‰çš„ç›‘å¬äº‹ä»¶</span>        listView<span class="token punctuation">.</span><span class="token function">setOnItemLongClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AdapterView<span class="token punctuation">.</span>OnItemLongClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">onItemLongClick</span><span class="token punctuation">(</span><span class="token class-name">AdapterView</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> adapterView<span class="token punctuation">,</span> <span class="token class-name">View</span> view<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">long</span> l<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">ListViewActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"é•¿æŒ‰çš„æ˜¯ç¬¬"</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">"é¡¹ï¼"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿è¡Œæ•ˆæœ</p><p><img src="/images/Android/listview/npxzw-zrkgv.gif" loading="lazy"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ€»ç®—æ˜¯å§è¿™æ ¹éª¨å¤´ç»™å•ƒäº†ï¼Œå¯ä»¥å¥½å¥½çš„ä¼‘æ¯ä¸€ä¸‹äº†ï¼Œç°åœ¨å·²ç»å‡Œæ™¨1ç‚¹å¤šäº†ã€‚</p><p>ä¹‹åçš„ç½‘æ ¼å¸ƒå±€ï¼Œæˆ‘æ„Ÿè§‰å…¶å®éƒ½å·®ä¸å¤šï¼Œåé¢çš„å°±å¥½ä¸€äº›å§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android å…¥é—¨ç¯‡ä¹‹ RadioButton ç»„ä»¶çš„ä½¿ç”¨</title>
      <link href="/journal/radiobutton-component/"/>
      <url>/journal/radiobutton-component/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æˆ‘æƒ³è¦è¯´"><a href="#æˆ‘æƒ³è¦è¯´" class="headerlink" title="æˆ‘æƒ³è¦è¯´"></a>æˆ‘æƒ³è¦è¯´</h2><p>ä»Šå¤©ï¼Œå­¦ä¹ äº† RadioButton ç»„ä»¶ã€‚ä»¥åŠ RadioGroup ç»„ä»¶çš„å®ç°å•é€‰åŠŸèƒ½</p><p>ä»¥åŠè‡ªå®šä¹‰çš„å•é€‰æ ·å¼ã€‚</p><p>è¿˜æœ‰ä½¿ç”¨ setOnCheckedChangeListener ç”¨æ¥ç›‘å¬å“ªä¸ªå•é€‰æŒ‰é’®æ˜¯è¢«é€‰ä¸­çš„ã€‚</p><span id="more"></span><h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><h3 id="ç®€å•çš„å•é€‰æŒ‰é’®"><a href="#ç®€å•çš„å•é€‰æŒ‰é’®" class="headerlink" title="ç®€å•çš„å•é€‰æŒ‰é’®"></a>ç®€å•çš„å•é€‰æŒ‰é’®</h3><p>å•é€‰æŒ‰é’®çš„åˆ›å»ºéå¸¸ç®€å•ï¼Œä½¿ç”¨ RadioButton ç»„ä»¶å³å¯ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.RadioButtonActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RadioButton</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/rb1<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç”·<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#ff6600<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹<br><img src="/images/Android/radio/frt72-kgt05.gif" loading="lazy"></p><h3 id="ä½¿ç”¨æŒ‰é’®ç»„"><a href="#ä½¿ç”¨æŒ‰é’®ç»„" class="headerlink" title="ä½¿ç”¨æŒ‰é’®ç»„"></a>ä½¿ç”¨æŒ‰é’®ç»„</h3><p>ç”±äºå•é€‰æŒ‰é’®æ˜¯æœ‰å¤šä¸ªï¼Œéœ€è¦å°†è¿™äº›å•é€‰æŒ‰é’®æ”¾åˆ°ä¸€ä¸ªå•é€‰æŒ‰é’®ç»„ RadioGroup ï¼Œæ¥å®ç°å•é€‰çš„æ•ˆæœã€‚</p><p>å•é€‰æŒ‰é’®ç»„ä¸­ï¼Œæœ‰è®¾ç½®æŒ‰é’®çš„æ‘†æ”¾é¡ºåºçš„å±æ€§ã€‚å³ <code>orientation</code> å±æ€§ï¼Œæœ‰ä¸¤ä¸ªå€¼ <code>horizontal</code> å’Œ <code>vertical</code></p><p>ä»¥ä¸‹å®ä¾‹ä¸­è®¾ç½®çš„æ˜¯æ°´å¹³æ‘†æ”¾ï¼Œå•é€‰æŒ‰é’®ç»„é»˜è®¤è®¾ç½®çš„æ˜¯ç«–ç›´çš„æ‘†æ”¾æ–¹å¼ã€‚</p><p>å½“ç„¶ï¼Œåœ¨æŒ‰é’®ç»„ä¸­ï¼Œå¯ä»¥è®¾ç½®å…¶ä¸­çš„ä¸€ä¸ªæŒ‰é’®æ˜¯å¦å·²ç»é€‰ä¸­ï¼Œé€‰ä¸­çš„å±æ€§ä¸º <code>checked</code> ï¼Œ<code>true</code>ä¸ºé€‰ä¸­ï¼Œ<code>false</code> ä¸ºæœªé€‰ä¸­ã€‚</p><p>ä¹Ÿå¯ä»¥å†³å®šç¦ç”¨è¯¥æŒ‰é’®ï¼Œé€šè¿‡è®¾ç½® <code>enable</code> å±æ€§æ¥è®¾ç½®è¯¥æŒ‰é’®æ˜¯å¦èƒ½é€‰ï¼Œ<code>true</code> ä¸ºå¯é€‰ï¼Œ<code>false</code> ä¸ºä¸å¯é€‰ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.RadioButtonActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RadioGroup</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/rg1<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>horizontal<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- è®¾ç½®é€‰ä¸­ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RadioButton</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/rb1<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç”·<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#ff6600<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RadioButton</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/rb2<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å¥³<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#ff6600<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RadioGroup</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/radio/v9z67-tcaba.gif" loading="lazy"></p><h3 id="è‡ªå®šä¹‰å•é€‰æ ·å¼"><a href="#è‡ªå®šä¹‰å•é€‰æ ·å¼" class="headerlink" title="è‡ªå®šä¹‰å•é€‰æ ·å¼"></a>è‡ªå®šä¹‰å•é€‰æ ·å¼</h3><p>å’Œå‰é¢è®¾ç½®æŒ‰é’®ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰å±äºè‡ªå·±çš„å•é€‰æŒ‰é’®æ•ˆæœã€‚</p><p>åœ¨è‡ªå®šä¹‰å•é€‰æŒ‰é’®æ•ˆæœæ—¶ï¼Œå¯ä»¥è€ƒè™‘å°†é»˜è®¤çš„å•é€‰æŒ‰é’®çš„åœ†åœˆç»™å»é™¤ã€‚å»é™¤çš„å±æ€§ä¸º <code>button="@null"</code> è¿™æ ·æ ·å¼å°±ä¸ä¼šå±•ç¤ºå‡ºæ¥ã€‚</p><p>radio_button.xml æ–‡ä»¶æ ·å¼ä»£ç </p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selector</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span> <span class="token attr-name"><span class="token namespace">android:</span>state_checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shape</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>solid</span> <span class="token attr-name"><span class="token namespace">android:</span>color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#a60<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>corners</span> <span class="token attr-name"><span class="token namespace">android:</span>radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shape</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span> <span class="token attr-name"><span class="token namespace">android:</span>state_checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shape</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>stroke</span>                <span class="token attr-name"><span class="token namespace">android:</span>color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#a60<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>corners</span>                <span class="token attr-name"><span class="token namespace">android:</span>radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shape</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selector</span><span class="token punctuation">></span></span></code></pre><p>ä»¥ä¸Šçš„æ ·å¼ä»£ç ï¼Œç”±äºæ˜¯å¦é€‰ä¸­ã€‚æ‰€ä»¥ item ä¸­çš„åˆ¤æ–­è§„åˆ™ä¸º <code>state_checked</code></p><p>è‡ªå®šä¹‰å•é€‰æ¡†çš„ä»£ç </p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.RadioButtonActivity<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RadioGroup</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>40dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>horizontal<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RadioButton</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/rb3<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>40dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/radio_button<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç”·<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>button</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@null<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textAlignment</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RadioButton</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/rb4<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>40dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/radio_button<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å¥³<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>button</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@null<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textAlignment</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_marginLeft</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RadioGroup</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/radio/5tckx-gex7o.gif" loading="lazy"></p><h2 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h2><p>æŒ‰é’®å’ŒæŒ‰é’®ç»„éƒ½æœ‰å•ç‹¬çš„äº‹ä»¶ã€‚ä¸ºäº†ç›‘å¬å“ªä¸ªæŒ‰é’®è¢«é€‰ä¸­ï¼Œé‚£ä¹ˆéœ€è¦ç›‘å¬æŒ‰é’®ç»„ï¼Œæ¥ç›‘å¬æ˜¯å“ªä¸ªæŒ‰é’®è¢«é€‰ä¸­çš„çŠ¶æ€ã€‚</p><p>é€šè¿‡ setOnCheckedChangeListener è¿™ä¸ªæ–¹æ³•æ¥ç›‘å¬å“ªä¸ªè¢«é€‰ä¸­ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">IdRes</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">AppCompatActivity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">RadioButton</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">RadioGroup</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">Toast</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RadioButtonActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">RadioGroup</span> rg1<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_radio_button<span class="token punctuation">)</span><span class="token punctuation">;</span>        rg1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">RadioGroup</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>rg1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è®¾ç½® setOnCheckedChangeListener ç›‘å¬äº‹ä»¶</span>        rg1<span class="token punctuation">.</span><span class="token function">setOnCheckedChangeListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RadioGroup<span class="token punctuation">.</span>OnCheckedChangeListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCheckedChanged</span><span class="token punctuation">(</span><span class="token class-name">RadioGroup</span> radioGroup<span class="token punctuation">,</span> <span class="token annotation punctuation">@IdRes</span> <span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// è·å–æŸä¸ªå•é€‰æŒ‰é’®çš„ id ï¼Œå°±åƒæ˜¯ä¹‹å‰é€šè¿‡ id æ¥è·å–æŒ‰é’®ã€æ–‡æœ¬æ¡†ç­‰ç»„ä»¶æ—¶ä¸€æ ·çš„</span>                <span class="token comment">// åªä¸è¿‡è¿™é‡Œå•é€‰æŒ‰é’®çš„ id æ˜¯é€šè¿‡å‘ç”Ÿçš„äº‹ä»¶æ¥ä¼ é€’è¿‡æ¥çš„ã€‚</span>                <span class="token class-name">RadioButton</span> radioButton <span class="token operator">=</span> radioGroup<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">RadioButtonActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"ç‚¹å‡»äº†â€œ"</span> <span class="token operator">+</span> radioButton<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"â€"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æ•ˆæœå¦‚ä¸‹<br><img src="/images/Android/radio/5wv6w-fh1x9.gif" loading="lazy"></p><p>æ•ˆæœå›¾çš„ç¬¬ä¸€ä¸ªæŒ‰é’®ç»„æ˜¯ç«–ç›´çš„åŸå› ï¼Œæ˜¯å› ä¸ºæˆ‘å°† <code>orientation</code> çš„å±æ€§åˆ é™¤äº†ï¼Œæ‰€ä»¥å°±å˜æˆé‡Œç«–ç›´çš„çŠ¶æ€ã€‚ğŸ˜ŠğŸ˜Š</p>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android å…¥é—¨ç¯‡ä¹‹ CheckBox ç»„ä»¶çš„ä½¿ç”¨</title>
      <link href="/journal/checkbox-component/"/>
      <url>/journal/checkbox-component/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æˆ‘æƒ³è¦è¯´"><a href="#æˆ‘æƒ³è¦è¯´" class="headerlink" title="æˆ‘æƒ³è¦è¯´"></a>æˆ‘æƒ³è¦è¯´</h2><p>ä»Šå¤©ï¼Œå­¦ä¹ äº† CheckBox ç»„ä»¶ã€‚ä»¥åŠ CheckBox ç»„ä»¶çš„å®ç°å¤é€‰åŠŸèƒ½</p><p>ä»¥åŠè‡ªå®šä¹‰çš„å¤é€‰æ ·å¼ã€‚</p><p>å’Œå•é€‰æ¡†ä¸åŒçš„æ˜¯ï¼Œå¤é€‰æ¡†æ˜¯ä¸éœ€è¦æŒ‰é’®ç»„çš„ã€‚å…¶å®å¤é€‰æ¡†æœ¬æ¥å°±æ˜¯å¤šé€‰çš„ã€‚ğŸ˜ŠğŸ˜Š</p><p>è¿˜æœ‰ä½¿ç”¨ setOnCheckedChangeListener ç”¨æ¥ç›‘å¬å“ªä¸ªå¤é€‰æŒ‰é’®æ˜¯è¢«é€‰ä¸­çš„ã€‚</p><span id="more"></span><h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><h3 id="ç®€å•çš„å¤é€‰æŒ‰é’®"><a href="#ç®€å•çš„å¤é€‰æŒ‰é’®" class="headerlink" title="ç®€å•çš„å¤é€‰æŒ‰é’®"></a>ç®€å•çš„å¤é€‰æŒ‰é’®</h3><p>ç®€å•çš„å¤é€‰æ¡†ç¤ºä¾‹</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.CheckBoxActivity<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ä½ å–œæ¬¢å“ªäº›ç¼–ç¨‹è¯­è¨€ï¼š<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#000<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginBottom</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CheckBox</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/cb_java<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Java<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CheckBox</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/cb_python<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Python<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CheckBox</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/cb_js<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>JavaScript<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CheckBox</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/c_plus<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>C++<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CheckBox</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/c<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>C<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/checkbox/l5tpb-jh6lh.gif" loading="lazy"></p><h3 id="è‡ªå®šä¹‰å¤é€‰æŒ‰é’®æ ·å¼"><a href="#è‡ªå®šä¹‰å¤é€‰æŒ‰é’®æ ·å¼" class="headerlink" title="è‡ªå®šä¹‰å¤é€‰æŒ‰é’®æ ·å¼"></a>è‡ªå®šä¹‰å¤é€‰æŒ‰é’®æ ·å¼</h3><p>é™¤äº† <code>background</code> å¯ä»¥è®¾ç½®å…¶å¯¹åº”çš„æ ·å¼ä¹‹å¤–ï¼Œè¿˜æœ‰ <code>button</code> å±æ€§ä¹Ÿæ˜¯å¯ä»¥ç›´æ¥è®¾ç½®å…¶æŒ‰é’®çš„æ ·å¼ã€‚</p><p>å‰é¢åœ¨è‡ªå®šä¹‰å•é€‰æ¡†çš„æ ·å¼æ˜¯ä½¿ç”¨ background ï¼Œå½“ç„¶å•é€‰æ¡†çš„å±æ€§ <code>button</code> ä¹Ÿæ˜¯å¯ä»¥ç›´æ¥è®¾ç½®çš„ã€‚å…·ä½“çœ‹æ˜¯è¦æœ‰ä»€ä¹ˆéœ€æ±‚ã€‚</p><p>è‡ªå®šä¹‰å¤é€‰æ¡†æ ·å¼ä»£ç </p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selector</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span>        <span class="token attr-name"><span class="token namespace">android:</span>state_checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>drawable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/checkbox_outline_bl<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span>        <span class="token attr-name"><span class="token namespace">android:</span>state_checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>drawable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/checkbox_outline<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selector</span><span class="token punctuation">></span></span></code></pre><p>è‡ªå®šä¹‰å¤é€‰æ¡†</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.CheckBoxActivity<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    ......    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CheckBox</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/c<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>C<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20dp<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/text<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ä½ å–œæ¬¢çœ‹çš„å¼¹å¹•ç½‘æœ‰å“ªäº›ï¼š<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#000<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CheckBox</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/acfun<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>AcFun<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>button</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/bg_checkbox<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_below</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/text<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CheckBox</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/bilibili<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Bilibili<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>button</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/bg_checkbox<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_below</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/text<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_toEndOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/acfun<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_marginStart</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CheckBox</span>            <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/niconico<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>NicoNico<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>18sp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>button</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/bg_checkbox<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_toEndOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/bilibili<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_below</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/text<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_marginStart</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/checkbox/esrx6-r0l5w.gif" loading="lazy"></p><h2 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h2><p>å’Œä¹‹å‰çš„å•é€‰æ¡†ä¸€æ ·çš„ï¼Œä¹Ÿæ˜¯é€šè¿‡ setOnCheckedChangeListener è¿™ä¸ªæ–¹æ³•æ¥ç›‘å¬å“ªä¸ªå¤é€‰æ¡†æ˜¯è¢«é€‰ä¸­çš„çŠ¶æ€ã€‚</p><p>ä»¥ä¸‹ç¤ºä¾‹ä»¥è‡ªå®šä¹‰çš„æŒ‰é’®æ ·å¼æ¥ç›‘å¬è¿™äº›äº‹ä»¶</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">AppCompatActivity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">CheckBox</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">CompoundButton</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">Toast</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CheckBoxActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">CheckBox</span> acfun<span class="token punctuation">,</span> bilibili<span class="token punctuation">,</span> niconico<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_check_box<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ†åˆ«è·å– AcFunã€bilibili å’Œ niconico çš„å¤é€‰æ¡†</span>        acfun <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">CheckBox</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>acfun<span class="token punctuation">)</span><span class="token punctuation">;</span>        bilibili <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">CheckBox</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>bilibili<span class="token punctuation">)</span><span class="token punctuation">;</span>        niconico <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">CheckBox</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>niconico<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä¸º AcFun è®¾ç½®é€‰ä¸­äº‹ä»¶</span>        acfun<span class="token punctuation">.</span><span class="token function">setOnCheckedChangeListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CompoundButton<span class="token punctuation">.</span>OnCheckedChangeListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCheckedChanged</span><span class="token punctuation">(</span><span class="token class-name">CompoundButton</span> compoundButton<span class="token punctuation">,</span> <span class="token keyword">boolean</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// é€‰ä¸­äº†å°±æç¤º"ä½ é€‰äº†AcFun" ï¼Œåé€‰å°±æç¤º"ä½ åé€‰äº†AcFun"</span>                <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">CheckBoxActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> b <span class="token operator">?</span> <span class="token string">"ä½ é€‰äº†AcFun"</span> <span class="token operator">:</span> <span class="token string">"ä½ åé€‰äº†AcFun"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä¸º bilibili è®¾ç½®ç‚¹å‡»äº‹ä»¶</span>        bilibili<span class="token punctuation">.</span><span class="token function">setOnCheckedChangeListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CompoundButton<span class="token punctuation">.</span>OnCheckedChangeListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCheckedChanged</span><span class="token punctuation">(</span><span class="token class-name">CompoundButton</span> compoundButton<span class="token punctuation">,</span> <span class="token keyword">boolean</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">CheckBoxActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> b <span class="token operator">?</span> <span class="token string">"ä½ é€‰äº†bilibili"</span> <span class="token operator">:</span> <span class="token string">"ä½ åé€‰äº†bilibili"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä¸º niconico è®¾ç½®ç‚¹å‡»äº‹ä»¶</span>        niconico<span class="token punctuation">.</span><span class="token function">setOnCheckedChangeListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CompoundButton<span class="token punctuation">.</span>OnCheckedChangeListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCheckedChanged</span><span class="token punctuation">(</span><span class="token class-name">CompoundButton</span> compoundButton<span class="token punctuation">,</span> <span class="token keyword">boolean</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">CheckBoxActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> b <span class="token operator">?</span> <span class="token string">"ä½ é€‰äº†niconico"</span> <span class="token operator">:</span> <span class="token string">"ä½ åé€‰äº†niconico"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/checkbox/kvcxf-cfrq4.gif" loading="lazy"></p><p>ä»€ä¹ˆï¼Ÿ<del>AcFunã€bilibiliã€niconico æ‰“é’±ï¼ï¼ğŸ˜‚ğŸ˜‚ğŸ˜‚</del></p>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android å…¥é—¨ç¯‡ä¹‹ EditText ç»„ä»¶çš„ä½¿ç”¨</title>
      <link href="/journal/edittext-component/"/>
      <url>/journal/edittext-component/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æˆ‘æƒ³è¦è¯´"><a href="#æˆ‘æƒ³è¦è¯´" class="headerlink" title="æˆ‘æƒ³è¦è¯´"></a>æˆ‘æƒ³è¦è¯´</h2><p>ä»Šå¤©å­¦ä¹ äº† EditTable ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯æ–‡æœ¬æ¡†ã€‚</p><p>è¿™æ¬¡ï¼Œé€šè¿‡æ–‡æœ¬æ¡†å’Œå‰é¢çš„æŒ‰é’®è¿›è¡Œç»„åˆã€‚å°±å¯ä»¥åšä¸€ä¸ªç®€å•çš„ç™»å½•ç•Œé¢äº†ã€‚</p><p>æ‰€ä»¥æœ¬æ¬¡å†™çš„å°±æ˜¯ç™»å½•ç•Œé¢ä»¥åŠè·å–ç”¨æˆ·åå’Œå¯†ç </p><span id="more"></span><h2 id="ç™»å½•æ³¨å†Œå®ä¾‹"><a href="#ç™»å½•æ³¨å†Œå®ä¾‹" class="headerlink" title="ç™»å½•æ³¨å†Œå®ä¾‹"></a>ç™»å½•æ³¨å†Œå®ä¾‹</h2><h3 id="ç•Œé¢ä»£ç éƒ¨åˆ†"><a href="#ç•Œé¢ä»£ç éƒ¨åˆ†" class="headerlink" title="ç•Œé¢ä»£ç éƒ¨åˆ†"></a>ç•Œé¢ä»£ç éƒ¨åˆ†</h3><p>ç•Œé¢ä½¿ç”¨çš„æ˜¯ RelativeLayout å¸ƒå±€ï¼Œä½†æ˜¯è¿™é‡Œä½¿ç”¨ LinearLayout å¸ƒå±€å…¶å®ä¼šæ›´åŠ çš„æ–¹ä¾¿ã€‚å› ä¸ºè¿™æ ·å¯ä»¥é¿å…è®¾ç½®â€œè°çš„ä¸‹æ–¹æ˜¯è°â€è¿™ç§æµªè´¹æ—¶é—´çš„å±æ€§ï¼Œåœ¨å®é™…è¿ç”¨ä¸­ï¼Œèƒ½ç”¨ç®€å•çš„å¸ƒå±€å°±ç”¨ç®€å•çš„å¸ƒå±€ä¸ºå¥½ã€‚</p><p>ç›¸å¯¹å¸ƒå±€ä¸­å…±æœ‰ 4 ä¸ªæ§ä»¶ï¼Œä¸€ä¸ªæ˜¯è´¦å·æ–‡æœ¬æ¡†ï¼Œä¸€ä¸ªæ˜¯å¯†ç çš„æ–‡æœ¬æ¡†ã€‚è¿˜æœ‰ä¸¤ä¸ªæŒ‰é’®ï¼Œä¸€ä¸ªç™»å½•æŒ‰é’®å’Œä¸€ä¸ªæ³¨å†Œçš„æŒ‰é’®ã€‚</p><p>å…¶ä¸­è´¦å·å’Œå¯†ç åˆ†åˆ«è®¾ç½®å’Œ Hint å±æ€§ï¼ŒHint ä¸ HTML ä¸­çš„ placeholder æ˜¯ä¸€æ ·çš„ï¼Œåˆ†åˆ«éƒ½æ˜¯ç»™ç”¨æˆ·çš„ä¸€äº›æç¤ºã€‚é™¤äº†è¿™äº›ï¼Œè¿˜ä½¿ç”¨åˆ°äº† drawableLeft å±æ€§ï¼Œè®¾ç½®äº†ç”¨æˆ·å›¾æ ‡çš„é”çš„å›¾æ ‡ï¼Œåˆ†åˆ«åœ¨ç”¨æˆ·è¾“å…¥æ¡†å’Œå¯†ç è¾“å…¥æ¡†ä¸­</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.EditTextActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- è®¾ç½®ç¬¬ä¸€ä¸ªæ–‡æœ¬æ¡†ï¼Œç±»å‹ä¸ºç”¨æˆ·å --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EditText</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/user<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>hint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>è´¦å·<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/input_text<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>drawableStart</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/user<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>drawablePadding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>7dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>maxLines</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- è®¾ç½®ä¸€ä¸ªæ–‡æœ¬æ¡†ï¼Œç±»å‹ä¸ºå¯†ç  --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EditText</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/password<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_below</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/user<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>inputType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>textPassword<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/input_text<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>hint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>å¯†ç <span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>drawablePadding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>7dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>drawableStart</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/lock<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>maxLines</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- è®¾ç½®ä¸€ä¸ªç™»å½•æŒ‰é’® --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/login<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_below</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/password<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>25dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç™»å½•<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#fff<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#6cf<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- è®¾ç½®ä¸€ä¸ªæ³¨å†ŒæŒ‰é’® --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_below</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/login<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æ³¨å†Œ<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#fff<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#6cf<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/edittext/1q7gs-26mdo.gif" loading="lazy"></p><h3 id="java-ä»£ç éƒ¨åˆ†"><a href="#java-ä»£ç éƒ¨åˆ†" class="headerlink" title="java ä»£ç éƒ¨åˆ†"></a>java ä»£ç éƒ¨åˆ†</h3><p>java ä»£ç éƒ¨åˆ†ä¸»è¦æ˜¯é€šè¿‡ addTextChangeListener è¿™ä¸ªç›‘å¬å™¨æ¥ç›‘å¬è¿™ä¸¤ä¸ªæ–‡æœ¬åŸŸä¸­å‘ç”Ÿçš„å˜åŒ–ï¼Œå°†è·å–åˆ°çš„ç”¨æˆ·åå’Œå¯†ç ä¿å­˜åˆ°å®šä¹‰çš„æˆå‘˜å˜é‡ä¸­ï¼Œç„¶åé€šè¿‡ç™»å½•æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶æ¥è·å–ç”¨æˆ·åå’Œå¯†ç ï¼Œæœ€åä½¿ç”¨ Toast æ¥å±•ç¤ºç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç ã€‚</p><blockquote><p><font color="red">æ³¨æ„ï¼šåœ¨å®é™…çš„å¼€å‘æ˜¯ï¼Œä¸èƒ½å¤Ÿè¿™æ ·ç›´æ¥å°†ç”¨æˆ·åå’Œå¯†ç ç›´æ¥å±•ç¤ºå‡ºæ¥ï¼Œè¿™å¾ˆåšéå¸¸å±é™©ã€‚å› ä¸ºè¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œç›®çš„æ˜¯å¦‚ä½•è·å–ç”¨æˆ·åå’Œå¯†ç çš„</font></p></blockquote><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">AppCompatActivity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">Editable</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">TextWatcher</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">View</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">Button</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">EditText</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">Toast</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EditTextActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// å®šä¹‰äº†ä¸€ä¸ªæŒ‰é’®</span>    <span class="token keyword">private</span> <span class="token class-name">Button</span> loginBtn<span class="token punctuation">;</span>    <span class="token comment">// å®šä¹‰äº†ä¸¤ä¸ªæ–‡æœ¬æ¡†ï¼Œä¸€ä¸ªç”¨æˆ·è¾“å…¥æ¡†ï¼Œä¸€ä¸ªå¯†ç è¾“å…¥æ¡†</span>    <span class="token keyword">private</span> <span class="token class-name">EditText</span> userEdit<span class="token punctuation">,</span> passwordEdit<span class="token punctuation">;</span>    <span class="token comment">// è®¾ç½®ç”¨æˆ·åå’Œå¯†ç ï¼Œå°†è·å–åˆ°çš„ç”¨æˆ·åå’Œå¯†ç ä¿å­˜åˆ°æˆå‘˜å˜é‡ä¸­</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> user<span class="token punctuation">,</span> password<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_edit_text<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å¾—åˆ°ç”¨æˆ·åå’Œå¯†ç çš„æ–‡æœ¬æ¡†</span>        userEdit <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">EditText</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>        passwordEdit <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">EditText</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºä¸€ä¸ªç›‘å¬å™¨ï¼Œç”¨æ¥ç›‘å¬æ–‡æœ¬æ¡†çš„å†…å®¹æ”¹å˜ã€‚</span>        <span class="token comment">// åŒæ—¶ï¼Œå°†æ”¹å˜çš„å†…å®¹ï¼Œä¿å­˜åˆ°å®šä¹‰å¥½çš„æˆå‘˜å˜é‡ä¸­ã€‚</span>        <span class="token comment">// åœ¨è¿™é‡Œé¢å¯ä»¥ç¼–å†™ç”¨æˆ·åçš„åˆ¤æ–­ï¼Œæ˜¯å¦ç¬¦åˆè§„åˆ™ç­‰ç­‰ã€‚</span>        userEdit<span class="token punctuation">.</span><span class="token function">addTextChangedListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TextWatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">beforeTextChanged</span><span class="token punctuation">(</span><span class="token class-name">CharSequence</span> charSequence<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> i1<span class="token punctuation">,</span> <span class="token keyword">int</span> i2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token punctuation">&#125;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onTextChanged</span><span class="token punctuation">(</span><span class="token class-name">CharSequence</span> charSequence<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> i1<span class="token punctuation">,</span> <span class="token keyword">int</span> i2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                user <span class="token operator">=</span> charSequence<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterTextChanged</span><span class="token punctuation">(</span><span class="token class-name">Editable</span> editable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ•ˆæœå’Œä¸Šé¢ä¸€æ ·çš„</span>        passwordEdit<span class="token punctuation">.</span><span class="token function">addTextChangedListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TextWatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">beforeTextChanged</span><span class="token punctuation">(</span><span class="token class-name">CharSequence</span> charSequence<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> i1<span class="token punctuation">,</span> <span class="token keyword">int</span> i2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token punctuation">&#125;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onTextChanged</span><span class="token punctuation">(</span><span class="token class-name">CharSequence</span> charSequence<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> i1<span class="token punctuation">,</span> <span class="token keyword">int</span> i2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                password <span class="token operator">=</span> charSequence<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterTextChanged</span><span class="token punctuation">(</span><span class="token class-name">Editable</span> editable<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å¾—åˆ°ç™»å½•æŒ‰é’®</span>        loginBtn <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Button</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>login<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é€šè¿‡ç‚¹å‡»äº‹ä»¶è·å–ç”¨æˆ·åå’Œå¯†ç </span>        loginBtn<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> view<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// å°†ç”¨æˆ·åå’Œå¯†ç é€šè¿‡æç¤ºæ¡†æ¥å±•ç¤º</span>                <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">EditTextActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"ç”¨æˆ·åä¸ºï¼š"</span> <span class="token operator">+</span> user <span class="token operator">+</span> <span class="token string">"ï¼Œå¯†ç ä¸ºï¼š"</span> <span class="token operator">+</span> password<span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/edittext/aplku-fuxmt.gif" loading="lazy"></p><p>è‡³äºä¸ºä»€ä¹ˆåœ¨è¾“å…¥å¯†ç çš„æ—¶å€™ä¼šé»‘å±ï¼Œè¿™è‚¯å®šæ˜¯åä¸ºçš„å®‰å…¨æœºåˆ¶ã€‚å½•å±è¿‡ç¨‹ä¸­ï¼Œä¸èƒ½è®©åˆ«äººçŸ¥é“å¯†ç æ˜¯å¤šå°‘ã€‚è¿™ä¸€ç‚¹ï¼Œåä¸ºå¾ˆèµï¼</p>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android å…¥é—¨ç¯‡ä¹‹ Button ç»„ä»¶çš„ä½¿ç”¨</title>
      <link href="/journal/Button-component/"/>
      <url>/journal/Button-component/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æˆ‘æƒ³è¦è¯´"><a href="#æˆ‘æƒ³è¦è¯´" class="headerlink" title="æˆ‘æƒ³è¦è¯´"></a>æˆ‘æƒ³è¦è¯´</h2><p>ä»Šå¤©å­¦ä¹ äº† Button ç»„ä»¶çš„ä½¿ç”¨ï¼Œè¿˜æœ‰å¦‚ä½•è‡ªå®šä¹‰æŒ‰é’®æ ·å¼ã€‚<br>è¿˜å­¦ä¹ äº†ç‚¹å‡»äº‹ä»¶ã€‚<br>è¿˜å­¦ä¹ äº† Toast æç¤ºæ¡†ã€‚</p><p>åŒæ—¶ä¹Ÿç»“åˆäº†å‰é¢çš„ç›¸å¯¹å¸ƒå±€ç³»ç»Ÿã€‚ç»¼åˆæ€§ç¨å¾®å¼ºä¸€äº›ï¼Œä½†æ˜¯ä¹Ÿä¸ä¼šå¤ªéš¾ã€‚</p><p>FIFA ä¸å¤šè¯´ï¼Œä¸Šç¤ºä¾‹ã€‚</p><span id="more"></span><h2 id="Button-ç¤ºä¾‹"><a href="#Button-ç¤ºä¾‹" class="headerlink" title="Button ç¤ºä¾‹"></a>Button ç¤ºä¾‹</h2><h3 id="ç®€å•çš„-Button"><a href="#ç®€å•çš„-Button" class="headerlink" title="ç®€å•çš„ Button"></a>ç®€å•çš„ Button</h3><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.ButtonActivity<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/btn1<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>40dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æŒ‰é’®1<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#fff<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#f00<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/images/Android/button/QQ%E6%88%AA%E5%9B%BE20210125171412.jpg" loading="lazy"></p><p>è¯¥ç¤ºä¾‹è®¾ç½®äº†ä¸€ä¸ª Buttonï¼ŒæŒ‰é’®çš„åå­—ä¸ºâ€œæŒ‰é’®1â€ï¼Œå®½åº¦å’Œçˆ¶å®½åº¦ä¸€æ ·ï¼Œé«˜åº¦ä¸º 40dpï¼Œå­—ä½“å¤§å°ä¸º 20spï¼ŒèƒŒæ™¯é¢œè‰²ä¸º#f00ï¼Œæ–‡å­—é¢œè‰²ä¸º #fff</p><h3 id="å¸¦åœ†è§’å’Œé€æ˜çš„-Button"><a href="#å¸¦åœ†è§’å’Œé€æ˜çš„-Button" class="headerlink" title="å¸¦åœ†è§’å’Œé€æ˜çš„ Button"></a>å¸¦åœ†è§’å’Œé€æ˜çš„ Button</h3><p>è®¾ç½®å¸¦åœ†è§’çš„ Buttonï¼Œæ— æ³•åœ¨ Button å±æ€§ä¸­ç›´æ¥è®¾ç½®åœ†è§’ã€‚éœ€è¦æ–°å»ºä¸€ä¸ª Drawable çš„ xml æ–‡ä»¶æ¥å®ç°åœ†è§’æŒ‰é’®ã€‚</p><p>è®¾ç½®çš„åœ†è§’éœ€è¦åœ¨ res æ–‡ä»¶å¤¹çš„ drawable æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª xml ç”¨æ¥æ ‡è¯†åœ†è§’çš„ã€‚</p><p>è®¾ç½®åœ†è§’çš„ drawable ä»£ç ï¼Œå¯¹åº”çš„æ–‡ä»¶ä¸º bg_btn2.xml</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shape</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>shape</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rectangle<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- è®¾ç½®å®å¿ƒé¢œè‰² --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>solid</span>        <span class="token attr-name"><span class="token namespace">android:</span>color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#f90<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- è®¾ç½®åœ†è§’ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>corners</span>        <span class="token attr-name"><span class="token namespace">android:</span>radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shape</span><span class="token punctuation">></span></span></code></pre><p>è®¾ç½®é€æ˜çš„ drawableï¼Œå¯¹åº”æ–‡ä»¶ä¸º bg_btn3.xml</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shape</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>shape</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rectangle<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- è®¾ç½®è¾¹ä¸ºå®çº¿çš„è¾¹ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>stroke</span>        <span class="token attr-name"><span class="token namespace">android:</span>width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#f90<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- è®¾ç½®åœ†è§’ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>corners</span>        <span class="token attr-name"><span class="token namespace">android:</span>radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shape</span><span class="token punctuation">></span></span></code></pre><blockquote><p>åœ¨è¿™ä¸ª shape æ ‡ç­¾å¯¹ä¸­ï¼Œå¯ä»¥è®¾ç½® 6 ä¸ªå­æ ‡ç­¾ã€‚åˆ†åˆ«æ˜¯ sizeã€cornersã€gradientã€paddingã€solidã€strokeã€‚</p><p>ç›®å‰åœ¨è¿™é‡Œä½¿ç”¨äº†ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ solidï¼Œå¦å¤–ä¸€ä¸ªæ˜¯ cornersã€‚æœªæ¥è¦æ˜¯ç”¨åˆ°äº†ï¼Œå°±å†è¯´å§ã€‚</p></blockquote><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- è®¾ç½®åœ†è§’æŒ‰é’® --></span><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.ButtonActivity<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/btn2<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>40dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æŒ‰é’®2<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#fff<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/bg_btn2<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_below</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/btn1<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/btn3<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>40dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æŒ‰é’®3<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#f90<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/bg_btn3<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_below</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/btn2<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/button/QQ%E6%88%AA%E5%9B%BE20210125173611.jpg" loading="lazy"></p><h3 id="æ”¹å˜çš„æŒ‰é’®æ ·å¼"><a href="#æ”¹å˜çš„æŒ‰é’®æ ·å¼" class="headerlink" title="æ”¹å˜çš„æŒ‰é’®æ ·å¼"></a>æ”¹å˜çš„æŒ‰é’®æ ·å¼</h3><p>æœ¬å®ä¾‹æ˜¯é€šè¿‡æ‰‹æŒ‡ç‚¹å‡»æŒ‰é’®ï¼Œç„¶åæŒ‰é’®çš„é¢œè‰²å‘ç”Ÿäº†å˜åŒ–ã€‚æŒ‰é’®çš„é¢œè‰²çš„å˜åŒ–ä¹Ÿæ˜¯éœ€è¦æ–°å»ºä¸€ä¸ª Drawable çš„ xml æ–‡ä»¶æ¥å®ç°ã€‚</p><p>è®¾ç½®åœ†è§’çš„ drawable ä»£ç ï¼Œå¯¹åº”çš„æ–‡ä»¶ä¸º bg_btn4.xml</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selector</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- ä½¿ç”¨selectoræ¥æ”¹å˜å…¶å…ƒç´ çš„çŠ¶æ€ --></span>    <span class="token comment">&lt;!-- æŒ‰ä¸‹å»çš„çŠ¶æ€ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span> <span class="token attr-name"><span class="token namespace">android:</span>state_pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shape</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>solid</span> <span class="token attr-name"><span class="token namespace">android:</span>color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#a60<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>corners</span> <span class="token attr-name"><span class="token namespace">android:</span>radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shape</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- æœªæŒ‰ä¸‹çš„çŠ¶æ€ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span> <span class="token attr-name"><span class="token namespace">android:</span>state_pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shape</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>solid</span> <span class="token attr-name"><span class="token namespace">android:</span>color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#f90<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>corners</span> <span class="token attr-name"><span class="token namespace">android:</span>radius</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shape</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selector</span><span class="token punctuation">></span></span></code></pre><p>æŒ‰é’® 4 çš„ xml ä»£ç </p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.ButtonActivity<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/btn4<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>40dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æŒ‰é’®4<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#fff<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/bg_btn4<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_below</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/btn3<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/button/y1vao-k2m0e.gif" loading="lazy"></p><h2 id="æŒ‰é’®ç‚¹å‡»äº‹ä»¶"><a href="#æŒ‰é’®ç‚¹å‡»äº‹ä»¶" class="headerlink" title="æŒ‰é’®ç‚¹å‡»äº‹ä»¶"></a>æŒ‰é’®ç‚¹å‡»äº‹ä»¶</h2><p>è¯¥å®ä¾‹å±•ç¤ºäº†ï¼Œç‚¹å‡»æŒ‰é’®æ—¶å‡ºç°æç¤ºæ¡†ã€‚</p><p>è®¾ç½®ç‚¹å‡»äº‹ä»¶å…±æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯åœ¨ xml æ–‡ä»¶ä¸­ï¼Œç›´æ¥ä½¿ç”¨ onClick æ–¹æ³•æ¥è°ƒç”¨ java ä»£ç ä¸­æ‰€å¯¹åº”çš„ä»£ç ã€‚<br>å¦å¤–ä¸€ç§æ–¹æ³•å°±æ˜¯åœ¨ java ä»£ç ä¸­è®¾ç½® setOnClickListenerã€‚</p><h3 id="ä½¿ç”¨-xml-çš„æ–¹å¼"><a href="#ä½¿ç”¨-xml-çš„æ–¹å¼" class="headerlink" title="ä½¿ç”¨ xml çš„æ–¹å¼"></a>ä½¿ç”¨ xml çš„æ–¹å¼</h3><p>ä½¿ç”¨ xml çš„å®ä¾‹æ˜¯åœ¨â€œæŒ‰é’®4â€ä¸­è¿›è¡Œè®¾ç½®çš„</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.ButtonActivity<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/btn4<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>40dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æŒ‰é’®4<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#fff<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/bg_btn4<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_below</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/btn3<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>onClick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>showToast<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">></span></span></code></pre><p>java ä»£ç ä¸­çš„æ–¹æ³•</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">AppCompatActivity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">View</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">Toast</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ButtonActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_button<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// è®¾ç½®çš„äº‹ä»¶æ–¹æ³•ï¼Œå¿…é¡»è¦å¸¦ä¸€ä¸ªå‚æ•° Viewï¼Œå¦åˆ™ç¨‹åºæŠ¥é”™</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showToast</span><span class="token punctuation">(</span><span class="token class-name">View</span> view<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// æ¶ˆæ¯æç¤ºæ¡†</span>        <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"BestGuo, å“äº†ä½ ä¸€è·³å“¦ï¼Œå¹¶æç¤ºbtn4è¢«ç‚¹å‡»äº†"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è®¾ç½®çš„äº‹ä»¶æ–¹æ³•ï¼Œå¿…é¡»è¦å¸¦ä¸€ä¸ªå‚æ•° Viewï¼Œå¦åˆ™ç¨‹åºå°†é—ªé€€ã€æŠ¥é”™ã€‚</p><h3 id="ä½¿ç”¨-java-ä»£ç çš„æ–¹å¼"><a href="#ä½¿ç”¨-java-ä»£ç çš„æ–¹å¼" class="headerlink" title="ä½¿ç”¨ java ä»£ç çš„æ–¹å¼"></a>ä½¿ç”¨ java ä»£ç çš„æ–¹å¼</h3><p>ä½¿ç”¨ java ä»£ç çš„å®ä¾‹æ˜¯åœ¨â€œæŒ‰é’®3â€ä¸­è¿›è¡Œè®¾ç½®çš„</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.ButtonActivity<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/btn3<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>40dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æŒ‰é’®3<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#f90<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/bg_btn3<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_below</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/btn2<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">></span></span></code></pre><p>java ä»£ç ä¸­ç›¸å…³è®¾ç½®</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">AppCompatActivity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">View</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">Button</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">TextView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">Toast</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ButtonActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Button</span> btn3<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_button<span class="token punctuation">)</span><span class="token punctuation">;</span>        btn3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Button</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn3<span class="token punctuation">)</span><span class="token punctuation">;</span>        btn3<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> view<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">ButtonActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"btn3è¢«ç‚¹å‡»äº†"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// TextView çš„ç‚¹å‡»äº‹ä»¶</span>        tv <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TextView</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>tv1<span class="token punctuation">)</span><span class="token punctuation">;</span>        tv<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> view<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">ButtonActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"TextViewè¢«ç‚¹å‡»äº†"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="ç‚¹å‡»äº‹ä»¶æ‹“å±•"><a href="#ç‚¹å‡»äº‹ä»¶æ‹“å±•" class="headerlink" title="ç‚¹å‡»äº‹ä»¶æ‹“å±•"></a>ç‚¹å‡»äº‹ä»¶æ‹“å±•</h3><p>é™¤äº†ç‚¹å‡»äº‹ä»¶å¯ä»¥åœ¨æŒ‰é’®ä¸Šæœ‰ï¼Œåœ¨å…¶å®ƒç»„ä»¶ä¸Šï¼Œç”šè‡³æ˜¯å„ç§å¸ƒå±€ç³»ç»Ÿéƒ½æœ‰è‡ªå·±çš„ç‚¹å‡»äº‹ä»¶ã€‚</p><p>ä»¥ä¸‹å±•ç¤ºåœ¨ TextView çš„ç‚¹å‡»äº‹ä»¶</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.ButtonActivity<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/tv1<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>40dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_below</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/btn4<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>TextView<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textAlignment</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>paddingTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#c87de3<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#fff<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">></span></span></code></pre><p>java ä»£ç </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">AppCompatActivity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">View</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">Button</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">TextView</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">Toast</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ButtonActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">TextView</span> tv<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_button<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// TextView çš„ç‚¹å‡»äº‹ä»¶</span>        tv <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TextView</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>tv1<span class="token punctuation">)</span><span class="token punctuation">;</span>        tv<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> view<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">ButtonActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"TextViewè¢«ç‚¹å‡»äº†"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="æŒ‰é’®ç‚¹å‡»äº‹ä»¶æ•ˆæœå›¾"><a href="#æŒ‰é’®ç‚¹å‡»äº‹ä»¶æ•ˆæœå›¾" class="headerlink" title="æŒ‰é’®ç‚¹å‡»äº‹ä»¶æ•ˆæœå›¾"></a>æŒ‰é’®ç‚¹å‡»äº‹ä»¶æ•ˆæœå›¾</h3><p>ä»¥ä¸Šä»£ç çš„è¿è¡Œæ•ˆæœå›¾å¦‚ä¸‹</p><p><img src="/images/Android/button/16nww-zbdkg.gif" loading="lazy"></p><h2 id="è¡¥å……ä¸æ‰©å±•"><a href="#è¡¥å……ä¸æ‰©å±•" class="headerlink" title="è¡¥å……ä¸æ‰©å±•"></a>è¡¥å……ä¸æ‰©å±•</h2><blockquote><p>ä»¥ä¸‹å†…å®¹æ˜¯å¯¹ä¸Šè¿°ä»çªç„¶æåˆ°çš„çŸ¥è¯†ä»¥åŠ java ä¸­çš„ä¸€äº›éå¸¸å¥‡æ€ªçš„æ–°å†™æ³•è¿›è¡Œä¸€ä¸ªè§£é‡Š</p></blockquote><h3 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h3><h4 id="Toast-æç¤ºæ¡†"><a href="#Toast-æç¤ºæ¡†" class="headerlink" title="Toast æç¤ºæ¡†"></a>Toast æç¤ºæ¡†</h4><p>å‰é¢å·²ç»æœ‰ç®€å•è¿ç”¨ Toast æç¤ºæ¡†ï¼Œç›¸ä¿¡å¯¹ Toast æœ‰ä¸€ä¸ªç®€å•çš„è®¤è¯†äº†å§ã€‚</p><p>Toast æœ€å¸¸ç”¨çš„æ–¹æ³•ä¹Ÿå°±æ˜¯ makeText äº†ï¼Œåé¢éœ€è¦ä¼ é€’çš„å‚æ•°å°†ä¼šä¸€ä¸€è§£é‡Š</p><p>ç¤ºä¾‹</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">ButtonActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"TextViewè¢«ç‚¹å‡»äº†"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æŒ‡å®šå“ªä¸ª Activity ï¼Œé»˜è®¤ä¹ŸæŒ‡å®šçš„æ˜¯å½“å‰çš„ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯è®¾ç½®è¦æç¤ºçš„å†…å®¹ï¼›æœ€åä¸€ä¸ªå‚æ•°æ˜¯è®¾ç½®æç¤ºæ¡†æ˜¾ç¤ºçš„æ—¶é—´ï¼Œå¦‚æœæ˜¯ <code>Toast.LENGTH_LONG</code> åˆ™æç¤ºæ¡†æ˜¾ç¤ºçš„æ—¶é—´è¾ƒé•¿ï¼Œå¦‚æœæ˜¯ <code>Toast.LENGTH_SHORT</code> åˆ™æç¤ºæ¡†æ˜¾ç¤ºçš„äº‹ä»¶è¾ƒçŸ­ã€‚</p><p>æœ€åè¦è°ƒç”¨ show æ–¹æ³•ï¼Œå°†å…¶æ˜¾ç¤ºå‡ºæ¥ã€‚</p><h3 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h3><h4 id="xxx-this"><a href="#xxx-this" class="headerlink" title="xxx.this"></a>xxx.this</h4><p>åœ¨å­¦ä¹  Toast çš„æ—¶å€™ï¼Œä¼šå‡ºç°è¿™ç§å¥‡æ€ªçš„å†™æ³•ã€‚</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token class-name">ButtonActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span>xxxxActivity<span class="token punctuation">.</span><span class="token keyword">this</span></code></pre><p>è€Œä¸”è¿™ç§å¥‡æ€ªçš„å†™æ³•ååè¿˜æ˜¯åœ¨åŒ¿åç±»ä¸­å‘ç”Ÿçš„ã€‚å…ˆå±•ç¤ºä¸€æ³¢ä¼ªä»£ç </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ButtonActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">TextView</span> tv<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        tv<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token class-name">View</span> view<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">ButtonActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"TextViewè¢«ç‚¹å‡»äº†"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>è¿™æ˜¯å› ä¸ºåŒ¿åç±»ä¹Ÿæ˜¯ä¸€ä¸ªç±»ï¼Œå¤§å®¶éƒ½çŸ¥é“ this æŒ‡çš„æ˜¯å½“å‰çš„å¯¹è±¡ã€‚å¯æ˜¯å¦‚æœåœ¨åŒ¿åç±»ä¸­ï¼ŒåŒ¿åç±»ä¹Ÿæ˜¯ä¸€ä¸ªç±»ï¼Œå®ƒä¹Ÿæœ‰å±äºå®ƒè‡ªå·±çš„ this ã€‚</p><p>ä»¥ä¸Šä¼ªä»£ç  Toast ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œéœ€è¦ä¼ é€’çš„æ˜¯ Activity ï¼Œå¦‚æœç›´æ¥å†™ this ï¼Œé‚£ä¹ˆè¿™ä¸ª this å¹¶ä¸æ˜¯ ButtonActivity çš„ã€‚å¦‚æœè¦ç”¨åˆ° ButtonActivity çš„ this ï¼Œå°±åªå¥½ç”¨ <code>ButtonActivity.this</code> è¿™æ ·çš„å†™æ³•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android å…¥é—¨ç¯‡ä¹‹ TextView ç»„ä»¶çš„ä½¿ç”¨</title>
      <link href="/journal/TextView-component/"/>
      <url>/journal/TextView-component/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æˆ‘æƒ³è¦è¯´"><a href="#æˆ‘æƒ³è¦è¯´" class="headerlink" title="æˆ‘æƒ³è¦è¯´"></a>æˆ‘æƒ³è¦è¯´</h2><p>ç»ˆäºå­¦ä¹ åˆ°äº†å®‰å“çš„ç»„ä»¶éƒ¨åˆ†äº†ï¼Œä»Šå¤©å­¦ä¹ äº† TextView ç»„ä»¶ã€‚è€Œä¸”ï¼ŒTextView æ˜¯æ‰€æœ‰çš„åé¢å­¦ä¹ åˆ°çš„ç»„ä»¶çš„çˆ¶ç±»ï¼Œæ¯”å¦‚ Buttonã€EditText ç­‰ç­‰çš„çˆ¶ç±»å°±æ˜¯ TextViewã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å®šåˆ¶å±äºè‡ªå·±çš„ç»„ä»¶ã€‚è€Œ TextView çš„çˆ¶ç±»æ˜¯ View ç±»ã€‚</p><p>æœ¬æ¬¡å­¦ä¹ äº†ç»™ TextView ä¸­æ·»åŠ å›¾ç‰‡ï¼Œå¹¶è®¾ç½®å…¶å›¾ç‰‡çš„å¤§å°ã€‚è¿˜æœ‰ä¸­åˆ’çº¿ï¼Œä¸‹åˆ’çº¿ï¼Œè·‘é©¬ç¯ä»¥åŠé€šè¿‡ä½¿ç”¨ html ä»£ç çš„æ–¹å¼å¯¹å…¶è®¾ç½®ä¸­åˆ’çº¿å’Œä¸‹åˆ’çº¿ã€‚</p><p>åé¢å­¦ä¹ åˆ° Button ç­‰è¿™äº›ç»„ä»¶çš„æ—¶å€™å†è¯´ã€‚</p><span id="more"></span><h2 id="å±æ€§ä»‹ç»"><a href="#å±æ€§ä»‹ç»" class="headerlink" title="å±æ€§ä»‹ç»"></a>å±æ€§ä»‹ç»</h2><p>è¿™é‡Œä»‹ç»äº†ä¸€äº›å­¦ä¹ ä¸­ä½¿ç”¨åˆ°çš„å±æ€§ï¼Œåˆ°æ—¶å€™è¿˜ä¼šç»§ç»­æ·»åŠ å¹¶å®Œå–„ã€‚</p><h3 id="å…±æœ‰å±æ€§"><a href="#å…±æœ‰å±æ€§" class="headerlink" title="å…±æœ‰å±æ€§"></a>å…±æœ‰å±æ€§</h3><table><thead><tr><th>å±æ€§å</th><th>å±æ€§æè¿°</th></tr></thead><tbody><tr><td>focusable</td><td>è®¾ç½®å…è®¸ä¸ºç„¦ç‚¹</td></tr><tr><td>focusableInTouchMode</td><td>è®¾ç½®åœ¨è§¦æ‘¸çš„æ—¶å€™å…è®¸ç„¦ç‚¹</td></tr></tbody></table><h3 id="TextView-çš„å±æ€§"><a href="#TextView-çš„å±æ€§" class="headerlink" title="TextView çš„å±æ€§"></a>TextView çš„å±æ€§</h3><table><thead><tr><th>å±æ€§å</th><th>å±æ€§æè¿°</th></tr></thead><tbody><tr><td>text</td><td>è®¾ç½®æ–‡å­—çš„å†…å®¹</td></tr><tr><td>textSize</td><td>è®¾ç½®æ–‡å­—å¤§å°ï¼Œå•ä½ä¸º sp</td></tr><tr><td>textColor</td><td>è®¾ç½®æ–‡å­—é¢œè‰²</td></tr><tr><td>drawableXXX</td><td>è®¾ç½®åµŒå…¥å›¾ç‰‡çš„ä½ç½®ï¼ŒXXX ä¸º Startã€Endã€Leftã€Rightã€Bottomã€Top</td></tr><tr><td>drawablePadding</td><td>è®¾ç½®åµŒå…¥å›¾ç‰‡ä¸æ–‡å­—ä¹‹é—´çš„è¾¹è·ï¼Œå•ä½ä¸º dp</td></tr><tr><td>maxLines</td><td>è®¾ç½®æ˜¾ç¤ºçš„æœ€å¤§è¡Œæ•°ï¼Œæ— å•ä½</td></tr><tr><td>singleLine</td><td>åªæ˜¾ç¤ºå•è¡Œï¼Œå·²å¼ƒç”¨ï¼Œå€¼ä¸º true æˆ– falseã€‚æ¨èè®¾ç½®ä¸º maxLines=1ã€‚</td></tr><tr><td>ellipsize</td><td>æ·»åŠ çœç•¥å·ï¼Œæ·»åŠ çš„ä½ç½®ä¸º startï¼ˆåœ¨å‰é¢æ˜¾ç¤ºï¼‰ã€middleï¼ˆåœ¨ä¸­é—´æ˜¾ç¤ºï¼‰ã€endï¼ˆåœ¨æœ«å°¾æ˜¾ç¤ºï¼‰ã€marqueeï¼ˆè·‘é©¬ç¯ï¼‰</td></tr><tr><td>marqueeRepeatLimit</td><td>è®¾ç½®è·‘é©¬ç¯é‡å¤é™åˆ¶ï¼Œè¿™ä¸ªå±æ€§åªæœ‰åœ¨è®¾ç½®è·‘é©¬ç¯æ—¶æ‰ä¼šæœ‰æ•ˆæœï¼Œè‹¥è¦æ— é™ï¼Œåˆ™ä½¿ç”¨ marquee_forever</td></tr></tbody></table><h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><blockquote><p>ä»¥ä¸‹å®ä¾‹å±•ç¤ºäº†è¿™äº›å±æ€§çš„ä½¿ç”¨</p></blockquote><h3 id="å®ä¾‹1ï¼Œæ˜¾ç¤ºæ™®é€šæ–‡æœ¬"><a href="#å®ä¾‹1ï¼Œæ˜¾ç¤ºæ™®é€šæ–‡æœ¬" class="headerlink" title="å®ä¾‹1ï¼Œæ˜¾ç¤ºæ™®é€šæ–‡æœ¬"></a>å®ä¾‹1ï¼Œæ˜¾ç¤ºæ™®é€šæ–‡æœ¬</h3><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.TextviewActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- å¸¸è§„è®¾ç½® --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#000000<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Helloï¼Œæˆ‘æ˜¯BestGuo<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹<br><img src="/images/Android/textview/QQ%E6%88%AA%E5%9B%BE20210124232414.jpg" loading="lazy"></p><h3 id="å®ä¾‹2ï¼Œçœç•¥å·"><a href="#å®ä¾‹2ï¼Œçœç•¥å·" class="headerlink" title="å®ä¾‹2ï¼Œçœç•¥å·"></a>å®ä¾‹2ï¼Œçœç•¥å·</h3><p>å½“ TextView çš„æ–‡å­—å†…å®¹ä¸å¤Ÿå±•ç¤ºçš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦ç”¨çœç•¥å·æ¥å±•ç¤ºã€‚</p><p>è®¾ç½®çœç•¥å·çš„å±æ€§ä¸º android:ellipsizeï¼Œæœ¬å®ä¾‹ä¸­è®¾ç½®çš„çœç•¥å·æ˜¯åœ¨æœ«å°¾ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.TextviewActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- è®¾ç½®è¶…å‡ºéƒ¨åˆ†ä¸æ˜¾ç¤º --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/textView2<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>110dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>40dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>maxLines</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>ellipsize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>end<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#000<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Helloï¼Œæˆ‘æ˜¯BestGuo<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹<br><img src="/images/Android/textview/QQ%E6%88%AA%E5%9B%BE20210124232853.jpg" loading="lazy"></p><h3 id="å®ä¾‹3ï¼Œå¸¦å›¾æ ‡çš„æ–‡å­—"><a href="#å®ä¾‹3ï¼Œå¸¦å›¾æ ‡çš„æ–‡å­—" class="headerlink" title="å®ä¾‹3ï¼Œå¸¦å›¾æ ‡çš„æ–‡å­—"></a>å®ä¾‹3ï¼Œå¸¦å›¾æ ‡çš„æ–‡å­—</h3><p>å½“ TextView éœ€è¦æ·»åŠ å›¾ç‰‡çš„æ—¶å€™ï¼Œæ­¤æ—¶éœ€è¦æ·»åŠ ä¸€ä¸ªå›¾ç‰‡è¿›å»ã€‚</p><p>æœ¬å®ä¾‹ä¸­ï¼Œè®¾ç½®çš„å›¾ç‰‡ä½ç½®æ˜¯åœ¨æ–‡å­—çš„å³è¾¹ã€‚ç”¨åˆ°çš„å±æ€§æ˜¯ drawableRightã€‚</p><p>ä½†æ˜¯ï¼Œéœ€è¦æ”¾ç½®çš„å›¾ç‰‡ä½ç½®æ˜¯æ”¾åœ¨ res ç›®å½•ä¸‹çš„ drawable ç›®å½•ä¸‹ã€‚è¿™é‡Œä¸è€ƒè™‘å„ç§æœºå‹é€‚é…çš„é—®é¢˜ï¼Œå…ˆæš‚æ—¶è¿™ä¹ˆæ”¾å§ã€‚</p><p><img src="/images/Android/textview/QQ%E6%88%AA%E5%9B%BE20210124233613.jpg" loading="lazy"></p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.TextviewActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--        è®¾ç½®å¸¦å›¾æ ‡çš„æ–‡å­—ã€‚        å¦‚æœéœ€è¦è®¾ç½®å¸¦å›¾æ ‡ï¼Œåˆ™éœ€è¦è®¾ç½®ä¸€ä¸‹ drawableã€‚        ä½†æ˜¯ï¼Œç”±äºæŸäº›å›¾ç‰‡å¤ªå¤§ï¼Œéœ€è¦ä½¿ç”¨åˆ° java ä»£ç ã€‚    --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/textView3<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>65dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>40dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#000<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ç­›é€‰<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>drawableRight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@drawable/down_arrow<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>drawablePadding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><p>è®¾ç½®çš„æ•ˆæœå¦‚ä¸‹ï¼ˆç”»çº¢è‰²åœˆåœˆéƒ¨åˆ†ï¼‰</p><p><img src="/images/Android/textview/QQ%E6%88%AA%E5%9B%BE20210124233832.jpg" loading="lazy"></p><p>ä½†æ˜¯å‘ç°ï¼Œå›¾ç‰‡å®åœ¨æ˜¯å¤ªå¤§äº†ã€‚è¿™å¼ å›¾ç‰‡çš„æºå¤§å°ä¸º 200 Ã— 200 ï¼Œæ‰€ä»¥ä¸€æ•´ä¸ªéƒ½æ˜¯å›¾ç‰‡ã€‚å¦‚æœè¯´è¦å°†å›¾ç‰‡çš„å¤§å°è°ƒæ•´çš„è¯ï¼Œé‚£ä¹ˆå°±æœ‰ä¸¤ç§æ–¹æ³•ã€‚</p><ol><li>é€šè¿‡ä½¿ç”¨å›¾å½¢ç¼–è¾‘å·¥å…·ï¼Œå°†å›¾ç‰‡ç¼©å°ã€‚</li><li>é€šè¿‡ java ä»£ç çš„æ–¹å¼æ¥è°ƒæ•´ã€‚</li></ol><p>è¿™é‡Œä½¿ç”¨ Java ä»£ç æ¥è°ƒæ•´ã€‚</p><p>ä½¿ç”¨çš„ Java ä»£ç </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span></span><span class="token class-name">Paint</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span></span><span class="token class-name">Drawable</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">AppCompatActivity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">TextView</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TextviewActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">TextView</span> tv3<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_textview<span class="token punctuation">)</span><span class="token punctuation">;</span>        tv3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TextView</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>textView3<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·å– TextView ä¸­çš„å›¾ç‰‡</span>        <span class="token class-name">Drawable</span> dw <span class="token operator">=</span> tv3<span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDrawable</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>down_arrow<span class="token punctuation">)</span><span class="token punctuation">;</span>        dw<span class="token punctuation">.</span><span class="token function">setBounds</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å‰ä¸¤ä¸ªå±æ€§æ˜¯è®¾ç½®å›¾ç‰‡çš„ä½ç½®ï¼Œåä¸¤ä¸ªå±æ€§æ˜¯è®¾ç½®å›¾ç‰‡çš„å®½å’Œé«˜</span>        <span class="token comment">// è®¾ç½®å›¾ç‰‡æ˜¯åœ¨æ–‡å­—çš„å“ªä¸ªä½ç½®ï¼šå·¦ã€ä¸Šã€å³ã€ä¸‹ã€‚è¿™é‡Œæ˜¯è®¾ç½®åœ¨å³è¾¹</span>        <span class="token comment">// å¦‚æœè¿˜éœ€è¦åœ¨ TextView ä¸­è®¾ç½®å‡ ä¸ªå›¾ç‰‡ï¼Œå¯ä»¥ä¸€èµ·è®¾ç½®</span>        tv3<span class="token punctuation">.</span><span class="token function">setCompoundDrawables</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> dw<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/textview/QQ%E6%88%AA%E5%9B%BE20210124235725.jpg" loading="lazy"></p><p>é€šè¿‡ä½¿ç”¨ Java ä»£ç è¿›è¡Œæ”¹è¿›ï¼Œå¯ä»¥è¾¾åˆ°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœäº†ã€‚</p><h3 id="å®ä¾‹4ï¼Œå¸¦ä¸­åˆ’çº¿å’Œå¸¦ä¸‹åˆ’çº¿çš„æ–‡å­—"><a href="#å®ä¾‹4ï¼Œå¸¦ä¸­åˆ’çº¿å’Œå¸¦ä¸‹åˆ’çº¿çš„æ–‡å­—" class="headerlink" title="å®ä¾‹4ï¼Œå¸¦ä¸­åˆ’çº¿å’Œå¸¦ä¸‹åˆ’çº¿çš„æ–‡å­—"></a>å®ä¾‹4ï¼Œå¸¦ä¸­åˆ’çº¿å’Œå¸¦ä¸‹åˆ’çº¿çš„æ–‡å­—</h3><p>å¸¦ä¸­åˆ’çº¿å’Œå¸¦ä¸‹åˆ’çº¿çš„æ–‡å­—ï¼Œä¸èƒ½ç›´æ¥åœ¨ xml æ–‡ä»¶ä¸­æ¥ç›´æ¥ç¼–è¾‘ã€‚åªèƒ½é€šè¿‡ Java ä»£ç æ¥å®ç°é™¤è¿™ç§æ•ˆæœã€‚</p><p>åŒæ—¶ï¼Œä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†ä½¿ç”¨ä¸¤ç§æ–¹å¼æ¥ç»™æ–‡æœ¬æ·»åŠ ä¸‹åˆ’çº¿ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.TextviewActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--        è®¾ç½®ä¸­åˆ’çº¿ï¼Œä¸­åˆ’çº¿å’Œä¸‹åˆ’çº¿éœ€è¦é€šè¿‡ Java ä»£ç æ¥å®ç°ã€‚    --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/textView4<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Helloï¼Œæˆ‘æ˜¯BestGuo<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!--        è®¾ç½®ä¸‹åˆ’çº¿ï¼Œä¸­åˆ’çº¿å’Œä¸‹åˆ’çº¿éœ€è¦é€šè¿‡ Java ä»£ç æ¥å®ç°ã€‚    --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/textView5<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Helloï¼Œæˆ‘æ˜¯BestGuo<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!--        è®¾ç½®ä¸‹åˆ’çº¿ï¼Œé€šè¿‡ html ä»£ç     --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/textView6<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Helloï¼Œæˆ‘æ˜¯BestGuo<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><p>java ä»£ç </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>bestguo<span class="token punctuation">.</span>androidlayout</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span></span><span class="token class-name">Paint</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span></span><span class="token class-name">Drawable</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">AppCompatActivity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">Html</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">TextView</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TextviewActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">TextView</span> tv4<span class="token punctuation">,</span> tv5<span class="token punctuation">,</span> tv6<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_textview<span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// è®¾ç½®ä¸­åˆ’çº¿çš„ä»£ç </span>        tv4 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TextView</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>textView4<span class="token punctuation">)</span><span class="token punctuation">;</span>        tv4<span class="token punctuation">.</span><span class="token function">getPaint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setFlags</span><span class="token punctuation">(</span><span class="token class-name">Paint</span><span class="token punctuation">.</span>STRIKE_THRU_TEXT_FLAG<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¾ç½®ä¸­åˆ’çº¿</span>        <span class="token comment">// è®¾ç½®ä¸‹åˆ’çº¿çš„ä»£ç </span>        tv5 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TextView</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>textView5<span class="token punctuation">)</span><span class="token punctuation">;</span>        tv5<span class="token punctuation">.</span><span class="token function">getPaint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setFlags</span><span class="token punctuation">(</span><span class="token class-name">Paint</span><span class="token punctuation">.</span>UNDERLINE_TEXT_FLAG<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¾ç½®ä¸‹åˆ’çº¿</span>        <span class="token comment">// è®¾ç½®ä¸‹åˆ’çº¿çš„ä»£ç ï¼Œä½¿ç”¨ Html çš„æ–¹å¼</span>        tv6 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TextView</span><span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>textView6<span class="token punctuation">)</span><span class="token punctuation">;</span>        tv6<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token class-name">Html</span><span class="token punctuation">.</span><span class="token function">fromHtml</span><span class="token punctuation">(</span><span class="token string">"&lt;u>Helloï¼Œæˆ‘æ˜¯BestGuo&lt;/u>"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>æ•ˆæœå¦‚ä¸‹</p><p><img src="/images/Android/textview/QQ%E6%88%AA%E5%9B%BE20210124235746.jpg" loading="lazy"></p><p>ä¸æ‡‚ä¸ºä»€ä¹ˆï¼Œæˆ‘çš„åä¸º p10 åœ¨æ˜¾ç¤ºä¸‹åˆ’çº¿æ•ˆæœæ—¶ä¼šå‡ºç°åŒä¸‹åˆ’çº¿ã€‚ä¸æ‡‚ä¸ºä»€ä¹ˆğŸ˜¨ğŸ˜¨ğŸ˜¨</p><h3 id="å®ä¾‹5ï¼Œè·‘é©¬ç¯"><a href="#å®ä¾‹5ï¼Œè·‘é©¬ç¯" class="headerlink" title="å®ä¾‹5ï¼Œè·‘é©¬ç¯"></a>å®ä¾‹5ï¼Œè·‘é©¬ç¯</h3><p>åœ¨åšè·‘é©¬ç¯çš„æ—¶å€™ï¼Œå¤ªå‘äº†ã€‚</p><p>å› ä¸ºè®¾ç½®è·‘é©¬ç¯çš„æ•ˆæœæ—¶ï¼Œå®ƒçš„å±æ€§å¿…é¡»è®¾ç½®æˆ singleLineï¼Œè€Œä¸æ˜¯ maxLine</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.TextviewActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--        è®¾ç½®è·‘é©¬ç¯ã€‚        æ³¨æ„ï¼šè®¾ç½®è·‘é©¬ç¯çš„æ•ˆæœæ—¶å¿…é¡»è®¾ç½®æˆ singleLineï¼Œè€Œä¸æ˜¯ maxLine    --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>singleLine</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Helloï¼Œæˆ‘æ˜¯BestGuoï¼Helloï¼Œæˆ‘æ˜¯BestGuoï¼Helloï¼Œæˆ‘æ˜¯BestGuoï¼<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>marqueeRepeatLimit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>marquee_forever<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>focusable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>ellipsize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>marquee<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>focusableInTouchMode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹ï¼ˆçº¢è‰²åœˆå‡ºéƒ¨åˆ†ï¼‰</p><p><img src="/images/Android/textview/QQ%E6%88%AA%E5%9B%BE20210124235808.jpg" loading="lazy"></p><h2 id="å†…å®¹è¡¥å……"><a href="#å†…å®¹è¡¥å……" class="headerlink" title="å†…å®¹è¡¥å……"></a>å†…å®¹è¡¥å……</h2><p>åœ¨è®¾ç½® layout_width å’Œ layout_height çš„æ—¶å€™å€¼ä¸º wrap_contentã€‚è¿™ä¸ªå€¼çš„æ„æ€å°±æ˜¯éšç€å…ƒç´ å†…éƒ¨çš„å˜åŒ–è€Œè‡ªåŠ¨é€‚åº”ã€‚</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://www.cnblogs.com/kim-liu/p/7460252.html">https://www.cnblogs.com/kim-liu/p/7460252.html</a></p>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android å…¥é—¨ç¯‡ä¹‹ RelativeLayout å¸ƒå±€çš„ä½¿ç”¨</title>
      <link href="/journal/How-to-use-relativelayout/"/>
      <url>/journal/How-to-use-relativelayout/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æˆ‘æƒ³è¦è¯´"><a href="#æˆ‘æƒ³è¦è¯´" class="headerlink" title="æˆ‘æƒ³è¦è¯´"></a>æˆ‘æƒ³è¦è¯´</h2><p>Android ä¸­æœ‰ä¸¤ä¸ªå¸¸ç”¨çš„å¸ƒå±€ â€œLinearLayoutâ€ å’Œ â€œRelativeLayoutâ€ ä¸¤ç§ã€‚ä»Šå¤©å­¦ä¹ äº† RelativeLayout å¸ƒå±€ï¼Œæ‰€ä»¥è®°å½•ä¸€ä¸‹å­¦ä¹ æ­¤å¸ƒå±€çš„ä¸€äº›ä½“ä¼šå§ã€‚</p><p>RelativeLayout å¸ƒå±€ä¹Ÿå«ç›¸å¯¹å¸ƒå±€ï¼Œå®ƒæ ¹æ®å‚è€ƒçˆ¶å®¹å™¨æˆ–è€…ç›¸å¯¹äºå…¶å®ƒçš„å®¹å™¨æ‰€åœ¨çš„ä½ç½®æ‰€å†³å®šçš„ã€‚</p><span id="more"></span><p>ç­‰æˆ‘å­¦ä¼šäº†ç”¨ gitï¼Œæœªæ¥å°†ä¼šä»£ç ä¸Šä¼ åˆ° github ä¸Š ğŸ˜­ğŸ˜­ğŸ˜­</p><h2 id="å¸ƒå±€å±æ€§çš„ä»‹ç»ä¸ä½¿ç”¨"><a href="#å¸ƒå±€å±æ€§çš„ä»‹ç»ä¸ä½¿ç”¨" class="headerlink" title="å¸ƒå±€å±æ€§çš„ä»‹ç»ä¸ä½¿ç”¨"></a>å¸ƒå±€å±æ€§çš„ä»‹ç»ä¸ä½¿ç”¨</h2><h3 id="RelativeLayout-çš„ç›¸å…³å±æ€§"><a href="#RelativeLayout-çš„ç›¸å…³å±æ€§" class="headerlink" title="RelativeLayout çš„ç›¸å…³å±æ€§"></a>RelativeLayout çš„ç›¸å…³å±æ€§</h3><blockquote><p>å½“ç„¶ï¼Œå‰é¢æåˆ°çš„ LinearLayout ä¸­çš„å…¬å…±å±æ€§ä¹Ÿèƒ½å¤Ÿåº”ç”¨åˆ°è¯¥å¸ƒå±€ä¸­</p></blockquote><table><thead><tr><th>å±æ€§å</th><th>å±æ€§æè¿°</th></tr></thead><tbody><tr><td>layout_toStartOf</td><td>åœ¨å“ªä¸ªå…ƒç´ çš„å·¦è¾¹ï¼Œéœ€è¦æŒ‡å®šâ€œå“ªä¸ªå…ƒç´ â€çš„id</td></tr><tr><td>layout_toEndOf</td><td>åœ¨å“ªä¸ªå…ƒç´ çš„å³è¾¹ï¼Œéœ€è¦æŒ‡å®šâ€œå“ªä¸ªå…ƒç´ â€çš„id</td></tr><tr><td>layout_toLeftOf</td><td>åŒ toStartOfï¼Œä¸æ¨èä½¿ç”¨ï¼Œéœ€è¦æŒ‡å®šâ€œå“ªä¸ªå…ƒç´ â€çš„id</td></tr><tr><td>layout_toRightOf</td><td>åŒ toEndOfï¼Œä¸æ¨èä½¿ç”¨ï¼Œéœ€è¦æŒ‡å®šâ€œå“ªä¸ªå…ƒç´ â€çš„id</td></tr><tr><td>layout_alignParentBottom</td><td>åœ¨çˆ¶ç©ºé—´çš„åº•éƒ¨ï¼Œå€¼ä¸º true æˆ–è€… false</td></tr><tr><td>layout_alignParentEnd</td><td>åœ¨çˆ¶ç©ºé—´çš„å³è¾¹ï¼Œå€¼ä¸º true æˆ–è€… false</td></tr><tr><td>layout_alignParentRight</td><td>åŒ alignParentEndï¼Œä¸æ¨èä½¿ç”¨ï¼Œå€¼ä¸º true æˆ–è€… false</td></tr><tr><td>layout_alignParentStart</td><td>åœ¨çˆ¶ç©ºé—´çš„å·¦è¾¹ï¼Œå€¼ä¸º true æˆ–è€… false</td></tr><tr><td>layout_alignParentLeft</td><td>åŒ alignParentStartï¼Œä¸æ¨èä½¿ç”¨ï¼Œå€¼ä¸º true æˆ–è€… false</td></tr><tr><td>layout_below</td><td>åœ¨å“ªä¸ªå…ƒç´ çš„åº•éƒ¨ï¼Œéœ€è¦æŒ‡å®šâ€œå“ªä¸ªå…ƒç´ â€çš„id</td></tr></tbody></table><h3 id="è°çš„å“ªè¾¹"><a href="#è°çš„å“ªè¾¹" class="headerlink" title="è°çš„å“ªè¾¹"></a>è°çš„å“ªè¾¹</h3><p>ä»¥ä¸‹å›¾ç¤ºå±•ç¤ºäº†è¿™äº›å±æ€§æ‰€å¸¦æ¥çš„æ•ˆæœã€‚</p><p>å‡è®¾æ•´ä¸ªç•Œé¢å°±æ˜¯çˆ¶å®¹å™¨ã€‚</p><blockquote><p>ä¸ºäº†èƒ½å¤Ÿæ›´å¥½çš„å±•ç¤ºå‡ºè¿™äº›å±æ€§çš„æ•ˆæœï¼Œid ä¸º a å…ƒç´ çš„ä½ç½®æ˜¯éšæ„ç”»çš„ã€‚ğŸ˜„ğŸ˜„</p></blockquote><p><img src="/images/Android/relativelayout/relativelayout.png" alt="å…ƒç´ " loading="lazy"></p><h3 id="RelativeLayout-ä»£ç ç¤ºä¾‹"><a href="#RelativeLayout-ä»£ç ç¤ºä¾‹" class="headerlink" title="RelativeLayout ä»£ç ç¤ºä¾‹"></a>RelativeLayout ä»£ç ç¤ºä¾‹</h3><h4 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹ 1"></a>ç¤ºä¾‹ 1</h4><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.RelativeActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- è®¾ç½®çˆ¶ç©ºé—´çš„åº•éƒ¨å¯¹é½å’Œå³éƒ¨å¯¹é½ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/view_1<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#000000<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_alignParentBottom</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_alignParentEnd</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- è®¾ç½®çˆ¶ç©ºé—´çš„åº•éƒ¨å¯¹é½å’Œå³éƒ¨å¯¹é½ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/view_2<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#000000<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- è®¾ç½®ä½ç½®view_2çš„å³è¾¹ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/view_3<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#ff0033<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_toEndOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/view_2<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- è®¾ç½®åœ¨ view_2 çš„åº•éƒ¨ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/view_4<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#cc4273<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_below</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/view_2<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/images/Android/relativelayout/QQ%E6%88%AA%E5%9B%BE20210124164803.jpg" loading="lazy"></p><p>å…¶ä¸­ï¼Œåœ¨ view_3 ä¸­å±æ€§ layout_toEndOfï¼Œæ„æ€æ˜¯åœ¨è°çš„æœ«å°¾ã€‚è¿™é‡Œè®¾ç½®çš„æ˜¯ view_2 çš„æœ«å°¾ã€‚</p><p>è¿˜æœ‰ï¼Œåœ¨ view_4 ä¸­å±æ€§ layout_belowï¼Œæ„æ€æ˜¯åœ¨è°çš„åº•éƒ¨ã€‚è¿™é‡Œè®¾ç½®çš„æ˜¯ view_2 çš„åº•éƒ¨ã€‚</p><h4 id="ç¤ºä¾‹-2"><a href="#ç¤ºä¾‹-2" class="headerlink" title="ç¤ºä¾‹ 2"></a>ç¤ºä¾‹ 2</h4><p>ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†å¸ƒå±€çš„åµŒå¥—</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.RelativeActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- è®¾ç½®çˆ¶ç©ºé—´çš„åº•éƒ¨å¯¹é½å’Œå³éƒ¨å¯¹é½ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/view_1<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#000000<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_alignParentBottom</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_alignParentEnd</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- è®¾ç½®çˆ¶ç©ºé—´çš„åº•éƒ¨å¯¹é½å’Œå³éƒ¨å¯¹é½ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/view_2<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#000000<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- è®¾ç½®ä½ç½®view_2çš„å³è¾¹ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/view_3<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#ff0033<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_toEndOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/view_2<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- è®¾ç½®åœ¨ view_2 çš„åº•éƒ¨ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/view_4<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#cc4273<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_below</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/view_2<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!--        é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜èƒ½è®¾ç½®çº¿æ€§å¸ƒå±€çš„ä½ç½®ã€‚        æ­¤çº¿æ€§å¸ƒå±€æ˜¯è®¾ç½®åœ¨view_4çš„ä¸‹é¢ã€‚        å› ä¸ºå¸ƒå±€ä¹‹é—´æœ¬æ¥å°±æ˜¯å¯ä»¥å¥—ç”¨çš„ã€‚    --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>185dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_below</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/view_4<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#0066ff<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#ff0033<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!--            è®¾ç½®äº†ä¸€ä¸ªç›¸å¯¹å¸ƒå±€çš„ç»„ä»¶ã€‚é‡Œé¢æ”¾äº†ä¸¤ä¸ªå…ƒç´         --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!-- è®¾ç½®idä¸ºview_5 å’Œé¢œè‰² --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>                <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/view_5<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#ee9c4e<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token comment">&lt;!-- è®¾ç½®äº†å±æ€§ï¼Œåœ¨view_5çš„å³è¾¹å¹¶ä¸”è®¾ç½®å·¦å¤–è¾¹è·ä¸º10dp --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#ee9c4e<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_toRightOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@id/view_5<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_marginLeft</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">></span></span></code></pre><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="/images/Android/relativelayout/QQ%E6%88%AA%E5%9B%BE20210124165530.jpg" loading="lazy"></p><blockquote><p>ç¤ºä¾‹ 2 ä½¿ç”¨åˆ°äº†å‰é¢å­¦ä¹ çš„çº¿æ€§å¸ƒå±€ã€‚å³ LinearLayout å¸ƒå±€ï¼Œç„¶åçº¿æ€§å¸ƒå±€å½“ä¸­åˆç”¨è¿ç”¨åˆ°äº†ç›¸å¯¹å¸ƒå±€ã€‚å¯è§ï¼Œå¸ƒå±€ä¹‹é—´æ˜¯å¯ä»¥è¿›è¡ŒåµŒå¥—çš„ã€‚æˆ‘ä¹Ÿæ˜¯åˆšåˆšå­¦ï¼Œæˆ‘æƒ³æœªæ¥åœ¨åšç•Œé¢çš„æ—¶å€™è‚¯å®šæ˜¯è¦ç”¨åˆ°å„ç§å¸ƒå±€çš„åµŒå¥—å§ã€‚</p></blockquote><blockquote><p>ç¤ºä¾‹ 2 åœ¨ç¤ºä¾‹ 1 çš„åŸºç¡€ä¸Šè¿›è¡Œæ‰©å……ã€‚è¿™äº›å¸ƒå±€ç³»ç»Ÿä¹Ÿå¯ä»¥è®¾ç½® layout_below ç­‰è¿™äº›ç›¸å¯¹çš„å±æ€§ï¼ŒåŒ…æ‹¬æœªæ¥ä½¿ç”¨çš„é‚£äº›ç»„ä»¶ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä»–ä»¬ä¹Ÿèƒ½ä½¿ç”¨è¿™äº›å±æ€§ã€‚ä½†å‰ææ˜¯è¿™äº›å±æ€§è¦å¯¹åº”åœ¨å“ªä¸ªå¸ƒå±€ä¸‹é¢ï¼Œå¦åˆ™ï¼Œè¿™äº›å±æ€§ä¹Ÿå°†ä¼šæ˜¯æ— æ•ˆçš„å±æ€§ã€‚</p></blockquote><p>å…¶ä¸­ LinearLayoutï¼ˆèƒŒæ™¯é¢œè‰²ä¸ºè“è‰²éƒ¨åˆ†ï¼‰ è®¾ç½®äº† layout_below å±æ€§ï¼Œè®¾ç½®çš„ id ä¸º view_4ï¼Œä¹Ÿå°±æ„å‘³ç€è¿™ä¸ª LinearLayout å¸ƒå±€æ˜¯åœ¨ id ä¸º view_4 çš„ç»„ä»¶çš„ä¸‹é¢ã€‚ç„¶å LinearLayout å¸ƒå±€ç³»ç»Ÿå†…é»˜è®¤æ˜¯æ°´å¹³æ’åˆ—çš„ã€‚è®¾ç½®äº†ä¸€ä¸ª View ç»„ä»¶å’Œä¸€ä¸ª RelativeLayout ç»„ä»¶ã€‚</p><p>å…¶ä¸­ RelativeLayoutï¼ˆç”¨ç™½è‰²æ¡†æ¡†èµ·æ¥çš„ï¼‰æœ‰ä¸¤ä¸ª View ç»„ä»¶ï¼Œç¬¬ä¸€ä¸ª View çš„ç»„ä»¶çš„ id ä¸º view_5ã€‚ç¬¬äºŒä¸ª View ç»„ä»¶ä¸­è®¾ç½®äº†ä¸€ä¸ªå±æ€§ä¸º toRightOf ï¼Œå€¼ä¸º view_5ï¼Œä¹Ÿå°±æ˜¯åœ¨ view_5 çš„å³è¾¹ã€‚æœ‰é—´éš™æ˜¯å› ä¸ºç¬¬äºŒä¸ª View ç»„ä»¶ä¸­è®¾ç½®äº†ä¸€ä¸ªå¤–è¾¹è· marginLeftï¼ˆå»ºè®®ä½¿ç”¨ marginStartï¼‰ å€¼ä¸º 10dpã€‚</p><p>ä»€ä¹ˆï¼Ÿå¸ƒå±€å±…ç„¶åœ¨å¥—å¨ƒï¼Œç¦æ­¢å¥—å¨ƒï¼Œç¦æ­¢å¥—å¨ƒï¼âœ‹âœ‹âœ‹</p>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android å…¥é—¨ç¯‡ä¹‹ LinearLayout çš„ä½¿ç”¨</title>
      <link href="/journal/How-to-use-linearlayout/"/>
      <url>/journal/How-to-use-linearlayout/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æˆ‘æƒ³è¦è¯´"><a href="#æˆ‘æƒ³è¦è¯´" class="headerlink" title="æˆ‘æƒ³è¦è¯´"></a>æˆ‘æƒ³è¦è¯´</h2><p>Android ä¸­æœ‰ä¸¤ä¸ªå¸¸ç”¨çš„å¸ƒå±€ â€œLinearLayoutâ€ å’Œ â€œRelativeLayoutâ€ ä¸¤ç§ã€‚ä»Šå¤©å­¦ä¹ äº† LinearLayout å¸ƒå±€ï¼Œæ‰€ä»¥è®°å½•ä¸€ä¸‹å­¦ä¹ æ­¤å¸ƒå±€çš„ä¸€äº›ä½“ä¼šå§ã€‚</p><p>LinearLayout å¸ƒå±€ä¹Ÿå«çº¿æ€§å¸ƒå±€ï¼Œå®ƒæ ¹æ®è®¾ç½®æ°´å¹³å’Œå‚ç›´æ¥è®¾ç½®å…¶å†…éƒ¨å®¹å™¨å¯¹åº”çš„å¸ƒå±€æ–¹å¼</p><p>å…¶å®æˆ‘å‘ç°ï¼Œåœ¨å­¦ä¹  Android å¸ƒå±€å¼€å‘æ—¶ç±»ä¼¼äº html é¡µé¢çš„å¸ƒå±€å¼€å‘ï¼Œå®ƒçš„ä¸€éƒ¨åˆ†å±æ€§å…¶å®æ˜¯å…±ç”¨çš„ã€‚æ¯”å¦‚ backgroundï¼Œlayout_widthï¼Œlayout_heightï¼Œlayout_paddingLeftï¼Œlayout_paddingRightï¼Œlayout_paddingTopï¼Œlayout_margin ç­‰ç­‰ã€‚</p><p>æ‰€ä»¥ï¼Œå¸ƒå±€éš¾åº¦åº”è¯¥ä¸å¤§ã€‚åŠ æ²¹å§ï¼ğŸ’ªğŸ’ªğŸ’ª</p><p>åœ¨å­¦ä¹ å®Œå¸ƒå±€ä¹‹åï¼Œæˆ‘è¿˜æƒ³é€šè¿‡ä¸€äº›æ¡ˆä¾‹æ¥ç†Ÿæ‚‰è¿™äº›å¸ƒå±€ã€‚</p><p>å®³ï¼Œè¿˜ä¸ä¼šç”¨ git çš„æˆ‘çœŸçš„æ˜¯å±‘ä¸­ä¹‹å±‘</p><span id="more"></span><h2 id="å¸ƒå±€å±æ€§çš„ä»‹ç»ä¸ä½¿ç”¨"><a href="#å¸ƒå±€å±æ€§çš„ä»‹ç»ä¸ä½¿ç”¨" class="headerlink" title="å¸ƒå±€å±æ€§çš„ä»‹ç»ä¸ä½¿ç”¨"></a>å¸ƒå±€å±æ€§çš„ä»‹ç»ä¸ä½¿ç”¨</h2><blockquote><p>åœ¨ä½¿ç”¨å±æ€§çš„æ—¶å€™ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªâ€œandroid:â€<br>æ¯”å¦‚ â€œandroid:layout_width=â€200dpâ€â€</p><p>å»ºè®®çš„å•ä½ä¸ºâ€œdpâ€</p></blockquote><h3 id="æ°´å¹³æ’åˆ—å’Œå‚ç›´æ’åˆ—"><a href="#æ°´å¹³æ’åˆ—å’Œå‚ç›´æ’åˆ—" class="headerlink" title="æ°´å¹³æ’åˆ—å’Œå‚ç›´æ’åˆ—"></a>æ°´å¹³æ’åˆ—å’Œå‚ç›´æ’åˆ—</h3><p>1ã€æ°´å¹³æ’åˆ—çš„ç»“æ„å¦‚ä¸‹<br><img src="/images/Android/linearlayout/QQ%E6%88%AA%E5%9B%BE20210123231012.jpg" loading="lazy"><br>2ã€å‚ç›´æ’åˆ—çš„ç»“æ„å¦‚ä¸‹<br><img src="/images/Android/linearlayout/QQ%E6%88%AA%E5%9B%BE20210123231126.jpg" loading="lazy"></p><h3 id="LinearLayout-çš„ç›¸å…³å±æ€§"><a href="#LinearLayout-çš„ç›¸å…³å±æ€§" class="headerlink" title="LinearLayout çš„ç›¸å…³å±æ€§"></a>LinearLayout çš„ç›¸å…³å±æ€§</h3><h4 id="åŸºç¡€å±æ€§"><a href="#åŸºç¡€å±æ€§" class="headerlink" title="åŸºç¡€å±æ€§"></a>åŸºç¡€å±æ€§</h4><table><thead><tr><th>å±æ€§å</th><th>å±æ€§æè¿°</th></tr></thead><tbody><tr><td>layout_width</td><td>è®¾ç½®å¸ƒå±€çš„å®½</td></tr><tr><td>layout_height</td><td>è®¾ç½®å¸ƒå±€çš„é«˜</td></tr><tr><td>background</td><td>è®¾ç½®èƒŒæ™¯é¢œè‰²ï¼ˆå€¼ä¸ºåå…­è¿›åˆ¶è¡¨ç¤ºæˆ–è€…è‡ªå®šä¹‰çš„ drawableï¼‰</td></tr><tr><td>layout_marginLeft</td><td>è®¾ç½®å·¦è¾¹çš„å¤–è¾¹è·</td></tr><tr><td>layout_marginRight</td><td>è®¾ç½®å³è¾¹çš„å¤–è¾¹è·</td></tr><tr><td>layout_marginTop</td><td>è®¾ç½®é¡¶éƒ¨çš„å¤–è¾¹è·</td></tr><tr><td>layout_marginBottom</td><td>è®¾ç½®åº•éƒ¨çš„å¤–è¾¹è·</td></tr><tr><td>layout_paddingLeft</td><td>è®¾ç½®å·¦è¾¹çš„å†…è¾¹è·</td></tr><tr><td>layout_paddingRight</td><td>è®¾ç½®å³è¾¹çš„å†…è¾¹è·</td></tr><tr><td>layout_paddingTop</td><td>è®¾ç½®é¡¶éƒ¨çš„å†…è¾¹è·</td></tr><tr><td>layout_paddingBottom</td><td>è®¾ç½®åº•éƒ¨çš„å†…è¾¹è·</td></tr><tr><td>layout_weight</td><td>è®¾ç½®å¸ƒå±€çš„æƒé‡åˆ’åˆ†ï¼ˆå‰ææ˜¯ä»–ä»¬çš„å®½å’Œé«˜æ˜¯ä¸€è‡´çš„ï¼‰</td></tr></tbody></table><h4 id="ç‰¹æœ‰å±æ€§"><a href="#ç‰¹æœ‰å±æ€§" class="headerlink" title="ç‰¹æœ‰å±æ€§"></a>ç‰¹æœ‰å±æ€§</h4><table><thead><tr><th>å±æ€§å</th><th>å±æ€§æè¿°</th></tr></thead><tbody><tr><td>orientation</td><td>è®¾ç½®æ°´å¹³å¯¹é½è¿˜æ˜¯å‚ç›´å¯¹é½</td></tr></tbody></table><blockquote><p>åç»­è¦æ˜¯ç”¨åˆ°äº†å…¶å®ƒçš„å±æ€§ï¼Œå†æ·»åŠ ä¸Šå»ï¼Œå¹¶æ·»åŠ åˆ°ç¤ºä¾‹ä¸Šå»</p></blockquote><h3 id="LinearLayout-ç¤ºä¾‹"><a href="#LinearLayout-ç¤ºä¾‹" class="headerlink" title="LinearLayout ç¤ºä¾‹"></a>LinearLayout ç¤ºä¾‹</h3><p>ä»¥ä¸‹ç¤ºä¾‹å±•ç¤º LinearLayout å¸ƒå±€ä»¥åŠå¯¹åº”çš„å±æ€§ã€‚åŒæ—¶å„ç§å¸ƒå±€ä¹‹é—´æ˜¯å¯ä»¥è¿›è¡ŒåµŒå¥—çš„ï¼Œå¯ä»¥åœ¨åµŒå¥—çš„å¸ƒå±€ä¸­è®¾ç½®æ°´å¹³å’Œå‚ç›´çš„å¸ƒå±€æ–¹å¼ã€‚</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token comment">&lt;!--   åˆ›å»ºä¸€ä¸ªLinearLayoutå¸ƒå±€ï¼Œè®¾ç½®çš„å¸ƒå±€æ–¹å¼ä¸ºå‚ç›´å¸ƒå±€ã€‚  ä¹Ÿå°±æ˜¯è¯´ï¼Œorientation è®¾ç½®æˆ vertical æ—¶ï¼Œè¢«çº¿æ€§å¸ƒå±€æ‰€åŒ…å›´çš„ç»„ä»¶æˆ–å®¹å™¨ï¼Œéƒ½æ˜¯ä»ä¸Šè€Œä¸‹çš„æ’ä¸‹æ¥ã€‚--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>     <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top.bestguo.androidlayout.MainActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--      ç»™å½“å‰å¸ƒå±€è®¾ç½®å±æ€§    --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>200dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>200dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#000<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>paddingLeft</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>paddingRight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>paddingTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>paddingBottom</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10dp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#ff0000<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--      ç»™å½“å‰çš„å¸ƒå±€è®¾ç½®å±æ€§ï¼Œå¹¶ä¸”è®¾ç½®è¯¥çº¿æ€§å¸ƒå±€å†…çš„æ’åˆ—æ–¹å¼ä¸ºæ°´å¹³æ’åˆ—æ–¹å¼    --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>200dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#0066ff<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>horizontal<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginLeft</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginRight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15dp<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20dp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- ç»™æ¯ä¸€ä¸ª View ç»„ä»¶è®¾ç½®æƒé‡ï¼Œè¿™æ ·å°±å¯ä»¥æŒ‰ç…§æƒé‡æ¥å ç”¨çˆ¶å…ƒç´ çš„ç©ºé—´ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#ff0000<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#00ff00<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>View</span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50dp<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#CC298d<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><p>è¿è¡Œçš„æ•ˆæœå¦‚ä¸‹ï¼š<br><img src="/images/Android/linearlayout/Screenshot_20210123_224244.jpg" loading="lazy"></p><p>å¦‚æœè°ƒæ•´å¯¹åº”çš„å±æ€§ï¼Œé‚£ä¹ˆä»¥ä¸Šçš„æ•ˆæœå›¾å°±ä¼šéšç€å±æ€§çš„å˜åŒ–è€Œå˜åŒ–ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android å¼€å‘ç¯å¢ƒå®‰è£…</title>
      <link href="/journal/AndroidStudio%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/"/>
      <url>/journal/AndroidStudio%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¸‹å­¦æœŸè¦æ•™å®‰å“å¼€å‘äº†ï¼Œåœ¨å¯’å‡é‡Œè¿˜æ˜¯è¦å¥½å¥½çš„å»é¢„ä¹ ä¸€æ³¢ã€‚ä¸ºäº†è®°å½• Android çš„å­¦ä¹ å†ç¨‹ï¼Œç‰¹æ„è®¾ç½®äº†ä¸€ä¸ªæ–°ç±»åˆ«ï¼Œå«åš â€œAndroid å¼€å‘å­¦ä¹ å†ç¨‹â€ï¼Œæœªæ¥è¿˜ä¼šè®¾ç½®ä¸€ä¸ªâ€œAndroid å¼€å‘å¸¸è§é—®é¢˜â€ç±»åˆ«ã€‚åœ¨å­¦ä¹  Android çš„ç›¸å…³çŸ¥è¯†éƒ½ä¼šè®°å½•åœ¨å†…ï¼Œæ‰€ä»¥æˆ‘ç›¸ä¿¡ï¼Œæˆ‘èƒ½å¤Ÿå…¥é—¨<del>ï¼ˆé”™å•¦ï¼Œæ˜¯å…¥åœŸï¼‰</del>ï¼Œå¹¶ä¸”å¯ä»¥å¼€å‘å‡ºä¸€ä¸ªå®Œæ•´çš„ Android APP é¡¹ç›®å‡ºæ¥ã€‚</p><p>å¥¥åˆ©ç»™ï¼Œå¹²å’¯ï¼</p><p>æˆ‘å­¦ä¹ çš„è§†é¢‘æ˜¯ bilibili çš„å¤©å“¥åœ¨å¥”è·‘çš„<a href="https://www.bilibili.com/video/BV1Rt411e76H">å®‰å“è§†é¢‘æ•™ç¨‹</a>ï¼Œç‰ˆæœ¬ç¡®å®æœ‰äº›è€ã€‚ä¸è¿‡æ²¡å…³ç³»ï¼Œä¸ºäº†å…¥é—¨æˆ‘è§‰å¾—è¿™ä¸ªè§†é¢‘ä¹Ÿå¤Ÿäº†ã€‚</p><p><img src="/images/Android/tutoral/1.png" alt="Android" loading="lazy"></p><p>ä¸è¿‡ï¼Œåœ¨å®‰è£… Android å¼€å‘ç¯å¢ƒæ—¶ï¼Œè‡³å°‘éœ€è¦ä¸¤ä¸ªå‰ç½®æ¡ä»¶ã€‚ä½†æ˜¯è¿˜æ˜¯ä¼šæœ‰ä¸€äº›åƒåŠ›ã€‚</p><span id="more"></span><h2 id="å‰ç½®æ¡ä»¶"><a href="#å‰ç½®æ¡ä»¶" class="headerlink" title="å‰ç½®æ¡ä»¶"></a>å‰ç½®æ¡ä»¶</h2><ol><li>éœ€è¦å®‰è£… jdk 1.8 åŠä»¥ä¸Šï¼Œå¦‚æœæ²¡æœ‰å®‰è£… jdk è¯·å…ˆå®‰è£…ä¸€ä¸ª jdk å¹¶é…ç½®ç¯å¢ƒå˜é‡æ‰èƒ½ç»§ç»­ã€‚</li><li>éœ€è¦æœ‰ä¸€äº› java çš„åŸºç¡€ï¼Œä¼šä¸€äº› java é¢å‘å¯¹è±¡ç¼–ç¨‹</li><li>å¯æœ‰å¯æ— ï¼š~~ éœ€è¦æœ‰ä¸€äº› htmlï¼Œcssï¼Œjs åŸºç¡€ã€‚å› ä¸ºè¿™äº›éƒ½å·®ä¸å¤šã€‚~~</li></ol><h2 id="å®‰è£…ä¸é…ç½®"><a href="#å®‰è£…ä¸é…ç½®" class="headerlink" title="å®‰è£…ä¸é…ç½®"></a>å®‰è£…ä¸é…ç½®</h2><blockquote><p>æˆ‘çš„ Android Studio ç‰ˆæœ¬ä¸º 2.3.2ï¼Œ<a href="https://redirector.gvt1.com/edgedl/android/studio/install/2.3.2.0/android-studio-bundle-162.3934792-windows.exe">ç‚¹å‡»è¿™é‡Œç›´æ¥ä¸‹è½½</a></p></blockquote><h3 id="å®‰è£…æ­¥éª¤"><a href="#å®‰è£…æ­¥éª¤" class="headerlink" title="å®‰è£…æ­¥éª¤"></a>å®‰è£…æ­¥éª¤</h3><ol><li>ä¸€ç›´ Next åˆ°å¦‚å›¾æ‰€ç¤ºï¼Œå°†ä»–ä»¬å…¨éƒ¨å‹¾ä¸Š<br><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122145609.jpg" loading="lazy"></li><li>ä¸€ç›´ Next åˆ°å¦‚å›¾æ‰€ç¤ºï¼Œå»ºè®®æ›´æ”¹ä¸€ä¸‹ä½ç½®ï¼Œå¦‚æœä½ çš„ C ç›˜ç©ºé—´éå¸¸å¤§è¯·éšæ„ã€‚æˆ‘æ›´æ”¹çš„ Android Studio ä¸ºâ€œE:\Android\Android Sudioâ€ï¼Œsdk ä¸ºâ€œE:\Android\sdkâ€<br><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122145830.jpg" loading="lazy"></li><li>ç‚¹å‡» installï¼Œç­‰å¾…å®‰è£…å®Œæˆ<br><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122150056.jpg" loading="lazy"><br><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122150140.jpg" loading="lazy"></li><li>å®‰è£…å®Œæˆï¼Œç‚¹å‡» Finish æˆ–è€…å…³é—­å³å¯</li></ol><h3 id="é…ç½®æ­¥éª¤"><a href="#é…ç½®æ­¥éª¤" class="headerlink" title="é…ç½®æ­¥éª¤"></a>é…ç½®æ­¥éª¤</h3><ol><li>é€‰æ‹©ä¸‹é¢çš„ï¼Œç›´æ¥OKã€‚ç„¶åç­‰å¾…è¿›å…¥é¡¹ç›®åˆ›å»ºç•Œé¢<br><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122163750.jpg" loading="lazy"></li><li>ç´§æŒ¨ç€ä¼šå¼¹å‡ºä¸€ä¸ªçª—å£ï¼Œç‚¹å‡» Cancel<br><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122163919.jpg" loading="lazy"></li><li>è¿™ä¸ªæ—¶å€™å‡ºç°äº†ç•Œé¢ï¼Œæˆ‘ä»¬ç‚¹å‡» Next<br><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122164039.jpg" loading="lazy"></li><li>é€‰æ‹© Customï¼Œç»§ç»­ Next<br><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122164400.jpg" loading="lazy"></li><li>ä¸»é¢˜éšæ„é€‰æ‹©ï¼Œæ¥ä¸‹æ¥è¦é€‰æ‹© sdk çš„å®‰è£…è·¯å¾„ã€‚å› ä¸ºæˆ‘æ˜¯å®‰è£…åœ¨â€œE:\Android\sdkâ€ä¸‹ï¼Œæ‰€ä»¥æˆ‘å°±æ˜¯è¿™è·¯å¾„<br><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122164715.jpg" loading="lazy"></li><li>ç„¶åæˆ‘ä»¬æš‚æ—¶æŠŠè¿™ä¸ªå‹¾å»æ‰ï¼Œå› ä¸ºç›®å‰è¿˜ç”¨ä¸åˆ°æœ€æ–°çš„ Android 11ç‰ˆæœ¬ï¼Œå®Œæˆå Next<br><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122164954.jpg" loading="lazy"></li><li>é€‰æ‹©åˆ†é…çš„å†…å­˜ç©ºé—´ï¼Œæ ¹æ®è‡ªå·±ç”µè„‘çš„æ€§èƒ½æ¥è¦æ±‚ã€‚å¦‚æœç”µè„‘å†…å­˜æ˜¯4GBä»¥åŠæ›´ä½ï¼Œå°†å†…å­˜çš„åˆ†é…è°ƒå°ä¸€äº›ã€‚ä½†æ³¨æ„ï¼šå®‰å“è™šæ‹Ÿæœºå°†ä¼šå¡é¡¿ã€‚é€‰æ‹©å®Œæˆå Nextã€‚<br><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122165402.jpg" loading="lazy"></li><li>ç‚¹å‡» Finishï¼Œç­‰å¾…é…ç½®å®Œæˆ<br><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122165625.jpg" loading="lazy"></li><li>å®‰è£…æˆåŠŸï¼Œç‚¹å‡» Finish<br><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122165802.jpg" loading="lazy"></li></ol><h3 id="åˆ›å»ºç¬¬ä¸€ä¸ªé¡¹ç›®"><a href="#åˆ›å»ºç¬¬ä¸€ä¸ªé¡¹ç›®" class="headerlink" title="åˆ›å»ºç¬¬ä¸€ä¸ªé¡¹ç›®"></a>åˆ›å»ºç¬¬ä¸€ä¸ªé¡¹ç›®</h3><ol><li><p>ç‚¹å‡» â€œStart a new Android Studio projectâ€<br><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122183745.jpg" loading="lazy"></p></li><li><p>å¡«å†™é¡¹ç›®åï¼ŒåŸŸåï¼ˆå¦‚æœæ²¡æœ‰åŸŸåä¹Ÿæ²¡å…³ç³»ï¼Œéšä¾¿å†™æ¯”å¦‚ hsq .comï¼‰å’Œæ›´æ”¹é¡¹ç›®çš„è·¯å¾„ã€‚ç„¶å Next<br><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122171136.jpg" loading="lazy"></p></li><li><p>é€‰æ‹©ä½ è¦æ±‚çš„ Android ç³»ç»Ÿçš„æœ€ä½ç‰ˆæœ¬ã€‚æˆ‘è¿™é‡Œé€‰æ‹© 5.1ï¼Œç„¶å Next<br><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122171440.jpg" loading="lazy"></p></li><li><p>æˆ‘ä»¬é»˜è®¤é€‰æ‹© â€œEmpty Activityâ€ï¼Œç„¶å Next<br><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122171610.jpg" loading="lazy"></p></li><li><p>ç›´æ¥ Finishï¼Œç­‰å¾…é¡¹ç›®åˆ›å»ºå®Œæˆ<br><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122171810.jpg" loading="lazy"></p></li><li><p>åˆ›å»ºå®Œæˆä¹‹åï¼Œå…³é—­çª—å£ï¼Œç„¶åä¸‹é¢ä¼šæŠ¥ä¸€ä¸ªé”™è¯¯<br><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122172250.jpg" loading="lazy"><br><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122172154.jpg" loading="lazy"></p></li><li><p>è¿›å…¥ build.gradleï¼Œä¿®æ”¹çš„åœ°æ–¹å¦‚ä¸‹</p></li></ol><pre class="language-gradle" data-language="gradle"><code class="language-gradle">apply plugin: &#39;com.android.application&#39;android &#123;    compileSdkVersion 26    buildToolsVersion &quot;26.1.1&quot; &#x2F;&#x2F; ä¿®æ”¹    defaultConfig &#123;        applicationId &quot;top.bestguo.myfirstapplication&quot;        minSdkVersion 22        targetSdkVersion 26 &#x2F;&#x2F; ä¿®æ”¹        versionCode 1        versionName &quot;1.0&quot;        testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;    &#125;    buildTypes &#123;        release &#123;            minifyEnabled false            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;        &#125;    &#125;&#125;dependencies &#123;    compile fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])    androidTestCompile(&#39;com.android.support.test.espresso:espresso-core:2.2.2&#39;, &#123;        exclude group: &#39;com.android.support&#39;, module: &#39;support-annotations&#39;    &#125;)    compile &#39;com.android.support:appcompat-v7:26.+&#39; &#x2F;&#x2F; ä¿®æ”¹    compile &#39;com.android.support.constraint:constraint-layout:1.0.2&#39;    testCompile &#39;junit:junit:4.12&#39;&#125;</code></pre><ol start="8"><li>å¦‚æœå‡ºç°äº†ä»¥ä¸‹é—®é¢˜ï¼Œç‚¹å‡»â€œinstall missing platform(s) and sync projectâ€</li></ol><p><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122174045.jpg" loading="lazy"></p><ol start="9"><li>ç­‰å¾…ä¸‹è½½å¹¶è§£å‹å®Œæˆ</li></ol><p><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122174351.jpg" loading="lazy"></p><ol start="10"><li>å¦‚æœå‡ºç°äº†ä»¥ä¸‹é—®é¢˜ï¼Œç‚¹å‡»â€œinstall build tools 26.0.0 and sync projectâ€</li></ol><p><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122174836.jpg" loading="lazy"></p><ol start="11"><li>ç­‰å¾…ä¸‹è½½å¹¶è§£å‹å®Œæˆ</li></ol><p><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122174859.jpg" loading="lazy"></p><ol start="12"><li>è§£å‹å®Œæˆä¹‹åï¼Œè¿›å…¥ build.gradleï¼Œä¿®æ”¹ buildToolsVersion ä¸º â€œ26.0.0â€ </li></ol><pre class="language-gradle" data-language="gradle"><code class="language-gradle">apply plugin: &#39;com.android.application&#39;android &#123;    compileSdkVersion 26    buildToolsVersion &quot;26.0.0&quot; &#x2F;&#x2F; ä¿®æ”¹ä¸º 26.0.0    defaultConfig &#123;        applicationId &quot;top.bestguo.myfirstapplication&quot;        minSdkVersion 22        targetSdkVersion 26 &#x2F;&#x2F; ä¿®æ”¹        versionCode 1        versionName &quot;1.0&quot;        testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;    &#125;    ...&#125;</code></pre><ol start="13"><li>è¿™æ ·ï¼Œé¡¹ç›®åˆ›å»ºå¹¶é…ç½®å®Œæˆ<br><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122175418.jpg" loading="lazy"></li></ol><h3 id="è¿è¡Œç¬¬ä¸€ä¸ªé¡¹ç›®"><a href="#è¿è¡Œç¬¬ä¸€ä¸ªé¡¹ç›®" class="headerlink" title="è¿è¡Œç¬¬ä¸€ä¸ªé¡¹ç›®"></a>è¿è¡Œç¬¬ä¸€ä¸ªé¡¹ç›®</h3><ol><li>ç‚¹å‡»è¿è¡Œé¡¹ç›®ï¼Œåˆ›å»ºä¸€å° Android è™šæ‹Ÿæœº</li></ol><p><img src="/images/Android/tutoral/QQ%E5%9B%BE%E7%89%8720210122175835.png" loading="lazy"></p><ol start="2"><li>é€‰æ‹©ä¸€ä¸ªå±å¹•åˆ†è¾¨ç‡ï¼Œç‚¹å‡» Next</li></ol><p><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122180036.jpg" loading="lazy"></p><ol start="3"><li>ç»§ç»­ Next</li></ol><p><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122180133.jpg" loading="lazy"></p><ol start="4"><li>ç‚¹å‡» Finishï¼Œæœ€åé€‰ä¸­é‚£å°è™šæ‹Ÿæœºï¼Œç‚¹å‡» OK å³å¯</li></ol><p><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122180218.jpg" loading="lazy"></p><ol start="5"><li>ç­‰å¾…è™šæ‹Ÿæ‰‹æœºå¯åŠ¨å¹¶çœ‹åˆ°ç¨‹åºè¿è¡ŒæˆåŠŸçš„ç•Œé¢ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ª Android ç¨‹åºå°±è¿™æ ·å®Œæˆäº†</li></ol><p><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122180457.jpg" loading="lazy"></p><h2 id="å®‰è£…åç»­"><a href="#å®‰è£…åç»­" class="headerlink" title="å®‰è£…åç»­"></a>å®‰è£…åç»­</h2><p>å“ˆå“ˆï¼Œç»ˆäºç»“æŸäº†ï¼Œæˆ‘è¦èµ¶ç´§ä¸‹è½½ä¸€æ³¢ bilibiliï¼Œè¿½ç•ªå»å’¯ã€‚ğŸ¤ªğŸ¤ª</p><h3 id="ä¸‹è½½-bilibili"><a href="#ä¸‹è½½-bilibili" class="headerlink" title="ä¸‹è½½ bilibili"></a>ä¸‹è½½ bilibili</h3><p><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122184340.jpg" loading="lazy"></p><h3 id="å®‰è£…-bilibili"><a href="#å®‰è£…-bilibili" class="headerlink" title="å®‰è£… bilibili"></a>å®‰è£… bilibili</h3><p><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122184505.jpg" loading="lazy"></p><p>å˜¿å˜¿ï¼ŒçœŸæœ‰æ„æ€ğŸ˜„ğŸ˜„ğŸ˜„</p><h3 id="å®‰è£…å®Œæˆï¼Œå¼€å§‹è¿½ç•ª"><a href="#å®‰è£…å®Œæˆï¼Œå¼€å§‹è¿½ç•ª" class="headerlink" title="å®‰è£…å®Œæˆï¼Œå¼€å§‹è¿½ç•ª"></a>å®‰è£…å®Œæˆï¼Œå¼€å§‹è¿½ç•ª</h3><p><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122184808.jpg" loading="lazy"></p><p>æˆ‘è¦çœ‹çŒ›ç”·ç•ªâ€œå¤©ä½¿é™ä¸´åˆ°æˆ‘èº«è¾¹â€ï¼Œä»¥ä¸‹æ˜¯ gif å›¾ã€‚</p><p><img src="/images/Android/tutoral/2021-01-22_185300.gif" loading="lazy"></p><p>çŒ›ç”·ç•ªå°±æ˜¯ä¸ä¸€æ ·ï¼Œè‡ªå·±çš„ç”µè„‘çš„ CPU éƒ½<del>å—ä¸äº†å•¦</del></p><p><img src="/images/Android/tutoral/QQ%E6%88%AA%E5%9B%BE20210122185651.jpg" loading="lazy"></p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>åç»­æˆ‘è¿˜ä¼šå•ç‹¬å†™è¿™äº› gradle ä¸­ä¸ºä»€ä¹ˆéœ€è¦ä¿®æ”¹è¿™äº›é…ç½®ã€‚ä»¥åŠå¦‚ä½•ä½¿ç”¨ ADB åœ¨è‡ªå·±çš„å®‰å“æ‰‹æœºä¸Šè°ƒè¯•åº”ç”¨ç¨‹åºã€‚</p><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><p><a href="https://blog.csdn.net/mhl18820672087/article/details/78385361">https://blog.csdn.net/mhl18820672087/article/details/78385361</a></p>]]></content>
      
      
      <categories>
          
          <category> Android å¼€å‘çš„å­¦ä¹ å†ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ“ä½œç³»ç»Ÿä¹‹ç¥ç§˜çš„é“¶è¡Œå®¶ç®—æ³•</title>
      <link href="/journal/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B9%8B%E9%93%B6%E8%A1%8C%E5%AE%B6%E7%AE%97%E6%B3%95/"/>
      <url>/journal/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B9%8B%E9%93%B6%E8%A1%8C%E5%AE%B6%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å†™è¿™ç¯‡æ–‡ç« çš„ç›®çš„ï¼Œèƒ½å¤Ÿæ›´ç®€å•çš„å»ç†è§£é“¶è¡Œå®¶ç®—æ³•ï¼Œè¿™ä¸ªç®—æ³•å¯æŠŠæˆ‘ç»™æƒ³ç§ƒäº†ğŸ˜–ã€‚</p><p>é“¶è¡Œå®¶ç®—æ³•æ˜¯ç”± Dijkstra åœ¨ 1965 å¹´æå‡ºçš„ï¼Œå®ƒæ˜¯ä¸€ä¸ªéå¸¸è‘—åçš„æ­»é”é¿å…ç®—æ³•ã€‚å…¶å®å§ï¼Œæˆ‘è§‰å¾—åº”è¯¥å«<font color="red"> èŠ±å‘— </font>ç®—æ³•æ›´åˆé€‚ğŸ˜‚ã€‚ä»¥ä¸‹ï¼Œæˆ‘ä¼šåˆ©ç”¨èŠ±å‘—çš„æ–¹å¼æ¥ç†è§£è¿™ä¸ªç®—æ³•ã€‚</p><p>è¿˜æœ‰å°±æ˜¯æœŸæœ«è€ƒè¯•è¦åˆ°äº†ï¼Œç¥å¤§å®¶é€¢è€ƒå¿…è¿‡å‘€ğŸ˜ŠğŸ˜ŠğŸ˜Šã€‚</p><p><img src="/images/%E9%93%B6%E8%A1%8C%E5%AE%B6%E7%AE%97%E6%B3%95/first.jpg" alt="é€¢è€ƒå¿…è¿‡" loading="lazy"></p><span id="more"></span><h2 id="ç®—æ³•ä»‹ç»"><a href="#ç®—æ³•ä»‹ç»" class="headerlink" title="ç®—æ³•ä»‹ç»"></a>ç®—æ³•ä»‹ç»</h2><p>é“¶è¡Œå®¶ç®—æ³•çš„å®è´¨å°±æ˜¯<font color="red">è¦è®¾æ³•ä¿è¯ç³»ç»ŸåŠ¨æ€åˆ†é…èµ„æºåä¸è¿›å…¥ä¸å®‰å…¨çŠ¶æ€ï¼Œä»¥é¿å…å¯èƒ½äº§ç”Ÿçš„æ­»é”ã€‚</font>å³æ²¡å½“è¿›ç¨‹æå‡ºèµ„æºè¯·æ±‚ä¸”ç³»ç»Ÿçš„èµ„æºèƒ½å¤Ÿæ»¡è¶³è¯¥è¯·æ±‚æ—¶ï¼Œç³»ç»Ÿå°†åˆ¤æ–­æ»¡è¶³æ­¤æ¬¡èµ„æºè¯·æ±‚åç³»ç»ŸçŠ¶æ€æ˜¯å¦å®‰å…¨ï¼Œå¦‚æœåˆ¤æ–­ç»“æœä¸ºå®‰å…¨ï¼Œåˆ™ç»™è¯¥è¿›ç¨‹åˆ†é…èµ„æºï¼Œå¦åˆ™ä¸åˆ†é…èµ„æºï¼Œç”³è¯·èµ„æºçš„è¿›ç¨‹å°†é˜»å¡ã€‚</p><p><del>å‰é¢çš„éƒ½æ˜¯ FIFA å¯ä»¥å¿½ç•¥ğŸ¶ğŸ¶</del>ï¼Œä½†è¿˜æ˜¯å»ºè®®çœ‹ä¸€ä¸‹ã€‚</p><p>é“¶è¡Œå®¶ç®—æ³•çš„æ‰§è¡Œæœ‰ä¸ªå‰ææ¡ä»¶ï¼Œå³è¦æ±‚è¿›ç¨‹é¢„å…ˆæå‡ºè‡ªå·±çš„æœ€å¤§èµ„æºè¯·æ±‚ï¼Œå¹¶å‡è®¾ç³»ç»Ÿæ‹¥æœ‰å›ºå®šçš„èµ„æºæ€»é‡ã€‚ä¸‹é¢ä»‹ç»é“¶è¡Œå®¶ç®—æ³•æ‰€ç”¨çš„ä¸»è¦çš„æ•°æ®ç»“æ„ã€‚</p><p>ä»€ä¹ˆæ˜¯å‘é‡ï¼Ÿå‘é‡å…¶å®å°±æ˜¯ä¸€ä¸ªä¸€ç»´æ•°ç»„ã€‚ä»€ä¹ˆæ˜¯çŸ©é˜µï¼ŒçŸ©é˜µå°±æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ã€‚</p><ol><li>å¯ç”¨èµ„æºå‘é‡ availableï¼Œè®°å½•ç€ç³»ç»Ÿå½“å‰å¯ä»¥ä½¿ç”¨çš„èµ„æºæ•°ç›®ã€‚ï¼ˆèŠ±å‘—å…¬å¸è¿˜å‰©å¤šå°‘é’±ï¼‰</li><li>æœ€å¤§éœ€æ±‚çŸ©é˜µ maxï¼Œè®°å½•ç€è¿›ç¨‹å¯¹å„ç±»èµ„æºçš„æœ€å¤§éœ€æ±‚é‡ã€‚ï¼ˆç”¨æˆ·ä½¿ç”¨èŠ±å‘—çš„æœ€å¤§é¢åº¦ï¼‰</li><li>åˆ†é…çŸ©é˜µ allocationï¼Œè®°å½•ç€æ¯ä¸ªè¿›ç¨‹çš„å½“å‰å æœ‰é‡ã€‚ï¼ˆç”¨æˆ·å·²ç»ä½¿ç”¨äº†å¤šå°‘çš„èŠ±å‘—ï¼‰</li><li>éœ€æ±‚çŸ©é˜µ needï¼Œè®°å½•ç€æ¯ä¸ªè¿›ç¨‹å¯¹å„ç±»èµ„æºå°šéœ€è¦çš„æ•°æ®ã€‚ç­‰äºâ€œæœ€å¤§éœ€æ±‚çŸ©é˜µ - åˆ†é…çŸ©é˜µâ€ä¹‹å·®ã€‚ï¼ˆç”¨æˆ·å‰©ä½™çš„èŠ±å‘—é¢åº¦ï¼‰</li><li>è¯·æ±‚å‘é‡ requestï¼Œè®°å½•ç€æŸä¸ªè¿›ç¨‹å½“å‰å¯¹å„ç±»èµ„æºçš„ç”³è¯·é‡ï¼Œæ˜¯é“¶è¡Œå®¶ç®—æ³•çš„å…¥å£å‚æ•°ã€‚ï¼ˆç”¨æˆ·æƒ³è¦ä½¿ç”¨å¤šå°‘èŠ±å‘—ï¼‰</li></ol><h2 id="ç®—æ³•æ­¥éª¤"><a href="#ç®—æ³•æ­¥éª¤" class="headerlink" title="ç®—æ³•æ­¥éª¤"></a>ç®—æ³•æ­¥éª¤</h2><ol><li>æ£€æŸ¥èµ„æºçš„å®‰å…¨æ€§ã€‚å®‰å…¨ï¼Œç”³è¯·è¯·æ±‚ã€‚ä¸å®‰å…¨ï¼Œé€€å‡ºæ£€æŸ¥ã€‚</li><li>å¦‚æœ request[i] &gt; need[i]ï¼Œåˆ™è¿›ç¨‹ P[i] å‡ºé”™ ï¼ˆå¦‚æœä½ æƒ³ç”¨èŠ±å‘—å€Ÿ 400ï¼Œå¯æ˜¯ä½ çš„å‰©ä½™é¢åº¦æ‰åªæœ‰ 20ï¼Œä½ æƒ³æƒ³ï¼Œèƒ½å€Ÿå—ï¼Ÿï¼‰</li><li>å¦‚æœ request[i] &gt; available[i]ï¼Œåˆ™è¿›ç¨‹ P[i] é˜»å¡ï¼ˆå¦‚æœä½ æƒ³ç”¨èŠ±å‘—å€Ÿ 400ï¼Œå¯æ˜¯èŠ±å‘—å…¬å¸åªæœ‰ 200ï¼Œä½ æƒ³æƒ³ï¼Œèƒ½å€Ÿå—ï¼Ÿï¼‰</li><li>å¦‚æœ request[i] â‰¤ need[i] ä¸” request[i] â‰¤ available[i]ã€‚åˆ™éœ€è¦å¯¹ç›¸åº”çš„æ•°æ®ç»“æ„è¿›è¡Œä¿®æ”¹ã€‚<ol><li>available[i] = available[i] - request[i]ã€‚ï¼ˆæ¯”å¦‚èŠ±å‘—å…¬å¸æœ‰ 2000ï¼Œç”¨æˆ·å‘èŠ±å‘—å€Ÿ 20ï¼Œæ­¤æ—¶èŠ±å‘—å…¬å¸è¿˜å‰© 1980ï¼‰</li><li>allocation[i] = allocation[i + request[i]ã€‚ï¼ˆæ¯”å¦‚ç”¨æˆ·å·²ç»å‘èŠ±å‘—å€Ÿäº† 500ï¼Œç”¨æˆ·åœ¨å‘èŠ±å‘—å€Ÿ 20ï¼Œæ­¤æ—¶ç”¨æˆ·å·²ç»å€Ÿäº† 520ï¼‰</li><li>need[i] = need[i] - request[i]ã€‚ï¼ˆæ¯”å¦‚ç”¨æˆ·çš„èŠ±å‘—å‰©ä½™çš„é¢åº¦ä¸º 300ï¼Œç”¨æˆ·å‘èŠ±å‘—å€Ÿäº† 20ï¼Œæ­¤æ—¶ç”¨æˆ·å‰©ä½™çš„èŠ±å‘—é¢åº¦ä¸º 280ï¼‰</li></ol></li><li>ç»§ç»­æ£€æŸ¥èµ„æºçš„å®‰å…¨æ€§</li></ol><p>ç®—æ³•çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹</p><p><img src="/images/%E9%93%B6%E8%A1%8C%E5%AE%B6%E7%AE%97%E6%B3%95/condition.png" alt="æ‰§è¡Œè¿‡ç¨‹" loading="lazy"></p><h2 id="ä¾‹é¢˜"><a href="#ä¾‹é¢˜" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h2><p><img src="/images/%E9%93%B6%E8%A1%8C%E5%AE%B6%E7%AE%97%E6%B3%95/QQ%E6%88%AA%E5%9B%BE20210105204746.jpg" alt="aaa" loading="lazy"><br><img src="/images/%E9%93%B6%E8%A1%8C%E5%AE%B6%E7%AE%97%E6%B3%95/QQ%E6%88%AA%E5%9B%BE20210105204823.jpg" alt="bbb" loading="lazy"></p><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>1ã€åˆ©ç”¨å®‰å…¨æ€§ç®—æ³•ï¼Œåˆ†æT(0)æ—¶åˆ»çš„èµ„æºåˆ†é…æƒ…å†µï¼Œå¦‚æœå®‰å…¨ï¼Œè¯·å†™å‡ºå®‰å…¨åºåˆ—ã€‚<br>2ã€å‡è®¾Tæ—¶åˆ»ï¼Œè¿›ç¨‹P1ç”³è¯·èµ„æºï¼Œå…¶è¯·æ±‚å‘é‡ä¸ºRequest(0,0,1)ï¼Œç³»ç»Ÿèƒ½å¦å°†èµ„æºåˆ†é…ç»™å®ƒã€‚</p><h3 id="ç¬¬1é—®è§£ç­”"><a href="#ç¬¬1é—®è§£ç­”" class="headerlink" title="ç¬¬1é—®è§£ç­”"></a>ç¬¬1é—®è§£ç­”</h3><p>è¿™ä¸ªå®‰å…¨æ€§ç®—æ³•ï¼Œå…¶å®å°±æ˜¯ã€‚ç”¨æˆ·å‰©ä½™çš„èŠ±å‘—é¢åº¦ï¼ˆä¹Ÿå°±æ˜¯ needï¼‰èƒ½å¦å…¨éƒ¨å€Ÿè¿‡å»ã€‚</p><p>ç„¶åå€Ÿå®Œä¹‹åï¼Œè¿˜å›å»ï¼Œæ€ä¹ˆè¿˜ï¼Ÿå°†å·²ä½¿ç”¨çš„é¢åº¦å…¨éƒ¨è¿˜å›å»å°±å¥½äº†ï¼Œæ­¤æ—¶çš„èŠ±å‘—å…¬å¸çš„å¯ç”¨çš„é‡‘é¢ä¸ºï¼š<font color="red">å·²ä½¿ç”¨çš„é¢åº¦ (allocation) + èŠ±å‘—å…¬å¸è¿˜å‰©çš„é’± (available)</font></p><p>T(0)æ—¶åˆ»çš„èµ„æºåˆ†é…æƒ…å†µå¦‚ä¸‹</p><table><thead><tr><th>process</th><th>work</th><th>need</th><th>allocation</th><th>work + allocation</th><th>finish</th></tr></thead><tbody><tr><td>P2</td><td>0 1 1</td><td>0 0 1</td><td>6 1 2</td><td>6 2 3</td><td>true</td></tr><tr><td>p1</td><td>6 2 3</td><td>2 2 2</td><td>1 0 0</td><td>7 2 3</td><td>true</td></tr><tr><td>p3</td><td>7 2 3</td><td>1 0 3</td><td>2 1 1</td><td>9 3 4</td><td>true</td></tr><tr><td>p4</td><td>9 3 4</td><td>4 2 0</td><td>0 0 2</td><td>9 3 6</td><td>true</td></tr></tbody></table><p>å…¶ä¸­ work æ˜¯å½“å‰çš„ available æ•°é‡ã€‚<br>ç”±å®‰å…¨åºåˆ—ç®—æ³•ï¼Œç»“åˆè¡¨å¯çŸ¥ï¼Œå®‰å…¨åºåˆ—ä¸º &lt;p2, p1, p3, p4&gt;</p><p>ä½†æ˜¯å®‰å…¨åºåˆ—æ˜¯ä¸å”¯ä¸€çš„ã€‚è¿™ä¸ªå®‰å…¨åºåˆ—å‡ºç°çš„åŸå› æ˜¯å› ä¸ºåœ¨æ£€æŸ¥ P1 çš„æ—¶å€™ï¼Œå‡ºç°äº†é˜»å¡ã€‚å½“ P2 çš„èµ„æºé‡Šæ”¾äº†ï¼Œp1å†å»å°è¯•ï¼Œå¯ç”¨èµ„æºæ˜¯å¦èƒ½å¤Ÿæ»¡è¶³ P1 çš„éœ€æ±‚ã€‚</p><p>æ‰€ä»¥æ‰æœ‰ &lt;p2, p1, p3, p4&gt;</p><h3 id="ç¬¬2é—®è§£ç­”"><a href="#ç¬¬2é—®è§£ç­”" class="headerlink" title="ç¬¬2é—®è§£ç­”"></a>ç¬¬2é—®è§£ç­”</h3><p>1ã€åˆ¤æ–­ request(0,0,1) â‰¤ available(0,1,1) é€šè¿‡ï¼ˆå¦‚æœèŠ±å‘—å…¬å¸çš„é‡‘é¢å¤Ÿå€Ÿï¼‰<br>2ã€åˆ¤æ–­ request(0,0,1) â‰¤ need(1,0,3) é€šè¿‡ï¼ˆå¦‚æœç”¨æˆ·å€Ÿçš„é¢åº¦æ¯”ç”¨æˆ·å‰©ä½™é¢åº¦å°ï¼‰</p><p>available = available - request = 0,1,1 - 0,0,1 = 0,1,0ï¼ˆå‘èŠ±å‘—å…¬å¸å€Ÿäº†0,0,1ï¼ŒèŠ±å‘—å…¬å¸è¿˜å‰©0,1,0ï¼‰<br>allocation = allocation + request = 1,0,0 + 0,0,1 = 1,0,1ï¼ˆç”¨æˆ·å‘èŠ±å‘—å€Ÿäº†0,0,1ã€‚åŠ èµ·æ¥å°±æ˜¯å·²ä½¿ç”¨çš„èŠ±å‘—é¢åº¦ï¼‰<br>need = need - request = 2,2,2 - 0,0,1 = 2,2,1ï¼ˆç”¨æˆ·å‘èŠ±å‘—å€Ÿäº†0,0,1ï¼Œç”¨æˆ·å¯ç”¨çš„èŠ±å‘—é¢åº¦å°±æ˜¯å‡å»å·²ç»å€Ÿçš„é¢åº¦ï¼‰</p><p>æ‰€ä»¥ï¼Œæ­¤æ—¶çš„èµ„æºåˆ†é…æƒ…å†µå¦‚ä¸‹</p><table><thead><tr><th>process</th><th>max</th><th>allocation</th><th>need</th><th>available</th></tr></thead><tbody><tr><td>P1</td><td>3,2,2</td><td>1,0,1</td><td>2,2,1</td><td>0,1,0</td></tr><tr><td>P2</td><td>6,1,3</td><td>6,1,2</td><td>0,0,1</td><td></td></tr><tr><td>P3</td><td>3 1 4</td><td>2 1 1</td><td>1 0 3</td><td></td></tr><tr><td>P4</td><td>4 2 2</td><td>0 0 2</td><td>4 2 0</td><td></td></tr></tbody></table><p>ç»è¿‡åˆ†æå‘ç°ï¼Œå¯ç”¨çš„èµ„æºæ•°å·²ç»ä¸èƒ½æ»¡è¶³æ‰€æœ‰è¿›ç¨‹ï¼Œè¯¥ç³»ç»Ÿä¸å®‰å…¨ã€‚è¿›ç¨‹P1é˜»å¡ã€‚</p><p>åŸæ¥ Hexo ä¸»é¢˜ä¹‹é—´çš„è¡¨æ ¼éœ€è¦å‰åç©ºä¸¤è¡Œæ‰èƒ½æ­£å¸¸æ˜¾ç¤ºï¼Œæˆ‘éº»äº†ï¼Œæäº†æˆ‘å¾ˆä¹…ã€‚ğŸ˜‚ğŸ˜‚ğŸ˜‚</p><h2 id="å‚è€ƒèµ„æº"><a href="#å‚è€ƒèµ„æº" class="headerlink" title="å‚è€ƒèµ„æº"></a>å‚è€ƒèµ„æº</h2><p><a href="https://blog.csdn.net/qq_33414271/article/details/80245715">https://blog.csdn.net/qq_33414271/article/details/80245715</a><br><a href="https://www.cnblogs.com/wkfvawl/p/11929508.html">https://www.cnblogs.com/wkfvawl/p/11929508.html</a><br><a href="https://www.jianshu.com/p/e19eff4311f4">https://www.jianshu.com/p/e19eff4311f4</a></p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»™ä½ çš„ç½‘ç«™åŠ ä¸€æŠŠé”</title>
      <link href="/journal/%E7%BB%99%E4%BD%A0%E7%9A%84%E7%BD%91%E7%AB%99%E5%8A%A0%E4%B8%80%E6%8A%8A%E9%94%81/"/>
      <url>/journal/%E7%BB%99%E4%BD%A0%E7%9A%84%E7%BD%91%E7%AB%99%E5%8A%A0%E4%B8%80%E6%8A%8A%E9%94%81/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æˆ‘ä»¬åœ¨è®¿é—®ç½‘ç«™çš„æ—¶å€™ï¼Œå‘ç°ç»å¤§å¤šæ•°ç«™ç‚¹çš„ç½‘å€éƒ½æ˜¯ httpsï¼Œå°‘éƒ¨åˆ†è¿˜æ˜¯ä½¿ç”¨ http åè®®ã€‚å…¶å® http å…¶å®æ˜¯ä¸å®‰å…¨çš„ã€‚</p><p>ä½¿ç”¨çš„åœºæ™¯ï¼šå„ç§å„æ ·çš„ç”¨æˆ·ä¸­å¿ƒã€å„ç§è´¦å·ç®¡ç†ã€QQ ç©ºé—´ web ç«¯ã€ç™¾åº¦ç½‘ç›˜ web ç«¯ã€ä¸ªäººç›¸å†Œ web ç«¯ç­‰ç­‰ã€‚</p><p>è¿™äº›åœºæ™¯æœ‰å¤§é‡çš„ç”¨æˆ·éšç§ï¼Œè¿™äº›éšç§è¦æ˜¯ç›´æ¥åœ¨ http ä¸Šä¼ æ’­ï¼Œå°±å¾ˆå®¹æ˜“è¢«åè›‹æ‰€æˆªè·å¹¶è¯»å–ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæ¯«æ— å®‰å…¨æ€§å¯è¨€ã€‚</p><p>è€Œä¸”ï¼Œhttp å¾ˆå®¹æ˜“å°±è¢«æ¤å…¥å¹¿å‘Šï¼Œé€ æˆä½“éªŒä¸ä½³ã€‚</p><p>æ‰€ä»¥ï¼Œè¶Šæ¥è¶Šå¤šçš„ç½‘ç«™ä½¿ç”¨ httpsï¼Œæ¥ä¿æŠ¤ç½‘ç«™çš„å®‰å…¨ï¼Œä¿æŠ¤ç”¨æˆ·éšç§ã€‚</p><span id="more"></span><h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><blockquote><p>ç”±äºæœ¬äººåœ¨æ­å»ºä¸ªäººç½‘ç«™çš„æ—¶å€™ï¼Œä½¿ç”¨çš„äº‘æœåŠ¡å™¨æ˜¯é˜¿é‡Œäº‘çš„ï¼Œå¦‚æœä½ æ˜¯æ”¾åˆ° giteeã€github ç­‰ä¸Šçš„ï¼Œå¯ä»¥ç›´æ¥å¿½ç•¥ã€‚å› ä¸ºè¿™äº›ä»£ç ä»“åº“ä½¿ç”¨çš„åè®®å…¨æ˜¯ httpsã€‚</p><p>æœ¬æ¥æ˜¯æƒ³ä½¿ç”¨é˜¿é‡Œäº‘çš„ SSL è¯ä¹¦ï¼Œå‘ç°é˜¿é‡Œäº‘å¹¶æ²¡æœ‰å…è´¹çš„ SSL è¯ä¹¦ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ FreeSSL æ¥è·å–å…è´¹çš„è¯ä¹¦ã€‚</p><p>å¥½å§ï¼Œå…¶å®æˆ‘æ‰å‘ç°é˜¿é‡Œäº‘æœ‰å…è´¹çš„ï¼Œå¿ƒè‚ºåœæ­¢ ğŸ˜…</p><p>FIFA ä¸å¤šè¯´ï¼Œç›´æ¥å¼€å§‹ï¼<br><img src="/images/%E7%BB%99%E4%BD%A0%E7%9A%84%E7%BD%91%E7%AB%99%E5%8A%A0%E4%B8%80%E6%8A%8A%E9%94%81/QQ%E6%88%AA%E5%9B%BE20210103101245.jpg" alt="æˆ‘å“­äº†" loading="lazy"></p></blockquote><h3 id="è·å–è¯ä¹¦"><a href="#è·å–è¯ä¹¦" class="headerlink" title="è·å–è¯ä¹¦"></a>è·å–è¯ä¹¦</h3><p>1ã€è¿›å…¥ <a href="https://freessl.cn/">freeSSL</a> å…ˆè¿›è¡Œæ³¨å†Œå’Œç™»å½• ï¼Œ<del>éœ€è¦ç»‘å®šæ‰‹æœºå·çœŸéº»çƒ¦</del></p><p><img src="/images/%E7%BB%99%E4%BD%A0%E7%9A%84%E7%BD%91%E7%AB%99%E5%8A%A0%E4%B8%80%E6%8A%8A%E9%94%81/QQ%E6%88%AA%E5%9B%BE20210103101956.jpg" loading="lazy"></p><p>2ã€å›åˆ°è¿™ä¸ªç•Œé¢ï¼Œè¾“å…¥ä½ çš„ç½‘ç«™åŸŸåï¼Œé€‰æ‹©ä½ å–œæ¬¢çš„å“ç‰Œï¼Œä¸è¿‡åªæœ‰ä¸¤ä¸ªå…è´¹çš„ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©æœ‰æ•ˆæœŸä¸º 1 å¹´çš„äºšæ´²è¯šä¿¡ã€‚äºšæ´²è¯šä¿¡æœ‰ä¸¤ä¸ªåŸŸåå¯ç”¨ï¼Œä¸€ä¸ªæ ¹åŸŸåï¼Œä¸€ä¸ª www çš„äºŒçº§åŸŸå</p><p>æœ€åï¼Œç‚¹å‡»åˆ›å»ºå…è´¹çš„ ssl è¯ä¹¦</p><p><img src="/images/%E7%BB%99%E4%BD%A0%E7%9A%84%E7%BD%91%E7%AB%99%E5%8A%A0%E4%B8%80%E6%8A%8A%E9%94%81/QQ%E6%88%AA%E5%9B%BE20210103101956.jpg" loading="lazy"></p><p>3ã€ç‚¹å‡»åˆ›å»ºå®Œæˆä¹‹åï¼Œå¡«å†™ä½ çš„é‚®ç®±ï¼Œ<a href="https://baike.baidu.com/item/CSR/22403894">CSRï¼ˆè¯ä¹¦è¯·æ±‚æ–‡ä»¶ï¼‰</a> ç”Ÿæˆé€‰æ‹©æµè§ˆå™¨ç”Ÿæˆå°±å¥½äº†ï¼ˆå…¶å®å°±æ˜¯ä¸æƒ³ä¸‹è½½å®¢æˆ·ç«¯äº†ï¼‰ã€‚</p><p><img src="/images/%E7%BB%99%E4%BD%A0%E7%9A%84%E7%BD%91%E7%AB%99%E5%8A%A0%E4%B8%80%E6%8A%8A%E9%94%81/QQ%E6%88%AA%E5%9B%BE20210103103549.jpg" loading="lazy"></p><p>ç¡®è®¤åˆ›å»ºè®¢å•</p><p><img src="/images/%E7%BB%99%E4%BD%A0%E7%9A%84%E7%BD%91%E7%AB%99%E5%8A%A0%E4%B8%80%E6%8A%8A%E9%94%81/QQ%E6%88%AA%E5%9B%BE20210103103708.jpg" loading="lazy"></p><p>åˆ›å»ºå®Œæˆï¼Œæµè§ˆå™¨ä¼šå¼¹å‡ºä¸‹è½½æ¡†ï¼Œè¯·åŠ¡å¿…æŠŠç§é’¥ç»™ä¿å­˜å¥½ã€‚</p><h3 id="DNS-éªŒè¯"><a href="#DNS-éªŒè¯" class="headerlink" title="DNS éªŒè¯"></a>DNS éªŒè¯</h3><blockquote><p>å¯†é’¥ç”ŸæˆæˆåŠŸï¼Œéœ€è¦è¿›è¡Œ DNS éªŒè¯ã€‚</p><p><img src="/images/%E7%BB%99%E4%BD%A0%E7%9A%84%E7%BD%91%E7%AB%99%E5%8A%A0%E4%B8%80%E6%8A%8A%E9%94%81/QQ%E6%88%AA%E5%9B%BE20210103104631.jpg" loading="lazy"></p><p><font color="red">æ³¨æ„ï¼šç”ŸæˆæˆåŠŸè¿™ä¸ªé¡µé¢è¯·å‹¿å…³é—­ï¼Œå¦åˆ™éœ€è¦é‡æ–°æ¥ç”Ÿæˆ</font></p></blockquote><p>1ã€è¿›å…¥é˜¿é‡Œäº‘çš„äº‘è§£æ DNS</p><p><img src="/images/%E7%BB%99%E4%BD%A0%E7%9A%84%E7%BD%91%E7%AB%99%E5%8A%A0%E4%B8%80%E6%8A%8A%E9%94%81/QQ%E6%88%AA%E5%9B%BE20210103104346.jpg" loading="lazy"></p><p>2ã€ç‚¹å‡»æ·»åŠ è®°å½•ï¼Œé€‰æ‹©è®°å½•ç±»å‹ä¸ºTXTï¼Œä¸»æœºè®°å½•ä¸º_dnsauthï¼Œè®°å½•å€¼å°±æ˜¯ç”Ÿæˆçš„è®°å½•å€¼ï¼Œå¤åˆ¶è¿›å»å³å¯ï¼Œæœ€åç‚¹å‡»ç¡®è®¤ã€‚æ–°çš„ä¸»æœºè®°å½•å°±æ·»åŠ ä¸Šå»äº†ã€‚</p><p><img src="/images/%E7%BB%99%E4%BD%A0%E7%9A%84%E7%BD%91%E7%AB%99%E5%8A%A0%E4%B8%80%E6%8A%8A%E9%94%81/QQ%E6%88%AA%E5%9B%BE20210103104934.jpg" loading="lazy"></p><p>3ã€è¿›å…¥åˆ° FreeSSL çš„æ§åˆ¶å°ï¼Œç‚¹å‡»éªŒè¯ï¼ŒéªŒè¯æˆåŠŸåä¼šè‡ªåŠ¨æ‰“åŒ…ï¼Œéœ€è¦ä½ ä¸‹è½½è¯ä¹¦æ–‡ä»¶å’Œç§é’¥æ–‡ä»¶ã€‚</p><p><img src="/images/%E7%BB%99%E4%BD%A0%E7%9A%84%E7%BD%91%E7%AB%99%E5%8A%A0%E4%B8%80%E6%8A%8A%E9%94%81/QQ%E6%88%AA%E5%9B%BE20210103105604.jpg" loading="lazy"></p><h3 id="ä¸Šä¼ è¯ä¹¦æ–‡ä»¶å’Œç§é’¥æ–‡ä»¶åˆ°äº‘æœåŠ¡å™¨"><a href="#ä¸Šä¼ è¯ä¹¦æ–‡ä»¶å’Œç§é’¥æ–‡ä»¶åˆ°äº‘æœåŠ¡å™¨" class="headerlink" title="ä¸Šä¼ è¯ä¹¦æ–‡ä»¶å’Œç§é’¥æ–‡ä»¶åˆ°äº‘æœåŠ¡å™¨"></a>ä¸Šä¼ è¯ä¹¦æ–‡ä»¶å’Œç§é’¥æ–‡ä»¶åˆ°äº‘æœåŠ¡å™¨</h3><blockquote><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯ nginx æœåŠ¡å™¨</p></blockquote><p>1ã€åœ¨ nginx é…ç½®ç›®å½•ä¸‹åˆ›å»ºå ssh çš„æ–‡ä»¶å¤¹ï¼ˆæˆ‘çš„nginxçš„é…ç½®è·¯å¾„åœ¨ /etc/nginx ç›®å½•ä¸‹ï¼‰</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@izgtymdwetse3wz ~<span class="token punctuation">]</span><span class="token comment"># cd /etc/nginx/</span><span class="token punctuation">[</span>root@izgtymdwetse3wz nginx<span class="token punctuation">]</span><span class="token comment"># mkdir ssh</span></code></pre><p>2ã€å°†è¯ä¹¦æ–‡ä»¶å’Œç§é’¥æ–‡ä»¶å¤åˆ¶åˆ°è¿™ä¸ªç›®å½•ä¸‹</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@izgtymdwetse3wz nginx<span class="token punctuation">]</span><span class="token comment"># ll -a ssl</span>total <span class="token number">16</span>drwxr-xr-x <span class="token number">2</span> root root <span class="token number">4096</span> Jan  <span class="token number">2</span> <span class="token number">11</span>:16 <span class="token builtin class-name">.</span>drwxr-xr-x <span class="token number">3</span> root root <span class="token number">4096</span> Jan  <span class="token number">2</span> <span class="token number">15</span>:33 -rw-r--r-- <span class="token number">1</span> root root <span class="token number">3771</span> Jan  <span class="token number">2</span> <span class="token number">11</span>:16 full_chain.pem-rw-r--r-- <span class="token number">1</span> root root <span class="token number">1728</span> Jan  <span class="token number">2</span> <span class="token number">11</span>:16 private.key</code></pre><p>3ã€ç¼–è¾‘ nginx.conf æ–‡ä»¶ï¼Œæ›´æ”¹ç›‘å¬ç«¯å£ä¸º 443 sslï¼Œæ·»åŠ è¯ä¹¦è·¯å¾„ ssl_certificate å’Œç§é’¥ ssl_certificate_key </p><pre class="language-bash" data-language="bash"><code class="language-bash">server <span class="token punctuation">&#123;</span>  listen       <span class="token number">443</span> ssl<span class="token punctuation">;</span>  server_name  www.bestguo.top<span class="token punctuation">;</span>  ssl_certificate     ssl/full_chain.pem<span class="token punctuation">;</span>  ssl_certificate_key ssl/private.key<span class="token punctuation">;</span>  location / <span class="token punctuation">&#123;</span>    <span class="token punctuation">..</span>.  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="é‡å¯-nginx"><a href="#é‡å¯-nginx" class="headerlink" title="é‡å¯ nginx"></a>é‡å¯ nginx</h3><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@izgtymdwetse3wz nginx<span class="token punctuation">]</span><span class="token comment"># nginx -s reload</span></code></pre><h3 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h3><p>ç›´æ¥è®¿é—® <a href="https://www.bestguo.top/">https://www.bestguo.top</a> ï¼Œè¯ä¹¦å·²ç»ç”Ÿæ•ˆï¼Œå¹¶ä¸”æœ‰ä¸€æŠŠé”çš„å›¾æ ‡</p><p><img src="/images/%E7%BB%99%E4%BD%A0%E7%9A%84%E7%BD%91%E7%AB%99%E5%8A%A0%E4%B8%80%E6%8A%8A%E9%94%81/QQ%E6%88%AA%E5%9B%BE20210103114331.jpg" loading="lazy"></p><p>è¿™æ ·ï¼Œæˆ‘ä»¬è®¿é—®çš„é¡µé¢çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨å’Œç”¨æˆ·ä¹‹é—´çš„æ•°æ®ä¼ è¾“å°±ä¸ä¼šç›´æ¥æš´éœ²ï¼Œä¸ä¼šè¢«æ¶æ„ç¯¡æ”¹ã€‚</p><h2 id="ç–‘é—®"><a href="#ç–‘é—®" class="headerlink" title="ç–‘é—®"></a>ç–‘é—®</h2><h3 id="å¦‚ä½•å°†-http-é‡å®šå‘-https"><a href="#å¦‚ä½•å°†-http-é‡å®šå‘-https" class="headerlink" title="å¦‚ä½•å°† http é‡å®šå‘ https"></a>å¦‚ä½•å°† http é‡å®šå‘ https</h3><p>åœ¨ nginx.conf ä¸‹ï¼Œæ·»åŠ ä»¥ä¸‹çš„é…ç½®ã€‚</p><p>é¦–å…ˆç›‘å¬80ç«¯å£ï¼ŒæŒ‡å®š server_nameï¼Œé€šè¿‡ rewrite é‡å®šå‘åˆ° https é¡µé¢ã€‚</p><pre class="language-bash" data-language="bash"><code class="language-bash">server <span class="token punctuation">&#123;</span>    listen <span class="token number">80</span><span class="token punctuation">;</span>    server_name www.bestguo.top<span class="token punctuation">;</span>    rewrite ^<span class="token punctuation">(</span>.*<span class="token punctuation">)</span>$ https://<span class="token variable">$&#123;server_name&#125;</span><span class="token variable">$1</span> permanent<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç«™çš„éƒ¨ç½²ä¸ç»´æŠ¤ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç«™æ­å»º </tag>
            
            <tag> Linux </tag>
            
            <tag> SSL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…ƒæ—¦ç¥ç¦</title>
      <link href="/journal/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0/"/>
      <url>/journal/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="/images/%E5%85%83%E6%97%A6%E7%A5%9D%E7%A6%8F/happy.gif" alt="å…ƒæ—¦ç¥ç¦" loading="lazy"></p><center>å…ƒæ—¦åˆ°ï¼Œçƒ¦æ¼æ¶ˆï¼Œåå·ä¸é¡ºå…¨å¿˜æ‰ï¼›<br>å…ƒæ—¦åˆ°ï¼Œå¥½è¿æŠ¥ï¼Œä¸‡äº‹é¡ºåˆ©å¼€é¢œç¬‘ï¼›<br>å…ƒæ—¦åˆ°ï¼Œç¥ç¦åˆ°ï¼Œæœ‹å‹æƒ…è°Šå¿˜ä¸äº†ã€‚<br>ç¥ä½ å…ƒæ—¦äººå¿«ä¹ï¼Œå¥å¥åº·åº·å¹¸ç¦ç½©ï¼</center><span id="more"></span>]]></content>
      
      
      <categories>
          
          <category> å°èµ«èµ«çš„æ—¥å¸¸ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ—¥å¸¸ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
